/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/var np=function(e,t){return np=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},np(e,t)};export function __extends(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");np(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}export var __assign=function(){return __assign=Object.assign||function(t){for(var r,i=1,s=arguments.length;i<s;i++){r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},__assign.apply(this,arguments)};export function __rest(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r}export function __decorate(e,t,r,i){var s=arguments.length,n=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(n=(s<3?o(n):s>3?o(t,r,n):o(t,r))||n);return s>3&&n&&Object.defineProperty(t,r,n),n}export function __param(e,t){return function(r,i){t(r,i,e)}}export function __esDecorate(e,t,r,i,s,n){function o($){if($!==void 0&&typeof $!="function")throw new TypeError("Function expected");return $}for(var a=i.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?i.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,i.name):{}),h,p=!1,f=r.length-1;f>=0;f--){var m={};for(var w in i)m[w]=w==="access"?{}:i[w];for(var w in i.access)m.access[w]=i.access[w];m.addInitializer=function($){if(p)throw new TypeError("Cannot add initializers after decoration has completed");n.push(o($||null))};var E=(0,r[f])(a==="accessor"?{get:u.get,set:u.set}:u[c],m);if(a==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(h=o(E.get))&&(u.get=h),(h=o(E.set))&&(u.set=h),(h=o(E.init))&&s.unshift(h)}else(h=o(E))&&(a==="field"?s.unshift(h):u[c]=h)}l&&Object.defineProperty(l,i.name,u),p=!0}export function __runInitializers(e,t,r){for(var i=arguments.length>2,s=0;s<t.length;s++)r=i?t[s].call(e,r):t[s].call(e);return i?r:void 0}export function __propKey(e){return typeof e=="symbol"?e:"".concat(e)}export function __setFunctionName(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}export function __metadata(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}export function __awaiter(e,t,r,i){function s(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function a(u){try{l(i.next(u))}catch(h){o(h)}}function c(u){try{l(i.throw(u))}catch(h){o(h)}}function l(u){u.done?n(u.value):s(u.value).then(a,c)}l((i=i.apply(e,t||[])).next())})}export function __generator(e,t){var r={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(r=0)),r;)try{if(i=1,s&&(n=l[0]&2?s.return:l[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,l[1])).done)return n;switch(s=0,n&&(l=[l[0]&2,n.value]),l[0]){case 0:case 1:n=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,s=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!n||l[1]>n[0]&&l[1]<n[3])){r.label=l[1];break}if(l[0]===6&&r.label<n[1]){r.label=n[1],n=l;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(l);break}n[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(u){l=[6,u],s=0}finally{i=n=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}export var __createBinding=Object.create?function(e,t,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]};export function __exportStar(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(t,e,r)}export function __values(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}export function __read(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),s,n=[],o;try{for(;(t===void 0||t-- >0)&&!(s=i.next()).done;)n.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return n}export function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}export function __spreadArrays(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),s=0,t=0;t<r;t++)for(var n=arguments[t],o=0,a=n.length;o<a;o++,s++)i[s]=n[o];return i}export function __spreadArray(e,t,r){if(r||arguments.length===2)for(var i=0,s=t.length,n;i<s;i++)(n||!(i in t))&&(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}export function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}export function __asyncGenerator(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(e,t||[]),s,n=[];return s={},a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(f){return function(m){return Promise.resolve(m).then(f,h)}}function a(f,m){i[f]&&(s[f]=function(w){return new Promise(function(E,$){n.push([f,w,E,$])>1||c(f,w)})},m&&(s[f]=m(s[f])))}function c(f,m){try{l(i[f](m))}catch(w){p(n[0][3],w)}}function l(f){f.value instanceof __await?Promise.resolve(f.value.v).then(u,h):p(n[0][2],f)}function u(f){c("next",f)}function h(f){c("throw",f)}function p(f,m){f(m),n.shift(),n.length&&c(n[0][0],n[0][1])}}export function __asyncDelegator(e){var t,r;return t={},i("next"),i("throw",function(s){throw s}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(s,n){t[s]=e[s]?function(o){return(r=!r)?{value:__await(e[s](o)),done:!1}:n?n(o):o}:n}}export function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(n){r[n]=e[n]&&function(o){return new Promise(function(a,c){o=e[n](o),s(a,c,o.done,o.value)})}}function s(n,o,a,c){Promise.resolve(c).then(function(l){n({value:l,done:a})},o)}}export function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var q3=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};export function __importStar(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return q3(t,e),t}export function __importDefault(e){return e&&e.__esModule?e:{default:e}}export function __classPrivateFieldGet(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)}export function __classPrivateFieldSet(e,t,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}export function __classPrivateFieldIn(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}export function __addDisposableResource(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],r&&(s=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");s&&(i=function(){try{s.call(this)}catch(n){return Promise.reject(n)}}),e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t}var G3=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};export function __disposeResources(e){function t(i){e.error=e.hasError?new G3(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}function r(){for(;e.stack.length;){var i=e.stack.pop();try{var s=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(s).then(r,function(n){return t(n),r()})}catch(n){t(n)}}if(e.hasError)throw e.error}return r()}export default{__extends,__assign,__rest,__decorate,__param,__metadata,__awaiter,__generator,__createBinding,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources};var pr=class{constructor(e){this.d=e,this.a=!1}get hasValue(){return this.a}get value(){if(!this.a)try{this.b=this.d()}catch(e){this.c=e}finally{this.a=!0}if(this.c)throw this.c;return this.b}get rawValue(){return this.b}},Q3=class{constructor(){this.b=[],this.a=function(e){setTimeout(()=>{throw e.stack?Gs.isErrorNoTelemetry(e)?new Gs(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.b.push(e),()=>{this.d(e)}}c(e){this.b.forEach(t=>{t(e)})}d(e){this.b.splice(this.b.indexOf(e),1)}setUnexpectedErrorHandler(e){this.a=e}getUnexpectedErrorHandler(){return this.a}onUnexpectedError(e){this.a(e),this.c(e)}onUnexpectedExternalError(e){this.a(e)}},Ta=new Q3;function op(e){Ta.setUnexpectedErrorHandler(e)}function eu(e){Ta.onUnexpectedError(e)}function gr(e){Vs(e)||Ta.onUnexpectedError(e)}function ap(e){Vs(e)||Ta.onUnexpectedExternalError(e)}function Yn(e){if(e instanceof Error){const{name:t,message:r,cause:i}=e,s=e.stacktrace||e.stack;return{$isError:!0,name:t,message:r,stack:s,noTelemetry:Gs.isErrorNoTelemetry(e),cause:i?Yn(i):void 0,code:e.code}}return e}function lw(e){let t;return e.noTelemetry?t=new Gs:(t=new Error,t.name=e.name),t.message=e.message,t.stack=e.stack,e.code&&(t.code=e.code),e.cause&&(t.cause=lw(e.cause)),t}var tu="Canceled";function Vs(e){return e instanceof ui?!0:e instanceof Error&&e.name===tu&&e.message===tu}var ui=class extends Error{constructor(){super(tu),this.name=this.message}};function uw(){const e=new Error(tu);return e.name=e.message,e}function Ee(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}function cp(e){return e?new Error(`Illegal state: ${e}`):new Error("Illegal state")}var qs=class extends TypeError{constructor(e){super(e?`${e} is read-only and cannot be changed`:"Cannot change read-only property")}},J3=class extends Error{constructor(e){super("NotImplemented"),e&&(this.message=e)}},lp=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}},Gs=class j0 extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof j0)return t;const r=new j0;return r.message=t.message,r.stack=t.stack,r}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},Qs=class $x extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,$x.prototype)}};function X3(e,t){const r=Y3(e,t);if(r!==-1)return e[r]}function Y3(e,t,r=e.length-1){for(let i=r;i>=0;i--){const s=e[i];if(t(s))return i}return-1}function Z3(e,t,r=0,i=e.length){let s=r,n=i;for(;s<n;){const o=Math.floor((s+n)/2);t(e[o])?s=o+1:n=o}return s-1}var jF=class Sx{static{this.assertInvariants=!1}constructor(t){this.e=t,this.c=0}findLastMonotonous(t){if(Sx.assertInvariants){if(this.d){for(const i of this.e)if(this.d(i)&&!t(i))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this.d=t}const r=Z3(this.e,t,this.c);return this.c=r+1,r===-1?void 0:this.e[r]}};function Ri(e,t,r=(i,s)=>i===s){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let i=0,s=e.length;i<s;i++)if(!r(e[i],t[i]))return!1;return!0}function K3(e,t){const r=[];let i;for(const s of e.slice(0).sort(t))!i||t(i[0],s)!==0?(i=[s],r.push(i)):i.push(s);return r}function hw(e,t,r){const i=[];function s(a,c,l){if(c===0&&l.length===0)return;const u=i[i.length-1];u&&u.start+u.deleteCount===a?(u.deleteCount+=c,u.toInsert.push(...l)):i.push({start:a,deleteCount:c,toInsert:l})}let n=0,o=0;for(;;){if(n===e.length){s(n,0,t.slice(o));break}if(o===t.length){s(n,e.length-n,[]);break}const a=e[n],c=t[o],l=r(a,c);l===0?(n+=1,o+=1):l<0?(s(n,1,[]),n+=1):l>0&&(s(n,0,[c]),o+=1)}return i}function ek(e,t,r){const i=hw(e,t,r),s=[],n=[];for(const o of i)s.push(...e.slice(o.start,o.start+o.deleteCount)),n.push(...o.toInsert);return{removed:s,added:n}}function Rt(e){return e.filter(t=>!!t)}function tk(e){let t=0;for(let r=0;r<e.length;r++)e[r]&&(e[t]=e[r],t+=1);e.length=t}function up(e){return!Array.isArray(e)||e.length===0}function Ra(e){return Array.isArray(e)&&e.length>0}function Zn(e,t=r=>r){const r=new Set;return e.filter(i=>{const s=t(i);return r.has(s)?!1:(r.add(s),!0)})}function dw(e,t){let r;if(typeof t=="number"){let i=t;r=()=>{const s=Math.sin(i++)*179426549;return s-Math.floor(s)}}else r=Math.random;for(let i=e.length-1;i>0;i-=1){const s=Math.floor(r()*(i+1)),n=e[i];e[i]=e[s],e[s]=n}}function hp(e,t){return Array.isArray(e)?e.map(t):t(e)}function hi(e){return Array.isArray(e)?e:[e]}var dp;(function(e){function t(n){return n<0}e.isLessThan=t;function r(n){return n<=0}e.isLessThanOrEqual=r;function i(n){return n>0}e.isGreaterThan=i;function s(n){return n===0}e.isNeitherLessOrGreaterThan=s,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(dp||(dp={}));function rk(e,t){return(r,i)=>t(e(r),e(i))}var ik=(e,t)=>e-t,BF=class Bf{static{this.empty=new Bf(t=>{})}constructor(t){this.iterate=t}forEach(t){this.iterate(r=>(t(r),!0))}toArray(){const t=[];return this.iterate(r=>(t.push(r),!0)),t}filter(t){return new Bf(r=>this.iterate(i=>t(i)?r(i):!0))}map(t){return new Bf(r=>this.iterate(i=>r(t(i))))}some(t){let r=!1;return this.iterate(i=>(r=t(i),!r)),r}findFirst(t){let r;return this.iterate(i=>t(i)?(r=i,!1):!0),r}findLast(t){let r;return this.iterate(i=>(t(i)&&(r=i),!0)),r}findLastMaxBy(t){let r,i=!0;return this.iterate(s=>((i||dp.isGreaterThan(t(s,r)))&&(i=!1,r=s),!0)),r}},fw;function pw(e,t){const r=Object.create(null);for(const i of e){const s=t(i);let n=r[s];n||(n=r[s]=[]),n.push(i)}return r}function sk(e,t){const r=[],i=[];for(const s of e)t.has(s)||r.push(s);for(const s of t)e.has(s)||i.push(s);return{removed:r,added:i}}var _F=class{static{fw=Symbol.toStringTag}constructor(e,t){this.b=t,this.a=new Map,this[fw]="SetWithKey";for(const r of e)this.add(r)}get size(){return this.a.size}add(e){const t=this.b(e);return this.a.set(t,e),this}delete(e){return this.a.delete(this.b(e))}has(e){return this.a.has(this.b(e))}*entries(){for(const e of this.a.values())yield[e,e]}keys(){return this.values()}*values(){for(const e of this.a.values())yield e}clear(){this.a.clear()}forEach(e,t){this.a.forEach(r=>e.call(t,r,r,this))}[Symbol.iterator](){return this.values()}},gw,mw,vw;function nk(e,t,r){let i=e.get(t);return i===void 0&&(i=r,e.set(t,i)),i}var ok=class{constructor(e,t){this.uri=e,this.value=t}};function ak(e){return Array.isArray(e)}var Nt=class Wl{static{this.c=t=>t.toString()}constructor(t,r){if(this[gw]="ResourceMap",t instanceof Wl)this.d=new Map(t.d),this.e=r??Wl.c;else if(ak(t)){this.d=new Map,this.e=r??Wl.c;for(const[i,s]of t)this.set(i,s)}else this.d=new Map,this.e=t??Wl.c}set(t,r){return this.d.set(this.e(t),new ok(t,r)),this}get(t){return this.d.get(this.e(t))?.value}has(t){return this.d.has(this.e(t))}get size(){return this.d.size}clear(){this.d.clear()}delete(t){return this.d.delete(this.e(t))}forEach(t,r){typeof r<"u"&&(t=t.bind(r));for(const[i,s]of this.d)t(s.value,s.uri,this)}*values(){for(const t of this.d.values())yield t.value}*keys(){for(const t of this.d.values())yield t.uri}*entries(){for(const t of this.d.values())yield[t.uri,t.value]}*[(gw=Symbol.toStringTag,Symbol.iterator)](){for(const[,t]of this.d)yield[t.uri,t.value]}},ww=class{constructor(e,t){this[mw]="ResourceSet",!e||typeof e=="function"?this.c=new Nt(e):(this.c=new Nt(t),e.forEach(this.add,this))}get size(){return this.c.size}add(e){return this.c.set(e,e),this}clear(){this.c.clear()}delete(e){return this.c.delete(e)}forEach(e,t){this.c.forEach((r,i)=>e.call(t,i,i,this))}has(e){return this.c.has(e)}entries(){return this.c.entries()}keys(){return this.c.keys()}values(){return this.c.keys()}[(mw=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}},bw;(function(e){e[e.None=0]="None",e[e.AsOld=1]="AsOld",e[e.AsNew=2]="AsNew"})(bw||(bw={}));var ck=class{constructor(){this[vw]="LinkedMap",this.c=new Map,this.d=void 0,this.e=void 0,this.f=0,this.g=0}clear(){this.c.clear(),this.d=void 0,this.e=void 0,this.f=0,this.g++}isEmpty(){return!this.d&&!this.e}get size(){return this.f}get first(){return this.d?.value}get last(){return this.e?.value}has(e){return this.c.has(e)}get(e,t=0){const r=this.c.get(e);if(r)return t!==0&&this.n(r,t),r.value}set(e,t,r=0){let i=this.c.get(e);if(i)i.value=t,r!==0&&this.n(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case 0:this.l(i);break;case 1:this.k(i);break;case 2:this.l(i);break;default:this.l(i);break}this.c.set(e,i),this.f++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this.c.get(e);if(t)return this.c.delete(e),this.m(t),this.f--,t.value}shift(){if(!this.d&&!this.e)return;if(!this.d||!this.e)throw new Error("Invalid list");const e=this.d;return this.c.delete(e.key),this.m(e),this.f--,e.value}forEach(e,t){const r=this.g;let i=this.d;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this.g!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this,t=this.g;let r=this.d;const i={[Symbol.iterator](){return i},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const s={value:r.key,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}values(){const e=this,t=this.g;let r=this.d;const i={[Symbol.iterator](){return i},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const s={value:r.value,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}entries(){const e=this,t=this.g;let r=this.d;const i={[Symbol.iterator](){return i},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const s={value:[r.key,r.value],done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}[(vw=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}h(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.d,r=this.size;for(;t&&r>e;)this.c.delete(t.key),t=t.next,r--;this.d=t,this.f=r,t&&(t.previous=void 0),this.g++}j(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.e,r=this.size;for(;t&&r>e;)this.c.delete(t.key),t=t.previous,r--;this.e=t,this.f=r,t&&(t.next=void 0),this.g++}k(e){if(!this.d&&!this.e)this.e=e;else if(this.d)e.next=this.d,this.d.previous=e;else throw new Error("Invalid list");this.d=e,this.g++}l(e){if(!this.d&&!this.e)this.d=e;else if(this.e)e.previous=this.e,this.e.next=e;else throw new Error("Invalid list");this.e=e,this.g++}m(e){if(e===this.d&&e===this.e)this.d=void 0,this.e=void 0;else if(e===this.d){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this.d=e.next}else if(e===this.e){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this.e=e.previous}else{const t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0,this.g++}n(e,t){if(!this.d||!this.e)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this.d)return;const r=e.next,i=e.previous;e===this.e?(i.next=void 0,this.e=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this.d,this.d.previous=e,this.d=e,this.g++}else if(t===2){if(e===this.e)return;const r=e.next,i=e.previous;e===this.d?(r.previous=void 0,this.d=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this.e,this.e.next=e,this.e=e,this.g++}}}toJSON(){const e=[];return this.forEach((t,r)=>{e.push([r,t])}),e}fromJSON(e){this.clear();for(const[t,r]of e)this.set(t,r)}},lk=class extends ck{constructor(e,t=1){super(),this.o=e,this.p=Math.min(Math.max(0,t),1)}get limit(){return this.o}set limit(e){this.o=e,this.q()}get ratio(){return this.p}set ratio(e){this.p=Math.min(Math.max(0,e),1),this.q()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}q(){this.size>this.o&&this.r(Math.round(this.o*this.p))}},fp=class extends lk{constructor(e,t=1){super(e,t)}r(e){this.h(e)}set(e,t){return super.set(e,t),this.q(),this}},yw=class{constructor(){this.c=new Map}add(e,t){let r=this.c.get(e);r||(r=new Set,this.c.set(e,r)),r.add(t)}delete(e,t){const r=this.c.get(e);r&&(r.delete(t),r.size===0&&this.c.delete(e))}forEach(e,t){const r=this.c.get(e);r&&r.forEach(t)}get(e){const t=this.c.get(e);return t||new Set}};function pp(e,t){const r=this;let i=!1,s;return function(){if(i)return s;if(i=!0,t)try{s=e.apply(r,arguments)}finally{t()}else s=e.apply(r,arguments);return s}}function Kt(e,t){if(!e)throw new Error(t?`Assertion failed (${t})`:"Assertion Failed")}function uk(e,t="Unreachable"){throw new Error(t)}function hk(e,t="unexpected state"){if(!e)throw typeof t=="string"?new Qs(`Assertion Failed: ${t}`):t}function Ew(e){if(!e()){debugger;e(),gr(new Qs("Assertion Failed"))}}function Ce(e){return typeof e=="string"}function dk(e){return Array.isArray(e)&&e.every(t=>Ce(t))}function gt(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function fk(e){const t=Object.getPrototypeOf(Uint8Array);return typeof e=="object"&&e instanceof t}function ls(e){return typeof e=="number"&&!isNaN(e)}function pk(e){return!!e&&typeof e[Symbol.iterator]=="function"}function La(e){return typeof e>"u"}function Js(e){return!yt(e)}function yt(e){return La(e)||e===null}function xw(e,t){if(!e)throw new Error(t?`Unexpected type, expected '${t}'`:"Unexpected type")}function Kn(e){return hk(e!=null,"Argument is `undefined` or `null`."),e}var gk=Object.prototype.hasOwnProperty;function kw(e){if(!gt(e))return!1;for(const t in e)if(gk.call(e,t))return!1;return!0}function mk(e){return typeof e=="function"}function vk(e,t){if(Ce(t)){if(typeof e!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if(mk(t)){try{if(e instanceof t)return}catch{}if(!yt(e)&&e.constructor===t||t.length===1&&t.call(void 0,e)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}var mr;(function(e){function t(O){return O&&typeof O=="object"&&typeof O[Symbol.iterator]=="function"}e.is=t;const r=Object.freeze([]);function i(){return r}e.empty=i;function*s(O){yield O}e.single=s;function n(O){return t(O)?O:s(O)}e.wrap=n;function o(O){return O||r}e.from=o;function*a(O){for(let F=O.length-1;F>=0;F--)yield O[F]}e.reverse=a;function c(O){return!O||O[Symbol.iterator]().next().done===!0}e.isEmpty=c;function l(O){return O[Symbol.iterator]().next().value}e.first=l;function u(O,F){let W=0;for(const Z of O)if(F(Z,W++))return!0;return!1}e.some=u;function h(O,F){for(const W of O)if(F(W))return W}e.find=h;function*p(O,F){for(const W of O)F(W)&&(yield W)}e.filter=p;function*f(O,F){let W=0;for(const Z of O)yield F(Z,W++)}e.map=f;function*m(O,F){let W=0;for(const Z of O)yield*F(Z,W++)}e.flatMap=m;function*w(...O){for(const F of O)pk(F)?yield*F:yield F}e.concat=w;function E(O,F,W){let Z=W;for(const J of O)Z=F(Z,J);return Z}e.reduce=E;function*$(O,F,W=O.length){for(F<-O.length&&(F=0),F<0&&(F+=O.length),W<0?W+=O.length:W>O.length&&(W=O.length);F<W;F++)yield O[F]}e.slice=$;function S(O,F=Number.POSITIVE_INFINITY){const W=[];if(F===0)return[W,O];const Z=O[Symbol.iterator]();for(let J=0;J<F;J++){const X=Z.next();if(X.done)return[W,e.empty()];W.push(X.value)}return[W,{[Symbol.iterator](){return Z}}]}e.consume=S;async function P(O){const F=[];for await(const W of O)F.push(W);return Promise.resolve(F)}e.asyncToArray=P})(mr||(mr={}));var wk=!1,eo=null,zF=class Ix{constructor(){this.b=new Map}static{this.a=0}c(t){let r=this.b.get(t);return r||(r={parent:null,source:null,isSingleton:!1,value:t,idx:Ix.a++},this.b.set(t,r)),r}trackDisposable(t){const r=this.c(t);r.source||(r.source=new Error().stack)}setParent(t,r){const i=this.c(t);i.parent=r}markAsDisposed(t){this.b.delete(t)}markAsSingleton(t){this.c(t).isSingleton=!0}f(t,r){const i=r.get(t);if(i)return i;const s=t.parent?this.f(this.c(t.parent),r):t;return r.set(t,s),s}getTrackedDisposables(){const t=new Map;return[...this.b.entries()].filter(([,i])=>i.source!==null&&!this.f(i,t).isSingleton).flatMap(([i])=>i)}computeLeakingDisposables(t=10,r){let i;if(r)i=r;else{const c=new Map,l=[...this.b.values()].filter(h=>h.source!==null&&!this.f(h,c).isSingleton);if(l.length===0)return;const u=new Set(l.map(h=>h.value));if(i=l.filter(h=>!(h.parent&&u.has(h.parent))),i.length===0)throw new Error("There are cyclic diposable chains!")}if(!i)return;function s(c){function l(h,p){for(;h.length>0&&p.some(f=>typeof f=="string"?f===h[0]:h[0].match(f));)h.shift()}const u=c.source.split(`
`).map(h=>h.trim().replace("at ","")).filter(h=>h!=="");return l(u,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),u.reverse()}const n=new yw;for(const c of i){const l=s(c);for(let u=0;u<=l.length;u++)n.add(l.slice(0,u).join(`
`),c)}i.sort(rk(c=>c.idx,ik));let o="",a=0;for(const c of i.slice(0,t)){a++;const l=s(c),u=[];for(let h=0;h<l.length;h++){let p=l[h];p=`(shared with ${n.get(l.slice(0,h+1).join(`
`)).size}/${i.length} leaks) at ${p}`;const m=n.get(l.slice(0,h).join(`
`)),w=pw([...m].map(E=>s(E)[h]),E=>E);delete w[l[h]];for(const[E,$]of Object.entries(w))u.unshift(`    - stacktraces of ${$.length} other leaks continue with ${E}`);u.unshift(p)}o+=`


==================== Leaking disposable ${a}/${i.length}: ${c.value.constructor.name} ====================
${u.join(`
`)}
============================================================

`}return i.length>t&&(o+=`


... and ${i.length-t} more leaking disposables

`),{leaks:i,details:o}}};function bk(e){eo=e}if(wk){const e="__is_disposable_tracked__";bk(new class{trackDisposable(t){const r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{t[e]||console.log(r)},3e3)}setParent(t,r){if(t&&t!==he.None)try{t[e]=!0}catch{}}markAsDisposed(t){if(t&&t!==he.None)try{t[e]=!0}catch{}}markAsSingleton(t){}})}function to(e){return eo?.trackDisposable(e),e}function ro(e){eo?.markAsDisposed(e)}function Na(e,t){eo?.setParent(e,t)}function yk(e,t){if(eo)for(const r of e)eo.setParent(r,t)}function Ek(e){return typeof e=="object"&&e!==null&&typeof e.dispose=="function"&&e.dispose.length===0}function Li(e){if(mr.is(e)){const t=[];for(const r of e)if(r)try{r.dispose()}catch(i){t.push(i)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function $w(...e){const t=ce(()=>Li(e));return yk(e,t),t}function ce(e){const t=to({dispose:pp(()=>{ro(t),e()})});return t}var me=class Cx{static{this.DISABLE_DISPOSED_WARNING=!1}constructor(){this.f=new Set,this.g=!1,to(this)}dispose(){this.g||(ro(this),this.g=!0,this.clear())}get isDisposed(){return this.g}clear(){if(this.f.size!==0)try{Li(this.f)}finally{this.f.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return Na(t,this),this.g?Cx.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this.f.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this.f.delete(t),t.dispose()}}deleteAndLeak(t){t&&this.f.has(t)&&(this.f.delete(t),Na(t,null))}},he=class{static{this.None=Object.freeze({dispose(){}})}constructor(){this.q=new me,to(this),Na(this.q,this)}dispose(){ro(this),this.q.dispose()}B(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this.q.add(e)}},us=class{constructor(){this.b=!1,to(this)}get value(){return this.b?void 0:this.a}set value(e){this.b||e===this.a||(this.a?.dispose(),e&&Na(e,this),this.a=e)}clear(){this.value=void 0}dispose(){this.b=!0,ro(this),this.a?.dispose(),this.a=void 0}clearAndLeak(){const e=this.a;return this.a=void 0,e&&Na(e,null),e}},gp=class{constructor(){this.a=new Map,this.b=!1,to(this)}dispose(){ro(this),this.b=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this.a.size)try{Li(this.a.values())}finally{this.a.clear()}}has(e){return this.a.has(e)}get size(){return this.a.size}get(e){return this.a.get(e)}set(e,t,r=!1){this.b&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),r||this.a.get(e)?.dispose(),this.a.set(e,t)}deleteAndDispose(e){this.a.get(e)?.dispose(),this.a.delete(e)}deleteAndLeak(e){const t=this.a.get(e);return this.a.delete(e),t}keys(){return this.a.keys()}values(){return this.a.values()}[Symbol.iterator](){return this.a[Symbol.iterator]()}};function xk(e,t){return new Promise((r,i)=>{const s=[];kk(e,{onData:n=>{t&&s.push(n)},onError:n=>{t?i(n):r(void 0)},onEnd:()=>{r(t?t(s):void 0)}})})}function kk(e,t,r){e.on("error",i=>{r?.isCancellationRequested||t.onError(i)}),e.on("end",()=>{r?.isCancellationRequested||t.onEnd()}),e.on("data",i=>{r?.isCancellationRequested||t.onData(i)})}var ru=typeof Buffer<"u",$k=new pr(()=>new Uint8Array(256)),mp,vp,ke=class Br{static alloc(t){return ru?new Br(Buffer.allocUnsafe(t)):new Br(new Uint8Array(t))}static wrap(t){return ru&&!Buffer.isBuffer(t)&&(t=Buffer.from(t.buffer,t.byteOffset,t.byteLength)),new Br(t)}static fromString(t,r){return!(r?.dontUseNodeBuffer||!1)&&ru?new Br(Buffer.from(t)):(mp||(mp=new TextEncoder),new Br(mp.encode(t)))}static fromByteArray(t){const r=Br.alloc(t.length);for(let i=0,s=t.length;i<s;i++)r.buffer[i]=t[i];return r}static concat(t,r){if(typeof r>"u"){r=0;for(let n=0,o=t.length;n<o;n++)r+=t[n].byteLength}const i=Br.alloc(r);let s=0;for(let n=0,o=t.length;n<o;n++){const a=t[n];i.set(a,s),s+=a.byteLength}return i}constructor(t){this.buffer=t,this.byteLength=this.buffer.byteLength}clone(){const t=Br.alloc(this.byteLength);return t.set(this),t}toString(){return ru?this.buffer.toString():(vp||(vp=new TextDecoder),vp.decode(this.buffer))}slice(t,r){return new Br(this.buffer.subarray(t,r))}set(t,r){if(t instanceof Br)this.buffer.set(t.buffer,r);else if(t instanceof Uint8Array)this.buffer.set(t,r);else if(t instanceof ArrayBuffer)this.buffer.set(new Uint8Array(t),r);else if(ArrayBuffer.isView(t))this.buffer.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),r);else throw new Error("Unknown argument 'array'")}readUInt32BE(t){return iu(this.buffer,t)}writeUInt32BE(t,r){su(this.buffer,t,r)}readUInt32LE(t){return Dk(this.buffer,t)}writeUInt32LE(t,r){Pk(this.buffer,t,r)}readUInt8(t){return Ak(this.buffer,t)}writeUInt8(t,r){Tk(this.buffer,t,r)}indexOf(t,r=0){return Sk(this.buffer,t instanceof Br?t.buffer:t,r)}};function Sk(e,t,r=0){const i=t.byteLength,s=e.byteLength;if(i===0)return 0;if(i===1)return e.indexOf(t[0]);if(i>s-r)return-1;const n=$k.value;n.fill(t.length);for(let l=0;l<t.length;l++)n[t[l]]=t.length-l-1;let o=r+t.length-1,a=o,c=-1;for(;o<s;)if(e[o]===t[a]){if(a===0){c=o;break}o--,a--}else o+=Math.max(t.length-a,n[e[o]]),a=t.length-1;return c}function Ik(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0}function Ck(e,t,r){e[r+0]=t&255,t=t>>>8,e[r+1]=t&255}function iu(e,t){return e[t]*2**24+e[t+1]*2**16+e[t+2]*2**8+e[t+3]}function su(e,t,r){e[r+3]=t,t=t>>>8,e[r+2]=t,t=t>>>8,e[r+1]=t,t=t>>>8,e[r]=t}function Dk(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0|e[t+2]<<16>>>0|e[t+3]<<24>>>0}function Pk(e,t,r){e[r+0]=t&255,t=t>>>8,e[r+1]=t&255,t=t>>>8,e[r+2]=t&255,t=t>>>8,e[r+3]=t&255}function Ak(e,t){return e[t]}function Tk(e,t,r){e[r]=t}function Rk(e){return xk(e,t=>ke.concat(t))}function nu(e){let t=0,r=0,i=0;const s=new Uint8Array(Math.floor(e.length/4*3)),n=a=>{switch(r){case 3:s[i++]=t|a,r=0;break;case 2:s[i++]=t|a>>>2,t=a<<6,r=3;break;case 1:s[i++]=t|a>>>4,t=a<<4,r=2;break;default:t=a<<2,r=1}};for(let a=0;a<e.length;a++){const c=e.charCodeAt(a);if(c>=65&&c<=90)n(c-65);else if(c>=97&&c<=122)n(c-97+26);else if(c>=48&&c<=57)n(c-48+52);else if(c===43||c===45)n(62);else if(c===47||c===95)n(63);else{if(c===61)break;throw new SyntaxError(`Unexpected base64 character ${e[a]}`)}}const o=i;for(;r>0;)n(0);return ke.wrap(s).slice(0,o)}var Lk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function wp({buffer:e},t=!0,r=!1){const i=r?Nk:Lk;let s="";const n=e.byteLength%3;let o=0;for(;o<e.byteLength-n;o+=3){const a=e[o+0],c=e[o+1],l=e[o+2];s+=i[a>>>2],s+=i[(a<<4|c>>>4)&63],s+=i[(c<<2|l>>>6)&63],s+=i[l&63]}if(n===1){const a=e[o+0];s+=i[a>>>2],s+=i[a<<4&63],t&&(s+="==")}else if(n===2){const a=e[o+0],c=e[o+1];s+=i[a>>>2],s+=i[(a<<4|c>>>4)&63],s+=i[c<<2&63],t&&(s+="=")}return s}var mt=class _f{static{this.Undefined=new _f(void 0)}constructor(t){this.element=t,this.next=_f.Undefined,this.prev=_f.Undefined}},Fa=class{constructor(){this.a=mt.Undefined,this.b=mt.Undefined,this.c=0}get size(){return this.c}isEmpty(){return this.a===mt.Undefined}clear(){let e=this.a;for(;e!==mt.Undefined;){const t=e.next;e.prev=mt.Undefined,e.next=mt.Undefined,e=t}this.a=mt.Undefined,this.b=mt.Undefined,this.c=0}unshift(e){return this.d(e,!1)}push(e){return this.d(e,!0)}d(e,t){const r=new mt(e);if(this.a===mt.Undefined)this.a=r,this.b=r;else if(t){const s=this.b;this.b=r,r.prev=s,s.next=r}else{const s=this.a;this.a=r,r.next=s,s.prev=r}this.c+=1;let i=!1;return()=>{i||(i=!0,this.e(r))}}shift(){if(this.a!==mt.Undefined){const e=this.a.element;return this.e(this.a),e}}pop(){if(this.b!==mt.Undefined){const e=this.b.element;return this.e(this.b),e}}e(e){if(e.prev!==mt.Undefined&&e.next!==mt.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===mt.Undefined&&e.next===mt.Undefined?(this.a=mt.Undefined,this.b=mt.Undefined):e.next===mt.Undefined?(this.b=this.b.prev,this.b.next=mt.Undefined):e.prev===mt.Undefined&&(this.a=this.a.next,this.a.prev=mt.Undefined);this.c-=1}*[Symbol.iterator](){let e=this.a;for(;e!==mt.Undefined;)yield e.element,e=e.next}},Fk=globalThis.performance&&typeof globalThis.performance.now=="function",Xs=class Dx{static create(t){return new Dx(t)}constructor(t){this.c=Fk&&t===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this.a=this.c(),this.b=-1}stop(){this.b=this.c()}reset(){this.a=this.c(),this.b=-1}elapsed(){return this.b!==-1?this.b-this.a:this.c()-this.a}},Sw=!1,Mk=!1,ht;(function(e){e.None=()=>he.None;function t(G){if(Mk){const{onDidAddListener:j}=G,Q=bp.create();let B=0;G.onDidAddListener=()=>{++B===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),Q.print()),j?.()}}}function r(G,j){return f(G,()=>{},0,void 0,!0,void 0,j)}e.defer=r;function i(G){return(j,Q=null,B)=>{let re=!1,pe;return pe=G(ne=>{if(!re)return pe?pe.dispose():re=!0,j.call(Q,ne)},null,B),re&&pe.dispose(),pe}}e.once=i;function s(G,j){return e.once(e.filter(G,j))}e.onceIf=s;function n(G,j,Q){return h((B,re=null,pe)=>G(ne=>B.call(re,j(ne)),null,pe),Q)}e.map=n;function o(G,j,Q){return h((B,re=null,pe)=>G(ne=>{j(ne),B.call(re,ne)},null,pe),Q)}e.forEach=o;function a(G,j,Q){return h((B,re=null,pe)=>G(ne=>j(ne)&&B.call(re,ne),null,pe),Q)}e.filter=a;function c(G){return G}e.signal=c;function l(...G){return(j,Q=null,B)=>{const re=$w(...G.map(pe=>pe(ne=>j.call(Q,ne))));return p(re,B)}}e.any=l;function u(G,j,Q,B){let re=Q;return n(G,pe=>(re=j(re,pe),re),B)}e.reduce=u;function h(G,j){let Q;const B={onWillAddFirstListener(){Q=G(re.fire,re)},onDidRemoveLastListener(){Q?.dispose()}};j||t(B);const re=new D(B);return j?.add(re),re.event}function p(G,j){return j instanceof Array?j.push(G):j&&j.add(G),G}function f(G,j,Q=100,B=!1,re=!1,pe,ne){let qe,Be,kt,bt=0,Ot;const Ze={leakWarningThreshold:pe,onWillAddFirstListener(){qe=G(as=>{bt++,Be=j(Be,as),B&&!kt&&(Vt.fire(Be),Be=void 0),Ot=()=>{const Di=Be;Be=void 0,kt=void 0,(!B||bt>1)&&Vt.fire(Di),bt=0},typeof Q=="number"?(clearTimeout(kt),kt=setTimeout(Ot,Q)):kt===void 0&&(kt=0,queueMicrotask(Ot))})},onWillRemoveListener(){re&&bt>0&&Ot?.()},onDidRemoveLastListener(){Ot=void 0,qe.dispose()}};ne||t(Ze);const Vt=new D(Ze);return ne?.add(Vt),Vt.event}e.debounce=f;function m(G,j=0,Q){return e.debounce(G,(B,re)=>B?(B.push(re),B):[re],j,void 0,!0,void 0,Q)}e.accumulate=m;function w(G,j=(B,re)=>B===re,Q){let B=!0,re;return a(G,pe=>{const ne=B||!j(pe,re);return B=!1,re=pe,ne},Q)}e.latch=w;function E(G,j,Q){return[e.filter(G,j,Q),e.filter(G,B=>!j(B),Q)]}e.split=E;function $(G,j=!1,Q=[],B){let re=Q.slice(),pe=G(Be=>{re?re.push(Be):qe.fire(Be)});B&&B.add(pe);const ne=()=>{re?.forEach(Be=>qe.fire(Be)),re=null},qe=new D({onWillAddFirstListener(){pe||(pe=G(Be=>qe.fire(Be)),B&&B.add(pe))},onDidAddFirstListener(){re&&(j?setTimeout(ne):ne())},onDidRemoveLastListener(){pe&&pe.dispose(),pe=null}});return B&&B.add(qe),qe.event}e.buffer=$;function S(G,j){return(B,re,pe)=>{const ne=j(new O);return G(function(qe){const Be=ne.evaluate(qe);Be!==P&&B.call(re,Be)},void 0,pe)}}e.chain=S;const P=Symbol("HaltChainable");class O{constructor(){this.f=[]}map(j){return this.f.push(j),this}forEach(j){return this.f.push(Q=>(j(Q),Q)),this}filter(j){return this.f.push(Q=>j(Q)?Q:P),this}reduce(j,Q){let B=Q;return this.f.push(re=>(B=j(B,re),B)),this}latch(j=(Q,B)=>Q===B){let Q=!0,B;return this.f.push(re=>{const pe=Q||!j(re,B);return Q=!1,B=re,pe?re:P}),this}evaluate(j){for(const Q of this.f)if(j=Q(j),j===P)break;return j}}function F(G,j,Q=B=>B){const B=(...qe)=>ne.fire(Q(...qe)),re=()=>G.on(j,B),pe=()=>G.removeListener(j,B),ne=new D({onWillAddFirstListener:re,onDidRemoveLastListener:pe});return ne.event}e.fromNodeEventEmitter=F;function W(G,j,Q=B=>B){const B=(...qe)=>ne.fire(Q(...qe)),re=()=>G.addEventListener(j,B),pe=()=>G.removeEventListener(j,B),ne=new D({onWillAddFirstListener:re,onDidRemoveLastListener:pe});return ne.event}e.fromDOMEventEmitter=W;function Z(G,j){return new Promise(Q=>i(G)(Q,null,j))}e.toPromise=Z;function J(G){const j=new D;return G.then(Q=>{j.fire(Q)},()=>{j.fire(void 0)}).finally(()=>{j.dispose()}),j.event}e.fromPromise=J;function X(G,j){return G(Q=>j.fire(Q))}e.forward=X;function Se(G,j,Q){return j(Q),G(B=>j(B))}e.runAndSubscribe=Se;class de{constructor(j,Q){this._observable=j,this.f=0,this.g=!1;const B={onWillAddFirstListener:()=>{j.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{j.removeObserver(this)}};Q||t(B),this.emitter=new D(B),Q&&Q.add(this.emitter)}beginUpdate(j){this.f++}handlePossibleChange(j){}handleChange(j,Q){this.g=!0}endUpdate(j){this.f--,this.f===0&&(this._observable.reportChanges(),this.g&&(this.g=!1,this.emitter.fire(this._observable.get())))}}function et(G,j){return new de(G,j).emitter.event}e.fromObservable=et;function rt(G){return(j,Q,B)=>{let re=0,pe=!1;const ne={beginUpdate(){re++},endUpdate(){re--,re===0&&(G.reportChanges(),pe&&(pe=!1,j.call(Q)))},handlePossibleChange(){},handleChange(){pe=!0}};G.addObserver(ne),G.reportChanges();const qe={dispose(){G.removeObserver(ne)}};return B instanceof me?B.add(qe):Array.isArray(B)&&B.push(qe),qe}}e.fromObservableLight=rt})(ht||(ht={}));var Ok=class B0{static{this.all=new Set}static{this.f=0}constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${B0.f++}`,B0.all.add(this)}start(t){this.g=new Xs,this.listenerCount=t}stop(){if(this.g){const t=this.g.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this.g=void 0}}},Iw=-1,Uk=class Px{static{this.f=1}constructor(t,r,i=(Px.f++).toString(16).padStart(3,"0")){this.j=t,this.threshold=r,this.name=i,this.h=0}dispose(){this.g?.clear()}check(t,r){const i=this.threshold;if(i<=0||r<i)return;this.g||(this.g=new Map);const s=this.g.get(t.value)||0;if(this.g.set(t.value,s+1),this.h-=1,this.h<=0){this.h=i*.5;const[n,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(n);const c=new Hk(a,n);this.j(c)}return()=>{const n=this.g.get(t.value)||0;this.g.set(t.value,n-1)}}getMostFrequentStack(){if(!this.g)return;let t,r=0;for(const[i,s]of this.g)(!t||r<s)&&(t=[i,s],r=s);return t}},bp=class Ax{static create(){const t=new Error;return new Ax(t.stack??"")}constructor(t){this.value=t}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},Hk=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},jk=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},Bk=0,ou=class{constructor(e){this.value=e,this.id=Bk++}},_k=2,Cw=(e,t)=>{if(e instanceof ou)t(e);else for(let r=0;r<e.length;r++){const i=e[r];i&&t(i)}},D=class{constructor(e){this.z=0,this.f=e,this.g=Iw>0||this.f?.leakWarningThreshold?new Uk(e?.onListenerError??gr,this.f?.leakWarningThreshold??Iw):void 0,this.j=this.f?._profName?new Ok(this.f._profName):void 0,this.w=this.f?.deliveryQueue}dispose(){if(!this.m){if(this.m=!0,this.w?.current===this&&this.w.reset(),this.u){if(Sw){const e=this.u;queueMicrotask(()=>{Cw(e,t=>t.stack?.print())})}this.u=void 0,this.z=0}this.f?.onDidRemoveLastListener?.(),this.g?.dispose()}}get event(){return this.q??=(e,t,r)=>{if(this.g&&this.z>this.g.threshold**2){const a=`[${this.g.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this.z} vs ${this.g.threshold})`;console.warn(a);const c=this.g.getMostFrequentStack()??["UNKNOWN stack",-1],l=new jk(`${a}. HINT: Stack shows most frequent listener (${c[1]}-times)`,c[0]);return(this.f?.onListenerError||gr)(l),he.None}if(this.m)return he.None;t&&(e=e.bind(t));const i=new ou(e);let s,n;this.g&&this.z>=Math.ceil(this.g.threshold*.2)&&(i.stack=bp.create(),s=this.g.check(i.stack,this.z+1)),Sw&&(i.stack=n??bp.create()),this.u?this.u instanceof ou?(this.w??=new zk,this.u=[this.u,i]):this.u.push(i):(this.f?.onWillAddFirstListener?.(this),this.u=i,this.f?.onDidAddFirstListener?.(this)),this.f?.onDidAddListener?.(this),this.z++;const o=ce(()=>{s?.(),this.A(i)});return r instanceof me?r.add(o):Array.isArray(r)&&r.push(o),o},this.q}A(e){if(this.f?.onWillRemoveListener?.(this),!this.u)return;if(this.z===1){this.u=void 0,this.f?.onDidRemoveLastListener?.(this),this.z=0;return}const t=this.u,r=t.indexOf(e);if(r===-1)throw console.log("disposed?",this.m),console.log("size?",this.z),console.log("arr?",JSON.stringify(this.u)),new Error("Attempted to dispose unknown listener");this.z--,t[r]=void 0;const i=this.w.current===this;if(this.z*_k<=t.length){let s=0;for(let n=0;n<t.length;n++)t[n]?t[s++]=t[n]:i&&s<this.w.end&&(this.w.end--,s<this.w.i&&this.w.i--);t.length=s}}B(e,t){if(!e)return;const r=this.f?.onListenerError||gr;if(!r){e.value(t);return}try{e.value(t)}catch(i){r(i)}}C(e){const t=e.current.u;for(;e.i<e.end;)this.B(t[e.i++],e.value);e.reset()}fire(e){if(this.w?.current&&(this.C(this.w),this.j?.stop()),this.j?.start(this.z),this.u)if(this.u instanceof ou)this.B(this.u,e);else{const t=this.w;t.enqueue(this,e,this.u.length),this.C(t)}this.j?.stop()}hasListeners(){return this.z>0}},zk=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,r){this.i=0,this.end=r,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},Ma=class extends D{async fireAsync(e,t,r){if(this.u)for(this.h||(this.h=new Fa),Cw(this.u,i=>this.h.push([i.value,e]));this.h.size>0&&!t.isCancellationRequested;){const[i,s]=this.h.shift(),n=[],o={...s,token:t,waitUntil:a=>{if(Object.isFrozen(n))throw new Error("waitUntil can NOT be called asynchronous");r&&(a=r(a,i)),n.push(a)}};try{i(o)}catch(a){gr(a);continue}Object.freeze(n),await Promise.allSettled(n).then(a=>{for(const c of a)c.status==="rejected"&&gr(c.reason)})}}},au=class extends D{get isPaused(){return this.h!==0}constructor(e){super(e),this.h=0,this.s=new Fa,this.t=e?.merge}pause(){this.h++}resume(){if(this.h!==0&&--this.h===0)if(this.t){if(this.s.size>0){const e=Array.from(this.s);this.s.clear(),super.fire(this.t(e))}}else for(;!this.h&&this.s.size!==0;)super.fire(this.s.shift())}fire(e){this.z&&(this.h!==0?this.s.push(e):super.fire(e))}},Wk=class extends au{constructor(e){super(e),this.k=e.delay??100}fire(e){this.o||(this.pause(),this.o=setTimeout(()=>{this.o=void 0,this.resume()},this.k)),super.fire(e)}},Oa;(function(e){e[e.Desktop=1]="Desktop",e[e.Web=2]="Web"})(Oa||(Oa={}));var Dw;(function(e){e[e.VersionMismatch=55]="VersionMismatch",e[e.UnexpectedError=81]="UnexpectedError"})(Dw||(Dw={}));var Pw;(function(e){e[e.Initialized=0]="Initialized",e[e.Ready=1]="Ready",e[e.Terminate=2]="Terminate"})(Pw||(Pw={}));function Aw(e){const t=ke.alloc(1);switch(e){case 0:t.writeUInt8(1,0);break;case 1:t.writeUInt8(2,0);break;case 2:t.writeUInt8(3,0);break}return t}function Vk(e,t){if(e.byteLength!==1)return!1;switch(e.readUInt8(0)){case 1:return t===0;case 2:return t===1;case 3:return t===2;default:return!1}}var Tw;(function(e){e.Start="START_NATIVE_LOG",e.End="END_NATIVE_LOG"})(Tw||(Tw={}));function yp(e){const t=[];typeof e=="number"&&t.push("code/timeOrigin",e);function r(s,n){t.push(s,n?.startTime??Date.now())}function i(){const s=[];for(let n=0;n<t.length;n+=2)s.push({name:t[n],startTime:t[n+1]});return s}return{mark:r,getMarks:i}}function qk(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?yp():{mark(e,t){performance.mark(e,t)},getMarks(){let e=performance.timeOrigin;typeof e!="number"&&(e=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);const t=[{name:"code/timeOrigin",startTime:Math.round(e)}];for(const r of performance.getEntriesByType("mark"))t.push({name:r.name,startTime:Math.round(e+r.startTime)});return t}};if(typeof process=="object"){const e=performance?.timeOrigin;return yp(e)}else return console.trace("perf-util loaded in UNKNOWN environment"),yp()}function Gk(e){return e.MonacoPerformanceMarks||(e.MonacoPerformanceMarks=qk()),e.MonacoPerformanceMarks}var Rw=Gk(globalThis),er=Rw.mark,Qk=Rw.getMarks;function Jk(){return globalThis._VSCODE_NLS_MESSAGES}function Lw(){return globalThis._VSCODE_NLS_LANGUAGE}var Xk=Lw()==="pseudo"||typeof document<"u"&&document.location&&typeof document.location.hash=="string"&&document.location.hash.indexOf("pseudo=true")>=0;function cu(e,t){let r;return t.length===0?r=e:r=e.replace(/\{(\d+)\}/g,(i,s)=>{const n=s[0],o=t[n];let a=i;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),Xk&&(r="\uFF3B"+r.replace(/[aouei]/g,"$&$&")+"\uFF3D"),r}function d(e,t,...r){return cu(typeof e=="number"?Nw(e,t):t,r)}function Nw(e,t){const r=Jk()?.[e];if(typeof r!="string"){if(typeof t=="string")return t;throw new Error(`!!! NLS MISSING: ${e} !!!`)}return r}function Ep(e,t,...r){let i;typeof e=="number"?i=Nw(e,t):i=t;const s=cu(i,r);return{value:s,original:t===i?s:cu(t,r)}}var hs="en",Ua=!1,Ha=!1,ja=!1,Yk=!1,Fw=!1,xp=!1,Zk=!1,kp=!1,Mw=!1,Ow=!1,lu=void 0,uu=hs,Uw=hs,Kk=void 0,Ni=void 0,Fi=globalThis,Sr=void 0;typeof Fi.vscode<"u"&&typeof Fi.vscode.process<"u"?Sr=Fi.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Sr=process);var Hw=typeof Sr?.versions?.electron=="string",e$=Hw&&Sr?.type==="renderer";if(typeof Sr=="object"){Ua=Sr.platform==="win32",Ha=Sr.platform==="darwin",ja=Sr.platform==="linux",Yk=ja&&!!Sr.env.SNAP&&!!Sr.env.SNAP_REVISION,Zk=Hw,Mw=!!Sr.env.CI||!!Sr.env.BUILD_ARTIFACTSTAGINGDIRECTORY,lu=hs,uu=hs;const e=Sr.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e);lu=t.userLocale,Uw=t.osLocale,uu=t.resolvedLanguage||hs,Kk=t.languagePack?.translationsConfigFile}catch{}Fw=!0}else typeof navigator=="object"&&!e$?(Ni=navigator.userAgent,Ua=Ni.indexOf("Windows")>=0,Ha=Ni.indexOf("Macintosh")>=0,kp=(Ni.indexOf("Macintosh")>=0||Ni.indexOf("iPad")>=0||Ni.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,ja=Ni.indexOf("Linux")>=0,Ow=Ni?.indexOf("Mobi")>=0,xp=!0,uu=Lw()||hs,lu=navigator.language.toLowerCase(),Uw=lu):console.error("Unable to resolve platform.");var jw;(function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"})(jw||(jw={}));function t$(e){switch(e){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}var $p=0;Ha?$p=1:Ua?$p=3:ja&&($p=2);var tr=Ua,Ir=Ha,di=ja,Bw=Fw,Ba=xp,r$=xp&&typeof Fi.importScripts=="function",i$=r$?Fi.origin:void 0,s$=kp,n$=Ow,Ys=Mw,fi=Ni,ds=uu,_w;(function(e){function t(){return ds}e.value=t;function r(){return ds.length===2?ds==="en":ds.length>=3?ds[0]==="e"&&ds[1]==="n"&&ds[2]==="-":!1}e.isDefaultVariant=r;function i(){return ds==="en"}e.isDefault=i})(_w||(_w={}));var o$=typeof Fi.postMessage=="function"&&!Fi.importScripts,zw=(()=>{if(o$){const e=[];Fi.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let i=0,s=e.length;i<s;i++){const n=e[i];if(n.id===r.data.vscodeScheduleAsyncWork){e.splice(i,1),n.callback();return}}});let t=0;return r=>{const i=++t;e.push({id:i,callback:r}),Fi.postMessage({vscodeScheduleAsyncWork:i},"*")}}return e=>setTimeout(e)})(),Ww;(function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"})(Ww||(Ww={}));var a$=Ha||kp?2:Ua?1:3,Vw=!0,qw=!1;function Gw(){if(!qw){qw=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2,Vw=new Uint16Array(e.buffer)[0]===513}return Vw}var Sp=!!(fi&&fi.indexOf("Chrome")>=0),c$=!!(fi&&fi.indexOf("Firefox")>=0),l$=!!(!Sp&&fi&&fi.indexOf("Safari")>=0),Qw=!!(fi&&fi.indexOf("Edg/")>=0),WF=!!(fi&&fi.indexOf("Android")>=0),Zs,Ip=globalThis.vscode;if(typeof Ip<"u"&&typeof Ip.process<"u"){const e=Ip.process;Zs={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd(){return e.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?Zs={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Zs={get platform(){return tr?"win32":Ir?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var io=Zs.cwd,hu=Zs.env,u$=Zs.platform,VF=Zs.arch,h$=65,d$=97,f$=90,p$=122,fs=46,Ht=47,vr=92,ps=58,g$=63,Jw=class extends Error{constructor(e,t,r){let i;typeof t=="string"&&t.indexOf("not ")===0?(i="must not be",t=t.replace(/^not /,"")):i="must be";const s=e.indexOf(".")!==-1?"property":"argument";let n=`The "${e}" ${s} ${i} of type ${t}`;n+=`. Received type ${typeof r}`,super(n),this.code="ERR_INVALID_ARG_TYPE"}};function m$(e,t){if(e===null||typeof e!="object")throw new Jw(t,"Object",e)}function Et(e,t){if(typeof e!="string")throw new Jw(t,"string",e)}var wr=u$==="win32";function $e(e){return e===Ht||e===vr}function Cp(e){return e===Ht}function gs(e){return e>=h$&&e<=f$||e>=d$&&e<=p$}function du(e,t,r,i){let s="",n=0,o=-1,a=0,c=0;for(let l=0;l<=e.length;++l){if(l<e.length)c=e.charCodeAt(l);else{if(i(c))break;c=Ht}if(i(c)){if(!(o===l-1||a===1))if(a===2){if(s.length<2||n!==2||s.charCodeAt(s.length-1)!==fs||s.charCodeAt(s.length-2)!==fs){if(s.length>2){const u=s.lastIndexOf(r);u===-1?(s="",n=0):(s=s.slice(0,u),n=s.length-1-s.lastIndexOf(r)),o=l,a=0;continue}else if(s.length!==0){s="",n=0,o=l,a=0;continue}}t&&(s+=s.length>0?`${r}..`:"..",n=2)}else s.length>0?s+=`${r}${e.slice(o+1,l)}`:s=e.slice(o+1,l),n=l-o-1;o=l,a=0}else c===fs&&a!==-1?++a:a=-1}return s}function v$(e){return e?`${e[0]==="."?"":"."}${e}`:""}function Xw(e,t){m$(t,"pathObject");const r=t.dir||t.root,i=t.base||`${t.name||""}${v$(t.ext)}`;return r?r===t.root?`${r}${i}`:`${r}${e}${i}`:i}var xt={resolve(...e){let t="",r="",i=!1;for(let s=e.length-1;s>=-1;s--){let n;if(s>=0){if(n=e[s],Et(n,`paths[${s}]`),n.length===0)continue}else t.length===0?n=io():(n=hu[`=${t}`]||io(),(n===void 0||n.slice(0,2).toLowerCase()!==t.toLowerCase()&&n.charCodeAt(2)===vr)&&(n=`${t}\\`));const o=n.length;let a=0,c="",l=!1;const u=n.charCodeAt(0);if(o===1)$e(u)&&(a=1,l=!0);else if($e(u))if(l=!0,$e(n.charCodeAt(1))){let h=2,p=h;for(;h<o&&!$e(n.charCodeAt(h));)h++;if(h<o&&h!==p){const f=n.slice(p,h);for(p=h;h<o&&$e(n.charCodeAt(h));)h++;if(h<o&&h!==p){for(p=h;h<o&&!$e(n.charCodeAt(h));)h++;(h===o||h!==p)&&(c=`\\\\${f}\\${n.slice(p,h)}`,a=h)}}}else a=1;else gs(u)&&n.charCodeAt(1)===ps&&(c=n.slice(0,2),a=2,o>2&&$e(n.charCodeAt(2))&&(l=!0,a=3));if(c.length>0)if(t.length>0){if(c.toLowerCase()!==t.toLowerCase())continue}else t=c;if(i){if(t.length>0)break}else if(r=`${n.slice(a)}\\${r}`,i=l,l&&t.length>0)break}return r=du(r,!i,"\\",$e),i?`${t}\\${r}`:`${t}${r}`||"."},normalize(e){Et(e,"path");const t=e.length;if(t===0)return".";let r=0,i,s=!1;const n=e.charCodeAt(0);if(t===1)return Cp(n)?"\\":e;if($e(n))if(s=!0,$e(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!$e(e.charCodeAt(a));)a++;if(a<t&&a!==c){const l=e.slice(c,a);for(c=a;a<t&&$e(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!$e(e.charCodeAt(a));)a++;if(a===t)return`\\\\${l}\\${e.slice(c)}\\`;a!==c&&(i=`\\\\${l}\\${e.slice(c,a)}`,r=a)}}}else r=1;else gs(n)&&e.charCodeAt(1)===ps&&(i=e.slice(0,2),r=2,t>2&&$e(e.charCodeAt(2))&&(s=!0,r=3));let o=r<t?du(e.slice(r),!s,"\\",$e):"";return o.length===0&&!s&&(o="."),o.length>0&&$e(e.charCodeAt(t-1))&&(o+="\\"),i===void 0?s?`\\${o}`:o:s?`${i}\\${o}`:`${i}${o}`},isAbsolute(e){Et(e,"path");const t=e.length;if(t===0)return!1;const r=e.charCodeAt(0);return $e(r)||t>2&&gs(r)&&e.charCodeAt(1)===ps&&$e(e.charCodeAt(2))},join(...e){if(e.length===0)return".";let t,r;for(let n=0;n<e.length;++n){const o=e[n];Et(o,"path"),o.length>0&&(t===void 0?t=r=o:t+=`\\${o}`)}if(t===void 0)return".";let i=!0,s=0;if(typeof r=="string"&&$e(r.charCodeAt(0))){++s;const n=r.length;n>1&&$e(r.charCodeAt(1))&&(++s,n>2&&($e(r.charCodeAt(2))?++s:i=!1))}if(i){for(;s<t.length&&$e(t.charCodeAt(s));)s++;s>=2&&(t=`\\${t.slice(s)}`)}return xt.normalize(t)},relative(e,t){if(Et(e,"from"),Et(t,"to"),e===t)return"";const r=xt.resolve(e),i=xt.resolve(t);if(r===i||(e=r.toLowerCase(),t=i.toLowerCase(),e===t))return"";let s=0;for(;s<e.length&&e.charCodeAt(s)===vr;)s++;let n=e.length;for(;n-1>s&&e.charCodeAt(n-1)===vr;)n--;const o=n-s;let a=0;for(;a<t.length&&t.charCodeAt(a)===vr;)a++;let c=t.length;for(;c-1>a&&t.charCodeAt(c-1)===vr;)c--;const l=c-a,u=o<l?o:l;let h=-1,p=0;for(;p<u;p++){const m=e.charCodeAt(s+p);if(m!==t.charCodeAt(a+p))break;m===vr&&(h=p)}if(p!==u){if(h===-1)return i}else{if(l>u){if(t.charCodeAt(a+p)===vr)return i.slice(a+p+1);if(p===2)return i.slice(a+p)}o>u&&(e.charCodeAt(s+p)===vr?h=p:p===2&&(h=3)),h===-1&&(h=0)}let f="";for(p=s+h+1;p<=n;++p)(p===n||e.charCodeAt(p)===vr)&&(f+=f.length===0?"..":"\\..");return a+=h,f.length>0?`${f}${i.slice(a,c)}`:(i.charCodeAt(a)===vr&&++a,i.slice(a,c))},toNamespacedPath(e){if(typeof e!="string"||e.length===0)return e;const t=xt.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===vr){if(t.charCodeAt(1)===vr){const r=t.charCodeAt(2);if(r!==g$&&r!==fs)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(gs(t.charCodeAt(0))&&t.charCodeAt(1)===ps&&t.charCodeAt(2)===vr)return`\\\\?\\${t}`;return e},dirname(e){Et(e,"path");const t=e.length;if(t===0)return".";let r=-1,i=0;const s=e.charCodeAt(0);if(t===1)return $e(s)?e:".";if($e(s)){if(r=i=1,$e(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!$e(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&$e(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!$e(e.charCodeAt(a));)a++;if(a===t)return e;a!==c&&(r=i=a+1)}}}}else gs(s)&&e.charCodeAt(1)===ps&&(r=t>2&&$e(e.charCodeAt(2))?3:2,i=r);let n=-1,o=!0;for(let a=t-1;a>=i;--a)if($e(e.charCodeAt(a))){if(!o){n=a;break}}else o=!1;if(n===-1){if(r===-1)return".";n=r}return e.slice(0,n)},basename(e,t){t!==void 0&&Et(t,"suffix"),Et(e,"path");let r=0,i=-1,s=!0,n;if(e.length>=2&&gs(e.charCodeAt(0))&&e.charCodeAt(1)===ps&&(r=2),t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=r;--n){const c=e.charCodeAt(n);if($e(c)){if(!s){r=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return r===i?i=a:i===-1&&(i=e.length),e.slice(r,i)}for(n=e.length-1;n>=r;--n)if($e(e.charCodeAt(n))){if(!s){r=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":e.slice(r,i)},extname(e){Et(e,"path");let t=0,r=-1,i=0,s=-1,n=!0,o=0;e.length>=2&&e.charCodeAt(1)===ps&&gs(e.charCodeAt(0))&&(t=i=2);for(let a=e.length-1;a>=t;--a){const c=e.charCodeAt(a);if($e(c)){if(!n){i=a+1;break}continue}s===-1&&(n=!1,s=a+1),c===fs?r===-1?r=a:o!==1&&(o=1):r!==-1&&(o=-1)}return r===-1||s===-1||o===0||o===1&&r===s-1&&r===i+1?"":e.slice(r,s)},format:Xw.bind(null,"\\"),parse(e){Et(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const r=e.length;let i=0,s=e.charCodeAt(0);if(r===1)return $e(s)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if($e(s)){if(i=1,$e(e.charCodeAt(1))){let h=2,p=h;for(;h<r&&!$e(e.charCodeAt(h));)h++;if(h<r&&h!==p){for(p=h;h<r&&$e(e.charCodeAt(h));)h++;if(h<r&&h!==p){for(p=h;h<r&&!$e(e.charCodeAt(h));)h++;h===r?i=h:h!==p&&(i=h+1)}}}}else if(gs(s)&&e.charCodeAt(1)===ps){if(r<=2)return t.root=t.dir=e,t;if(i=2,$e(e.charCodeAt(2))){if(r===3)return t.root=t.dir=e,t;i=3}}i>0&&(t.root=e.slice(0,i));let n=-1,o=i,a=-1,c=!0,l=e.length-1,u=0;for(;l>=i;--l){if(s=e.charCodeAt(l),$e(s)){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),s===fs?n===-1?n=l:u!==1&&(u=1):n!==-1&&(u=-1)}return a!==-1&&(n===-1||u===0||u===1&&n===a-1&&n===o+1?t.base=t.name=e.slice(o,a):(t.name=e.slice(o,n),t.base=e.slice(o,a),t.ext=e.slice(n,a))),o>0&&o!==i?t.dir=e.slice(0,o-1):t.dir=t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},w$=(()=>{if(wr){const e=/\\/g;return()=>{const t=io().replace(e,"/");return t.slice(t.indexOf("/"))}}return()=>io()})(),Te={resolve(...e){let t="",r=!1;for(let i=e.length-1;i>=-1&&!r;i--){const s=i>=0?e[i]:w$();Et(s,`paths[${i}]`),s.length!==0&&(t=`${s}/${t}`,r=s.charCodeAt(0)===Ht)}return t=du(t,!r,"/",Cp),r?`/${t}`:t.length>0?t:"."},normalize(e){if(Et(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===Ht,r=e.charCodeAt(e.length-1)===Ht;return e=du(e,!t,"/",Cp),e.length===0?t?"/":r?"./":".":(r&&(e+="/"),t?`/${e}`:e)},isAbsolute(e){return Et(e,"path"),e.length>0&&e.charCodeAt(0)===Ht},join(...e){if(e.length===0)return".";let t;for(let r=0;r<e.length;++r){const i=e[r];Et(i,"path"),i.length>0&&(t===void 0?t=i:t+=`/${i}`)}return t===void 0?".":Te.normalize(t)},relative(e,t){if(Et(e,"from"),Et(t,"to"),e===t||(e=Te.resolve(e),t=Te.resolve(t),e===t))return"";const r=1,i=e.length,s=i-r,n=1,o=t.length-n,a=s<o?s:o;let c=-1,l=0;for(;l<a;l++){const h=e.charCodeAt(r+l);if(h!==t.charCodeAt(n+l))break;h===Ht&&(c=l)}if(l===a)if(o>a){if(t.charCodeAt(n+l)===Ht)return t.slice(n+l+1);if(l===0)return t.slice(n+l)}else s>a&&(e.charCodeAt(r+l)===Ht?c=l:l===0&&(c=0));let u="";for(l=r+c+1;l<=i;++l)(l===i||e.charCodeAt(l)===Ht)&&(u+=u.length===0?"..":"/..");return`${u}${t.slice(n+c)}`},toNamespacedPath(e){return e},dirname(e){if(Et(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===Ht;let r=-1,i=!0;for(let s=e.length-1;s>=1;--s)if(e.charCodeAt(s)===Ht){if(!i){r=s;break}}else i=!1;return r===-1?t?"/":".":t&&r===1?"//":e.slice(0,r)},basename(e,t){t!==void 0&&Et(t,"ext"),Et(e,"path");let r=0,i=-1,s=!0,n;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=0;--n){const c=e.charCodeAt(n);if(c===Ht){if(!s){r=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return r===i?i=a:i===-1&&(i=e.length),e.slice(r,i)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===Ht){if(!s){r=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":e.slice(r,i)},extname(e){Et(e,"path");let t=-1,r=0,i=-1,s=!0,n=0;for(let o=e.length-1;o>=0;--o){const a=e.charCodeAt(o);if(a===Ht){if(!s){r=o+1;break}continue}i===-1&&(s=!1,i=o+1),a===fs?t===-1?t=o:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||i===-1||n===0||n===1&&t===i-1&&t===r+1?"":e.slice(t,i)},format:Xw.bind(null,"/"),parse(e){Et(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const r=e.charCodeAt(0)===Ht;let i;r?(t.root="/",i=1):i=0;let s=-1,n=0,o=-1,a=!0,c=e.length-1,l=0;for(;c>=i;--c){const u=e.charCodeAt(c);if(u===Ht){if(!a){n=c+1;break}continue}o===-1&&(a=!1,o=c+1),u===fs?s===-1?s=c:l!==1&&(l=1):s!==-1&&(l=-1)}if(o!==-1){const u=n===0&&r?1:n;s===-1||l===0||l===1&&s===o-1&&s===n+1?t.base=t.name=e.slice(u,o):(t.name=e.slice(u,s),t.base=e.slice(u,o),t.ext=e.slice(s,o))}return n>0?t.dir=e.slice(0,n-1):r&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Te.win32=xt.win32=xt,Te.posix=xt.posix=Te;var so=wr?xt.normalize:Te.normalize,fu=wr?xt.isAbsolute:Te.isAbsolute,Dp=wr?xt.join:Te.join,b$=wr?xt.resolve:Te.resolve,_a=wr?xt.relative:Te.relative,no=wr?xt.dirname:Te.dirname,br=wr?xt.basename:Te.basename,Pp=wr?xt.extname:Te.extname,qF=wr?xt.format:Te.format,GF=wr?xt.parse:Te.parse,QF=wr?xt.toNamespacedPath:Te.toNamespacedPath,Wr=wr?xt.sep:Te.sep,JF=wr?xt.delimiter:Te.delimiter,y$=/^\w[\w\d+.-]*$/,E$=/^\//,x$=/^\/\//;function k$(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!y$.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path){if(e.authority){if(!E$.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(x$.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function $$(e,t){return!e&&!t?"file":e}function S$(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==Vr&&(t=Vr+t):t=Vr;break}return t}var it="",Vr="/",I$=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,y=class zf{static isUri(t){return t instanceof zf?!0:t?typeof t.authority=="string"&&typeof t.fragment=="string"&&typeof t.path=="string"&&typeof t.query=="string"&&typeof t.scheme=="string"&&typeof t.fsPath=="string"&&typeof t.with=="function"&&typeof t.toString=="function":!1}constructor(t,r,i,s,n,o=!1){typeof t=="object"?(this.scheme=t.scheme||it,this.authority=t.authority||it,this.path=t.path||it,this.query=t.query||it,this.fragment=t.fragment||it):(this.scheme=$$(t,o),this.authority=r||it,this.path=S$(this.scheme,i||it),this.query=s||it,this.fragment=n||it,k$(this,o))}get fsPath(){return pu(this,!1)}with(t){if(!t)return this;let{scheme:r,authority:i,path:s,query:n,fragment:o}=t;return r===void 0?r=this.scheme:r===null&&(r=it),i===void 0?i=this.authority:i===null&&(i=it),s===void 0?s=this.path:s===null&&(s=it),n===void 0?n=this.query:n===null&&(n=it),o===void 0?o=this.fragment:o===null&&(o=it),r===this.scheme&&i===this.authority&&s===this.path&&n===this.query&&o===this.fragment?this:new oo(r,i,s,n,o)}static parse(t,r=!1){const i=I$.exec(t);return i?new oo(i[2]||it,gu(i[4]||it),gu(i[5]||it),gu(i[7]||it),gu(i[9]||it),r):new oo(it,it,it,it,it)}static file(t){let r=it;if(tr&&(t=t.replace(/\\/g,Vr)),t[0]===Vr&&t[1]===Vr){const i=t.indexOf(Vr,2);i===-1?(r=t.substring(2),t=Vr):(r=t.substring(2,i),t=t.substring(i)||Vr)}return new oo("file",r,t,it,it)}static from(t,r){return new oo(t.scheme,t.authority,t.path,t.query,t.fragment,r)}static joinPath(t,...r){if(!t.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return tr&&t.scheme==="file"?i=zf.file(xt.join(pu(t,!0),...r)).path:i=Te.join(t.path,...r),t.with({path:i})}toString(t=!1){return Ap(this,t)}toJSON(){return this}static revive(t){if(t){if(t instanceof zf)return t;{const r=new oo(t);return r._formatted=t.external??null,r._fsPath=t._sep===Zw?t.fsPath??null:null,r}}else return t}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};function Yw(e){return!e||typeof e!="object"?!1:typeof e.scheme=="string"&&(typeof e.authority=="string"||typeof e.authority>"u")&&(typeof e.path=="string"||typeof e.path>"u")&&(typeof e.query=="string"||typeof e.query>"u")&&(typeof e.fragment=="string"||typeof e.fragment>"u")}var Zw=tr?1:void 0,oo=class extends y{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=pu(this,!1)),this._fsPath}toString(e=!1){return e?Ap(this,!0):(this._formatted||(this._formatted=Ap(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Zw),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},Kw={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function eb(e,t,r){let i,s=-1;for(let n=0;n<e.length;n++){const o=e.charCodeAt(n);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||t&&o===47||r&&o===91||r&&o===93||r&&o===58)s!==-1&&(i+=encodeURIComponent(e.substring(s,n)),s=-1),i!==void 0&&(i+=e.charAt(n));else{i===void 0&&(i=e.substr(0,n));const a=Kw[o];a!==void 0?(s!==-1&&(i+=encodeURIComponent(e.substring(s,n)),s=-1),i+=a):s===-1&&(s=n)}}return s!==-1&&(i+=encodeURIComponent(e.substring(s))),i!==void 0?i:e}function C$(e){let t;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);i===35||i===63?(t===void 0&&(t=e.substr(0,r)),t+=Kw[i]):t!==void 0&&(t+=e[r])}return t!==void 0?t:e}function pu(e,t){let r;return e.authority&&e.path.length>1&&e.scheme==="file"?r=`//${e.authority}${e.path}`:e.path.charCodeAt(0)===47&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&e.path.charCodeAt(2)===58?t?r=e.path.substr(1):r=e.path[1].toLowerCase()+e.path.substr(2):r=e.path,tr&&(r=r.replace(/\//g,"\\")),r}function Ap(e,t){const r=t?C$:eb;let i="",{scheme:s,authority:n,path:o,query:a,fragment:c}=e;if(s&&(i+=s,i+=":"),(n||s==="file")&&(i+=Vr,i+=Vr),n){let l=n.indexOf("@");if(l!==-1){const u=n.substr(0,l);n=n.substr(l+1),l=u.lastIndexOf(":"),l===-1?i+=r(u,!1,!1):(i+=r(u.substr(0,l),!1,!1),i+=":",i+=r(u.substr(l+1),!1,!0)),i+="@"}n=n.toLowerCase(),l=n.lastIndexOf(":"),l===-1?i+=r(n,!1,!0):(i+=r(n.substr(0,l),!1,!0),i+=n.substr(l))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const l=o.charCodeAt(1);l>=65&&l<=90&&(o=`/${String.fromCharCode(l+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const l=o.charCodeAt(0);l>=65&&l<=90&&(o=`${String.fromCharCode(l+32)}:${o.substr(2)}`)}i+=r(o,!0,!1)}return a&&(i+="?",i+=r(a,!1,!1)),c&&(i+="#",i+=t?c:eb(c,!1,!1)),i}function tb(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+tb(e.substr(3)):e}}var rb=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function gu(e){return e.match(rb)?e.replace(rb,t=>tb(t)):e}var ib=class Tx{static{this.count=0}constructor(t){this._proxyIdentifierBrand=void 0,this.sid=t,this.nid=++Tx.count}},sb=[];function L(e){const t=new ib(e);return sb[t.nid]=t,t}function mu(e){return sb[e].sid}var Cr=class{constructor(e){this.value=e}},nb;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(nb||(nb={}));var ob;(function(e){e[e.UnknownInput=0]="UnknownInput",e[e.TextInput=1]="TextInput",e[e.TextDiffInput=2]="TextDiffInput",e[e.TextMergeInput=3]="TextMergeInput",e[e.NotebookInput=4]="NotebookInput",e[e.NotebookDiffInput=5]="NotebookDiffInput",e[e.CustomEditorInput=6]="CustomEditorInput",e[e.WebviewEditorInput=7]="WebviewEditorInput",e[e.TerminalEditorInput=8]="TerminalEditorInput",e[e.InteractiveEditorInput=9]="InteractiveEditorInput",e[e.ChatEditorInput=10]="ChatEditorInput",e[e.MultiDiffEditorInput=11]="MultiDiffEditorInput"})(ob||(ob={}));var ab;(function(e){e[e.TAB_OPEN=0]="TAB_OPEN",e[e.TAB_CLOSE=1]="TAB_CLOSE",e[e.TAB_UPDATE=2]="TAB_UPDATE",e[e.TAB_MOVE=3]="TAB_MOVE"})(ab||(ab={}));var cb;(function(e){e[e.Editable=0]="Editable",e[e.SupportsHotExit=1]="SupportsHotExit"})(cb||(cb={}));var lb;(function(e){e[e.Int8Array=1]="Int8Array",e[e.Uint8Array=2]="Uint8Array",e[e.Uint8ClampedArray=3]="Uint8ClampedArray",e[e.Int16Array=4]="Int16Array",e[e.Uint16Array=5]="Uint16Array",e[e.Int32Array=6]="Int32Array",e[e.Uint32Array=7]="Uint32Array",e[e.Float32Array=8]="Float32Array",e[e.Float64Array=9]="Float64Array",e[e.BigInt64Array=10]="BigInt64Array",e[e.BigUint64Array=11]="BigUint64Array"})(lb||(lb={}));var ub;(function(e){e[e.Text=1]="Text",e[e.Error=2]="Error",e[e.Rich=3]="Rich"})(ub||(ub={}));var hb;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(hb||(hb={}));var Tp;(function(e){e[e.None=0]="None",e[e.Process=1]="Process",e[e.Output=2]="Output",e[e.Hybrid=3]="Hybrid"})(Tp||(Tp={}));var XF=class Rx{static{this.a=0}static mixin(t){return t._id=Rx.a++,t}},db;(function(e){e.label="a",e.kind="b",e.detail="c",e.documentation="d",e.sortText="e",e.filterText="f",e.preselect="g",e.insertText="h",e.insertTextRules="i",e.range="j",e.commitCharacters="k",e.additionalTextEdits="l",e.kindModifier="m",e.commandIdent="n",e.commandId="o",e.commandArguments="p"})(db||(db={}));var fb;(function(e){e.defaultRanges="a",e.completions="b",e.isIncomplete="c",e.duration="d"})(fb||(fb={}));var pb;(function(e){e[e.Workspace=0]="Workspace",e[e.TextDocument=1]="TextDocument"})(pb||(pb={}));var z={MainThreadAuthentication:L("MainThreadAuthentication"),MainThreadBulkEdits:L("MainThreadBulkEdits"),MainThreadLanguageModels:L("MainThreadLanguageModels"),MainThreadEmbeddings:L("MainThreadEmbeddings"),MainThreadChatAgents2:L("MainThreadChatAgents2"),MainThreadCodeMapper:L("MainThreadCodeMapper"),MainThreadChatVariables:L("MainThreadChatVariables"),MainThreadLanguageModelTools:L("MainThreadChatSkills"),MainThreadClipboard:L("MainThreadClipboard"),MainThreadCommands:L("MainThreadCommands"),MainThreadComments:L("MainThreadComments"),MainThreadConfiguration:L("MainThreadConfiguration"),MainThreadConsole:L("MainThreadConsole"),MainThreadDebugService:L("MainThreadDebugService"),MainThreadDecorations:L("MainThreadDecorations"),MainThreadDiagnostics:L("MainThreadDiagnostics"),MainThreadDialogs:L("MainThreadDiaglogs"),MainThreadDocuments:L("MainThreadDocuments"),MainThreadDocumentContentProviders:L("MainThreadDocumentContentProviders"),MainThreadTextEditors:L("MainThreadTextEditors"),MainThreadEditorInsets:L("MainThreadEditorInsets"),MainThreadEditorTabs:L("MainThreadEditorTabs"),MainThreadErrors:L("MainThreadErrors"),MainThreadTreeViews:L("MainThreadTreeViews"),MainThreadDownloadService:L("MainThreadDownloadService"),MainThreadLanguageFeatures:L("MainThreadLanguageFeatures"),MainThreadLanguages:L("MainThreadLanguages"),MainThreadLogger:L("MainThreadLogger"),MainThreadMessageService:L("MainThreadMessageService"),MainThreadOutputService:L("MainThreadOutputService"),MainThreadProgress:L("MainThreadProgress"),MainThreadQuickDiff:L("MainThreadQuickDiff"),MainThreadQuickOpen:L("MainThreadQuickOpen"),MainThreadStatusBar:L("MainThreadStatusBar"),MainThreadSecretState:L("MainThreadSecretState"),MainThreadStorage:L("MainThreadStorage"),MainThreadSpeech:L("MainThreadSpeechProvider"),MainThreadTelemetry:L("MainThreadTelemetry"),MainThreadTerminalService:L("MainThreadTerminalService"),MainThreadTerminalShellIntegration:L("MainThreadTerminalShellIntegration"),MainThreadWebviews:L("MainThreadWebviews"),MainThreadWebviewPanels:L("MainThreadWebviewPanels"),MainThreadWebviewViews:L("MainThreadWebviewViews"),MainThreadCustomEditors:L("MainThreadCustomEditors"),MainThreadUrls:L("MainThreadUrls"),MainThreadUriOpeners:L("MainThreadUriOpeners"),MainThreadProfileContentHandlers:L("MainThreadProfileContentHandlers"),MainThreadWorkspace:L("MainThreadWorkspace"),MainThreadFileSystem:L("MainThreadFileSystem"),MainThreadFileSystemEventService:L("MainThreadFileSystemEventService"),MainThreadExtensionService:L("MainThreadExtensionService"),MainThreadSCM:L("MainThreadSCM"),MainThreadSearch:L("MainThreadSearch"),MainThreadShare:L("MainThreadShare"),MainThreadTask:L("MainThreadTask"),MainThreadWindow:L("MainThreadWindow"),MainThreadLabelService:L("MainThreadLabelService"),MainThreadNotebook:L("MainThreadNotebook"),MainThreadNotebookDocuments:L("MainThreadNotebookDocumentsShape"),MainThreadNotebookEditors:L("MainThreadNotebookEditorsShape"),MainThreadNotebookKernels:L("MainThreadNotebookKernels"),MainThreadNotebookRenderers:L("MainThreadNotebookRenderers"),MainThreadInteractive:L("MainThreadInteractive"),MainThreadTheming:L("MainThreadTheming"),MainThreadTunnelService:L("MainThreadTunnelService"),MainThreadManagedSockets:L("MainThreadManagedSockets"),MainThreadTimeline:L("MainThreadTimeline"),MainThreadTesting:L("MainThreadTesting"),MainThreadLocalization:L("MainThreadLocalizationShape"),MainThreadAiRelatedInformation:L("MainThreadAiRelatedInformation"),MainThreadAiEmbeddingVector:L("MainThreadAiEmbeddingVector")},K={ExtHostCodeMapper:L("ExtHostCodeMapper"),ExtHostCommands:L("ExtHostCommands"),ExtHostConfiguration:L("ExtHostConfiguration"),ExtHostDiagnostics:L("ExtHostDiagnostics"),ExtHostDebugService:L("ExtHostDebugService"),ExtHostDecorations:L("ExtHostDecorations"),ExtHostDocumentsAndEditors:L("ExtHostDocumentsAndEditors"),ExtHostDocuments:L("ExtHostDocuments"),ExtHostDocumentContentProviders:L("ExtHostDocumentContentProviders"),ExtHostDocumentSaveParticipant:L("ExtHostDocumentSaveParticipant"),ExtHostEditors:L("ExtHostEditors"),ExtHostTreeViews:L("ExtHostTreeViews"),ExtHostFileSystem:L("ExtHostFileSystem"),ExtHostFileSystemInfo:L("ExtHostFileSystemInfo"),ExtHostFileSystemEventService:L("ExtHostFileSystemEventService"),ExtHostLanguages:L("ExtHostLanguages"),ExtHostLanguageFeatures:L("ExtHostLanguageFeatures"),ExtHostQuickOpen:L("ExtHostQuickOpen"),ExtHostQuickDiff:L("ExtHostQuickDiff"),ExtHostStatusBar:L("ExtHostStatusBar"),ExtHostShare:L("ExtHostShare"),ExtHostExtensionService:L("ExtHostExtensionService"),ExtHostLogLevelServiceShape:L("ExtHostLogLevelServiceShape"),ExtHostTerminalService:L("ExtHostTerminalService"),ExtHostTerminalShellIntegration:L("ExtHostTerminalShellIntegration"),ExtHostSCM:L("ExtHostSCM"),ExtHostSearch:L("ExtHostSearch"),ExtHostTask:L("ExtHostTask"),ExtHostWorkspace:L("ExtHostWorkspace"),ExtHostWindow:L("ExtHostWindow"),ExtHostWebviews:L("ExtHostWebviews"),ExtHostWebviewPanels:L("ExtHostWebviewPanels"),ExtHostCustomEditors:L("ExtHostCustomEditors"),ExtHostWebviewViews:L("ExtHostWebviewViews"),ExtHostEditorInsets:L("ExtHostEditorInsets"),ExtHostEditorTabs:L("ExtHostEditorTabs"),ExtHostProgress:L("ExtHostProgress"),ExtHostComments:L("ExtHostComments"),ExtHostSecretState:L("ExtHostSecretState"),ExtHostStorage:L("ExtHostStorage"),ExtHostUrls:L("ExtHostUrls"),ExtHostUriOpeners:L("ExtHostUriOpeners"),ExtHostProfileContentHandlers:L("ExtHostProfileContentHandlers"),ExtHostOutputService:L("ExtHostOutputService"),ExtHostLabelService:L("ExtHostLabelService"),ExtHostNotebook:L("ExtHostNotebook"),ExtHostNotebookDocuments:L("ExtHostNotebookDocuments"),ExtHostNotebookEditors:L("ExtHostNotebookEditors"),ExtHostNotebookKernels:L("ExtHostNotebookKernels"),ExtHostNotebookRenderers:L("ExtHostNotebookRenderers"),ExtHostNotebookDocumentSaveParticipant:L("ExtHostNotebookDocumentSaveParticipant"),ExtHostInteractive:L("ExtHostInteractive"),ExtHostChatAgents2:L("ExtHostChatAgents"),ExtHostChatVariables:L("ExtHostChatVariables"),ExtHostLanguageModelTools:L("ExtHostChatSkills"),ExtHostChatProvider:L("ExtHostChatProvider"),ExtHostSpeech:L("ExtHostSpeech"),ExtHostEmbeddings:L("ExtHostEmbeddings"),ExtHostAiRelatedInformation:L("ExtHostAiRelatedInformation"),ExtHostAiEmbeddingVector:L("ExtHostAiEmbeddingVector"),ExtHostTheming:L("ExtHostTheming"),ExtHostTunnelService:L("ExtHostTunnelService"),ExtHostManagedSockets:L("ExtHostManagedSockets"),ExtHostAuthentication:L("ExtHostAuthentication"),ExtHostTimeline:L("ExtHostTimeline"),ExtHostTesting:L("ExtHostTesting"),ExtHostTelemetry:L("ExtHostTelemetry"),ExtHostLocalization:L("ExtHostLocalization")},gb=Object.freeze(function(e,t){const r=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(r)}}}),st;(function(e){function t(r){return r===e.None||r===e.Cancelled||r instanceof vu?!0:!r||typeof r!="object"?!1:typeof r.isCancellationRequested=="boolean"&&typeof r.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ht.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:gb})})(st||(st={}));var vu=class{constructor(){this.a=!1,this.b=null}cancel(){this.a||(this.a=!0,this.b&&(this.b.fire(void 0),this.dispose()))}get isCancellationRequested(){return this.a}get onCancellationRequested(){return this.a?gb:(this.b||(this.b=new D),this.b.event)}dispose(){this.b&&(this.b.dispose(),this.b=null)}},dt=class{constructor(e){this.f=void 0,this.g=void 0,this.g=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this.f||(this.f=new vu),this.f}cancel(){this.f?this.f instanceof vu&&this.f.cancel():this.f=st.Cancelled}dispose(e=!1){e&&this.cancel(),this.g?.dispose(),this.f?this.f instanceof vu&&this.f.dispose():this.f=st.None}};function D$(e){return e}var P$=class{constructor(e,t){this.a=void 0,this.b=void 0,typeof e=="function"?(this.c=e,this.d=D$):(this.c=t,this.d=e.getCacheKey)}get(e){const t=this.d(e);return this.b!==t&&(this.b=t,this.a=this.c(e)),this.a}};function wu(e){return!e||typeof e!="string"?!0:e.trim().length===0}var A$=/{([^}]+)}/g;function mb(e,t){return Object.keys(t).length===0?e:e.replace(A$,(r,i)=>t[i]??r)}function Ks(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function T$(e,t){let r=0,i=e.indexOf(t);for(;i!==-1;)r++,i=e.indexOf(t,i+t.length);return r}function R$(e,t){if(!e||!t)return e;const r=t.length;if(r===0||e.length===0)return e;let i=0;for(;e.indexOf(t,i)===i;)i=i+r;return e.substring(i)}function Rp(e,t){if(!e||!t)return e;const r=t.length,i=e.length;if(r===0||i===0)return e;let s=i,n=-1;for(;n=e.lastIndexOf(t,s-1),!(n===-1||n+r!==s);){if(n===0)return"";s=n}return e.substring(0,s)}function L$(e,t,r={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=Ks(e)),r.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e=e+"\\b"));let i="";return r.global&&(i+="g"),r.matchCase||(i+="i"),r.multiline&&(i+="m"),r.unicode&&(i+="u"),new RegExp(e,i)}function vb(e){return e.source==="^"||e.source==="^$"||e.source==="$"||e.source==="^\\s*$"?!1:!!(e.exec("")&&e.lastIndex===0)}function wb(e){return e.split(/\r\n|\r|\n/)}function Lp(e){for(let t=0,r=e.length;t<r;t++){const i=e.charCodeAt(t);if(i!==32&&i!==9)return t}return-1}function N$(e,t=e.length-1){for(let r=t;r>=0;r--){const i=e.charCodeAt(r);if(i!==32&&i!==9)return r}return-1}function F$(e,t,r){const i=[];let s=0;for(const n of e.matchAll(t)){if(i.push(e.slice(s,n.index)),n.index===void 0)throw new Error("match.index should be defined");s=n.index+n[0].length,i.push(r(n[0],...n.slice(1),n.index,e,n.groups))}return i.push(e.slice(s)),Promise.all(i).then(n=>n.join(""))}function en(e,t){return e<t?-1:e>t?1:0}function Np(e,t,r=0,i=e.length,s=0,n=t.length){for(;r<i&&s<n;r++,s++){const c=e.charCodeAt(r),l=t.charCodeAt(s);if(c<l)return-1;if(c>l)return 1}const o=i-r,a=n-s;return o<a?-1:o>a?1:0}function bb(e,t){return za(e,t,0,e.length,0,t.length)}function za(e,t,r=0,i=e.length,s=0,n=t.length){for(;r<i&&s<n;r++,s++){let c=e.charCodeAt(r),l=t.charCodeAt(s);if(c===l)continue;if(c>=128||l>=128)return Np(e.toLowerCase(),t.toLowerCase(),r,i,s,n);yb(c)&&(c-=32),yb(l)&&(l-=32);const u=c-l;if(u!==0)return u}const o=i-r,a=n-s;return o<a?-1:o>a?1:0}function yb(e){return e>=97&&e<=122}function ms(e,t){return e.length===t.length&&za(e,t)===0}function Fp(e,t){const r=t.length;return t.length>e.length?!1:za(e,t,0,r)===0}function M$(e,t){const r=Math.min(e.length,t.length);let i;for(i=0;i<r;i++)if(e.charCodeAt(i)!==t.charCodeAt(i))return i;return r}function bu(e){return 55296<=e&&e<=56319}function yu(e){return 56320<=e&&e<=57343}function Mp(e,t){return(e-55296<<10)+(t-56320)+65536}function Eb(e,t,r){const i=e.charCodeAt(r);if(bu(i)&&r+1<t){const s=e.charCodeAt(r+1);if(yu(s))return Mp(i,s)}return i}function O$(e,t){const r=e.charCodeAt(t-1);if(yu(r)&&t>1){const i=e.charCodeAt(t-2);if(bu(i))return Mp(i,r)}return r}var U$=class{get offset(){return this.e}constructor(e,t=0){this.c=e,this.d=e.length,this.e=t}setOffset(e){this.e=e}prevCodePoint(){const e=O$(this.c,this.e);return this.e-=e>=65536?2:1,e}nextCodePoint(){const e=Eb(this.c,this.d,this.e);return this.e+=e>=65536?2:1,e}eol(){return this.e>=this.d}},H$=class{get offset(){return this.c.offset}constructor(e,t=0){this.c=new U$(e,t)}nextGraphemeLength(){const e=Db.getInstance(),t=this.c,r=t.offset;let i=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const s=t.offset,n=e.getGraphemeBreakType(t.nextCodePoint());if(Ib(i,n)){t.setOffset(s);break}i=n}return t.offset-r}prevGraphemeLength(){const e=Db.getInstance(),t=this.c,r=t.offset;let i=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const s=t.offset,n=e.getGraphemeBreakType(t.prevCodePoint());if(Ib(n,i)){t.setOffset(s);break}i=n}return r-t.offset}eol(){return this.c.eol()}};function xb(e,t){return new H$(e,t).nextGraphemeLength()}var Op=void 0;function j$(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function kb(e){return Op||(Op=j$()),Op.test(e)}var B$=/^[\t\n\r\x20-\x7E]*$/;function _$(e){return B$.test(e)}var z$=/[\u2028\u2029]/;function $b(e){return z$.test(e)}var W$="\uFEFF";function V$(e){return!!(e&&e.length>0&&e.charCodeAt(0)===65279)}function Sb(e,t=!1){return e?(t&&(e=e.replace(/\\./g,"")),e.toLowerCase()!==e):!1}function q$(e,t=1){if(t===0)return"";let r=-1;do r=e.indexOf(`
`,r+1),t--;while(t>0&&r>=0);return r===-1?e:(e[r-1]==="\r"&&r--,e.substr(0,r))}function Ib(e,t){return e===0?t!==5&&t!==7:e===2&&t===3?!1:e===4||e===2||e===3||t===4||t===2||t===3?!0:!(e===8&&(t===8||t===9||t===11||t===12)||(e===11||e===9)&&(t===9||t===10)||(e===12||e===10)&&t===10||t===5||t===13||t===7||e===1||e===13&&t===14||e===6&&t===6)}var Cb;(function(e){e[e.Other=0]="Other",e[e.Prepend=1]="Prepend",e[e.CR=2]="CR",e[e.LF=3]="LF",e[e.Control=4]="Control",e[e.Extend=5]="Extend",e[e.Regional_Indicator=6]="Regional_Indicator",e[e.SpacingMark=7]="SpacingMark",e[e.L=8]="L",e[e.V=9]="V",e[e.T=10]="T",e[e.LV=11]="LV",e[e.LVT=12]="LVT",e[e.ZWJ=13]="ZWJ",e[e.Extended_Pictographic=14]="Extended_Pictographic"})(Cb||(Cb={}));var Db=class Vl{static{this.c=null}static getInstance(){return Vl.c||(Vl.c=new Vl),Vl.c}constructor(){this.d=G$()}getGraphemeBreakType(t){if(t<32)return t===10?3:t===13?2:4;if(t<127)return 0;const r=this.d,i=r.length/3;let s=1;for(;s<=i;)if(t<r[3*s])s=2*s;else if(t>r[3*s+1])s=2*s+1;else return r[3*s+2];return 0}};function G$(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}var Pb;(function(e){e[e.zwj=8205]="zwj",e[e.emojiVariantSelector=65039]="emojiVariantSelector",e[e.enclosingKeyCap=8419]="enclosingKeyCap"})(Pb||(Pb={}));var YF=class ql{static{this.c=new pr(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.d=new P$({getCacheKey:JSON.stringify},t=>{function r(u){const h=new Map;for(let p=0;p<u.length;p+=2)h.set(u[p],u[p+1]);return h}function i(u,h){const p=new Map(u);for(const[f,m]of h)p.set(f,m);return p}function s(u,h){if(!u)return h;const p=new Map;for(const[f,m]of u)h.has(f)&&p.set(f,m);return p}const n=this.c.value;let o=t.filter(u=>!u.startsWith("_")&&u in n);o.length===0&&(o=["_default"]);let a;for(const u of o){const h=r(n[u]);a=s(a,h)}const c=r(n._common),l=i(c,a);return new ql(l)})}static getInstance(t){return ql.d.get(Array.from(t))}static{this.e=new pr(()=>Object.keys(ql.c.value).filter(t=>!t.startsWith("_")))}static getLocales(){return ql.e.value}constructor(t){this.f=t}isAmbiguous(t){return this.f.has(t)}containsAmbiguousCharacter(t){for(let r=0;r<t.length;r++){const i=t.codePointAt(r);if(typeof i=="number"&&this.isAmbiguous(i))return!0}return!1}getPrimaryConfusable(t){return this.f.get(t)}getConfusableCodePoints(){return new Set(this.f.keys())}},ZF=class Gl{static c(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this.d=void 0}static e(){return this.d||(this.d=new Set(Gl.c())),this.d}static isInvisibleCharacter(t){return Gl.e().has(t)}static containsInvisibleCharacter(t){for(let r=0;r<t.length;r++){const i=t.codePointAt(r);if(typeof i=="number"&&Gl.isInvisibleCharacter(i))return!0}return!1}static get codePoints(){return Gl.e()}};function vs(e){return e===47||e===92}function Ab(e){return e.replace(/[\\/]/g,Te.sep)}function Q$(e){return e.indexOf("/")===-1&&(e=Ab(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}function Tb(e,t=Te.sep){if(!e)return"";const r=e.length,i=e.charCodeAt(0);if(vs(i)){if(vs(e.charCodeAt(1))&&!vs(e.charCodeAt(2))){let n=3;const o=n;for(;n<r&&!vs(e.charCodeAt(n));n++);if(o!==n&&!vs(e.charCodeAt(n+1))){for(n+=1;n<r;n++)if(vs(e.charCodeAt(n)))return e.slice(0,n+1).replace(/[\\/]/g,t)}}return t}else if(Rb(i)&&e.charCodeAt(1)===58)return vs(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let s=e.indexOf("://");if(s!==-1){for(s+=3;s<r;s++)if(vs(e.charCodeAt(s)))return e.slice(0,s+1)}return""}var J$=/[\\/:\*\?"<>\|]/g,X$=/[/]/g,Y$=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function Z$(e,t=tr){const r=t?J$:X$;return!(!e||e.length===0||/^\s+$/.test(e)||(r.lastIndex=0,r.test(e))||t&&Y$.test(e)||e==="."||e===".."||t&&e[e.length-1]==="."||t&&e.length!==e.trim().length||e.length>255)}function Eu(e,t,r,i=Wr){if(e===t)return!0;if(!e||!t||t.length>e.length)return!1;if(r){if(!Fp(e,t))return!1;if(t.length===e.length)return!0;let n=t.length;return t.charAt(t.length-1)===i&&n--,e.charAt(n)===i}return t.charAt(t.length-1)!==i&&(t+=i),e.indexOf(t)===0}function Rb(e){return e>=65&&e<=90||e>=97&&e<=122}function K$(e,t=tr){return t?Rb(e.charCodeAt(0))&&e.charCodeAt(1)===58:!1}var q;(function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.vscodeManagedRemoteResource="vscode-managed-remote-resource",e.vscodeUserData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",e.vscodeNotebookMetadata="vscode-notebook-metadata",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.vscodeChatCodeBlock="vscode-chat-code-block",e.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",e.vscodeChatSesssion="vscode-chat-editor",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls",e.vscodeSourceControl="vscode-scm",e.commentsInput="comment",e.codeSetting="code-setting",e.outputChannel="output",e.accessibleView="accessible-view"})(q||(q={}));function Up(e,t){return y.isUri(e)?ms(e.scheme,t):Fp(e,t+":")}function eS(e,...t){return t.some(r=>Up(e,r))}var tS="tkn",rS=class{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f="/"}setPreferredWebSchema(e){this.d=e}setDelegate(e){this.e=e}setServerRootPath(e,t){this.f=Te.join(t??"/",sS(e))}getServerRootPath(){return this.f}get g(){return Te.join(this.f,q.vscodeRemoteResource)}set(e,t,r){this.a[e]=t,this.b[e]=r}setConnectionToken(e,t){this.c[e]=t}getPreferredWebSchema(){return this.d}rewrite(e){if(this.e)try{return this.e(e)}catch(o){return gr(o),e}const t=e.authority;let r=this.a[t];r&&r.indexOf(":")!==-1&&r.indexOf("[")===-1&&(r=`[${r}]`);const i=this.b[t],s=this.c[t];let n=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(n+=`&${tS}=${encodeURIComponent(s)}`),y.from({scheme:Ba?this.d:q.vscodeRemoteResource,authority:`${r}:${i}`,path:this.g,query:n})}},iS=new rS;function sS(e){return`${e.quality??"oss"}-${e.commit??"dev"}`}var nS="vscode-app",oS=class Wf{static{this.a=nS}asBrowserUri(t){const r=this.b(t);return this.uriToBrowserUri(r)}uriToBrowserUri(t){return t.scheme===q.vscodeRemote?iS.rewrite(t):t.scheme===q.file&&(Bw||i$===`${q.vscodeFileResource}://${Wf.a}`)?t.with({scheme:q.vscodeFileResource,authority:t.authority||Wf.a,query:null,fragment:null}):t}asFileUri(t){const r=this.b(t);return this.uriToFileUri(r)}uriToFileUri(t){return t.scheme===q.vscodeFileResource?t.with({scheme:q.file,authority:t.authority!==Wf.a?t.authority:null,query:null,fragment:null}):t}b(t,r){if(y.isUri(t))return t;if(globalThis._VSCODE_FILE_ROOT){const i=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(i))return y.joinPath(y.parse(i,!0),t);const s=Dp(i,t);return y.file(s)}return y.parse(r.toUrl(t))}},aS=new oS,Lb;(function(e){const t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);e.CoopAndCoep=Object.freeze(t.get("3"));const r="vscode-coi";function i(n){let o;typeof n=="string"?o=new URL(n).searchParams:n instanceof URL?o=n.searchParams:y.isUri(n)&&(o=new URL(n.toString(!0)).searchParams);const a=o?.get(r);if(a)return t.get(a)}e.getHeadersFromQuery=i;function s(n,o,a){if(!globalThis.crossOriginIsolated)return;const c=o&&a?"3":a?"2":"1";n instanceof URLSearchParams?n.set(r,c):n[r]=c}e.addSearchParam=s})(Lb||(Lb={}));function qr(e){return pu(e,!0)}var Wa=class{constructor(e){this.a=e}compare(e,t,r=!1){return e===t?0:en(this.getComparisonKey(e,r),this.getComparisonKey(t,r))}isEqual(e,t,r=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,r)===this.getComparisonKey(t,r)}getComparisonKey(e,t=!1){return e.with({path:this.a(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this.a(e)}isEqualOrParent(e,t,r=!1){if(e.scheme===t.scheme){if(e.scheme===q.file)return Eu(qr(e),qr(t),this.a(e))&&e.query===t.query&&(r||e.fragment===t.fragment);if(Fb(e.authority,t.authority))return Eu(e.path,t.path,this.a(e),"/")&&e.query===t.query&&(r||e.fragment===t.fragment)}return!1}joinPath(e,...t){return y.joinPath(e,...t)}basenameOrAuthority(e){return Mi(e)||e.authority}basename(e){return Te.basename(e.path)}extname(e){return Te.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===q.file?t=y.file(no(qr(e))).path:(t=Te.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===q.file?t=y.file(so(qr(e))).path:t=Te.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!Fb(e.authority,t.authority))return;if(e.scheme===q.file){const s=_a(qr(e),qr(t));return tr?Ab(s):s}let r=e.path||"/";const i=t.path||"/";if(this.a(e)){let s=0;for(const n=Math.min(r.length,i.length);s<n&&!(r.charCodeAt(s)!==i.charCodeAt(s)&&r.charAt(s).toLowerCase()!==i.charAt(s).toLowerCase());s++);r=i.substr(0,s)+r.substr(s)}return Te.relative(r,i)}resolvePath(e,t){if(e.scheme===q.file){const r=y.file(b$(qr(e),t));return e.with({authority:r.authority,path:r.path})}return t=Q$(t),e.with({path:Te.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&ms(e,t)}hasTrailingPathSeparator(e,t=Wr){if(e.scheme===q.file){const r=qr(e);return r.length>Tb(r).length&&r[r.length-1]===t}else{const r=e.path;return r.length>1&&r.charCodeAt(r.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Wr){return Mb(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Wr){let r=!1;if(e.scheme===q.file){const i=qr(e);r=i!==void 0&&i.length===Tb(i).length&&i[i.length-1]===t}else{t="/";const i=e.path;r=i.length===1&&i.charCodeAt(i.length-1)===47}return!r&&!Mb(e,t)?e.with({path:e.path+"/"}):e}},Ne=new Wa(()=>!1),cS=new Wa(e=>e.scheme===q.file?!di:!0),lS=new Wa(e=>!0),Va=Ne.isEqual.bind(Ne),KF=Ne.isEqualOrParent.bind(Ne),eM=Ne.getComparisonKey.bind(Ne),Hp=Ne.basenameOrAuthority.bind(Ne),Mi=Ne.basename.bind(Ne),uS=Ne.extname.bind(Ne),xu=Ne.dirname.bind(Ne),Qt=Ne.joinPath.bind(Ne),tM=Ne.normalizePath.bind(Ne),Nb=Ne.relativePath.bind(Ne),rM=Ne.resolvePath.bind(Ne),hS=Ne.isAbsolutePath.bind(Ne),Fb=Ne.isEqualAuthority.bind(Ne),Mb=Ne.hasTrailingPathSeparator.bind(Ne),iM=Ne.removeTrailingPathSeparator.bind(Ne),sM=Ne.addTrailingPathSeparator.bind(Ne),Ob;(function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime";function t(r){const i=new Map;r.path.substring(r.path.indexOf(";")+1,r.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,c]=o.split(":");a&&c&&i.set(a,c)});const n=r.path.substring(0,r.path.indexOf(";"));return n&&i.set(e.META_DATA_MIME,n),i}e.parseMetaData=t})(Ob||(Ob={}));var dS=Symbol("MicrotaskDelay");function ws(e){return!!e&&typeof e.then=="function"}function fS(e){const t=new dt,r=e(t.token),i=new Promise((s,n)=>{const o=t.token.onCancellationRequested(()=>{o.dispose(),n(new ui)});Promise.resolve(r).then(a=>{o.dispose(),t.dispose(),s(a)},a=>{o.dispose(),t.dispose(),n(a)})});return new class{cancel(){t.cancel(),t.dispose()}then(s,n){return i.then(s,n)}catch(s){return this.then(void 0,s)}finally(s){return i.finally(s)}}}function Ub(e,t,r){return new Promise((i,s)=>{const n=t.onCancellationRequested(()=>{n.dispose(),i(r)});e.then(i,s).finally(()=>n.dispose())})}function pS(e,t){return new Promise((r,i)=>{const s=t.onCancellationRequested(()=>{s.dispose(),i(new ui)});e.then(r,i).finally(()=>s.dispose())})}function Wt(e){return new Promise((t,r)=>{const i=e();ws(i)?i.then(t,r):t(i)})}function gS(){let e,t;return{promise:new Promise((i,s)=>{e=i,t=s}),resolve:e,reject:t}}var mS=class{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(e){if(this.f)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=e,!this.b){const t=()=>{if(this.b=null,this.f)return;const r=this.queue(this.d);return this.d=null,r};this.b=new Promise(r=>{this.a.then(t,t).then(r)})}return new Promise((t,r)=>{this.b.then(t,r)})}return this.a=e(),new Promise((t,r)=>{this.a.then(i=>{this.a=null,t(i)},i=>{this.a=null,r(i)})})}dispose(){this.f=!0}},vS=(e,t)=>{let r=!0;const i=setTimeout(()=>{r=!1,t()},e);return{isTriggered:()=>r,dispose:()=>{clearTimeout(i),r=!1}}},wS=e=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,e())}),{isTriggered:()=>t,dispose:()=>{t=!1}}},bS=class{constructor(e){this.defaultDelay=e,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(e,t=this.defaultDelay){this.g=e,this.h(),this.b||(this.b=new Promise((i,s)=>{this.d=i,this.f=s}).then(()=>{if(this.b=null,this.d=null,this.g){const i=this.g;return this.g=null,i()}}));const r=()=>{this.a=null,this.d?.(null)};return this.a=t===dS?wS(r):vS(t,r),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new ui),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}},yS=class{constructor(e){this.a=new bS(e),this.b=new mS}trigger(e,t){return this.a.trigger(()=>this.b.queue(e),t)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}},pi=class{constructor(){this.a=!1,this.b=new Promise((e,t)=>{this.d=e})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}};function gi(e,t){return t?new Promise((r,i)=>{const s=setTimeout(()=>{n.dispose(),r()},e),n=t.onCancellationRequested(()=>{clearTimeout(s),n.dispose(),i(new ui)})}):fS(r=>gi(e,r))}function ES(e,t=0,r){const i=setTimeout(()=>{e(),r&&s.dispose()},t),s=ce(()=>{clearTimeout(i),r?.delete(s)});return r?.add(s),s}var xS=class{constructor(e){this.a=0,this.b=!1,this.f=e,this.g=[],this.d=0,this.h=new D}whenIdle(){return this.size>0?ht.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this.h.event}get size(){return this.a}queue(e){if(this.b)throw new Error("Object has been disposed");return this.a++,new Promise((t,r)=>{this.g.push({factory:e,c:t,e:r}),this.j()})}j(){for(;this.g.length&&this.d<this.f;){const e=this.g.shift();this.d++;const t=e.factory();t.then(e.c,e.e),t.then(()=>this.k(),()=>this.k())}}k(){this.b||(this.d--,--this.a===0&&this.h.fire(),this.g.length>0&&this.j())}clear(){if(this.b)throw new Error("Object has been disposed");this.g.length=0,this.a=this.d}dispose(){this.b=!0,this.g.length=0,this.a=0,this.h.dispose()}},kS=class extends xS{constructor(){super(1)}},$S=class{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const e=new co;return this.b.add(e),e.p}g(){for(const[,e]of this.a)if(e.size>0)return!1;return!0}queueSize(e,t=Ne){const r=t.getComparisonKey(e);return this.a.get(r)?.size??0}queueFor(e,t,r=Ne){const i=r.getComparisonKey(e);let s=this.a.get(i);if(!s){s=new kS;const n=this.f++,o=ht.once(s.onDrained)(()=>{s?.dispose(),this.a.delete(i),this.h(),this.d?.deleteAndDispose(n),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new gp),this.d.set(n,o),this.a.set(i,s)}return s.queue(t)}h(){this.g()&&this.j()}j(){for(const e of this.b)e.complete();this.b.clear()}dispose(){for(const[,e]of this.a)e.dispose();this.a.clear(),this.j(),this.d?.dispose()}},SS=class{constructor(){this.d=void 0,this.f=!1}cancel(){this.d?.dispose(),this.d=void 0}cancelAndSet(e,t,r=globalThis){if(this.f)throw new Qs("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const i=r.setInterval(()=>{e()},t);this.d=ce(()=>{r.clearInterval(i),this.d=void 0})}dispose(){this.cancel(),this.f=!0}},ao=class{constructor(e,t){this.b=-1,this.a=e,this.d=t,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(e=this.d){this.cancel(),this.b=setTimeout(this.f,e)}get delay(){return this.d}set delay(e){this.d=e}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}},Hb,ku;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?ku=(e,t,r)=>{zw(()=>{if(i)return;const s=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,s-Date.now())}}))});let i=!1;return{dispose(){i||(i=!0)}}}:ku=(e,t,r)=>{const i=e.requestIdleCallback(t,typeof r=="number"?{timeout:r}:void 0);let s=!1;return{dispose(){s||(s=!0,e.cancelIdleCallback(i))}}},Hb=(e,t)=>ku(globalThis,e,t)})();var IS=class{constructor(e,t){this.g=!1,this.d=()=>{try{this.j=t()}catch(r){this.l=r}finally{this.g=!0}},this.f=ku(e,()=>this.d())}dispose(){this.f.dispose()}get value(){if(this.g||(this.f.dispose(),this.d()),this.l)throw this.l;return this.j}get isInitialized(){return this.g}},CS=class extends IS{constructor(e){super(globalThis,e)}},jb;(function(e){e[e.Resolved=0]="Resolved",e[e.Rejected=1]="Rejected"})(jb||(jb={}));var co=class{get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((e,t)=>{this.a=e,this.b=t})}complete(e){return new Promise(t=>{this.a(e),this.d={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.b(e),this.d={outcome:1,value:e},t()})}cancel(){return this.error(new ui)}},lo;(function(e){async function t(i){let s;const n=await Promise.all(i.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return n}e.settled=t;function r(i){return new Promise(async(s,n)=>{try{await i(s,n)}catch(o){n(o)}})}e.withAsyncBody=r})(lo||(lo={}));var Bb;(function(e){e[e.Initial=0]="Initial",e[e.DoneOK=1]="DoneOK",e[e.DoneError=2]="DoneError"})(Bb||(Bb={}));var qa=class Nr{static fromArray(t){return new Nr(r=>{r.emitMany(t)})}static fromPromise(t){return new Nr(async r=>{r.emitMany(await t)})}static fromPromisesResolveOrder(t){return new Nr(async r=>{await Promise.all(t.map(async i=>r.emitOne(await i)))})}static merge(t){return new Nr(async r=>{await Promise.all(t.map(async i=>{for await(const s of i)r.emitOne(s)}))})}static{this.EMPTY=Nr.fromArray([])}constructor(t,r){this.a=0,this.b=[],this.d=null,this.f=r,this.g=new D,queueMicrotask(async()=>{const i={emitOne:s=>this.h(s),emitMany:s=>this.j(s),reject:s=>this.l(s)};try{await Promise.resolve(t(i)),this.k()}catch(s){this.l(s)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await ht.toPromise(this.g.event)}while(!0)},return:async()=>(this.f?.(),{done:!0,value:void 0})}}static map(t,r){return new Nr(async i=>{for await(const s of t)i.emitOne(r(s))})}map(t){return Nr.map(this,t)}static filter(t,r){return new Nr(async i=>{for await(const s of t)r(s)&&i.emitOne(s)})}filter(t){return Nr.filter(this,t)}static coalesce(t){return Nr.filter(t,r=>!!r)}coalesce(){return Nr.coalesce(this)}static async toPromise(t){const r=[];for await(const i of t)r.push(i);return r}toPromise(){return Nr.toPromise(this)}h(t){this.a===0&&(this.b.push(t),this.g.fire())}j(t){this.a===0&&(this.b=this.b.concat(t),this.g.fire())}k(){this.a===0&&(this.a=1,this.g.fire())}l(t){this.a===0&&(this.a=2,this.d=t,this.g.fire())}},jp=class{constructor(e){this.a=new co,this.b=new qa(i=>{if(t){i.reject(t);return}return r&&i.emitMany(r),this.d=s=>i.reject(s),this.f=s=>i.emitOne(s),this.a.p},e);let t,r;this.f=i=>{r||(r=[]),r.push(i)},this.d=i=>{t||(t=i)}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(e){this.d(e),this.a.complete()}emitOne(e){this.f(e)}},nM=new class{transformIncoming(e){return e}transformOutgoing(e){return e}transformOutgoingURI(e){return e}transformOutgoingScheme(e){return e}};function _b(e,t,r,i){if(!e||i>200)return null;if(typeof e=="object"){if(e.$mid===1)return r?y.revive(t.transformIncoming(e)):t.transformIncoming(e);if(e instanceof ke)return null;for(const s in e)if(Object.hasOwnProperty.call(e,s)){const n=_b(e[s],t,r,i+1);n!==null&&(e[s]=n)}}return null}function Ga(e,t){const r=_b(e,t,!1,0);return r===null?e:r}var zb=class{constructor(){this.a=null,this.b=null,this.d=null,this.f=!1,this.g=null,this.h=!1,this.i=null}get[Symbol.toStringTag](){return this.toString()}j(){return this.a||(this.a=new Promise((e,t)=>{this.b=e,this.d=t,this.f&&this.b(this.g),this.h&&this.d(this.i)})),this.a}resolveOk(e){this.f||this.h||(this.f=!0,this.g=e,this.a&&this.b(e))}resolveErr(e){this.f||this.h||(this.h=!0,this.i=e,this.a?this.d(e):gr(e))}then(e,t){return this.j().then(e,t)}catch(e){return this.j().then(void 0,e)}finally(e){return this.j().finally(e)}},DS=class extends zb{constructor(){super(),this.h=!0,this.i=new ui}},Wb;function Bp(e,t){try{return JSON.stringify(e,t)}catch{return"null"}}var _p="$$ref$$",PS={[_p]:-1};function Vb(e,t=null,r=!1){const i=[];return{jsonString:(r?Bp:JSON.stringify)(e,(n,o)=>{if(typeof o>"u")return PS;if(typeof o=="object"){if(o instanceof ke){const a=i.push(o)-1;return{[_p]:a}}if(t)return t(n,o)}return o}),referencedBuffers:i}}function qb(e,t,r){return JSON.parse(e,(i,s)=>{if(s){const n=s[_p];if(typeof n=="number")return t[n];if(r&&s.$mid===1)return r.transformIncoming(s)}return s})}function Gb(e,t){return JSON.stringify(e,t)}function AS(e){return e?(t,r)=>r&&r.$mid===1?e.transformOutgoing(r):r:null}var Qb;(function(e){e[e.LocalSide=0]="LocalSide",e[e.OtherSide=1]="OtherSide"})(Qb||(Qb={}));var Jb;(function(e){e[e.Responsive=0]="Responsive",e[e.Unresponsive=1]="Unresponsive"})(Jb||(Jb={}));var TS=()=>{},RS=Symbol.for("rpcProtocol"),LS=Symbol.for("rpcProxy"),NS=class _0 extends he{static{Wb=RS}static{this.a=3*1e3}constructor(t,r=null,i=null){super(),this[Wb]=!0,this.b=this.B(new D),this.onDidChangeResponsiveState=this.b.event,this.c=t,this.f=r,this.g=i,this.h=AS(this.g),this.j=!1,this.m=[],this.s=[];for(let s=0,n=ib.count;s<n;s++)this.m[s]=null,this.s[s]=null;this.t=0,this.u=Object.create(null),this.w={},this.y=0,this.z=0,this.C=0,this.D=this.B(new ao(()=>this.H(),1e3)),this.B(this.c.onMessage(s=>this.L(s)))}dispose(){this.j=!0,Object.keys(this.w).forEach(t=>{const r=this.w[t];delete this.w[t],r.resolveErr(uw())}),super.dispose()}drain(){return typeof this.c.drain=="function"?this.c.drain():Promise.resolve()}F(t){this.z===0&&(this.C=Date.now()+_0.a),this.z++,this.D.isScheduled()||this.D.schedule()}G(t){this.C=Date.now()+_0.a,this.z--,this.z===0&&this.D.cancel(),this.I(0)}H(){this.z!==0&&(Date.now()>this.C?this.I(1):this.D.schedule())}I(t){this.y!==t&&(this.y=t,this.b.fire(this.y))}get responsiveState(){return this.y}transformIncomingURIs(t){return this.g?Ga(t,this.g):t}getProxy(t){const{nid:r,sid:i}=t;return this.s[r]||(this.s[r]=this.J(r,i)),this.s[r]}J(t,r){const i={get:(s,n)=>(typeof n=="string"&&!s[n]&&n.charCodeAt(0)===36&&(s[n]=(...o)=>this.U(t,n,o)),n===LS?r:s[n])};return new Proxy(Object.create(null),i)}set(t,r){return this.m[t.nid]=r,r}assertRegistered(t){for(let r=0,i=t.length;r<i;r++){const s=t[r];if(!this.m[s.nid])throw new Error(`Missing proxy instance ${s.sid}`)}}L(t){if(this.j)return;const r=t.byteLength,i=vt.read(t,0),s=i.readUInt8(),n=i.readUInt32();switch(s){case 1:case 2:{let{rpcId:o,method:a,args:c}=Or.deserializeRequestJSONArgs(i);this.g&&(c=Ga(c,this.g)),this.M(r,n,o,a,c,s===2);break}case 3:case 4:{let{rpcId:o,method:a,args:c}=Or.deserializeRequestMixedArgs(i);this.g&&(c=Ga(c,this.g)),this.M(r,n,o,a,c,s===4);break}case 5:{this.f?.logIncoming(r,n,0,"ack"),this.G(n);break}case 6:{this.N(r,n);break}case 7:{this.O(r,n,void 0);break}case 9:{let o=Or.deserializeReplyOKJSON(i);this.g&&(o=Ga(o,this.g)),this.O(r,n,o);break}case 10:{const o=Or.deserializeReplyOKJSONWithBuffers(i,this.g);this.O(r,n,o);break}case 8:{const o=Or.deserializeReplyOKVSBuffer(i);this.O(r,n,o);break}case 11:{let o=Or.deserializeReplyErrError(i);this.g&&(o=Ga(o,this.g)),this.P(r,n,o);break}case 12:{this.P(r,n,void 0);break}default:console.error("received unexpected message"),console.error(t)}}M(t,r,i,s,n,o){this.f?.logIncoming(t,r,1,`receiveRequest ${mu(i)}.${s}(`,n);const a=String(r);let c,l;if(o){const h=new dt;n.push(h.token),c=this.Q(i,s,n),l=()=>h.cancel()}else c=this.Q(i,s,n),l=TS;this.u[a]=l;const u=Or.serializeAcknowledged(r);this.f?.logOutgoing(u.byteLength,r,1,"ack"),this.c.send(u),c.then(h=>{delete this.u[a];const p=Or.serializeReplyOK(r,h,this.h);this.f?.logOutgoing(p.byteLength,r,1,"reply:",h),this.c.send(p)},h=>{delete this.u[a];const p=Or.serializeReplyErr(r,h);this.f?.logOutgoing(p.byteLength,r,1,"replyErr:",h),this.c.send(p)})}N(t,r){this.f?.logIncoming(t,r,1,"receiveCancel");const i=String(r);this.u[i]?.()}O(t,r,i){this.f?.logIncoming(t,r,0,"receiveReply:",i);const s=String(r);if(!this.w.hasOwnProperty(s))return;const n=this.w[s];delete this.w[s],n.resolveOk(i)}P(t,r,i){this.f?.logIncoming(t,r,0,"receiveReplyErr:",i);const s=String(r);if(!this.w.hasOwnProperty(s))return;const n=this.w[s];delete this.w[s];let o;i&&(i.$isError?(o=new Error,o.name=i.name,o.message=i.message,o.stack=i.stack):o=i),n.resolveErr(o)}Q(t,r,i){try{return Promise.resolve(this.S(t,r,i))}catch(s){return Promise.reject(s)}}S(t,r,i){const s=this.m[t];if(!s)throw new Error("Unknown actor "+mu(t));const n=s[r];if(typeof n!="function")throw new Error("Unknown method "+r+" on actor "+mu(t));return n.apply(s,i)}U(t,r,i){if(this.j)return new DS;let s=null;if(i.length>0&&st.isCancellationToken(i[i.length-1])&&(s=i.pop()),s&&s.isCancellationRequested)return Promise.reject(uw());const n=Or.serializeRequestArguments(i,this.h),o=++this.t,a=String(o),c=new zb,l=new me;s&&l.add(s.onCancellationRequested(()=>{const h=Or.serializeCancel(o);this.f?.logOutgoing(h.byteLength,o,0,"cancel"),this.c.send(h)})),this.w[a]=new FS(c,l),this.F(o);const u=Or.serializeRequest(o,t,r,n,!!s);return this.f?.logOutgoing(u.byteLength,o,0,`request: ${mu(t)}.${r}(`,i),this.c.send(u),c}},FS=class{constructor(e,t){this.a=e,this.b=t}resolveOk(e){this.a.resolveOk(e),this.b.dispose()}resolveErr(e){this.a.resolveErr(e),this.b.dispose()}},vt=class z0{static alloc(t,r,i){const s=new z0(ke.alloc(i+1+4),0);return s.writeUInt8(t),s.writeUInt32(r),s}static read(t,r){return new z0(t,r)}get buffer(){return this.a}constructor(t,r){this.a=t,this.b=r}static sizeUInt8(){return 1}static{this.sizeUInt32=4}writeUInt8(t){this.a.writeUInt8(t,this.b),this.b+=1}readUInt8(){const t=this.a.readUInt8(this.b);return this.b+=1,t}writeUInt32(t){this.a.writeUInt32BE(t,this.b),this.b+=4}readUInt32(){const t=this.a.readUInt32BE(this.b);return this.b+=4,t}static sizeShortString(t){return 1+t.byteLength}writeShortString(t){this.a.writeUInt8(t.byteLength,this.b),this.b+=1,this.a.set(t,this.b),this.b+=t.byteLength}readShortString(){const t=this.a.readUInt8(this.b);this.b+=1;const i=this.a.slice(this.b,this.b+t).toString();return this.b+=t,i}static sizeLongString(t){return 4+t.byteLength}writeLongString(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readLongString(){const t=this.a.readUInt32BE(this.b);this.b+=4;const i=this.a.slice(this.b,this.b+t).toString();return this.b+=t,i}writeBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}static sizeVSBuffer(t){return 4+t.byteLength}writeVSBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readVSBuffer(){const t=this.a.readUInt32BE(this.b);this.b+=4;const r=this.a.slice(this.b,this.b+t);return this.b+=t,r}static sizeMixedArray(t){let r=0;r+=1;for(let i=0,s=t.length;i<s;i++){const n=t[i];switch(r+=1,n.type){case 1:r+=this.sizeLongString(n.value);break;case 2:r+=this.sizeVSBuffer(n.value);break;case 3:r+=this.sizeUInt32,r+=this.sizeLongString(n.value);for(let o=0;o<n.buffers.length;++o)r+=this.sizeVSBuffer(n.buffers[o]);break;case 4:break}}return r}writeMixedArray(t){this.a.writeUInt8(t.length,this.b),this.b+=1;for(let r=0,i=t.length;r<i;r++){const s=t[r];switch(s.type){case 1:this.writeUInt8(1),this.writeLongString(s.value);break;case 2:this.writeUInt8(2),this.writeVSBuffer(s.value);break;case 3:this.writeUInt8(3),this.writeUInt32(s.buffers.length),this.writeLongString(s.value);for(let n=0;n<s.buffers.length;++n)this.writeBuffer(s.buffers[n]);break;case 4:this.writeUInt8(4);break}}}readMixedArray(){const t=this.a.readUInt8(this.b);this.b+=1;const r=new Array(t);for(let i=0;i<t;i++)switch(this.readUInt8()){case 1:r[i]=this.readLongString();break;case 2:r[i]=this.readVSBuffer();break;case 3:{const n=this.readUInt32(),o=this.readLongString(),a=[];for(let c=0;c<n;++c)a.push(this.readVSBuffer());r[i]=new Cr(qb(o,a,null));break}case 4:r[i]=void 0;break}return r}},Xb;(function(e){e[e.Simple=0]="Simple",e[e.Mixed=1]="Mixed"})(Xb||(Xb={}));var Or=class{static a(e){for(let t=0,r=e.length;t<r;t++)if(e[t]instanceof ke||e[t]instanceof Cr||typeof e[t]>"u")return!0;return!1}static serializeRequestArguments(e,t){if(this.a(e)){const r=[];for(let i=0,s=e.length;i<s;i++){const n=e[i];if(n instanceof ke)r[i]={type:2,value:n};else if(typeof n>"u")r[i]={type:4};else if(n instanceof Cr){const{jsonString:o,referencedBuffers:a}=Vb(n.value,t);r[i]={type:3,value:ke.fromString(o),buffers:a}}else r[i]={type:1,value:ke.fromString(Gb(n,t))}}return{type:1,args:r}}return{type:0,args:Gb(e,t)}}static serializeRequest(e,t,r,i,s){switch(i.type){case 0:return this.b(e,t,r,i.args,s);case 1:return this.c(e,t,r,i.args,s)}}static b(e,t,r,i,s){const n=ke.fromString(r),o=ke.fromString(i);let a=0;a+=vt.sizeUInt8(),a+=vt.sizeShortString(n),a+=vt.sizeLongString(o);const c=vt.alloc(s?2:1,e,a);return c.writeUInt8(t),c.writeShortString(n),c.writeLongString(o),c.buffer}static deserializeRequestJSONArgs(e){const t=e.readUInt8(),r=e.readShortString(),i=e.readLongString();return{rpcId:t,method:r,args:JSON.parse(i)}}static c(e,t,r,i,s){const n=ke.fromString(r);let o=0;o+=vt.sizeUInt8(),o+=vt.sizeShortString(n),o+=vt.sizeMixedArray(i);const a=vt.alloc(s?4:3,e,o);return a.writeUInt8(t),a.writeShortString(n),a.writeMixedArray(i),a.buffer}static deserializeRequestMixedArgs(e){const t=e.readUInt8(),r=e.readShortString(),i=e.readMixedArray(),s=new Array(i.length);for(let n=0,o=i.length;n<o;n++){const a=i[n];typeof a=="string"?s[n]=JSON.parse(a):s[n]=a}return{rpcId:t,method:r,args:s}}static serializeAcknowledged(e){return vt.alloc(5,e,0).buffer}static serializeCancel(e){return vt.alloc(6,e,0).buffer}static serializeReplyOK(e,t,r){if(typeof t>"u")return this.d(e);if(t instanceof ke)return this.e(e,t);if(t instanceof Cr){const{jsonString:i,referencedBuffers:s}=Vb(t.value,r,!0);return this.g(e,i,s)}else return this.f(e,Bp(t,r))}static d(e){return vt.alloc(7,e,0).buffer}static e(e,t){let r=0;r+=vt.sizeVSBuffer(t);const i=vt.alloc(8,e,r);return i.writeVSBuffer(t),i.buffer}static deserializeReplyOKVSBuffer(e){return e.readVSBuffer()}static f(e,t){const r=ke.fromString(t);let i=0;i+=vt.sizeLongString(r);const s=vt.alloc(9,e,i);return s.writeLongString(r),s.buffer}static g(e,t,r){const i=ke.fromString(t);let s=0;s+=vt.sizeUInt32,s+=vt.sizeLongString(i);for(const o of r)s+=vt.sizeVSBuffer(o);const n=vt.alloc(10,e,s);n.writeUInt32(r.length),n.writeLongString(i);for(const o of r)n.writeBuffer(o);return n.buffer}static deserializeReplyOKJSON(e){const t=e.readLongString();return JSON.parse(t)}static deserializeReplyOKJSONWithBuffers(e,t){const r=e.readUInt32(),i=e.readLongString(),s=[];for(let n=0;n<r;++n)s.push(e.readVSBuffer());return new Cr(qb(i,s,t))}static serializeReplyErr(e,t){const r=t?Bp(Yn(t),null):void 0;if(typeof r!="string")return this.h(e);const i=ke.fromString(r);let s=0;s+=vt.sizeLongString(i);const n=vt.alloc(11,e,s);return n.writeLongString(i),n.buffer}static deserializeReplyErrError(e){const t=e.readLongString();return JSON.parse(t)}static h(e){return vt.alloc(12,e,0).buffer}},Yb;(function(e){e[e.RequestJSONArgs=1]="RequestJSONArgs",e[e.RequestJSONArgsWithCancellation=2]="RequestJSONArgsWithCancellation",e[e.RequestMixedArgs=3]="RequestMixedArgs",e[e.RequestMixedArgsWithCancellation=4]="RequestMixedArgsWithCancellation",e[e.Acknowledged=5]="Acknowledged",e[e.Cancel=6]="Cancel",e[e.ReplyOKEmpty=7]="ReplyOKEmpty",e[e.ReplyOKVSBuffer=8]="ReplyOKVSBuffer",e[e.ReplyOKJSON=9]="ReplyOKJSON",e[e.ReplyOKJSONWithBuffers=10]="ReplyOKJSONWithBuffers",e[e.ReplyErrError=11]="ReplyErrError",e[e.ReplyErrEmpty=12]="ReplyErrEmpty"})(Yb||(Yb={}));var Zb;(function(e){e[e.String=1]="String",e[e.VSBuffer=2]="VSBuffer",e[e.SerializedObjectWithBuffers=3]="SerializedObjectWithBuffers",e[e.Undefined=4]="Undefined"})(Zb||(Zb={}));var Gr;(function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies";function t(r){return r[e.DI_DEPENDENCIES]||[]}e.getServiceDependencies=t})(Gr||(Gr={}));var $u=_("instantiationService");function MS(e,t,r){t[Gr.DI_TARGET]===t?t[Gr.DI_DEPENDENCIES].push({id:e,index:r}):(t[Gr.DI_DEPENDENCIES]=[{id:e,index:r}],t[Gr.DI_TARGET]=t)}function _(e){if(Gr.serviceIds.has(e))return Gr.serviceIds.get(e);const t=function(r,i,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");MS(t,r,s)};return t.toString=()=>e,Gr.serviceIds.set(e,t),t}function oM(e){return e}function zp(e){if(!e)return;const t=e.indexOf("+");return t<0?e:e.substr(0,t)}var OS=["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"],Kb;(function(e){e[e.System=0]="System",e[e.User=1]="User"})(Kb||(Kb={}));var ey;(function(e){e.WIN32_X64="win32-x64",e.WIN32_ARM64="win32-arm64",e.LINUX_X64="linux-x64",e.LINUX_ARM64="linux-arm64",e.LINUX_ARMHF="linux-armhf",e.ALPINE_X64="alpine-x64",e.ALPINE_ARM64="alpine-arm64",e.DARWIN_X64="darwin-x64",e.DARWIN_ARM64="darwin-arm64",e.WEB="web",e.UNIVERSAL="universal",e.UNKNOWN="unknown",e.UNDEFINED="undefined"})(ey||(ey={}));var Ue=class{constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(typeof e>"u"||e===null)return typeof t>"u"||t===null;if(typeof t>"u"||t===null)return!1;if(typeof e=="string"||typeof t=="string"){const r=typeof e=="string"?e:e.value,i=typeof t=="string"?t:t.value;return ms(r,i)}return e._lower===t._lower}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}},tn=class{get size(){return this.c.size}constructor(e){if(this.c=new Set,e)for(const t of e)this.add(t)}add(e){this.c.add(Ue.toKey(e))}delete(e){return this.c.delete(Ue.toKey(e))}has(e){return this.c.has(Ue.toKey(e))}},Oi=class{constructor(){this.c=new Map}clear(){this.c.clear()}delete(e){this.c.delete(Ue.toKey(e))}get(e){return this.c.get(Ue.toKey(e))}has(e){return this.c.has(Ue.toKey(e))}set(e,t){this.c.set(Ue.toKey(e),t)}values(){return this.c.values()}forEach(e){this.c.forEach(e)}[Symbol.iterator](){return this.c[Symbol.iterator]()}},ty=class extends Error{constructor(e,t,r){super(`Error in extension ${Ue.toKey(e)}: ${r??t.message}`,{cause:t}),this.name="ExtensionError",this.extension=e}},aM=_("IBuiltinExtensionsScannerService");function Wp(e,t){return t&&(e.stack||e.stacktrace)?d(110,null,iy(e),ry(e.stack)||ry(e.stacktrace)):iy(e)}function ry(e){return Array.isArray(e)?e.join(`
`):e}function iy(e){return e.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${e.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof e.code=="string"&&typeof e.errno=="number"&&typeof e.syscall=="string"?d(111,null,e.message):e.message||d(112,null)}function rn(e=null,t=!1){if(!e)return d(113,null);if(Array.isArray(e)){const r=Rt(e),i=rn(r[0],t);return r.length>1?d(114,null,i,r.length):i}if(Ce(e))return e;if(e.detail){const r=e.detail;if(r.error)return Wp(r.error,t);if(r.exception)return Wp(r.exception,t)}return e.stack?Wp(e,t):e.message?e.message:d(115,null)}function Qa(e){return Vp(e,0)}function Vp(e,t){switch(typeof e){case"object":return e===null?Ui(349,t):Array.isArray(e)?HS(e,t):jS(e,t);case"string":return sy(e,t);case"boolean":return US(e,t);case"number":return Ui(e,t);case"undefined":return Ui(937,t);default:return Ui(617,t)}}function Ui(e,t){return(t<<5)-t+e|0}function US(e,t){return Ui(e?433:863,t)}function sy(e,t){t=Ui(149417,t);for(let r=0,i=e.length;r<i;r++)t=Ui(e.charCodeAt(r),t);return t}function HS(e,t){return t=Ui(104579,t),e.reduce((r,i)=>Vp(i,r),t)}function jS(e,t){return t=Ui(181387,t),Object.keys(e).sort().reduce((r,i)=>(r=sy(i,r),Vp(e[i],r)),t)}var ny;(function(e){e[e.BLOCK_SIZE=64]="BLOCK_SIZE",e[e.UNICODE_REPLACEMENT=65533]="UNICODE_REPLACEMENT"})(ny||(ny={}));function qp(e,t,r=32){const i=r-t,s=~((1<<i)-1);return(e<<t|(s&e)>>>i)>>>0}function Ja(e,t=32){return e instanceof ArrayBuffer?Array.from(new Uint8Array(e)).map(r=>r.toString(16).padStart(2,"0")).join(""):(e>>>0).toString(16).padStart(t/4,"0")}var cM=class Lx{static{this.g=new DataView(new ArrayBuffer(320))}constructor(){this.h=1732584193,this.l=4023233417,this.m=2562383102,this.n=271733878,this.o=3285377520,this.p=new Uint8Array(67),this.q=new DataView(this.p.buffer),this.r=0,this.t=0,this.u=0,this.v=!1}update(t){const r=t.length;if(r===0)return;const i=this.p;let s=this.r,n=this.u,o,a;for(n!==0?(o=n,a=-1,n=0):(o=t.charCodeAt(0),a=0);;){let c=o;if(bu(o))if(a+1<r){const l=t.charCodeAt(a+1);yu(l)?(a++,c=Mp(o,l)):c=65533}else{n=o;break}else yu(o)&&(c=65533);if(s=this.w(i,s,c),a++,a<r)o=t.charCodeAt(a);else break}this.r=s,this.u=n}w(t,r,i){return i<128?t[r++]=i:i<2048?(t[r++]=192|(i&1984)>>>6,t[r++]=128|(i&63)>>>0):i<65536?(t[r++]=224|(i&61440)>>>12,t[r++]=128|(i&4032)>>>6,t[r++]=128|(i&63)>>>0):(t[r++]=240|(i&1835008)>>>18,t[r++]=128|(i&258048)>>>12,t[r++]=128|(i&4032)>>>6,t[r++]=128|(i&63)>>>0),r>=64&&(this.y(),r-=64,this.t+=64,t[0]=t[64],t[1]=t[65],t[2]=t[66]),r}digest(){return this.v||(this.v=!0,this.u&&(this.u=0,this.r=this.w(this.p,this.r,65533)),this.t+=this.r,this.x()),Ja(this.h)+Ja(this.l)+Ja(this.m)+Ja(this.n)+Ja(this.o)}x(){this.p[this.r++]=128,this.p.subarray(this.r).fill(0),this.r>56&&(this.y(),this.p.fill(0));const t=8*this.t;this.q.setUint32(56,Math.floor(t/4294967296),!1),this.q.setUint32(60,t%4294967296,!1),this.y()}y(){const t=Lx.g,r=this.q;for(let h=0;h<64;h+=4)t.setUint32(h,r.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)t.setUint32(h,qp(t.getUint32(h-12,!1)^t.getUint32(h-32,!1)^t.getUint32(h-56,!1)^t.getUint32(h-64,!1),1),!1);let i=this.h,s=this.l,n=this.m,o=this.n,a=this.o,c,l,u;for(let h=0;h<80;h++)h<20?(c=s&n|~s&o,l=1518500249):h<40?(c=s^n^o,l=1859775393):h<60?(c=s&n|s&o|n&o,l=2400959708):(c=s^n^o,l=3395469782),u=qp(i,5)+c+a+l+t.getUint32(h*4,!1)&4294967295,a=o,o=n,n=qp(s,30),s=i,i=u;this.h=this.h+i&4294967295,this.l=this.l+s&4294967295,this.m=this.m+n&4294967295,this.n=this.n+o&4294967295,this.o=this.o+a&4294967295}},oy;(function(e){e[e.LParen=0]="LParen",e[e.RParen=1]="RParen",e[e.Neg=2]="Neg",e[e.Eq=3]="Eq",e[e.NotEq=4]="NotEq",e[e.Lt=5]="Lt",e[e.LtEq=6]="LtEq",e[e.Gt=7]="Gt",e[e.GtEq=8]="GtEq",e[e.RegexOp=9]="RegexOp",e[e.RegexStr=10]="RegexStr",e[e.True=11]="True",e[e.False=12]="False",e[e.In=13]="In",e[e.Not=14]="Not",e[e.And=15]="And",e[e.Or=16]="Or",e[e.Str=17]="Str",e[e.QuotedStr=18]="QuotedStr",e[e.Error=19]="Error",e[e.EOF=20]="EOF"})(oy||(oy={}));function Gp(...e){switch(e.length){case 1:return d(1765,null,e[0]);case 2:return d(1766,null,e[0],e[1]);case 3:return d(1767,null,e[0],e[1],e[2]);default:return}}var BS=d(1768,null),_S=d(1769,null),Xa=class W0{constructor(){this.c="",this.d=0,this.e=0,this.f=[],this.g=[],this.m=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(t){switch(t.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return t.isTripleEq?"===":"==";case 4:return t.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return t.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return t.lexeme;case 18:return t.lexeme;case 19:return t.lexeme;case 20:return"EOF";default:throw cp(`unhandled token type: ${JSON.stringify(t)}; have you forgotten to add a case?`)}}static{this.a=new Set(["i","g","s","m","y","u"].map(t=>t.charCodeAt(0)))}static{this.b=new Map([["not",14],["in",13],["false",12],["true",11]])}get errors(){return this.g}reset(t){return this.c=t,this.d=0,this.e=0,this.f=[],this.g=[],this}scan(){for(;!this.r();)switch(this.d=this.e,this.i()){case 40:this.k(0);break;case 41:this.k(1);break;case 33:if(this.h(61)){const r=this.h(61);this.f.push({type:4,offset:this.d,isTripleEq:r})}else this.k(2);break;case 39:this.o();break;case 47:this.q();break;case 61:if(this.h(61)){const r=this.h(61);this.f.push({type:3,offset:this.d,isTripleEq:r})}else this.h(126)?this.k(9):this.l(Gp("==","=~"));break;case 60:this.k(this.h(61)?6:5);break;case 62:this.k(this.h(61)?8:7);break;case 38:this.h(38)?this.k(15):this.l(Gp("&&"));break;case 124:this.h(124)?this.k(16):this.l(Gp("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this.n()}return this.d=this.e,this.k(20),Array.from(this.f)}h(t){return this.r()||this.c.charCodeAt(this.e)!==t?!1:(this.e++,!0)}i(){return this.c.charCodeAt(this.e++)}j(){return this.r()?0:this.c.charCodeAt(this.e)}k(t){this.f.push({type:t,offset:this.d})}l(t){const r=this.d,i=this.c.substring(this.d,this.e),s={type:19,offset:this.d,lexeme:i};this.g.push({offset:r,lexeme:i,additionalInfo:t}),this.f.push(s)}n(){this.m.lastIndex=this.d;const t=this.m.exec(this.c);if(t){this.e=this.d+t[0].length;const r=this.c.substring(this.d,this.e),i=W0.b.get(r);i?this.k(i):this.f.push({type:17,lexeme:r,offset:this.d})}}o(){for(;this.j()!==39&&!this.r();)this.i();if(this.r()){this.l(BS);return}this.i(),this.f.push({type:18,lexeme:this.c.substring(this.d+1,this.e-1),offset:this.d+1})}q(){let t=this.e,r=!1,i=!1;for(;;){if(t>=this.c.length){this.e=t,this.l(_S);return}const n=this.c.charCodeAt(t);if(r)r=!1;else if(n===47&&!i){t++;break}else n===91?i=!0:n===92?r=!0:n===93&&(i=!1);t++}for(;t<this.c.length&&W0.a.has(this.c.charCodeAt(t));)t++;this.e=t;const s=this.c.substring(this.d,this.e);this.f.push({type:10,lexeme:s,offset:this.d})}r(){return this.e>=this.c.length}},Ft=new Map;Ft.set("false",!1),Ft.set("true",!0),Ft.set("isMac",Ir),Ft.set("isLinux",di),Ft.set("isWindows",tr),Ft.set("isWeb",Ba),Ft.set("isMacNative",Ir&&!Ba),Ft.set("isEdge",Qw),Ft.set("isFirefox",c$),Ft.set("isChrome",Sp),Ft.set("isSafari",l$);var zS=Object.prototype.hasOwnProperty,ay;(function(e){e[e.False=0]="False",e[e.True=1]="True",e[e.Defined=2]="Defined",e[e.Not=3]="Not",e[e.Equals=4]="Equals",e[e.NotEquals=5]="NotEquals",e[e.And=6]="And",e[e.Regex=7]="Regex",e[e.NotRegex=8]="NotRegex",e[e.Or=9]="Or",e[e.In=10]="In",e[e.NotIn=11]="NotIn",e[e.Greater=12]="Greater",e[e.GreaterEquals=13]="GreaterEquals",e[e.Smaller=14]="Smaller",e[e.SmallerEquals=15]="SmallerEquals"})(ay||(ay={}));var WS={regexParsingWithErrorRecovery:!0},VS=d(1745,null),qS=d(1746,null),GS=d(1747,null),cy=d(1748,null),QS=d(1749,null),JS=d(1750,null),XS=d(1751,null),YS=d(1752,null),ly=class Ql{static{this.c=new Error}get lexingErrors(){return this.d.errors}get parsingErrors(){return this.h}constructor(t=WS){this.k=t,this.d=new Xa,this.f=[],this.g=0,this.h=[],this.v=/g|y/g}parse(t){if(t===""){this.h.push({message:VS,offset:0,lexeme:"",additionalInfo:qS});return}this.f=this.d.reset(t).scan(),this.g=0,this.h=[];try{const r=this.l();if(!this.E()){const i=this.D(),s=i.type===17?JS:void 0;throw this.h.push({message:QS,offset:i.offset,lexeme:Xa.getLexeme(i),additionalInfo:s}),Ql.c}return r}catch(r){if(r!==Ql.c)throw r;return}}l(){return this.m()}m(){const t=[this.o()];for(;this.y(16);){const r=this.o();t.push(r)}return t.length===1?t[0]:at.or(...t)}o(){const t=[this.s()];for(;this.y(15);){const r=this.s();t.push(r)}return t.length===1?t[0]:at.and(...t)}s(){if(this.y(2)){const t=this.D();switch(t.type){case 11:return this.z(),rr.INSTANCE;case 12:return this.z(),yr.INSTANCE;case 0:{this.z();const r=this.l();return this.A(1,cy),r?.negate()}case 17:return this.z(),Ka.create(t.lexeme);default:throw this.B("KEY | true | false | '(' expression ')'",t)}}return this.t()}t(){const t=this.D();switch(t.type){case 11:return this.z(),at.true();case 12:return this.z(),at.false();case 0:{this.z();const r=this.l();return this.A(1,cy),r}case 17:{const r=t.lexeme;if(this.z(),this.y(9)){const s=this.D();if(!this.k.regexParsingWithErrorRecovery){if(this.z(),s.type!==10)throw this.B("REGEX",s);const n=s.lexeme,o=n.lastIndexOf("/"),a=o===n.length-1?void 0:this.w(n.substring(o+1));let c;try{c=new RegExp(n.substring(1,o),a)}catch{throw this.B("REGEX",s)}return eg.create(r,c)}switch(s.type){case 10:case 19:{const n=[s.lexeme];this.z();let o=this.D(),a=0;for(let p=0;p<s.lexeme.length;p++)s.lexeme.charCodeAt(p)===40?a++:s.lexeme.charCodeAt(p)===41&&a--;for(;!this.E()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let p=0;p<o.lexeme.length;p++)o.lexeme.charCodeAt(p)===40?a++:s.lexeme.charCodeAt(p)===41&&a--}if(a<0)break;n.push(Xa.getLexeme(o)),this.z(),o=this.D()}const c=n.join(""),l=c.lastIndexOf("/"),u=l===c.length-1?void 0:this.w(c.substring(l+1));let h;try{h=new RegExp(c.substring(1,l),u)}catch{throw this.B("REGEX",s)}return at.regex(r,h)}case 18:{const n=s.lexeme;this.z();let o=null;if(!wu(n)){const a=n.indexOf("/"),c=n.lastIndexOf("/");if(a!==c&&a>=0){const l=n.slice(a+1,c),u=n[c+1]==="i"?"i":"";try{o=new RegExp(l,u)}catch{throw this.B("REGEX",s)}}}if(o===null)throw this.B("REGEX",s);return eg.create(r,o)}default:throw this.B("REGEX",this.D())}}if(this.y(14)){this.A(13,GS);const s=this.u();return at.notIn(r,s)}switch(this.D().type){case 3:{this.z();const s=this.u();if(this.x().type===18)return at.equals(r,s);switch(s){case"true":return at.has(r);case"false":return at.not(r);default:return at.equals(r,s)}}case 4:{this.z();const s=this.u();if(this.x().type===18)return at.notEquals(r,s);switch(s){case"true":return at.not(r);case"false":return at.has(r);default:return at.notEquals(r,s)}}case 5:return this.z(),Zp.create(r,this.u());case 6:return this.z(),Kp.create(r,this.u());case 7:return this.z(),Xp.create(r,this.u());case 8:return this.z(),Yp.create(r,this.u());case 13:return this.z(),at.in(r,this.u());default:return at.has(r)}}case 20:throw this.h.push({message:XS,offset:t.offset,lexeme:"",additionalInfo:YS}),Ql.c;default:throw this.B(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this.D())}}u(){const t=this.D();switch(t.type){case 17:case 18:return this.z(),t.lexeme;case 11:return this.z(),"true";case 12:return this.z(),"false";case 13:return this.z(),"in";default:return""}}w(t){return t.replaceAll(this.v,"")}x(){return this.f[this.g-1]}y(t){return this.C(t)?(this.z(),!0):!1}z(){return this.E()||this.g++,this.x()}A(t,r){if(this.C(t))return this.z();throw this.B(r,this.D())}B(t,r,i){const s=d(1753,null,t,Xa.getLexeme(r)),n=r.offset,o=Xa.getLexeme(r);return this.h.push({message:s,offset:n,lexeme:o,additionalInfo:i}),Ql.c}C(t){return this.D().type===t}D(){return this.f[this.g]}E(){return this.D().type===20}},at=class{static false(){return rr.INSTANCE}static true(){return yr.INSTANCE}static has(e){return Za.create(e)}static equals(e,t){return Qp.create(e,t)}static notEquals(e,t){return Jp.create(e,t)}static regex(e,t){return eg.create(e,t)}static in(e,t){return uy.create(e,t)}static notIn(e,t){return hy.create(e,t)}static not(e){return Ka.create(e)}static and(...e){return fy.create(e,null,!0)}static or(...e){return tg.create(e,null,!0)}static greater(e,t){return Xp.create(e,t)}static greaterEquals(e,t){return Yp.create(e,t)}static smaller(e,t){return Zp.create(e,t)}static smallerEquals(e,t){return Kp.create(e,t)}static{this.c=new ly({regexParsingWithErrorRecovery:!1})}static deserialize(e){return e==null?void 0:this.c.parse(e)}};function ZS(e){const t=new ly({regexParsingWithErrorRecovery:!1});return e.map(r=>(t.parse(r),t.lexingErrors.length>0?t.lexingErrors.map(i=>({errorMessage:i.additionalInfo?d(1754,null,i.additionalInfo):d(1755,null),offset:i.offset,length:i.lexeme.length})):t.parsingErrors.length>0?t.parsingErrors.map(i=>({errorMessage:i.additionalInfo?`${i.message}. ${i.additionalInfo}`:i.message,offset:i.offset,length:i.lexeme.length})):[]))}function Ya(e,t){return e.cmp(t)}var rr=class Nx{static{this.INSTANCE=new Nx}constructor(){this.type=0}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!1}serialize(){return"false"}keys(){return[]}map(t){return this}negate(){return yr.INSTANCE}},yr=class Fx{static{this.INSTANCE=new Fx}constructor(){this.type=1}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!0}serialize(){return"true"}keys(){return[]}map(t){return this}negate(){return rr.INSTANCE}},Za=class Mx{static create(t,r=null){const i=Ft.get(t);return typeof i=="boolean"?i?yr.INSTANCE:rr.INSTANCE:new Mx(t,r)}constructor(t,r){this.key=t,this.c=r,this.type=2}cmp(t){return t.type!==this.type?this.type-t.type:gy(this.key,t.key)}equals(t){return t.type===this.type?this.key===t.key:!1}substituteConstants(){const t=Ft.get(this.key);return typeof t=="boolean"?t?yr.INSTANCE:rr.INSTANCE:this}evaluate(t){return!!t.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(t){return t.mapDefined(this.key)}negate(){return this.c||(this.c=Ka.create(this.key,this)),this.c}},Qp=class Ox{static create(t,r,i=null){if(typeof r=="boolean")return r?Za.create(t,i):Ka.create(t,i);const s=Ft.get(t);return typeof s=="boolean"?r===(s?"true":"false")?yr.INSTANCE:rr.INSTANCE:new Ox(t,r,i)}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=4}cmp(t){return t.type!==this.type?this.type-t.type:sn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=Ft.get(this.c);if(typeof t=="boolean"){const r=t?"true":"false";return this.d===r?yr.INSTANCE:rr.INSTANCE}return this}evaluate(t){return t.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(t){return t.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=Jp.create(this.c,this.d,this)),this.f}},uy=class Ux{static create(t,r){return new Ux(t,r)}constructor(t,r){this.d=t,this.f=r,this.type=10,this.c=null}cmp(t){return t.type!==this.type?this.type-t.type:sn(this.d,this.f,t.d,t.f)}equals(t){return t.type===this.type?this.d===t.d&&this.f===t.f:!1}substituteConstants(){return this}evaluate(t){const r=t.getValue(this.f),i=t.getValue(this.d);return Array.isArray(r)?r.includes(i):typeof i=="string"&&typeof r=="object"&&r!==null?zS.call(r,i):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(t){return t.mapIn(this.d,this.f)}negate(){return this.c||(this.c=hy.create(this.d,this.f)),this.c}},hy=class Hx{static create(t,r){return new Hx(t,r)}constructor(t,r){this.d=t,this.f=r,this.type=11,this.c=uy.create(t,r)}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(t){return t.mapNotIn(this.d,this.f)}negate(){return this.c}},Jp=class jx{static create(t,r,i=null){if(typeof r=="boolean")return r?Ka.create(t,i):Za.create(t,i);const s=Ft.get(t);return typeof s=="boolean"?r===(s?"true":"false")?rr.INSTANCE:yr.INSTANCE:new jx(t,r,i)}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=5}cmp(t){return t.type!==this.type?this.type-t.type:sn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=Ft.get(this.c);if(typeof t=="boolean"){const r=t?"true":"false";return this.d===r?rr.INSTANCE:yr.INSTANCE}return this}evaluate(t){return t.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(t){return t.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=Qp.create(this.c,this.d,this)),this.f}},Ka=class Bx{static create(t,r=null){const i=Ft.get(t);return typeof i=="boolean"?i?rr.INSTANCE:yr.INSTANCE:new Bx(t,r)}constructor(t,r){this.c=t,this.d=r,this.type=3}cmp(t){return t.type!==this.type?this.type-t.type:gy(this.c,t.c)}equals(t){return t.type===this.type?this.c===t.c:!1}substituteConstants(){const t=Ft.get(this.c);return typeof t=="boolean"?t?rr.INSTANCE:yr.INSTANCE:this}evaluate(t){return!t.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(t){return t.mapNot(this.c)}negate(){return this.d||(this.d=Za.create(this.c,this)),this.d}};function Su(e,t){if(typeof e=="string"){const r=parseFloat(e);isNaN(r)||(e=r)}return typeof e=="string"||typeof e=="number"?t(e):rr.INSTANCE}var Xp=class _x{static create(t,r,i=null){return Su(r,s=>new _x(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=12}cmp(t){return t.type!==this.type?this.type-t.type:sn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=Kp.create(this.c,this.d,this)),this.f}},Yp=class zx{static create(t,r,i=null){return Su(r,s=>new zx(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=13}cmp(t){return t.type!==this.type?this.type-t.type:sn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=Zp.create(this.c,this.d,this)),this.f}},Zp=class Wx{static create(t,r,i=null){return Su(r,s=>new Wx(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=14}cmp(t){return t.type!==this.type?this.type-t.type:sn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=Yp.create(this.c,this.d,this)),this.f}},Kp=class Vx{static create(t,r,i=null){return Su(r,s=>new Vx(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=15}cmp(t){return t.type!==this.type?this.type-t.type:sn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=Xp.create(this.c,this.d,this)),this.f}},eg=class qx{static create(t,r){return new qx(t,r)}constructor(t,r){this.d=t,this.f=r,this.type=7,this.c=null}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.d<t.d)return-1;if(this.d>t.d)return 1;const r=this.f?this.f.source:"",i=t.f?t.f.source:"";return r<i?-1:r>i?1:0}equals(t){if(t.type===this.type){const r=this.f?this.f.source:"",i=t.f?t.f.source:"";return this.d===t.d&&r===i}return!1}substituteConstants(){return this}evaluate(t){const r=t.getValue(this.d);return this.f?this.f.test(r):!1}serialize(){const t=this.f?`/${this.f.source}/${this.f.flags}`:"/invalid/";return`${this.d} =~ ${t}`}keys(){return[this.d]}map(t){return t.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=KS.create(this)),this.c}},KS=class V0{static create(t){return new V0(t)}constructor(t){this.c=t,this.type=8}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`!(${this.c.serialize()})`}keys(){return this.c.keys()}map(t){return new V0(this.c.map(t))}negate(){return this.c}};function dy(e){let t=null;for(let r=0,i=e.length;r<i;r++){const s=e[r].substituteConstants();if(e[r]!==s&&t===null){t=[];for(let n=0;n<r;n++)t[n]=e[n]}t!==null&&(t[r]=s)}return t===null?e:t}var fy=class $a{static create(t,r,i){return $a.d(t,r,i)}constructor(t,r){this.expr=t,this.c=r,this.type=6}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let r=0,i=this.expr.length;r<i;r++){const s=Ya(this.expr[r],t.expr[r]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let r=0,i=this.expr.length;r<i;r++)if(!this.expr[r].equals(t.expr[r]))return!1;return!0}return!1}substituteConstants(){const t=dy(this.expr);return t===this.expr?this:$a.create(t,this.c,!1)}evaluate(t){for(let r=0,i=this.expr.length;r<i;r++)if(!this.expr[r].evaluate(t))return!1;return!0}static d(t,r,i){const s=[];let n=!1;for(const o of t)if(o){if(o.type===1){n=!0;continue}if(o.type===0)return rr.INSTANCE;if(o.type===6){s.push(...o.expr);continue}s.push(o)}if(s.length===0&&n)return yr.INSTANCE;if(s.length!==0){if(s.length===1)return s[0];s.sort(Ya);for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];for(;s.length>1;){const o=s[s.length-1];if(o.type!==9)break;s.pop();const a=s.pop(),c=s.length===0,l=tg.create(o.expr.map(u=>$a.create([u,a],null,i)),null,c);l&&(s.push(l),s.sort(Ya))}if(s.length===1)return s[0];if(i){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return rr.INSTANCE;if(s.length===1)return s[0]}return new $a(s,r)}}serialize(){return this.expr.map(t=>t.serialize()).join(" && ")}keys(){const t=[];for(const r of this.expr)t.push(...r.keys());return t}map(t){return new $a(this.expr.map(r=>r.map(t)),null)}negate(){if(!this.c){const t=[];for(const r of this.expr)t.push(r.negate());this.c=tg.create(t,this,!0)}return this.c}},tg=class zn{static create(t,r,i){return zn.d(t,r,i)}constructor(t,r){this.expr=t,this.c=r,this.type=9}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let r=0,i=this.expr.length;r<i;r++){const s=Ya(this.expr[r],t.expr[r]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let r=0,i=this.expr.length;r<i;r++)if(!this.expr[r].equals(t.expr[r]))return!1;return!0}return!1}substituteConstants(){const t=dy(this.expr);return t===this.expr?this:zn.create(t,this.c,!1)}evaluate(t){for(let r=0,i=this.expr.length;r<i;r++)if(this.expr[r].evaluate(t))return!0;return!1}static d(t,r,i){let s=[],n=!1;if(t){for(let o=0,a=t.length;o<a;o++){const c=t[o];if(c){if(c.type===0){n=!0;continue}if(c.type===1)return yr.INSTANCE;if(c.type===9){s=s.concat(c.expr);continue}s.push(c)}}if(s.length===0&&n)return rr.INSTANCE;s.sort(Ya)}if(s.length!==0){if(s.length===1)return s[0];for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];if(i){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return yr.INSTANCE;if(s.length===1)return s[0]}return new zn(s,r)}}serialize(){return this.expr.map(t=>t.serialize()).join(" || ")}keys(){const t=[];for(const r of this.expr)t.push(...r.keys());return t}map(t){return new zn(this.expr.map(r=>r.map(t)),null)}negate(){if(!this.c){const t=[];for(const r of this.expr)t.push(r.negate());for(;t.length>1;){const r=t.shift(),i=t.shift(),s=[];for(const n of my(r))for(const o of my(i))s.push(fy.create([n,o],null,!1));t.unshift(zn.create(s,null,!1))}this.c=zn.create(t,this,!0)}return this.c}},C=class Vf extends Za{static{this.d=[]}static all(){return Vf.d.values()}constructor(t,r,i){super(t,null),this.f=r,typeof i=="object"?Vf.d.push({...i,key:t}):i!==!0&&Vf.d.push({key:t,description:i,type:r!=null?typeof r:void 0})}bindTo(t){return t.createKey(this.key,this.f)}getValue(t){return t.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(t){return Qp.create(this.key,t)}notEqualsTo(t){return Jp.create(this.key,t)}},py=_("contextKeyService");function gy(e,t){return e<t?-1:e>t?1:0}function sn(e,t,r,i){return e<r?-1:e>r?1:t<i?-1:t>i?1:0}function my(e){return e.type===9?e.expr:[e]}var He=_("logService"),ec=_("loggerService");function eI(e){return ls(e)}var Re;(function(e){e[e.Off=0]="Off",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"})(Re||(Re={}));var tI=Re.Info;function rI(e,t,r){switch(t){case Re.Trace:e.trace(r);break;case Re.Debug:e.debug(r);break;case Re.Info:e.info(r);break;case Re.Warning:e.warn(r);break;case Re.Error:e.error(r);break;case Re.Off:break;default:throw new Error(`Invalid log level ${t}`)}}function uo(e,t=!1){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(s instanceof Error&&(s=rn(s,t)),typeof s=="object")try{s=JSON.stringify(s)}catch{}r+=(i>0?" ":"")+s}return r}var vy=class extends he{constructor(){super(...arguments),this.b=tI,this.c=this.B(new D),this.onDidChangeLogLevel=this.c.event}setLevel(e){this.b!==e&&(this.b=e,this.c.fire(this.b))}getLevel(){return this.b}f(e){return this.b!==Re.Off&&this.b<=e}g(e){return this.q.isDisposed?!1:this.f(e)}},wy=class extends vy{constructor(e){super(),this.h=e}f(e){return this.h||super.f(e)}trace(e,...t){this.g(Re.Trace)&&this.m(Re.Trace,uo([e,...t],!0))}debug(e,...t){this.g(Re.Debug)&&this.m(Re.Debug,uo([e,...t]))}info(e,...t){this.g(Re.Info)&&this.m(Re.Info,uo([e,...t]))}warn(e,...t){this.g(Re.Warning)&&this.m(Re.Warning,uo([e,...t]))}error(e,...t){if(this.g(Re.Error))if(e instanceof Error){const r=Array.prototype.slice.call(arguments);r[0]=e.stack,this.m(Re.Error,uo(r))}else this.m(Re.Error,uo([e,...t]))}flush(){}},iI=class extends vy{constructor(e){super(),this.h=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.h)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const r of this.h)r.trace(e,...t)}debug(e,...t){for(const r of this.h)r.debug(e,...t)}info(e,...t){for(const r of this.h)r.info(e,...t)}warn(e,...t){for(const r of this.h)r.warn(e,...t)}error(e,...t){for(const r of this.h)r.error(e,...t)}flush(){for(const e of this.h)e.flush()}dispose(){for(const e of this.h)e.dispose();super.dispose()}},sI=class extends he{constructor(e,t,r){if(super(),this.j=e,this.m=t,this.b=new Nt,this.f=this.B(new D),this.onDidChangeLoggers=this.f.event,this.g=this.B(new D),this.onDidChangeLogLevel=this.g.event,this.h=this.B(new D),this.onDidChangeVisibility=this.h.event,r)for(const i of r)this.b.set(i.resource,{logger:void 0,info:i})}n(e){return Ce(e)?[...this.b.values()].find(t=>t.info.id===e):this.b.get(e)}getLogger(e){return this.n(e)?.logger}createLogger(e,t){const r=this.s(e),i=Ce(e)?e:t?.id??Qa(r.toString()).toString(16);let s=this.b.get(r)?.logger;const n=t?.logLevel==="always"?Re.Trace:t?.logLevel;s||(s=this.t(r,n??this.getLogLevel(r)??this.j,{...t,id:i}));const o={logger:s,info:{resource:r,id:i,logLevel:n,name:t?.name,hidden:t?.hidden,group:t?.group,extensionId:t?.extensionId,when:t?.when}};return this.registerLogger(o.info),this.b.set(r,o),s}s(e){return Ce(e)?Qt(this.m,`${e}.log`):e}setLogLevel(e,t){if(y.isUri(e)){const r=e,i=t,s=this.b.get(r);s&&i!==s.info.logLevel&&(s.info.logLevel=i===this.j?void 0:i,s.logger?.setLevel(i),this.b.set(s.info.resource,s),this.g.fire([r,i]))}else{this.j=e;for(const[r,i]of this.b.entries())this.b.get(r)?.info.logLevel===void 0&&i.logger?.setLevel(this.j);this.g.fire(this.j)}}setVisibility(e,t){const r=this.n(e);r&&t!==!r.info.hidden&&(r.info.hidden=!t,this.b.set(r.info.resource,r),this.h.fire([r.info.resource,t]))}getLogLevel(e){let t;return e&&(t=this.b.get(e)?.info.logLevel),t??this.j}registerLogger(e){const t=this.b.get(e.resource);t?t.info.hidden!==e.hidden&&this.setVisibility(e.resource,!e.hidden):(this.b.set(e.resource,{info:e,logger:void 0}),this.f.fire({added:[e],removed:[]}))}deregisterLogger(e){const t=this.b.get(e);t&&(t.logger&&t.logger.dispose(),this.b.delete(e),this.f.fire({added:[],removed:[t.info]}))}*getRegisteredLoggers(){for(const e of this.b.values())yield e.info}getRegisteredLogger(e){return this.b.get(e)?.info}dispose(){this.b.forEach(e=>e.logger?.dispose()),this.b.clear(),super.dispose()}};function nI(e){switch(e){case Re.Trace:return"trace";case Re.Debug:return"debug";case Re.Info:return"info";case Re.Warning:return"warn";case Re.Error:return"error";case Re.Off:return"off"}}function oI(e){switch(e){case"trace":return Re.Trace;case"debug":return Re.Debug;case"info":return Re.Info;case"warn":return Re.Warning;case"error":return Re.Error;case"critical":return Re.Error;case"off":return Re.Off}}var lM=new C("logLevel",nI(Re.Info)),Hi=class{constructor(e,t=[],r=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=r}},by=[],yy;(function(e){e[e.Eager=0]="Eager",e[e.Delayed=1]="Delayed"})(yy||(yy={}));function Ge(e,t,r){t instanceof Hi||(t=new Hi(t,[],!!r)),by.push([e,t])}function aI(){return by}var rg=class{constructor(...e){this.a=new Map;for(const[t,r]of e)this.set(t,r)}set(e,t){const r=this.a.get(e);return this.a.set(e,t),r}has(e){return this.a.has(e)}get(e){return this.a.get(e)}},jt=_("IExtHostInitDataService"),cI=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}},Ey=class{constructor(e){this.b=e,this.a=new Map}roots(){const e=[];for(const t of this.a.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const r=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);r.outgoing.set(i.key,i),i.incoming.set(r.key,r)}removeNode(e){const t=this.b(e);this.a.delete(t);for(const r of this.a.values())r.outgoing.delete(t),r.incoming.delete(t)}lookupOrInsertNode(e){const t=this.b(e);let r=this.a.get(t);return r||(r=new cI(t,e),this.a.set(t,r)),r}lookup(e){return this.a.get(this.b(e))}isEmpty(){return this.a.size===0}toString(){const e=[];for(const[t,r]of this.a)e.push(`${t}
	(-> incoming)[${[...r.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...r.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this.a){const r=new Set([e]),i=this.c(t,r);if(i)return i}}c(e,t){for(const[r,i]of e.outgoing){if(t.has(r))return[...t,r].join(" -> ");t.add(r);const s=this.c(i,t);if(s)return s;t.delete(r)}}},lI=!1,xy=class extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},uI=class q0{constructor(t=new rg,r=!1,i,s=lI){this.i=t,this.j=r,this.k=i,this.l=s,this.f=!1,this.g=new Set,this.h=new Set,this.t=new Set,this.i.set($u,this),this._globalGraph=s?i?._globalGraph??new Ey(n=>n):void 0}dispose(){if(!this.f){this.f=!0,Li(this.h),this.h.clear();for(const t of this.g)Ek(t)&&t.dispose();this.g.clear()}}m(){if(this.f)throw new Error("InstantiationService has been disposed")}createChild(t,r){this.m();const i=this,s=new class extends q0{dispose(){i.h.delete(s),super.dispose()}}(t,this.j,this,this.l);return this.h.add(s),r?.add(s),s}invokeFunction(t,...r){this.m();const i=ig.traceInvocation(this.l,t);let s=!1;try{return t({get:o=>{if(s)throw cp("service accessor is only valid during the invocation of its target method");const a=this.s(o,i);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...r)}finally{s=!0,i.stop()}}createInstance(t,...r){this.m();let i,s;return t instanceof Hi?(i=ig.traceCreation(this.l,t.ctor),s=this.o(t.ctor,t.staticArguments.concat(r),i)):(i=ig.traceCreation(this.l,t),s=this.o(t,r,i)),i.stop(),s}o(t,r=[],i){const s=Gr.getServiceDependencies(t).sort((a,c)=>a.index-c.index),n=[];for(const a of s){const c=this.s(a.id,i);c||this.y(`[createInstance] ${t.name} depends on UNKNOWN service ${a.id}.`,!1),n.push(c)}const o=s.length>0?s[0].index:r.length;if(r.length!==o){console.trace(`[createInstance] First service dependency of ${t.name} at position ${o+1} conflicts with ${r.length} static arguments`);const a=o-r.length;a>0?r=r.concat(new Array(a)):r=r.slice(0,o)}return Reflect.construct(t,r.concat(n))}q(t,r){if(this.i.get(t)instanceof Hi)this.i.set(t,r);else if(this.k)this.k.q(t,r);else throw new Error("illegalState - setting UNKNOWN service instance")}r(t){const r=this.i.get(t);return!r&&this.k?this.k.r(t):r}s(t,r){this._globalGraph&&this.c&&this._globalGraph.insertEdge(this.c,String(t));const i=this.r(t);return i instanceof Hi?this.u(t,i,r.branch(t,!0)):(r.branch(t,!1),i)}u(t,r,i){if(this.t.has(t))throw new Error(`illegal state - RECURSIVELY instantiating service '${t}'`);this.t.add(t);try{return this.v(t,r,i)}finally{this.t.delete(t)}}v(t,r,i){const s=new Ey(c=>c.id.toString());let n=0;const o=[{id:t,desc:r,_trace:i}],a=new Set;for(;o.length;){const c=o.pop();if(!a.has(String(c.id))){if(a.add(String(c.id)),s.lookupOrInsertNode(c),n++>1e3)throw new xy(s);for(const l of Gr.getServiceDependencies(c.desc.ctor)){const u=this.r(l.id);if(u||this.y(`[createInstance] ${t} depends on ${l.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(c.id),String(l.id)),u instanceof Hi){const h={id:l.id,desc:u,_trace:c._trace.branch(l.id,!0)};s.insertEdge(c,h),o.push(h)}}}}for(;;){const c=s.roots();if(c.length===0){if(!s.isEmpty())throw new xy(s);break}for(const{data:l}of c){if(this.r(l.id)instanceof Hi){const h=this.w(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this.q(l.id,h)}s.removeNode(l)}}return this.r(t)}w(t,r,i=[],s,n){if(this.i.get(t)instanceof Hi)return this.x(t,r,i,s,n,this.g);if(this.k)return this.k.w(t,r,i,s,n);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}x(t,r,i=[],s,n,o){if(s){const a=new q0(void 0,this.j,this,this.l);a.c=String(t);const c=new Map,l=new CS(()=>{const u=a.o(r,i,n);for(const[h,p]of c){const f=u[h];if(typeof f=="function")for(const m of p)m.disposable=f.apply(u,m.listener)}return c.clear(),o.add(u),u});return new Proxy(Object.create(null),{get(u,h){if(!l.isInitialized&&typeof h=="string"&&(h.startsWith("onDid")||h.startsWith("onWill"))){let m=c.get(h);return m||(m=new Fa,c.set(h,m)),(E,$,S)=>{if(l.isInitialized)return l.value[h](E,$,S);{const P={listener:[E,$,S],disposable:void 0},O=m.push(P);return ce(()=>{O(),P.disposable?.dispose()})}}}if(h in u)return u[h];const p=l.value;let f=p[h];return typeof f!="function"||(f=f.bind(p),u[h]=f),f},set(u,h,p){return l.value[h]=p,!0},getPrototypeOf(u){return r.prototype}})}else{const a=this.o(r,i,n);return o.add(a),a}}y(t,r){if(r&&console.warn(t),this.j)throw new Error(t)}},ky;(function(e){e[e.None=0]="None",e[e.Creation=1]="Creation",e[e.Invocation=2]="Invocation",e[e.Branch=3]="Branch"})(ky||(ky={}));var ig=class Si{static{this.all=new Set}static{this.c=new class extends Si{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(t,r){return t?new Si(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):Si.c}static traceCreation(t,r){return t?new Si(1,r.name):Si.c}static{this.f=0}constructor(t,r){this.type=t,this.name=r,this.g=Date.now(),this.h=[]}branch(t,r){const i=new Si(3,t.toString());return this.h.push([t,r,i]),i}stop(){const t=Date.now()-this.g;Si.f+=t;let r=!1;function i(n,o){const a=[],c=new Array(n+1).join("	");for(const[l,u,h]of o.h)if(u&&h){r=!0,a.push(`${c}CREATES -> ${l}`);const p=i(n+1,h);p&&a.push(p)}else a.push(`${c}uses -> ${l}`);return a.join(`
`)}const s=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${t.toFixed(2)}ms (grand total ${Si.f.toFixed(2)}ms)`];(t>2||r)&&Si.all.add(s.join(`
`))}},Me=_("IExtHostRpcService"),hI=class{constructor(e){this.getProxy=e.getProxy.bind(e),this.set=e.set.bind(e),this.dispose=e.dispose.bind(e),this.assertRegistered=e.assertRegistered.bind(e),this.drain=e.drain.bind(e)}},Iu=_("IURITransformerService"),dI=class{constructor(e){e?(this.transformIncoming=e.transformIncoming.bind(e),this.transformOutgoing=e.transformOutgoing.bind(e),this.transformOutgoingURI=e.transformOutgoingURI.bind(e),this.transformOutgoingScheme=e.transformOutgoingScheme.bind(e)):(this.transformIncoming=t=>t,this.transformOutgoing=t=>t,this.transformOutgoingURI=t=>t,this.transformOutgoingScheme=t=>t)}},fI=class{constructor(){this.b="",this.c=0}reset(e){return this.b=e,this.c=0,this}next(){return this.c+=1,this}hasNext(){return this.c<this.b.length-1}cmp(e){const t=e.charCodeAt(0),r=this.b.charCodeAt(this.c);return t-r}value(){return this.b[this.c]}},pI=class{constructor(e=!0){this.e=e}reset(e){return this.b=e,this.c=0,this.d=0,this.next()}hasNext(){return this.d<this.b.length}next(){this.c=this.d;let e=!0;for(;this.d<this.b.length;this.d++)if(this.b.charCodeAt(this.d)===46)if(e)this.c++;else break;else e=!1;return this}cmp(e){return this.e?Np(e,this.b,0,e.length,this.c,this.d):za(e,this.b,0,e.length,this.c,this.d)}value(){return this.b.substring(this.c,this.d)}},$y=class{constructor(e=!0,t=!0){this.f=e,this.g=t}reset(e){this.d=0,this.e=0,this.b=e,this.c=e.length;for(let t=e.length-1;t>=0;t--,this.c--){const r=this.b.charCodeAt(t);if(!(r===47||this.f&&r===92))break}return this.next()}hasNext(){return this.e<this.c}next(){this.d=this.e;let e=!0;for(;this.e<this.c;this.e++){const t=this.b.charCodeAt(this.e);if(t===47||this.f&&t===92)if(e)this.d++;else break;else e=!1}return this}cmp(e){return this.g?Np(e,this.b,0,e.length,this.d,this.e):za(e,this.b,0,e.length,this.d,this.e)}value(){return this.b.substring(this.d,this.e)}},Sy;(function(e){e[e.Scheme=1]="Scheme",e[e.Authority=2]="Authority",e[e.Path=3]="Path",e[e.Query=4]="Query",e[e.Fragment=5]="Fragment"})(Sy||(Sy={}));var Iy=class{constructor(e,t){this.f=e,this.g=t,this.d=[],this.e=0}reset(e){return this.c=e,this.d=[],this.c.scheme&&this.d.push(1),this.c.authority&&this.d.push(2),this.c.path&&(this.b=new $y(!1,!this.f(e)),this.b.reset(e.path),this.b.value()&&this.d.push(3)),this.g(e)||(this.c.query&&this.d.push(4),this.c.fragment&&this.d.push(5)),this.e=0,this}next(){return this.d[this.e]===3&&this.b.hasNext()?this.b.next():this.e+=1,this}hasNext(){return this.d[this.e]===3&&this.b.hasNext()||this.e<this.d.length-1}cmp(e){if(this.d[this.e]===1)return bb(e,this.c.scheme);if(this.d[this.e]===2)return bb(e,this.c.authority);if(this.d[this.e]===3)return this.b.cmp(e);if(this.d[this.e]===4)return en(e,this.c.query);if(this.d[this.e]===5)return en(e,this.c.fragment);throw new Error}value(){if(this.d[this.e]===1)return this.c.scheme;if(this.d[this.e]===2)return this.c.authority;if(this.d[this.e]===3)return this.b.value();if(this.d[this.e]===4)return this.c.query;if(this.d[this.e]===5)return this.c.fragment;throw new Error}},Cu=class{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}},Cy;(function(e){e[e.Left=-1]="Left",e[e.Mid=0]="Mid",e[e.Right=1]="Right"})(Cy||(Cy={}));var bs=class Jl{static forUris(t=()=>!1,r=()=>!1){return new Jl(new Iy(t,r))}static forPaths(t=!1){return new Jl(new $y(void 0,!t))}static forStrings(){return new Jl(new fI)}static forConfigKeys(){return new Jl(new pI)}constructor(t){this.b=t}clear(){this.c=void 0}fill(t,r){if(r){const i=r.slice(0);dw(i);for(const s of i)this.set(s,t)}else{const i=t.slice(0);dw(i);for(const s of i)this.set(s[0],s[1])}}set(t,r){const i=this.b.reset(t);let s;this.c||(this.c=new Cu,this.c.segment=i.value());const n=[];for(s=this.c;;){const a=i.cmp(s.segment);if(a>0)s.left||(s.left=new Cu,s.left.segment=i.value()),n.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new Cu,s.right.segment=i.value()),n.push([1,s]),s=s.right;else if(i.hasNext())i.next(),s.mid||(s.mid=new Cu,s.mid.segment=i.value()),n.push([0,s]),s=s.mid;else break}const o=s.value;s.value=r,s.key=t;for(let a=n.length-1;a>=0;a--){const c=n[a][1];c.updateHeight();const l=c.balanceFactor();if(l<-1||l>1){const u=n[a][0],h=n[a+1][0];if(u===1&&h===1)n[a][1]=c.rotateLeft();else if(u===-1&&h===-1)n[a][1]=c.rotateRight();else if(u===1&&h===-1)c.right=n[a+1][1]=n[a+1][1].rotateRight(),n[a][1]=c.rotateLeft();else if(u===-1&&h===1)c.left=n[a+1][1]=n[a+1][1].rotateLeft(),n[a][1]=c.rotateRight();else throw new Error;if(a>0)switch(n[a-1][0]){case-1:n[a-1][1].left=n[a][1];break;case 1:n[a-1][1].right=n[a][1];break;case 0:n[a-1][1].mid=n[a][1];break}else this.c=n[0][1]}}return o}get(t){return this.d(t)?.value}d(t){const r=this.b.reset(t);let i=this.c;for(;i;){const s=r.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(r.hasNext())r.next(),i=i.mid;else break}return i}has(t){const r=this.d(t);return!(r?.value===void 0&&r?.mid===void 0)}delete(t){return this.e(t,!1)}deleteSuperstr(t){return this.e(t,!0)}e(t,r){const i=this.b.reset(t),s=[];let n=this.c;for(;n;){const o=i.cmp(n.segment);if(o>0)s.push([-1,n]),n=n.left;else if(o<0)s.push([1,n]),n=n.right;else if(i.hasNext())i.next(),s.push([0,n]),n=n.mid;else break}if(n){if(r?(n.left=void 0,n.mid=void 0,n.right=void 0,n.height=1):(n.key=void 0,n.value=void 0),!n.mid&&!n.value)if(n.left&&n.right){const o=this.f(n.right);if(o.key){const{key:a,value:c,segment:l}=o;this.e(o.key,!1),n.key=a,n.value=c,n.segment=l}}else{const o=n.left??n.right;if(s.length>0){const[a,c]=s[s.length-1];switch(a){case-1:c.left=o;break;case 0:c.mid=o;break;case 1:c.right=o;break}}else this.c=o}for(let o=s.length-1;o>=0;o--){const a=s[o][1];a.updateHeight();const c=a.balanceFactor();if(c>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),s[o][1]=a.rotateLeft()):c<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),s[o][1]=a.rotateRight()),o>0)switch(s[o-1][0]){case-1:s[o-1][1].left=s[o][1];break;case 1:s[o-1][1].right=s[o][1];break;case 0:s[o-1][1].mid=s[o][1];break}else this.c=s[0][1]}}}f(t){for(;t.left;)t=t.left;return t}findSubstr(t){const r=this.b.reset(t);let i=this.c,s;for(;i;){const n=r.cmp(i.segment);if(n>0)i=i.left;else if(n<0)i=i.right;else if(r.hasNext())r.next(),s=i.value||s,i=i.mid;else break}return i&&i.value||s}findSuperstr(t){return this.g(t,!1)}g(t,r){const i=this.b.reset(t);let s=this.c;for(;s;){const n=i.cmp(s.segment);if(n>0)s=s.left;else if(n<0)s=s.right;else if(i.hasNext())i.next(),s=s.mid;else return s.mid?this.h(s.mid):r?s.value:void 0}}hasElementOrSubtree(t){return this.g(t,!0)!==void 0}forEach(t){for(const[r,i]of this)t(i,r)}*[Symbol.iterator](){yield*this.h(this.c)}h(t){const r=[];return this.j(t,r),r[Symbol.iterator]()}j(t,r){t&&(t.left&&this.j(t.left,r),t.value&&r.push([t.key,t.value]),t.mid&&this.j(t.mid,r),t.right&&this.j(t.right,r))}_isBalanced(){const t=r=>{if(!r)return!0;const i=r.balanceFactor();return i<-1||i>1?!1:t(r.left)&&t(r.right)};return t(this.c)}};function Qe(e){if(!e||typeof e!="object"||e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach(([r,i])=>{t[r]=i&&typeof i=="object"?Qe(i):i}),t}function Dy(e){if(!e||typeof e!="object")return e;const t=[e];for(;t.length>0;){const r=t.shift();Object.freeze(r);for(const i in r)if(Py.call(r,i)){const s=r[i];typeof s=="object"&&!Object.isFrozen(s)&&!fk(s)&&t.push(s)}}return e}var Py=Object.prototype.hasOwnProperty;function ho(e,t){return sg(e,t,new Set)}function sg(e,t,r){if(yt(e))return e;const i=t(e);if(typeof i<"u")return i;if(Array.isArray(e)){const s=[];for(const n of e)s.push(sg(n,t,r));return s}if(gt(e)){if(r.has(e))throw new Error("Cannot clone recursive data-structure");r.add(e);const s={};for(const n in e)Py.call(e,n)&&(s[n]=sg(e[n],t,r));return r.delete(e),s}return e}function nn(e,t,r=!0){return gt(e)?(gt(t)&&Object.keys(t).forEach(i=>{i in e?r&&(gt(e[i])&&gt(t[i])?nn(e[i],t[i],r):e[i]=t[i]):e[i]=t[i]}),e):t}function Qr(e,t){if(e===t)return!0;if(e==null||t===null||t===void 0||typeof e!=typeof t||typeof e!="object"||Array.isArray(e)!==Array.isArray(t))return!1;let r,i;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(!Qr(e[r],t[r]))return!1}else{const s=[];for(i in e)s.push(i);s.sort();const n=[];for(i in t)n.push(i);if(n.sort(),!Qr(s,n))return!1;for(r=0;r<s.length;r++)if(!Qr(e[s[r]],t[s[r]]))return!1}return!0}function gI(e){const t=new Set;return JSON.stringify(e,(r,i)=>{if(gt(i)||Array.isArray(i)){if(t.has(i))return"[Circular]";t.add(i)}return typeof i=="bigint"?`[BigInt ${i.toString()}]`:i})}function Ay(e,t){const r=Object.create(null);for(const[i,s]of Object.entries(e))t(i,s)&&(r[i]=s);return r}var mI=class{constructor(){this.a=0}getNext(){return this.a++}},tc;(function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(tc||(tc={})),function(e){const t="error",r="warning",i="warn",s="info",n="ignore";function o(c){return c?ms(t,c)?e.Error:ms(r,c)||ms(i,c)?e.Warning:ms(s,c)?e.Info:e.Ignore:e.Ignore}e.fromValue=o;function a(c){switch(c){case e.Error:return t;case e.Warning:return r;case e.Info:return s;default:return n}}e.toString=a}(tc||(tc={}));var wt=tc,vI=wt,uM=_("notificationService"),Ty;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SILENT=1]="SILENT",e[e.URGENT=2]="URGENT"})(Ty||(Ty={}));var Ry;(function(e){e[e.WORKSPACE=0]="WORKSPACE",e[e.PROFILE=1]="PROFILE",e[e.APPLICATION=2]="APPLICATION"})(Ry||(Ry={}));var Ly;(function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR"})(Ly||(Ly={}));var Du=_("contextService");function wI(e){const t=e;return typeof t?.id=="string"&&y.isUri(t.uri)}function bI(e){const t=e;return typeof t?.id=="string"&&y.isUri(t.configPath)}var Ny;(function(e){e[e.EMPTY=1]="EMPTY",e[e.FOLDER=2]="FOLDER",e[e.WORKSPACE=3]="WORKSPACE"})(Ny||(Ny={}));var yI=class{constructor(e,t,r,i,s){this.h=e,this.j=r,this.k=i,this.l=s,this.c=bs.forUris(this.l,()=>!0),this.folders=t}update(e){this.h=e.id,this.k=e.configuration,this.j=e.transient,this.l=e.l,this.folders=e.folders}get folders(){return this.g}set folders(e){this.g=e,this.n()}get id(){return this.h}get transient(){return this.j}get configuration(){return this.k}set configuration(e){this.k=e}getFolder(e){return e&&this.c.findSubstr(e)||null}n(){this.c=bs.forUris(this.l,()=>!0);for(const e of this.folders)this.c.set(e.uri,e)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}},Fy=class{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return Qt(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}};function ng(e){return new Fy({uri:e,index:0,name:Hp(e)},{uri:e.toString()})}var My="code-workspace",hM=`.${My}`,dM=[{name:d(2581,null),extensions:[My]}],EI=class{constructor(){this.a=new Set(Object.keys(q)),this.b=new Map,this.extUri=new Wa(e=>{const t=this.b.get(e.scheme);return!(t===void 0||t&1024)})}$acceptProviderInfos(e,t){t===null?this.b.delete(e.scheme):this.b.set(e.scheme,t)}isFreeScheme(e){return!this.b.has(e)&&!this.a.has(e)}getCapabilities(e){return this.b.get(e)}},fo=_("IExtHostFileSystemInfo"),Dr=crypto.randomUUID.bind(crypto),og=Object.freeze({create:e=>Zn(e.map(t=>t.toString())).join(`\r
`),split:e=>e.split(`\r
`),parse:e=>og.split(e).filter(t=>!t.startsWith("#"))}),fM=new Uint32Array(10),Oy;(function(e){e[e.InitialConsonant=4352]="InitialConsonant",e[e.Vowel=4449]="Vowel",e[e.FinalConsonant=4520]="FinalConsonant",e[e.CompatibilityJamo=12593]="CompatibilityJamo"})(Oy||(Oy={}));var Uy;(function(e){e[e.NUL=0]="NUL",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z"})(Uy||(Uy={}));var Hy;(function(e){e[e.fa=24934]="fa",e[e.fg=26470]="fg",e[e.fq=29030]="fq",e[e.fr=29286]="fr",e[e.ft=29798]="ft",e[e.fv=30310]="fv",e[e.fx=30822]="fx",e[e.hk=27496]="hk",e[e.hl=27752]="hl",e[e.ho=28520]="ho",e[e.ml=27757]="ml",e[e.nj=27246]="nj",e[e.nl=27758]="nl",e[e.np=28782]="np",e[e.qt=29809]="qt",e[e.rt=29810]="rt",e[e.sg=26483]="sg",e[e.sw=30579]="sw"})(Hy||(Hy={}));var pM=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),gM=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),mM=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),vM=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function jy(...e){return function(t,r){for(let i=0,s=e.length;i<s;i++){const n=e[i](t,r);if(n)return n}return null}}var wM=_y.bind(void 0,!1),By=_y.bind(void 0,!0);function _y(e,t,r){if(!r||r.length<t.length)return null;let i;return e?i=Fp(r,t):i=r.indexOf(t)===0,i?t.length>0?[{start:0,end:t.length}]:[]:null}function xI(e,t){const r=t.toLowerCase().indexOf(e.toLowerCase());return r===-1?null:[{start:r,end:r+e.length}]}function kI(e,t){return ag(e.toLowerCase(),t.toLowerCase(),0,0)}function ag(e,t,r,i){if(r===e.length)return[];if(i===t.length)return null;if(e[r]===t[i]){let s=null;return(s=ag(e,t,r+1,i+1))?Wy({start:i,end:i+1},s):null}return ag(e,t,r,i+1)}function cg(e){return 97<=e&&e<=122}function Pu(e){return 65<=e&&e<=90}function lg(e){return 48<=e&&e<=57}function $I(e){return e===32||e===9||e===10||e===13}var SI=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(e=>SI.add(e.charCodeAt(0)));function zy(e){return cg(e)||Pu(e)||lg(e)}function Wy(e,t){return t.length===0?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function Vy(e,t){for(let r=t;r<e.length;r++){const i=e.charCodeAt(r);if(Pu(i)||lg(i)||r>0&&!zy(e.charCodeAt(r-1)))return r}return e.length}function ug(e,t,r,i){if(r===e.length)return[];if(i===t.length)return null;if(e[r]!==t[i].toLowerCase())return null;{let s=null,n=i+1;for(s=ug(e,t,r+1,i+1);!s&&(n=Vy(t,n))<t.length;)s=ug(e,t,r+1,n),n++;return s===null?null:Wy({start:i,end:i+1},s)}}function II(e){let t=0,r=0,i=0,s=0,n=0;for(let u=0;u<e.length;u++)n=e.charCodeAt(u),Pu(n)&&t++,cg(n)&&r++,zy(n)&&i++,lg(n)&&s++;const o=t/e.length,a=r/e.length,c=i/e.length,l=s/e.length;return{upperPercent:o,lowerPercent:a,alphaPercent:c,numericPercent:l}}function CI(e){const{upperPercent:t,lowerPercent:r}=e;return r===0&&t>.6}function DI(e){const{upperPercent:t,lowerPercent:r,alphaPercent:i,numericPercent:s}=e;return r>.2&&t<.8&&i>.6&&s<.2}function PI(e){let t=0,r=0,i=0,s=0;for(let n=0;n<e.length;n++)i=e.charCodeAt(n),Pu(i)&&t++,cg(i)&&r++,$I(i)&&s++;return(t===0||r===0)&&s===0?e.length<=30:t<=5}function qy(e,t){if(!t||(t=t.trim(),t.length===0)||!PI(e))return null;t.length>60&&(t=t.substring(0,60));const r=II(t);if(!DI(r)){if(!CI(r))return null;t=t.toLowerCase()}let i=null,s=0;for(e=e.toLowerCase();s<t.length&&(i=ug(e,t,0,s))===null;)s=Vy(t,s+1);return i}var bM=jy(By,qy,xI),yM=jy(By,qy,kI),EM=new fp(1e4),Au=128;function hg(){const e=[],t=[];for(let r=0;r<=Au;r++)t[r]=0;for(let r=0;r<=Au;r++)e.push(t.slice(0));return e}function Gy(e){const t=[];for(let r=0;r<=e;r++)t[r]=0;return t}var xM=Gy(2*Au),kM=Gy(2*Au),$M=hg(),SM=hg(),IM=hg(),Qy;(function(e){e[e.Diag=1]="Diag",e[e.Left=2]="Left",e[e.LeftLeft=3]="LeftLeft"})(Qy||(Qy={}));var Jy;(function(e){e.Default=[-100,0];function t(r){return!r||r.length===2&&r[0]===-100&&r[1]===0}e.isDefault=t})(Jy||(Jy={}));var CM=class{static{this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}},dg=Object.create(null);function g(e,t){if(Ce(t)){const r=dg[t];if(r===void 0)throw new Error(`${e} references an unknown codicon: ${t}`);t=r}return dg[e]=t,{id:e}}function AI(){return dg}var TI={add:g("add",6e4),plus:g("plus",6e4),gistNew:g("gist-new",6e4),repoCreate:g("repo-create",6e4),lightbulb:g("lightbulb",60001),lightBulb:g("light-bulb",60001),repo:g("repo",60002),repoDelete:g("repo-delete",60002),gistFork:g("gist-fork",60003),repoForked:g("repo-forked",60003),gitPullRequest:g("git-pull-request",60004),gitPullRequestAbandoned:g("git-pull-request-abandoned",60004),recordKeys:g("record-keys",60005),keyboard:g("keyboard",60005),tag:g("tag",60006),gitPullRequestLabel:g("git-pull-request-label",60006),tagAdd:g("tag-add",60006),tagRemove:g("tag-remove",60006),person:g("person",60007),personFollow:g("person-follow",60007),personOutline:g("person-outline",60007),personFilled:g("person-filled",60007),gitBranch:g("git-branch",60008),gitBranchCreate:g("git-branch-create",60008),gitBranchDelete:g("git-branch-delete",60008),sourceControl:g("source-control",60008),mirror:g("mirror",60009),mirrorPublic:g("mirror-public",60009),star:g("star",60010),starAdd:g("star-add",60010),starDelete:g("star-delete",60010),starEmpty:g("star-empty",60010),comment:g("comment",60011),commentAdd:g("comment-add",60011),alert:g("alert",60012),warning:g("warning",60012),search:g("search",60013),searchSave:g("search-save",60013),logOut:g("log-out",60014),signOut:g("sign-out",60014),logIn:g("log-in",60015),signIn:g("sign-in",60015),eye:g("eye",60016),eyeUnwatch:g("eye-unwatch",60016),eyeWatch:g("eye-watch",60016),circleFilled:g("circle-filled",60017),primitiveDot:g("primitive-dot",60017),closeDirty:g("close-dirty",60017),debugBreakpoint:g("debug-breakpoint",60017),debugBreakpointDisabled:g("debug-breakpoint-disabled",60017),debugHint:g("debug-hint",60017),terminalDecorationSuccess:g("terminal-decoration-success",60017),primitiveSquare:g("primitive-square",60018),edit:g("edit",60019),pencil:g("pencil",60019),info:g("info",60020),issueOpened:g("issue-opened",60020),gistPrivate:g("gist-private",60021),gitForkPrivate:g("git-fork-private",60021),lock:g("lock",60021),mirrorPrivate:g("mirror-private",60021),close:g("close",60022),removeClose:g("remove-close",60022),x:g("x",60022),repoSync:g("repo-sync",60023),sync:g("sync",60023),clone:g("clone",60024),desktopDownload:g("desktop-download",60024),beaker:g("beaker",60025),microscope:g("microscope",60025),vm:g("vm",60026),deviceDesktop:g("device-desktop",60026),file:g("file",60027),fileText:g("file-text",60027),more:g("more",60028),ellipsis:g("ellipsis",60028),kebabHorizontal:g("kebab-horizontal",60028),mailReply:g("mail-reply",60029),reply:g("reply",60029),organization:g("organization",60030),organizationFilled:g("organization-filled",60030),organizationOutline:g("organization-outline",60030),newFile:g("new-file",60031),fileAdd:g("file-add",60031),newFolder:g("new-folder",60032),fileDirectoryCreate:g("file-directory-create",60032),trash:g("trash",60033),trashcan:g("trashcan",60033),history:g("history",60034),clock:g("clock",60034),folder:g("folder",60035),fileDirectory:g("file-directory",60035),symbolFolder:g("symbol-folder",60035),logoGithub:g("logo-github",60036),markGithub:g("mark-github",60036),github:g("github",60036),terminal:g("terminal",60037),console:g("console",60037),repl:g("repl",60037),zap:g("zap",60038),symbolEvent:g("symbol-event",60038),error:g("error",60039),stop:g("stop",60039),variable:g("variable",60040),symbolVariable:g("symbol-variable",60040),array:g("array",60042),symbolArray:g("symbol-array",60042),symbolModule:g("symbol-module",60043),symbolPackage:g("symbol-package",60043),symbolNamespace:g("symbol-namespace",60043),symbolObject:g("symbol-object",60043),symbolMethod:g("symbol-method",60044),symbolFunction:g("symbol-function",60044),symbolConstructor:g("symbol-constructor",60044),symbolBoolean:g("symbol-boolean",60047),symbolNull:g("symbol-null",60047),symbolNumeric:g("symbol-numeric",60048),symbolNumber:g("symbol-number",60048),symbolStructure:g("symbol-structure",60049),symbolStruct:g("symbol-struct",60049),symbolParameter:g("symbol-parameter",60050),symbolTypeParameter:g("symbol-type-parameter",60050),symbolKey:g("symbol-key",60051),symbolText:g("symbol-text",60051),symbolReference:g("symbol-reference",60052),goToFile:g("go-to-file",60052),symbolEnum:g("symbol-enum",60053),symbolValue:g("symbol-value",60053),symbolRuler:g("symbol-ruler",60054),symbolUnit:g("symbol-unit",60054),activateBreakpoints:g("activate-breakpoints",60055),archive:g("archive",60056),arrowBoth:g("arrow-both",60057),arrowDown:g("arrow-down",60058),arrowLeft:g("arrow-left",60059),arrowRight:g("arrow-right",60060),arrowSmallDown:g("arrow-small-down",60061),arrowSmallLeft:g("arrow-small-left",60062),arrowSmallRight:g("arrow-small-right",60063),arrowSmallUp:g("arrow-small-up",60064),arrowUp:g("arrow-up",60065),bell:g("bell",60066),bold:g("bold",60067),book:g("book",60068),bookmark:g("bookmark",60069),debugBreakpointConditionalUnverified:g("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:g("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:g("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:g("debug-breakpoint-data-unverified",60072),debugBreakpointData:g("debug-breakpoint-data",60073),debugBreakpointDataDisabled:g("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:g("debug-breakpoint-log-unverified",60074),debugBreakpointLog:g("debug-breakpoint-log",60075),debugBreakpointLogDisabled:g("debug-breakpoint-log-disabled",60075),briefcase:g("briefcase",60076),broadcast:g("broadcast",60077),browser:g("browser",60078),bug:g("bug",60079),calendar:g("calendar",60080),caseSensitive:g("case-sensitive",60081),check:g("check",60082),checklist:g("checklist",60083),chevronDown:g("chevron-down",60084),chevronLeft:g("chevron-left",60085),chevronRight:g("chevron-right",60086),chevronUp:g("chevron-up",60087),chromeClose:g("chrome-close",60088),chromeMaximize:g("chrome-maximize",60089),chromeMinimize:g("chrome-minimize",60090),chromeRestore:g("chrome-restore",60091),circleOutline:g("circle-outline",60092),circle:g("circle",60092),debugBreakpointUnverified:g("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:g("terminal-decoration-incomplete",60092),circleSlash:g("circle-slash",60093),circuitBoard:g("circuit-board",60094),clearAll:g("clear-all",60095),clippy:g("clippy",60096),closeAll:g("close-all",60097),cloudDownload:g("cloud-download",60098),cloudUpload:g("cloud-upload",60099),code:g("code",60100),collapseAll:g("collapse-all",60101),colorMode:g("color-mode",60102),commentDiscussion:g("comment-discussion",60103),creditCard:g("credit-card",60105),dash:g("dash",60108),dashboard:g("dashboard",60109),database:g("database",60110),debugContinue:g("debug-continue",60111),debugDisconnect:g("debug-disconnect",60112),debugPause:g("debug-pause",60113),debugRestart:g("debug-restart",60114),debugStart:g("debug-start",60115),debugStepInto:g("debug-step-into",60116),debugStepOut:g("debug-step-out",60117),debugStepOver:g("debug-step-over",60118),debugStop:g("debug-stop",60119),debug:g("debug",60120),deviceCameraVideo:g("device-camera-video",60121),deviceCamera:g("device-camera",60122),deviceMobile:g("device-mobile",60123),diffAdded:g("diff-added",60124),diffIgnored:g("diff-ignored",60125),diffModified:g("diff-modified",60126),diffRemoved:g("diff-removed",60127),diffRenamed:g("diff-renamed",60128),diff:g("diff",60129),diffSidebyside:g("diff-sidebyside",60129),discard:g("discard",60130),editorLayout:g("editor-layout",60131),emptyWindow:g("empty-window",60132),exclude:g("exclude",60133),extensions:g("extensions",60134),eyeClosed:g("eye-closed",60135),fileBinary:g("file-binary",60136),fileCode:g("file-code",60137),fileMedia:g("file-media",60138),filePdf:g("file-pdf",60139),fileSubmodule:g("file-submodule",60140),fileSymlinkDirectory:g("file-symlink-directory",60141),fileSymlinkFile:g("file-symlink-file",60142),fileZip:g("file-zip",60143),files:g("files",60144),filter:g("filter",60145),flame:g("flame",60146),foldDown:g("fold-down",60147),foldUp:g("fold-up",60148),fold:g("fold",60149),folderActive:g("folder-active",60150),folderOpened:g("folder-opened",60151),gear:g("gear",60152),gift:g("gift",60153),gistSecret:g("gist-secret",60154),gist:g("gist",60155),gitCommit:g("git-commit",60156),gitCompare:g("git-compare",60157),compareChanges:g("compare-changes",60157),gitMerge:g("git-merge",60158),githubAction:g("github-action",60159),githubAlt:g("github-alt",60160),globe:g("globe",60161),grabber:g("grabber",60162),graph:g("graph",60163),gripper:g("gripper",60164),heart:g("heart",60165),home:g("home",60166),horizontalRule:g("horizontal-rule",60167),hubot:g("hubot",60168),inbox:g("inbox",60169),issueReopened:g("issue-reopened",60171),issues:g("issues",60172),italic:g("italic",60173),jersey:g("jersey",60174),json:g("json",60175),kebabVertical:g("kebab-vertical",60176),key:g("key",60177),law:g("law",60178),lightbulbAutofix:g("lightbulb-autofix",60179),linkExternal:g("link-external",60180),link:g("link",60181),listOrdered:g("list-ordered",60182),listUnordered:g("list-unordered",60183),liveShare:g("live-share",60184),loading:g("loading",60185),location:g("location",60186),mailRead:g("mail-read",60187),mail:g("mail",60188),markdown:g("markdown",60189),megaphone:g("megaphone",60190),mention:g("mention",60191),milestone:g("milestone",60192),gitPullRequestMilestone:g("git-pull-request-milestone",60192),mortarBoard:g("mortar-board",60193),move:g("move",60194),multipleWindows:g("multiple-windows",60195),mute:g("mute",60196),noNewline:g("no-newline",60197),note:g("note",60198),octoface:g("octoface",60199),openPreview:g("open-preview",60200),package:g("package",60201),paintcan:g("paintcan",60202),pin:g("pin",60203),play:g("play",60204),run:g("run",60204),plug:g("plug",60205),preserveCase:g("preserve-case",60206),preview:g("preview",60207),project:g("project",60208),pulse:g("pulse",60209),question:g("question",60210),quote:g("quote",60211),radioTower:g("radio-tower",60212),reactions:g("reactions",60213),references:g("references",60214),refresh:g("refresh",60215),regex:g("regex",60216),remoteExplorer:g("remote-explorer",60217),remote:g("remote",60218),remove:g("remove",60219),replaceAll:g("replace-all",60220),replace:g("replace",60221),repoClone:g("repo-clone",60222),repoForcePush:g("repo-force-push",60223),repoPull:g("repo-pull",60224),repoPush:g("repo-push",60225),report:g("report",60226),requestChanges:g("request-changes",60227),rocket:g("rocket",60228),rootFolderOpened:g("root-folder-opened",60229),rootFolder:g("root-folder",60230),rss:g("rss",60231),ruby:g("ruby",60232),saveAll:g("save-all",60233),saveAs:g("save-as",60234),save:g("save",60235),screenFull:g("screen-full",60236),screenNormal:g("screen-normal",60237),searchStop:g("search-stop",60238),server:g("server",60240),settingsGear:g("settings-gear",60241),settings:g("settings",60242),shield:g("shield",60243),smiley:g("smiley",60244),sortPrecedence:g("sort-precedence",60245),splitHorizontal:g("split-horizontal",60246),splitVertical:g("split-vertical",60247),squirrel:g("squirrel",60248),starFull:g("star-full",60249),starHalf:g("star-half",60250),symbolClass:g("symbol-class",60251),symbolColor:g("symbol-color",60252),symbolConstant:g("symbol-constant",60253),symbolEnumMember:g("symbol-enum-member",60254),symbolField:g("symbol-field",60255),symbolFile:g("symbol-file",60256),symbolInterface:g("symbol-interface",60257),symbolKeyword:g("symbol-keyword",60258),symbolMisc:g("symbol-misc",60259),symbolOperator:g("symbol-operator",60260),symbolProperty:g("symbol-property",60261),wrench:g("wrench",60261),wrenchSubaction:g("wrench-subaction",60261),symbolSnippet:g("symbol-snippet",60262),tasklist:g("tasklist",60263),telescope:g("telescope",60264),textSize:g("text-size",60265),threeBars:g("three-bars",60266),thumbsdown:g("thumbsdown",60267),thumbsup:g("thumbsup",60268),tools:g("tools",60269),triangleDown:g("triangle-down",60270),triangleLeft:g("triangle-left",60271),triangleRight:g("triangle-right",60272),triangleUp:g("triangle-up",60273),twitter:g("twitter",60274),unfold:g("unfold",60275),unlock:g("unlock",60276),unmute:g("unmute",60277),unverified:g("unverified",60278),verified:g("verified",60279),versions:g("versions",60280),vmActive:g("vm-active",60281),vmOutline:g("vm-outline",60282),vmRunning:g("vm-running",60283),watch:g("watch",60284),whitespace:g("whitespace",60285),wholeWord:g("whole-word",60286),window:g("window",60287),wordWrap:g("word-wrap",60288),zoomIn:g("zoom-in",60289),zoomOut:g("zoom-out",60290),listFilter:g("list-filter",60291),listFlat:g("list-flat",60292),listSelection:g("list-selection",60293),selection:g("selection",60293),listTree:g("list-tree",60294),debugBreakpointFunctionUnverified:g("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:g("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:g("debug-breakpoint-function-disabled",60296),debugStackframeActive:g("debug-stackframe-active",60297),circleSmallFilled:g("circle-small-filled",60298),debugStackframeDot:g("debug-stackframe-dot",60298),terminalDecorationMark:g("terminal-decoration-mark",60298),debugStackframe:g("debug-stackframe",60299),debugStackframeFocused:g("debug-stackframe-focused",60299),debugBreakpointUnsupported:g("debug-breakpoint-unsupported",60300),symbolString:g("symbol-string",60301),debugReverseContinue:g("debug-reverse-continue",60302),debugStepBack:g("debug-step-back",60303),debugRestartFrame:g("debug-restart-frame",60304),debugAlt:g("debug-alt",60305),callIncoming:g("call-incoming",60306),callOutgoing:g("call-outgoing",60307),menu:g("menu",60308),expandAll:g("expand-all",60309),feedback:g("feedback",60310),gitPullRequestReviewer:g("git-pull-request-reviewer",60310),groupByRefType:g("group-by-ref-type",60311),ungroupByRefType:g("ungroup-by-ref-type",60312),account:g("account",60313),gitPullRequestAssignee:g("git-pull-request-assignee",60313),bellDot:g("bell-dot",60314),debugConsole:g("debug-console",60315),library:g("library",60316),output:g("output",60317),runAll:g("run-all",60318),syncIgnored:g("sync-ignored",60319),pinned:g("pinned",60320),githubInverted:g("github-inverted",60321),serverProcess:g("server-process",60322),serverEnvironment:g("server-environment",60323),pass:g("pass",60324),issueClosed:g("issue-closed",60324),stopCircle:g("stop-circle",60325),playCircle:g("play-circle",60326),record:g("record",60327),debugAltSmall:g("debug-alt-small",60328),vmConnect:g("vm-connect",60329),cloud:g("cloud",60330),merge:g("merge",60331),export:g("export",60332),graphLeft:g("graph-left",60333),magnet:g("magnet",60334),notebook:g("notebook",60335),redo:g("redo",60336),checkAll:g("check-all",60337),pinnedDirty:g("pinned-dirty",60338),passFilled:g("pass-filled",60339),circleLargeFilled:g("circle-large-filled",60340),circleLarge:g("circle-large",60341),circleLargeOutline:g("circle-large-outline",60341),combine:g("combine",60342),gather:g("gather",60342),table:g("table",60343),variableGroup:g("variable-group",60344),typeHierarchy:g("type-hierarchy",60345),typeHierarchySub:g("type-hierarchy-sub",60346),typeHierarchySuper:g("type-hierarchy-super",60347),gitPullRequestCreate:g("git-pull-request-create",60348),runAbove:g("run-above",60349),runBelow:g("run-below",60350),notebookTemplate:g("notebook-template",60351),debugRerun:g("debug-rerun",60352),workspaceTrusted:g("workspace-trusted",60353),workspaceUntrusted:g("workspace-untrusted",60354),workspaceUnknown:g("workspace-unknown",60355),terminalCmd:g("terminal-cmd",60356),terminalDebian:g("terminal-debian",60357),terminalLinux:g("terminal-linux",60358),terminalPowershell:g("terminal-powershell",60359),terminalTmux:g("terminal-tmux",60360),terminalUbuntu:g("terminal-ubuntu",60361),terminalBash:g("terminal-bash",60362),arrowSwap:g("arrow-swap",60363),copy:g("copy",60364),personAdd:g("person-add",60365),filterFilled:g("filter-filled",60366),wand:g("wand",60367),debugLineByLine:g("debug-line-by-line",60368),inspect:g("inspect",60369),layers:g("layers",60370),layersDot:g("layers-dot",60371),layersActive:g("layers-active",60372),compass:g("compass",60373),compassDot:g("compass-dot",60374),compassActive:g("compass-active",60375),azure:g("azure",60376),issueDraft:g("issue-draft",60377),gitPullRequestClosed:g("git-pull-request-closed",60378),gitPullRequestDraft:g("git-pull-request-draft",60379),debugAll:g("debug-all",60380),debugCoverage:g("debug-coverage",60381),runErrors:g("run-errors",60382),folderLibrary:g("folder-library",60383),debugContinueSmall:g("debug-continue-small",60384),beakerStop:g("beaker-stop",60385),graphLine:g("graph-line",60386),graphScatter:g("graph-scatter",60387),pieChart:g("pie-chart",60388),bracket:g("bracket",60175),bracketDot:g("bracket-dot",60389),bracketError:g("bracket-error",60390),lockSmall:g("lock-small",60391),azureDevops:g("azure-devops",60392),verifiedFilled:g("verified-filled",60393),newline:g("newline",60394),layout:g("layout",60395),layoutActivitybarLeft:g("layout-activitybar-left",60396),layoutActivitybarRight:g("layout-activitybar-right",60397),layoutPanelLeft:g("layout-panel-left",60398),layoutPanelCenter:g("layout-panel-center",60399),layoutPanelJustify:g("layout-panel-justify",60400),layoutPanelRight:g("layout-panel-right",60401),layoutPanel:g("layout-panel",60402),layoutSidebarLeft:g("layout-sidebar-left",60403),layoutSidebarRight:g("layout-sidebar-right",60404),layoutStatusbar:g("layout-statusbar",60405),layoutMenubar:g("layout-menubar",60406),layoutCentered:g("layout-centered",60407),target:g("target",60408),indent:g("indent",60409),recordSmall:g("record-small",60410),errorSmall:g("error-small",60411),terminalDecorationError:g("terminal-decoration-error",60411),arrowCircleDown:g("arrow-circle-down",60412),arrowCircleLeft:g("arrow-circle-left",60413),arrowCircleRight:g("arrow-circle-right",60414),arrowCircleUp:g("arrow-circle-up",60415),layoutSidebarRightOff:g("layout-sidebar-right-off",60416),layoutPanelOff:g("layout-panel-off",60417),layoutSidebarLeftOff:g("layout-sidebar-left-off",60418),blank:g("blank",60419),heartFilled:g("heart-filled",60420),map:g("map",60421),mapHorizontal:g("map-horizontal",60421),foldHorizontal:g("fold-horizontal",60421),mapFilled:g("map-filled",60422),mapHorizontalFilled:g("map-horizontal-filled",60422),foldHorizontalFilled:g("fold-horizontal-filled",60422),circleSmall:g("circle-small",60423),bellSlash:g("bell-slash",60424),bellSlashDot:g("bell-slash-dot",60425),commentUnresolved:g("comment-unresolved",60426),gitPullRequestGoToChanges:g("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:g("git-pull-request-new-changes",60428),searchFuzzy:g("search-fuzzy",60429),commentDraft:g("comment-draft",60430),send:g("send",60431),sparkle:g("sparkle",60432),insert:g("insert",60433),mic:g("mic",60434),thumbsdownFilled:g("thumbsdown-filled",60435),thumbsupFilled:g("thumbsup-filled",60436),coffee:g("coffee",60437),snake:g("snake",60438),game:g("game",60439),vr:g("vr",60440),chip:g("chip",60441),piano:g("piano",60442),music:g("music",60443),micFilled:g("mic-filled",60444),repoFetch:g("repo-fetch",60445),copilot:g("copilot",60446),lightbulbSparkle:g("lightbulb-sparkle",60447),robot:g("robot",60448),sparkleFilled:g("sparkle-filled",60449),diffSingle:g("diff-single",60450),diffMultiple:g("diff-multiple",60451),surroundWith:g("surround-with",60452),share:g("share",60453),gitStash:g("git-stash",60454),gitStashApply:g("git-stash-apply",60455),gitStashPop:g("git-stash-pop",60456),vscode:g("vscode",60457),vscodeInsiders:g("vscode-insiders",60458),codeOss:g("code-oss",60459),runCoverage:g("run-coverage",60460),runAllCoverage:g("run-all-coverage",60461),coverage:g("coverage",60462),githubProject:g("github-project",60463),mapVertical:g("map-vertical",60464),foldVertical:g("fold-vertical",60464),mapVerticalFilled:g("map-vertical-filled",60465),foldVerticalFilled:g("fold-vertical-filled",60465),goToSearch:g("go-to-search",60466),percentage:g("percentage",60467),sortPercentage:g("sort-percentage",60467),attach:g("attach",60468),goToEditingSession:g("go-to-editing-session",60469),editSession:g("edit-session",60470),codeReview:g("code-review",60471),copilotWarning:g("copilot-warning",60472),python:g("python",60473),copilotLarge:g("copilot-large",60474),copilotWarningLarge:g("copilot-warning-large",60475),keyboardTab:g("keyboard-tab",60476)},RI={dialogError:g("dialog-error","error"),dialogWarning:g("dialog-warning","warning"),dialogInfo:g("dialog-info","info"),dialogClose:g("dialog-close","close"),treeItemExpanded:g("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:g("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:g("tree-filter-on-type-off","list-selection"),treeFilterClear:g("tree-filter-clear","close"),treeItemLoading:g("tree-item-loading","loading"),menuSelection:g("menu-selection","check"),menuSubmenu:g("menu-submenu","chevron-right"),menuBarMore:g("menubar-more","more"),scrollbarButtonLeft:g("scrollbar-button-left","triangle-left"),scrollbarButtonRight:g("scrollbar-button-right","triangle-right"),scrollbarButtonUp:g("scrollbar-button-up","triangle-up"),scrollbarButtonDown:g("scrollbar-button-down","triangle-down"),toolBarMore:g("toolbar-more","more"),quickInputBack:g("quick-input-back","arrow-left"),dropDownButton:g("drop-down-button",60084),symbolCustomColor:g("symbol-customcolor",60252),exportIcon:g("export",60332),workspaceUnspecified:g("workspace-unspecified",60355),newLine:g("newline",60394),thumbsDownFilled:g("thumbsdown-filled",60435),thumbsUpFilled:g("thumbsup-filled",60436),gitFetch:g("git-fetch",60445),lightbulbSparkleAutofix:g("lightbulb-sparkle-autofix",60447),debugBreakpointPending:g("debug-breakpoint-pending",60377)},ie={...TI,...RI},po;(function(e){function t(r){return r&&typeof r=="object"&&typeof r.id=="string"}e.isThemeColor=t})(po||(po={}));var Mt;(function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";const t=new RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function r(p){const f=t.exec(p.id);if(!f)return r(ie.error);const[,m,w]=f,E=["codicon","codicon-"+m];return w&&E.push("codicon-modifier-"+w.substring(1)),E}e.asClassNameArray=r;function i(p){return r(p).join(" ")}e.asClassName=i;function s(p){return"."+r(p).join(".")}e.asCSSSelector=s;function n(p){return p&&typeof p=="object"&&typeof p.id=="string"&&(typeof p.color>"u"||po.isThemeColor(p.color))}e.isThemeIcon=n;const o=new RegExp(`^\\$\\((${e.iconNameExpression}(?:${e.iconModifierExpression})?)\\)$`);function a(p){const f=o.exec(p);if(!f)return;const[,m]=f;return{id:m}}e.fromString=a;function c(p){return{id:p}}e.fromId=c;function l(p,f){let m=p.id;const w=m.lastIndexOf("~");return w!==-1&&(m=m.substring(0,w)),f&&(m=`${m}~${f}`),{id:m}}e.modify=l;function u(p){const f=p.id.lastIndexOf("~");if(f!==-1)return p.id.substring(f+1)}e.getModifier=u;function h(p,f){return p.id===f.id&&p.color?.id===f.color?.id}e.isEqual=h})(Mt||(Mt={}));var fg=new RegExp(`\\$\\(${Mt.iconNameExpression}(?:${Mt.iconModifierExpression})?\\)`,"g"),LI=new RegExp(`(\\\\)?${fg.source}`,"g");function NI(e){return e.replace(LI,(t,r)=>r?t:`\\${t}`)}var DM=new RegExp(`\\\\${fg.source}`,"g"),PM=new RegExp(`(\\s)?(\\\\)?${fg.source}(\\s)?`,"g"),AM=new RegExp(`\\$\\(${Mt.iconNameCharacter}+\\)`,"g"),Xy;(function(e){e[e.Paragraph=0]="Paragraph",e[e.Break=1]="Break"})(Xy||(Xy={}));var Tu=class{constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw Ee("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=FI(this.supportThemeIcons?NI(e):e).replace(/([ \t]+)/g,(r,i)=>"&nbsp;".repeat(i.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${MI(t,e)}
`,this}appendLink(e,t,r){return this.value+="[",this.value+=this.c(t,"]"),this.value+="](",this.value+=this.c(String(e),")"),r&&(this.value+=` "${this.c(this.c(r,'"'),")")}"`),this.value+=")",this}c(e,t){const r=new RegExp(Ks(t),"g");return e.replace(r,(i,s)=>e.charAt(s-1)!=="\\"?`\\${i}`:i)}};function on(e){return e instanceof Tu?!0:e&&typeof e=="object"?typeof e.value=="string"&&(typeof e.isTrusted=="boolean"||typeof e.isTrusted=="object"||e.isTrusted===void 0)&&(typeof e.supportThemeIcons=="boolean"||e.supportThemeIcons===void 0):!1}function FI(e){return e.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function MI(e,t){const r=e.match(/^`+/gm)?.reduce((s,n)=>s.length>n.length?s:n).length??0,i=r>=3?r+1:3;return[`${"`".repeat(i)}${t}`,e,`${"`".repeat(i)}`].join(`
`)}function OI(e){const t=[],r=e.split("|").map(s=>s.trim());e=r[0];const i=r[1];if(i){const s=/height=(\d+)/.exec(i),n=/width=(\d+)/.exec(i),o=s?s[1]:"",a=n?n[1]:"",c=isFinite(parseInt(a)),l=isFinite(parseInt(o));c&&t.push(`width="${a}"`),l&&t.push(`height="${o}"`)}return{href:e,dimensions:t}}function pg(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var an=pg();function Yy(e){an=e}var Zy=/[&<>"']/,UI=new RegExp(Zy.source,"g"),Ky=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,HI=new RegExp(Ky.source,"g"),jI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},e4=e=>jI[e];function Pr(e,t){if(t){if(Zy.test(e))return e.replace(UI,e4)}else if(Ky.test(e))return e.replace(HI,e4);return e}var BI=/(^|[^\[])\^/g;function tt(e,t){let r=typeof e=="string"?e:e.source;t=t||"";const i={replace:(s,n)=>{let o=typeof n=="string"?n:n.source;return o=o.replace(BI,"$1"),r=r.replace(s,o),i},getRegex:()=>new RegExp(r,t)};return i}function t4(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}var rc={exec:()=>null};function r4(e,t){const r=e.replace(/\|/g,(n,o,a)=>{let c=!1,l=o;for(;--l>=0&&a[l]==="\\";)c=!c;return c?"|":" |"}),i=r.split(/ \|/);let s=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;s<i.length;s++)i[s]=i[s].trim().replace(/\\\|/g,"|");return i}function ic(e,t,r){const i=e.length;if(i===0)return"";let s=0;for(;s<i;){const n=e.charAt(i-s-1);if(n===t&&!r)s++;else if(n!==t&&r)s++;else break}return e.slice(0,i-s)}function _I(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let i=0;i<e.length;i++)if(e[i]==="\\")i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&(r--,r<0))return i;return-1}function i4(e,t,r,i){const s=t.href,n=t.title?Pr(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){i.state.inLink=!0;const a={type:"link",raw:r,href:s,title:n,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,a}return{type:"image",raw:r,href:s,title:n,text:Pr(o)}}function zI(e,t){const r=e.match(/^(\s+)(?:```)/);if(r===null)return t;const i=r[1];return t.split(`
`).map(s=>{const n=s.match(/^\s+/);if(n===null)return s;const[o]=n;return o.length>=i.length?s.slice(i.length):s}).join(`
`)}var Ru=class{options;rules;lexer;constructor(e){this.options=e||an}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:ic(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],i=zI(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){const i=ic(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:ic(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let r=ic(t[0],`
`).split(`
`),i="",s="";const n=[];for(;r.length>0;){let o=!1;const a=[];let c;for(c=0;c<r.length;c++)if(/^ {0,3}>/.test(r[c]))a.push(r[c]),o=!0;else if(!o)a.push(r[c]);else break;r=r.slice(c);const l=a.join(`
`),u=l.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");i=i?`${i}
${l}`:l,s=s?`${s}
${u}`:u;const h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,n,!0),this.lexer.state.top=h,r.length===0)break;const p=n[n.length-1];if(p?.type==="code")break;if(p?.type==="blockquote"){const f=p,m=f.raw+`
`+r.join(`
`),w=this.blockquote(m);n[n.length-1]=w,i=i.substring(0,i.length-f.raw.length)+w.raw,s=s.substring(0,s.length-f.text.length)+w.text;break}else if(p?.type==="list"){const f=p,m=f.raw+`
`+r.join(`
`),w=this.list(m);n[n.length-1]=w,i=i.substring(0,i.length-p.raw.length)+w.raw,s=s.substring(0,s.length-f.raw.length)+w.raw,r=m.substring(n[n.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:n,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim();const i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const n=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`);let o=!1;for(;e;){let a=!1,c="",l="";if(!(t=n.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let u=t[2].split(`
`,1)[0].replace(/^\t+/,E=>" ".repeat(3*E.length)),h=e.split(`
`,1)[0],p=!u.trim(),f=0;if(this.options.pedantic?(f=2,l=u.trimStart()):p?f=t[1].length+1:(f=t[2].search(/[^ ]/),f=f>4?1:f,l=u.slice(f),f+=t[1].length),p&&/^ *$/.test(h)&&(c+=h+`
`,e=e.substring(h.length+1),a=!0),!a){const E=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),$=new RegExp(`^ {0,${Math.min(3,f-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),S=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:\`\`\`|~~~)`),P=new RegExp(`^ {0,${Math.min(3,f-1)}}#`);for(;e;){const O=e.split(`
`,1)[0];if(h=O,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),S.test(h)||P.test(h)||E.test(h)||$.test(e))break;if(h.search(/[^ ]/)>=f||!h.trim())l+=`
`+h.slice(f);else{if(p||u.search(/[^ ]/)>=4||S.test(u)||P.test(u)||$.test(u))break;l+=`
`+h}!p&&!h.trim()&&(p=!0),c+=O+`
`,e=e.substring(O.length+1),u=h.slice(f)}}s.loose||(o?s.loose=!0:/\n *\n *$/.test(c)&&(o=!0));let m=null,w;this.options.gfm&&(m=/^\[[ xX]\] /.exec(l),m&&(w=m[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:c,task:!!m,checked:w,loose:!1,text:l,tokens:[]}),s.raw+=c}s.items[s.items.length-1].raw=s.items[s.items.length-1].raw.trimEnd(),s.items[s.items.length-1].text=s.items[s.items.length-1].text.trimEnd(),s.raw=s.raw.trimEnd();for(let a=0;a<s.items.length;a++)if(this.lexer.state.top=!1,s.items[a].tokens=this.lexer.blockTokens(s.items[a].text,[]),!s.loose){const c=s.items[a].tokens.filter(u=>u.type==="space"),l=c.length>0&&c.some(u=>/\n.*\n/.test(u.raw));s.loose=l}if(s.loose)for(let a=0;a<s.items.length;a++)s.items[a].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const r=r4(t[1]),i=t[2].replace(/^\||\| *$/g,"").split("|"),s=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],n={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(const o of i)/^ *-+: *$/.test(o)?n.align.push("right"):/^ *:-+: *$/.test(o)?n.align.push("center"):/^ *:-+ *$/.test(o)?n.align.push("left"):n.align.push(null);for(let o=0;o<r.length;o++)n.header.push({text:r[o],tokens:this.lexer.inline(r[o]),header:!0,align:n.align[o]});for(const o of s)n.rows.push(r4(o,n.header.length).map((a,c)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:n.align[c]})));return n}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Pr(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const n=ic(r.slice(0,-1),"\\");if((r.length-n.length)%2===0)return}else{const n=_I(t[2],"()");if(n>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+n;t[2]=t[2].substring(0,n),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){const n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);n&&(i=n[1],s=n[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),i4(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const i=(r[2]||r[1]).replace(/\s+/g," "),s=t[i.toLowerCase()];if(!s){const n=r[0].charAt(0);return{type:"text",raw:n,text:n}}return i4(r,s,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const n=[...i[0]].length-1;let o,a,c=n,l=0;const u=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+n);(i=u.exec(t))!=null;){if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!o)continue;if(a=[...o].length,i[3]||i[4]){c+=a;continue}else if((i[5]||i[6])&&n%3&&!((n+a)%3)){l+=a;continue}if(c-=a,c>0)continue;a=Math.min(a,a+c+l);const h=[...i[0]][0].length,p=e.slice(0,n+i.index+h+a);if(Math.min(n,a)%2){const m=p.slice(1,-1);return{type:"em",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}const f=p.slice(2,-2);return{type:"strong",raw:p,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," ");const i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=Pr(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=Pr(t[1]),i="mailto:"+r):(r=Pr(t[1]),i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=Pr(t[0]),i="mailto:"+r;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);r=Pr(t[0]),t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let r;return this.lexer.state.inRawBlock?r=t[0]:r=Pr(t[0]),{type:"text",raw:t[0],text:r}}}},WI=/^(?: *(?:\n|$))+/,VI=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,qI=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,sc=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,GI=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,s4=/(?:[*+-]|\d{1,9}[.)])/,n4=tt(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,s4).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),gg=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,QI=/^[^\n]+/,mg=/(?!\s*\])(?:\\.|[^\[\]\\])+/,JI=tt(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",mg).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),XI=tt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,s4).getRegex(),Lu="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",vg=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,YI=tt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",vg).replace("tag",Lu).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),o4=tt(gg).replace("hr",sc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Lu).getRegex(),ZI=tt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",o4).getRegex(),wg={blockquote:ZI,code:VI,def:JI,fences:qI,heading:GI,hr:sc,html:YI,lheading:n4,list:XI,newline:WI,paragraph:o4,table:rc,text:QI},a4=tt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",sc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Lu).getRegex(),KI={...wg,table:a4,paragraph:tt(gg).replace("hr",sc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",a4).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Lu).getRegex()},eC={...wg,html:tt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",vg).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:rc,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:tt(gg).replace("hr",sc).replace("heading",` *#{1,6} *[^
]`).replace("lheading",n4).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},c4=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,tC=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,l4=/^( {2,}|\\)\n(?!\s*$)/,rC=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,nc="\\p{P}\\p{S}",iC=tt(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,nc).getRegex(),sC=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,nC=tt(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,nc).getRegex(),oC=tt("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,nc).getRegex(),aC=tt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,nc).getRegex(),cC=tt(/\\([punct])/,"gu").replace(/punct/g,nc).getRegex(),lC=tt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),uC=tt(vg).replace("(?:-->|$)","-->").getRegex(),hC=tt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",uC).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Nu=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,dC=tt(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Nu).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),u4=tt(/^!?\[(label)\]\[(ref)\]/).replace("label",Nu).replace("ref",mg).getRegex(),h4=tt(/^!?\[(ref)\](?:\[\])?/).replace("ref",mg).getRegex(),fC=tt("reflink|nolink(?!\\()","g").replace("reflink",u4).replace("nolink",h4).getRegex(),bg={_backpedal:rc,anyPunctuation:cC,autolink:lC,blockSkip:sC,br:l4,code:tC,del:rc,emStrongLDelim:nC,emStrongRDelimAst:oC,emStrongRDelimUnd:aC,escape:c4,link:dC,nolink:h4,punctuation:iC,reflink:u4,reflinkSearch:fC,tag:hC,text:rC,url:rc},pC={...bg,link:tt(/^!?\[(label)\]\((.*?)\)/).replace("label",Nu).getRegex(),reflink:tt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Nu).getRegex()},yg={...bg,escape:tt(c4).replace("])","~|])").getRegex(),url:tt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},gC={...yg,br:tt(l4).replace("{2,}","*").getRegex(),text:tt(yg.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Fu={normal:wg,gfm:KI,pedantic:eC},oc={normal:bg,gfm:yg,breaks:gC,pedantic:pC},cn=class G0{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||an,this.options.tokenizer=this.options.tokenizer||new Ru,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const r={block:Fu.normal,inline:oc.normal};this.options.pedantic?(r.block=Fu.pedantic,r.inline=oc.pedantic):this.options.gfm&&(r.block=Fu.gfm,this.options.breaks?r.inline=oc.breaks:r.inline=oc.gfm),this.tokenizer.rules=r}static get rules(){return{block:Fu,inline:oc}}static lex(t,r){return new G0(r).lex(t)}static lexInline(t,r){return new G0(r).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){const i=this.inlineQueue[r];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[],i=!1){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));let s,n,o;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(s=a.call({lexer:this},t,r))?(t=t.substring(s.raw.length),r.push(s),!0):!1))){if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length),s.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length),n=r[r.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text):r.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length),n=r[r.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+s.raw,n.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),r.push(s);continue}if(o=t,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=t.slice(1);let l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},c),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=t.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(o))){n=r[r.length-1],i&&n?.type==="paragraph"?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):r.push(s),i=o.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length),n=r[r.length-1],n&&n.type==="text"?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):r.push(s);continue}if(t){const a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){let i,s,n,o=t,a,c,l;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(i=u.call({lexer:this},t,r))?(t=t.substring(i.raw.length),r.push(i),!0):!1))){if(i=this.tokenizer.escape(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.tag(t)){t=t.substring(i.raw.length),s=r[r.length-1],s&&i.type==="text"&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):r.push(i);continue}if(i=this.tokenizer.link(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(i.raw.length),s=r[r.length-1],s&&i.type==="text"&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):r.push(i);continue}if(i=this.tokenizer.emStrong(t,o,l)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.codespan(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.br(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.del(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.autolink(t)){t=t.substring(i.raw.length),r.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(t))){t=t.substring(i.raw.length),r.push(i);continue}if(n=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=t.slice(1);let p;this.options.extensions.startInline.forEach(f=>{p=f.call({lexer:this},h),typeof p=="number"&&p>=0&&(u=Math.min(u,p))}),u<1/0&&u>=0&&(n=t.substring(0,u+1))}if(i=this.tokenizer.inlineText(n)){t=t.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(l=i.raw.slice(-1)),c=!0,s=r[r.length-1],s&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):r.push(i);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return r}},Mu=class{options;parser;constructor(e){this.options=e||an}space(e){return""}code({text:e,lang:t,escaped:r}){const i=(t||"").match(/^\S*/)?.[0],s=e.replace(/\n$/,"")+`
`;return i?'<pre><code class="language-'+Pr(i)+'">'+(r?s:Pr(s,!0))+`</code></pre>
`:"<pre><code>"+(r?s:Pr(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,r=e.start;let i="";for(let o=0;o<e.items.length;o++){const a=e.items[o];i+=this.listitem(a)}const s=t?"ol":"ul",n=t&&r!==1?' start="'+r+'"':"";return"<"+s+n+`>
`+i+"</"+s+`>
`}listitem(e){let t="";if(e.task){const r=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" "}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let s=0;s<e.header.length;s++)r+=this.tablecell(e.header[s]);t+=this.tablerow({text:r});let i="";for(let s=0;s<e.rows.length;s++){const n=e.rows[s];r="";for(let o=0;o<n.length;o++)r+=this.tablecell(n[o]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){const i=this.parser.parseInline(r),s=t4(e);if(s===null)return i;e=s;let n='<a href="'+e+'"';return t&&(n+=' title="'+t+'"'),n+=">"+i+"</a>",n}image({href:e,title:t,text:r}){const i=t4(e);if(i===null)return r;e=i;let s=`<img src="${e}" alt="${r}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}},Eg=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},ln=class Q0{options;renderer;textRenderer;constructor(t){this.options=t||an,this.options.renderer=this.options.renderer||new Mu,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Eg}static parse(t,r){return new Q0(r).parse(t)}static parseInline(t,r){return new Q0(r).parseInline(t)}parse(t,r=!0){let i="";for(let s=0;s<t.length;s++){const n=t[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const a=n,c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){i+=c||"";continue}}const o=n;switch(o.type){case"space":{i+=this.renderer.space(o);continue}case"hr":{i+=this.renderer.hr(o);continue}case"heading":{i+=this.renderer.heading(o);continue}case"code":{i+=this.renderer.code(o);continue}case"table":{i+=this.renderer.table(o);continue}case"blockquote":{i+=this.renderer.blockquote(o);continue}case"list":{i+=this.renderer.list(o);continue}case"html":{i+=this.renderer.html(o);continue}case"paragraph":{i+=this.renderer.paragraph(o);continue}case"text":{let a=o,c=this.renderer.text(a);for(;s+1<t.length&&t[s+1].type==="text";)a=t[++s],c+=`
`+this.renderer.text(a);r?i+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c}]}):i+=c;continue}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}parseInline(t,r){r=r||this.renderer;let i="";for(let s=0;s<t.length;s++){const n=t[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const a=this.options.extensions.renderers[n.type].call({parser:this},n);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)){i+=a||"";continue}}const o=n;switch(o.type){case"escape":{i+=r.text(o);break}case"html":{i+=r.html(o);break}case"link":{i+=r.link(o);break}case"image":{i+=r.image(o);break}case"strong":{i+=r.strong(o);break}case"em":{i+=r.em(o);break}case"codespan":{i+=r.codespan(o);break}case"br":{i+=r.br(o);break}case"del":{i+=r.del(o);break}case"text":{i+=r.text(o);break}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}},Ou=class{options;constructor(e){this.options=e||an}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}},mC=class{defaults=pg();options=this.setOptions;parse=this.parseMarkdown(cn.lex,ln.parse);parseInline=this.parseMarkdown(cn.lexInline,ln.parseInline);Parser=ln;Renderer=Mu;TextRenderer=Eg;Lexer=cn;Tokenizer=Ru;Hooks=Ou;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(const i of e)switch(r=r.concat(t.call(this,i)),i.type){case"table":{const s=i;for(const n of s.header)r=r.concat(this.walkTokens(n.tokens,t));for(const n of s.rows)for(const o of n)r=r.concat(this.walkTokens(o.tokens,t));break}case"list":{const s=i;r=r.concat(this.walkTokens(s.items,t));break}default:{const s=i;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(n=>{const o=s[n].flat(1/0);r=r.concat(this.walkTokens(o,t))}):s.tokens&&(r=r.concat(this.walkTokens(s.tokens,t)))}}return r}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const n=t.renderers[s.name];n?t.renderers[s.name]=function(...o){let a=s.renderer.apply(this,o);return a===!1&&(a=n.apply(this,o)),a}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const n=t[s.level];n?n.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),i.extensions=t),r.renderer){const s=this.defaults.renderer||new Mu(this.defaults);for(const n in r.renderer){if(!(n in s))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;const o=n,a=r.renderer[o],c=s[o];s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u||""}}i.renderer=s}if(r.tokenizer){const s=this.defaults.tokenizer||new Ru(this.defaults);for(const n in r.tokenizer){if(!(n in s))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const o=n,a=r.tokenizer[o],c=s[o];s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u}}i.tokenizer=s}if(r.hooks){const s=this.defaults.hooks||new Ou;for(const n in r.hooks){if(!(n in s))throw new Error(`hook '${n}' does not exist`);if(n==="options")continue;const o=n,a=r.hooks[o],c=s[o];Ou.passThroughHooks.has(n)?s[o]=l=>{if(this.defaults.async)return Promise.resolve(a.call(s,l)).then(h=>c.call(s,h));const u=a.call(s,l);return c.call(s,u)}:s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u}}i.hooks=s}if(r.walkTokens){const s=this.defaults.walkTokens,n=r.walkTokens;i.walkTokens=function(o){let a=[];return a.push(n.call(this,o)),s&&(a=a.concat(s.call(this,o))),a}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return cn.lex(e,t??this.defaults)}parser(e,t){return ln.parse(e,t??this.defaults)}parseMarkdown(e,t){return(i,s)=>{const n={...s},o={...this.defaults,...n},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&n.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof i>"u"||i===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof i!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(i):i).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(i=o.hooks.preprocess(i));let c=e(i,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let l=t(c,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(c){return a(c)}}}onError(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+Pr(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}}},un=new mC;function Xe(e,t){return un.parse(e,t)}Xe.options=Xe.setOptions=function(e){return un.setOptions(e),Xe.defaults=un.defaults,Yy(Xe.defaults),Xe},Xe.getDefaults=pg,Xe.defaults=an,Xe.use=function(...e){return un.use(...e),Xe.defaults=un.defaults,Yy(Xe.defaults),Xe},Xe.walkTokens=function(e,t){return un.walkTokens(e,t)},Xe.parseInline=un.parseInline,Xe.Parser=ln,Xe.parser=ln.parse,Xe.Renderer=Mu,Xe.TextRenderer=Eg,Xe.Lexer=cn,Xe.lexer=cn.lex,Xe.Tokenizer=Ru,Xe.Hooks=Ou,Xe.parse=Xe;var TM=Xe.options,RM=Xe.setOptions,LM=Xe.use,NM=Xe.walkTokens,FM=Xe.parseInline,MM=ln.parse,OM=cn.lex;function vC(e){return JSON.stringify(e,wC)}function d4(e){let t=JSON.parse(e);return t=ir(t),t}function wC(e,t){return t instanceof RegExp?{$mid:2,source:t.source,flags:t.flags}:t}function ir(e,t=0){if(!e||t>200)return e;if(typeof e=="object"){switch(e.$mid){case 1:return y.revive(e);case 2:return new RegExp(e.source,e.flags);case 17:return new Date(e.source)}if(e instanceof ke||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let r=0;r<e.length;++r)e[r]=ir(e[r],t+1);else for(const r in e)Object.hasOwnProperty.call(e,r)&&(e[r]=ir(e[r],t+1))}return e}var ji=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),bC=/^(.+)\/(.+?)(;.+)?$/;function f4(e,t){const r=bC.exec(e);return r?`${r[1].toLowerCase()}/${r[2].toLowerCase()}${r[3]??""}`:t?void 0:e}var Jt=Symbol("unset"),yC=class{constructor(){this.root=new xg,this.a=0}get size(){return this.a}get nodes(){return this.root.children?.values()||mr.empty()}get entries(){return this.root.children?.entries()||mr.empty()}insert(e,t,r){this.c(e,i=>i._value=t,r)}mutate(e,t){this.c(e,r=>r._value=t(r._value===Jt?void 0:r._value))}mutatePath(e,t){this.c(e,()=>{},r=>t(r))}delete(e){const t=this.b(e);if(!t)return;let r=t.length-1;const i=t[r].node._value;if(i!==Jt){for(this.a--,t[r].node._value=Jt;r>0;r--){const{node:s,part:n}=t[r];if(s.children?.size||s._value!==Jt)break;t[r-1].node.children.delete(n)}return i}}*deleteRecursive(e){const t=this.b(e);if(!t)return;const r=t[t.length-1].node;for(let i=t.length-1;i>0;i--){const s=t[i-1];if(s.node.children.delete(t[i].part),s.node.children.size>0||s.node._value!==Jt)break}for(const i of p4(r))i._value!==Jt&&(this.a--,yield i._value);r===this.root&&(this.root._value=Jt,this.root.children=void 0)}find(e){let t=this.root;for(const r of e){const i=t.children?.get(r);if(!i)return;t=i}return t._value===Jt?void 0:t._value}hasKeyOrParent(e){let t=this.root;for(const r of e){const i=t.children?.get(r);if(!i)return!1;if(i._value!==Jt)return!0;t=i}return!1}hasKeyOrChildren(e){let t=this.root;for(const r of e){const i=t.children?.get(r);if(!i)return!1;t=i}return!0}hasKey(e){let t=this.root;for(const r of e){const i=t.children?.get(r);if(!i)return!1;t=i}return t._value!==Jt}b(e){const t=[{part:"",node:this.root}];let r=0;for(const i of e){const s=t[r].node.children?.get(i);if(!s)return;t.push({part:i,node:s}),r++}return t}c(e,t,r){let i=this.root;for(const o of e){if(i.children)if(i.children.has(o))i=i.children.get(o);else{const a=new xg;i.children.set(o,a),i=a}else{const a=new xg;i.children=new Map([[o,a]]),i=a}r?.(i)}const s=i._value===Jt?0:1;t(i);const n=i._value===Jt?0:1;this.a+=n-s}*values(){for(const{_value:e}of p4(this.root))e!==Jt&&(yield e)}};function*p4(e){const t=[e];for(;t.length>0;){const r=t.pop();if(yield r,r.children)for(const i of r.children.values())t.push(i)}}var xg=class{constructor(){this._value=Jt}get value(){return this._value===Jt?void 0:this._value}set value(e){this._value=e===void 0?Jt:e}},Ar=class Wn{constructor(t,r){this.lineNumber=t,this.column=r}with(t=this.lineNumber,r=this.column){return t===this.lineNumber&&r===this.column?this:new Wn(t,r)}delta(t=0,r=0){return this.with(Math.max(1,this.lineNumber+t),Math.max(1,this.column+r))}equals(t){return Wn.equals(this,t)}static equals(t,r){return!t&&!r?!0:!!t&&!!r&&t.lineNumber===r.lineNumber&&t.column===r.column}isBefore(t){return Wn.isBefore(this,t)}static isBefore(t,r){return t.lineNumber<r.lineNumber?!0:r.lineNumber<t.lineNumber?!1:t.column<r.column}isBeforeOrEqual(t){return Wn.isBeforeOrEqual(this,t)}static isBeforeOrEqual(t,r){return t.lineNumber<r.lineNumber?!0:r.lineNumber<t.lineNumber?!1:t.column<=r.column}static compare(t,r){const i=t.lineNumber|0,s=r.lineNumber|0;if(i===s){const n=t.column|0,o=r.column|0;return n-o}return i-s}clone(){return new Wn(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(t){return new Wn(t.lineNumber,t.column)}static isIPosition(t){return t&&typeof t.lineNumber=="number"&&typeof t.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},ze=class Pt{constructor(t,r,i,s){t>i||t===i&&r>s?(this.startLineNumber=i,this.startColumn=s,this.endLineNumber=t,this.endColumn=r):(this.startLineNumber=t,this.startColumn=r,this.endLineNumber=i,this.endColumn=s)}isEmpty(){return Pt.isEmpty(this)}static isEmpty(t){return t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn}containsPosition(t){return Pt.containsPosition(this,t)}static containsPosition(t,r){return!(r.lineNumber<t.startLineNumber||r.lineNumber>t.endLineNumber||r.lineNumber===t.startLineNumber&&r.column<t.startColumn||r.lineNumber===t.endLineNumber&&r.column>t.endColumn)}static strictContainsPosition(t,r){return!(r.lineNumber<t.startLineNumber||r.lineNumber>t.endLineNumber||r.lineNumber===t.startLineNumber&&r.column<=t.startColumn||r.lineNumber===t.endLineNumber&&r.column>=t.endColumn)}containsRange(t){return Pt.containsRange(this,t)}static containsRange(t,r){return!(r.startLineNumber<t.startLineNumber||r.endLineNumber<t.startLineNumber||r.startLineNumber>t.endLineNumber||r.endLineNumber>t.endLineNumber||r.startLineNumber===t.startLineNumber&&r.startColumn<t.startColumn||r.endLineNumber===t.endLineNumber&&r.endColumn>t.endColumn)}strictContainsRange(t){return Pt.strictContainsRange(this,t)}static strictContainsRange(t,r){return!(r.startLineNumber<t.startLineNumber||r.endLineNumber<t.startLineNumber||r.startLineNumber>t.endLineNumber||r.endLineNumber>t.endLineNumber||r.startLineNumber===t.startLineNumber&&r.startColumn<=t.startColumn||r.endLineNumber===t.endLineNumber&&r.endColumn>=t.endColumn)}plusRange(t){return Pt.plusRange(this,t)}static plusRange(t,r){let i,s,n,o;return r.startLineNumber<t.startLineNumber?(i=r.startLineNumber,s=r.startColumn):r.startLineNumber===t.startLineNumber?(i=r.startLineNumber,s=Math.min(r.startColumn,t.startColumn)):(i=t.startLineNumber,s=t.startColumn),r.endLineNumber>t.endLineNumber?(n=r.endLineNumber,o=r.endColumn):r.endLineNumber===t.endLineNumber?(n=r.endLineNumber,o=Math.max(r.endColumn,t.endColumn)):(n=t.endLineNumber,o=t.endColumn),new Pt(i,s,n,o)}intersectRanges(t){return Pt.intersectRanges(this,t)}static intersectRanges(t,r){let i=t.startLineNumber,s=t.startColumn,n=t.endLineNumber,o=t.endColumn;const a=r.startLineNumber,c=r.startColumn,l=r.endLineNumber,u=r.endColumn;return i<a?(i=a,s=c):i===a&&(s=Math.max(s,c)),n>l?(n=l,o=u):n===l&&(o=Math.min(o,u)),i>n||i===n&&s>o?null:new Pt(i,s,n,o)}equalsRange(t){return Pt.equalsRange(this,t)}static equalsRange(t,r){return!t&&!r?!0:!!t&&!!r&&t.startLineNumber===r.startLineNumber&&t.startColumn===r.startColumn&&t.endLineNumber===r.endLineNumber&&t.endColumn===r.endColumn}getEndPosition(){return Pt.getEndPosition(this)}static getEndPosition(t){return new Ar(t.endLineNumber,t.endColumn)}getStartPosition(){return Pt.getStartPosition(this)}static getStartPosition(t){return new Ar(t.startLineNumber,t.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(t,r){return new Pt(this.startLineNumber,this.startColumn,t,r)}setStartPosition(t,r){return new Pt(t,r,this.endLineNumber,this.endColumn)}collapseToStart(){return Pt.collapseToStart(this)}static collapseToStart(t){return new Pt(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn)}collapseToEnd(){return Pt.collapseToEnd(this)}static collapseToEnd(t){return new Pt(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn)}delta(t){return new Pt(this.startLineNumber+t,this.startColumn,this.endLineNumber+t,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(t,r=t){return new Pt(t.lineNumber,t.column,r.lineNumber,r.column)}static lift(t){return t?new Pt(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):null}static isIRange(t){return t&&typeof t.startLineNumber=="number"&&typeof t.startColumn=="number"&&typeof t.endLineNumber=="number"&&typeof t.endColumn=="number"}static areIntersectingOrTouching(t,r){return!(t.endLineNumber<r.startLineNumber||t.endLineNumber===r.startLineNumber&&t.endColumn<r.startColumn||r.endLineNumber<t.startLineNumber||r.endLineNumber===t.startLineNumber&&r.endColumn<t.startColumn)}static areIntersecting(t,r){return!(t.endLineNumber<r.startLineNumber||t.endLineNumber===r.startLineNumber&&t.endColumn<=r.startColumn||r.endLineNumber<t.startLineNumber||r.endLineNumber===t.startLineNumber&&r.endColumn<=t.startColumn)}static compareRangesUsingStarts(t,r){if(t&&r){const n=t.startLineNumber|0,o=r.startLineNumber|0;if(n===o){const a=t.startColumn|0,c=r.startColumn|0;if(a===c){const l=t.endLineNumber|0,u=r.endLineNumber|0;if(l===u){const h=t.endColumn|0,p=r.endColumn|0;return h-p}return l-u}return a-c}return n-o}return(t?1:0)-(r?1:0)}static compareRangesUsingEnds(t,r){return t.endLineNumber===r.endLineNumber?t.endColumn===r.endColumn?t.startLineNumber===r.startLineNumber?t.startColumn-r.startColumn:t.startLineNumber-r.startLineNumber:t.endColumn-r.endColumn:t.endLineNumber-r.endLineNumber}static spansMultipleLines(t){return t.endLineNumber>t.startLineNumber}toJSON(){return this}},g4=class{constructor(){this.a=new Map,this.b=new Map,this.c=new D,this.onDidChange=this.c.event,this.d=null}handleChange(e){this.c.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this.a.set(e,t),this.handleChange([e]),ce(()=>{this.a.get(e)===t&&(this.a.delete(e),this.handleChange([e]))})}get(e){return this.a.get(e)||null}registerFactory(e,t){this.b.get(e)?.dispose();const r=new EC(this,e,t);return this.b.set(e,r),ce(()=>{const i=this.b.get(e);!i||i!==r||(this.b.delete(e),i.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const r=this.b.get(e);return!r||r.isResolved?null:(await r.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const r=this.b.get(e);return!!(!r||r.isResolved)}setColorMap(e){this.d=e,this.c.fire({changedLanguages:Array.from(this.a.keys()),changedColorMap:!0})}getColorMap(){return this.d}getDefaultBackground(){return this.d&&this.d.length>2?this.d[2]:null}},EC=class extends he{get isResolved(){return this.c}constructor(e,t,r){super(),this.f=e,this.g=t,this.h=r,this.a=!1,this.b=null,this.c=!1}dispose(){this.a=!0,super.dispose()}async resolve(){return this.b||(this.b=this.j()),this.b}async j(){const e=await this.h.tokenizationSupport;this.c=!0,e&&!this.a&&this.B(this.f.register(this.g,e))}},m4;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(m4||(m4={}));var v4;(function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Snippet=27]="Snippet"})(v4||(v4={}));var w4;(function(e){const t=new Map;t.set(0,ie.symbolMethod),t.set(1,ie.symbolFunction),t.set(2,ie.symbolConstructor),t.set(3,ie.symbolField),t.set(4,ie.symbolVariable),t.set(5,ie.symbolClass),t.set(6,ie.symbolStruct),t.set(7,ie.symbolInterface),t.set(8,ie.symbolModule),t.set(9,ie.symbolProperty),t.set(10,ie.symbolEvent),t.set(11,ie.symbolOperator),t.set(12,ie.symbolUnit),t.set(13,ie.symbolValue),t.set(15,ie.symbolEnum),t.set(14,ie.symbolConstant),t.set(15,ie.symbolEnum),t.set(16,ie.symbolEnumMember),t.set(17,ie.symbolKeyword),t.set(27,ie.symbolSnippet),t.set(18,ie.symbolText),t.set(19,ie.symbolColor),t.set(20,ie.symbolFile),t.set(21,ie.symbolReference),t.set(22,ie.symbolCustomColor),t.set(23,ie.symbolFolder),t.set(24,ie.symbolTypeParameter),t.set(25,ie.account),t.set(26,ie.issues);function r(n){let o=t.get(n);return o||(console.info("No codicon found for CompletionItemKind "+n),o=ie.symbolProperty),o}e.toIcon=r;const i=new Map;i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26);function s(n,o){let a=i.get(n);return typeof a>"u"&&!o&&(a=9),a}e.fromString=s})(w4||(w4={}));var b4;(function(e){e[e.Deprecated=1]="Deprecated"})(b4||(b4={}));var y4;(function(e){e[e.None=0]="None",e[e.KeepWhitespace=1]="KeepWhitespace",e[e.InsertAsSnippet=4]="InsertAsSnippet"})(y4||(y4={}));var E4;(function(e){e[e.Word=0]="Word",e[e.Line=1]="Line",e[e.Suggest=2]="Suggest"})(E4||(E4={}));var x4;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(x4||(x4={}));var Uu;(function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"})(Uu||(Uu={}));var k4;(function(e){e[e.Invoke=1]="Invoke",e[e.Auto=2]="Auto"})(k4||(k4={}));var $4;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})($4||($4={}));var S4;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(S4||(S4={}));var I4;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(I4||(I4={}));function xC(e){return e&&y.isUri(e.uri)&&ze.isIRange(e.range)&&(ze.isIRange(e.originSelectionRange)||ze.isIRange(e.targetSelectionRange))}var C4;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(C4||(C4={}));var UM={17:d(815,null),16:d(816,null),4:d(817,null),13:d(818,null),8:d(819,null),9:d(820,null),21:d(821,null),23:d(822,null),7:d(823,null),0:d(824,null),11:d(825,null),10:d(826,null),19:d(827,null),5:d(828,null),1:d(829,null),2:d(830,null),20:d(831,null),15:d(832,null),18:d(833,null),24:d(834,null),3:d(835,null),6:d(836,null),14:d(837,null),22:d(838,null),25:d(839,null),12:d(840,null)},D4;(function(e){e[e.Deprecated=1]="Deprecated"})(D4||(D4={}));var P4;(function(e){const t=new Map;t.set(0,ie.symbolFile),t.set(1,ie.symbolModule),t.set(2,ie.symbolNamespace),t.set(3,ie.symbolPackage),t.set(4,ie.symbolClass),t.set(5,ie.symbolMethod),t.set(6,ie.symbolProperty),t.set(7,ie.symbolField),t.set(8,ie.symbolConstructor),t.set(9,ie.symbolEnum),t.set(10,ie.symbolInterface),t.set(11,ie.symbolFunction),t.set(12,ie.symbolVariable),t.set(13,ie.symbolConstant),t.set(14,ie.symbolString),t.set(15,ie.symbolNumber),t.set(16,ie.symbolBoolean),t.set(17,ie.symbolArray),t.set(18,ie.symbolObject),t.set(19,ie.symbolKey),t.set(20,ie.symbolNull),t.set(21,ie.symbolEnumMember),t.set(22,ie.symbolStruct),t.set(23,ie.symbolEvent),t.set(24,ie.symbolOperator),t.set(25,ie.symbolTypeParameter);function r(n){let o=t.get(n);return o||(console.info("No codicon found for SymbolKind "+n),o=ie.symbolProperty),o}e.toIcon=r;const i=new Map;i.set(0,20),i.set(1,8),i.set(2,8),i.set(3,8),i.set(4,5),i.set(5,0),i.set(6,9),i.set(7,3),i.set(8,2),i.set(9,15),i.set(10,7),i.set(11,1),i.set(12,4),i.set(13,14),i.set(14,18),i.set(15,13),i.set(16,13),i.set(17,13),i.set(18,13),i.set(19,17),i.set(20,13),i.set(21,16),i.set(22,6),i.set(23,10),i.set(24,11),i.set(25,24);function s(n){let o=i.get(n);return o===void 0&&(console.info("No completion kind found for SymbolKind "+n),o=20),o}e.toCompletionKind=s})(P4||(P4={}));var go=class _s{static{this.Comment=new _s("comment")}static{this.Imports=new _s("imports")}static{this.Region=new _s("region")}static fromValue(t){switch(t){case"comment":return _s.Comment;case"imports":return _s.Imports;case"region":return _s.Region}return new _s(t)}constructor(t){this.value=t}},A4;(function(e){e[e.AIGenerated=1]="AIGenerated"})(A4||(A4={}));var Hu;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(Hu||(Hu={}));var kg;(function(e){function t(r){return!r||typeof r!="object"?!1:typeof r.id=="string"&&typeof r.title=="string"}e.is=t})(kg||(kg={}));var mo;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(mo||(mo={}));var ac;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(ac||(ac={}));var cc;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(cc||(cc={}));var T4;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(T4||(T4={}));var R4;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(R4||(R4={}));var L4;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(L4||(L4={}));var HM=new g4,jM=new g4,N4;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(N4||(N4={}));var ju;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(ju||(ju={}));var F4;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(F4||(F4={}));var sr;(function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"})(sr||(sr={})),function(e){function t(o,a){return a-o}e.compare=t;const r=Object.create(null);r[e.Error]=d(2036,null),r[e.Warning]=d(2037,null),r[e.Info]=d(2038,null);function i(o){return r[o]||""}e.toString=i;function s(o){switch(o){case wt.Error:return e.Error;case wt.Warning:return e.Warning;case wt.Info:return e.Info;case wt.Ignore:return e.Hint}}e.fromSeverity=s;function n(o){switch(o){case e.Error:return wt.Error;case e.Warning:return wt.Warning;case e.Info:return wt.Info;case e.Hint:return wt.Ignore}}e.toSeverity=n}(sr||(sr={}));var M4;(function(e){const t="";function r(s){return i(s,!0)}e.makeKey=r;function i(s,n){const o=[t];return s.source?o.push(s.source.replace("\xA6","\\\xA6")):o.push(t),s.code?typeof s.code=="string"?o.push(s.code.replace("\xA6","\\\xA6")):o.push(s.code.value.replace("\xA6","\\\xA6")):o.push(t),s.severity!==void 0&&s.severity!==null?o.push(sr.toString(s.severity)):o.push(t),s.message&&n?o.push(s.message.replace("\xA6","\\\xA6")):o.push(t),s.startLineNumber!==void 0&&s.startLineNumber!==null?o.push(s.startLineNumber.toString()):o.push(t),s.startColumn!==void 0&&s.startColumn!==null?o.push(s.startColumn.toString()):o.push(t),s.endLineNumber!==void 0&&s.endLineNumber!==null?o.push(s.endLineNumber.toString()):o.push(t),s.endColumn!==void 0&&s.endColumn!==null?o.push(s.endColumn.toString()):o.push(t),o.push(t),o.join("\xA6")}e.makeKeyOptionalMessage=i})(M4||(M4={}));var BM=_("markerService"),kC=class{constructor(){this.a=new Map}add(e,t){Kt(Ce(e)),Kt(gt(t)),Kt(!this.a.has(e),"There is already an extension with this id"),this.a.set(e,t)}knows(e){return this.a.has(e)}as(e){return this.a.get(e)||null}},Bt=new kC,O4=_("fileService"),hn;(function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"})(hn||(hn={}));var vo;(function(e){e[e.Readonly=1]="Readonly",e[e.Locked=2]="Locked"})(vo||(vo={}));var U4;(function(e){e[e.UPDATED=2]="UPDATED",e[e.ADDED=4]="ADDED",e[e.DELETED=8]="DELETED"})(U4||(U4={}));var H4;(function(e){e[e.None=0]="None",e[e.FileReadWrite=2]="FileReadWrite",e[e.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",e[e.FileReadStream=16]="FileReadStream",e[e.FileFolderCopy=8]="FileFolderCopy",e[e.PathCaseSensitive=1024]="PathCaseSensitive",e[e.Readonly=2048]="Readonly",e[e.Trash=4096]="Trash",e[e.FileWriteUnlock=8192]="FileWriteUnlock",e[e.FileAtomicRead=16384]="FileAtomicRead",e[e.FileAtomicWrite=32768]="FileAtomicWrite",e[e.FileAtomicDelete=65536]="FileAtomicDelete",e[e.FileClone=131072]="FileClone"})(H4||(H4={}));var ve;(function(e){e.FileExists="EntryExists",e.FileNotFound="EntryNotFound",e.FileNotADirectory="EntryNotADirectory",e.FileIsADirectory="EntryIsADirectory",e.FileExceedsStorageQuota="EntryExceedsStorageQuota",e.FileTooLarge="EntryTooLarge",e.FileWriteLocked="EntryWriteLocked",e.NoPermissions="NoPermissions",e.Unavailable="Unavailable",e.Unknown="Unknown"})(ve||(ve={}));var j4=class Gx extends Error{static create(t,r){const i=new Gx(t.toString(),r);return B4(i,r),i}constructor(t,r){super(t),this.code=r}};function B4(e,t){return e.name=t?`${t} (FileSystemError)`:"FileSystemError",e}function Bu(e){if(!e)return ve.Unknown;if(e instanceof j4)return e.code;const t=/^(.+) \(FileSystemError\)$/.exec(e.name);if(!t)return ve.Unknown;switch(t[1]){case ve.FileExists:return ve.FileExists;case ve.FileIsADirectory:return ve.FileIsADirectory;case ve.FileNotADirectory:return ve.FileNotADirectory;case ve.FileNotFound:return ve.FileNotFound;case ve.FileTooLarge:return ve.FileTooLarge;case ve.FileWriteLocked:return ve.FileWriteLocked;case ve.NoPermissions:return ve.NoPermissions;case ve.Unavailable:return ve.Unavailable}return ve.Unknown}function $C(e){if(e instanceof $g)return e.fileOperationResult;switch(Bu(e)){case ve.FileNotFound:return 1;case ve.FileIsADirectory:return 0;case ve.FileNotADirectory:return 9;case ve.FileWriteLocked:return 5;case ve.NoPermissions:return 6;case ve.FileExists:return 4;case ve.FileTooLarge:return 7;default:return 10}}var _4;(function(e){e[e.CREATE=0]="CREATE",e[e.DELETE=1]="DELETE",e[e.MOVE=2]="MOVE",e[e.COPY=3]="COPY",e[e.WRITE=4]="WRITE"})(_4||(_4={}));var z4;(function(e){e[e.UPDATED=0]="UPDATED",e[e.ADDED=1]="ADDED",e[e.DELETED=2]="DELETED"})(z4||(z4={}));var _M=class qf{static{this.a=null}constructor(t,r){this.c=r,this.b=void 0,this.d=new pr(()=>{const i=bs.forUris(()=>this.c);return i.fill(this.rawAdded.map(s=>[s,!0])),i}),this.f=new pr(()=>{const i=bs.forUris(()=>this.c);return i.fill(this.rawUpdated.map(s=>[s,!0])),i}),this.g=new pr(()=>{const i=bs.forUris(()=>this.c);return i.fill(this.rawDeleted.map(s=>[s,!0])),i}),this.rawAdded=[],this.rawUpdated=[],this.rawDeleted=[];for(const i of t){switch(i.type){case 1:this.rawAdded.push(i.resource);break;case 0:this.rawUpdated.push(i.resource);break;case 2:this.rawDeleted.push(i.resource);break}this.b!==qf.a&&(typeof i.cId=="number"?this.b===void 0?this.b=i.cId:this.b!==i.cId&&(this.b=qf.a):this.b!==void 0&&(this.b=qf.a))}}contains(t,...r){return this.h(t,{includeChildren:!1},...r)}affects(t,...r){return this.h(t,{includeChildren:!0},...r)}h(t,r,...i){if(!t)return!1;const s=i.length>0;return!!((!s||i.includes(1))&&(this.d.value.get(t)||r.includeChildren&&this.d.value.findSuperstr(t))||(!s||i.includes(0))&&(this.f.value.get(t)||r.includeChildren&&this.f.value.findSuperstr(t))||(!s||i.includes(2))&&(this.g.value.findSubstr(t)||r.includeChildren&&this.g.value.findSuperstr(t)))}gotAdded(){return this.rawAdded.length>0}gotDeleted(){return this.rawDeleted.length>0}gotUpdated(){return this.rawUpdated.length>0}correlates(t){return this.b===t}hasCorrelation(){return typeof this.b=="number"}},$g=class extends Error{constructor(e,t,r){super(e),this.fileOperationResult=t,this.options=r}},W4;(function(e){e[e.FILE_IS_DIRECTORY=0]="FILE_IS_DIRECTORY",e[e.FILE_NOT_FOUND=1]="FILE_NOT_FOUND",e[e.FILE_NOT_MODIFIED_SINCE=2]="FILE_NOT_MODIFIED_SINCE",e[e.FILE_MODIFIED_SINCE=3]="FILE_MODIFIED_SINCE",e[e.FILE_MOVE_CONFLICT=4]="FILE_MOVE_CONFLICT",e[e.FILE_WRITE_LOCKED=5]="FILE_WRITE_LOCKED",e[e.FILE_PERMISSION_DENIED=6]="FILE_PERMISSION_DENIED",e[e.FILE_TOO_LARGE=7]="FILE_TOO_LARGE",e[e.FILE_INVALID_PATH=8]="FILE_INVALID_PATH",e[e.FILE_NOT_DIRECTORY=9]="FILE_NOT_DIRECTORY",e[e.FILE_OTHER_ERROR=10]="FILE_OTHER_ERROR"})(W4||(W4={}));var V4;(function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"})(V4||(V4={}));var SC="";function q4(e){if(!(typeof e.size!="number"||typeof e.mtime!="number"))return e.mtime.toString(29)+e.size.toString(31)}var zM=class dr{static{this.KB=1024}static{this.MB=dr.KB*dr.KB}static{this.GB=dr.MB*dr.KB}static{this.TB=dr.GB*dr.KB}static formatSize(t){return ls(t)||(t=0),t<dr.KB?d(1949,null,t.toFixed(0)):t<dr.MB?d(1950,null,(t/dr.KB).toFixed(2)):t<dr.GB?d(1951,null,(t/dr.MB).toFixed(2)):t<dr.TB?d(1952,null,(t/dr.GB).toFixed(2)):d(1953,null,(t/dr.TB).toFixed(2))}},IC=class extends he{constructor(e,t="",r="",i=!0,s){super(),this.j=this.B(new D),this.onDidChange=this.j.event,this.z=!0,this.m=e,this.n=t,this.w=r,this.z=i,this.D=s}get id(){return this.m}get label(){return this.n}set label(e){this.F(e)}F(e){this.n!==e&&(this.n=e,this.j.fire({label:e}))}get tooltip(){return this.u||""}set tooltip(e){this.G(e)}G(e){this.u!==e&&(this.u=e,this.j.fire({tooltip:e}))}get class(){return this.w}set class(e){this.H(e)}H(e){this.w!==e&&(this.w=e,this.j.fire({class:e}))}get enabled(){return this.z}set enabled(e){this.I(e)}I(e){this.z!==e&&(this.z=e,this.j.fire({enabled:e}))}get checked(){return this.C}set checked(e){this.J(e)}J(e){this.C!==e&&(this.C=e,this.j.fire({checked:e}))}async run(e,t){this.D&&await this.D(e)}},WM=class J0{constructor(){this.id=J0.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...t){let r=[];for(const i of t)i.length&&(r.length?r=[...r,new J0,...i]:r=i);return r}static{this.ID="vs.actions.separator"}async run(){}},VM=class Qx extends IC{static{this.ID="vs.actions.empty"}constructor(){super(Qx.ID,d(44,null),void 0,!1)}},CC={EditorPane:"workbench.contributions.editors",EditorFactory:"workbench.contributions.editor.inputFactories"},DC={id:"default",displayName:d(4179,null),providerDisplayName:d(4180,null)},G4;(function(e){e[e.PROGRAMMATIC=1]="PROGRAMMATIC",e[e.USER=2]="USER",e[e.EDIT=3]="EDIT",e[e.NAVIGATION=4]="NAVIGATION",e[e.JUMP=5]="JUMP"})(G4||(G4={}));var Q4;(function(e){e[e.IDENTICAL=1]="IDENTICAL",e[e.SIMILAR=2]="SIMILAR",e[e.DIFFERENT=3]="DIFFERENT"})(Q4||(Q4={}));function _u(e){if(ys(e))return!1;const t=e;return t?.original!==void 0&&t.modified!==void 0}function J4(e){if(ys(e))return!1;const t=e;return!t||t.resources&&!Array.isArray(t.resources)?!1:!!t.resources||!!t.multiDiffSource}function Sg(e){if(ys(e)||_u(e))return!1;const t=e;return t?.primary!==void 0&&t.secondary!==void 0}function zu(e){if(ys(e))return!1;const t=e;return y.isUri(t?.base?.resource)&&y.isUri(t?.input1?.resource)&&y.isUri(t?.input2?.resource)&&y.isUri(t?.result?.resource)}var X4;(function(e){e[e.SHORT=0]="SHORT",e[e.MEDIUM=1]="MEDIUM",e[e.LONG=2]="LONG"})(X4||(X4={}));var Y4;(function(e){e[e.EXPLICIT=1]="EXPLICIT",e[e.AUTO=2]="AUTO",e[e.FOCUS_CHANGE=3]="FOCUS_CHANGE",e[e.WINDOW_CHANGE=4]="WINDOW_CHANGE"})(Y4||(Y4={}));var PC=class{constructor(){this.a=new Map}registerSource(e,t){let r=this.a.get(e);return r||(r={source:e,label:t},this.a.set(e,r)),r.source}getSourceLabel(e){return this.a.get(e)?.label??e}},qM=new PC,Z4;(function(e){e[e.None=0]="None",e[e.Readonly=2]="Readonly",e[e.Untitled=4]="Untitled",e[e.Singleton=8]="Singleton",e[e.RequiresTrust=16]="RequiresTrust",e[e.CanSplitInGroup=32]="CanSplitInGroup",e[e.ForceDescription=64]="ForceDescription",e[e.CanDropIntoEditor=128]="CanDropIntoEditor",e[e.MultipleEditors=256]="MultipleEditors",e[e.Scratchpad=512]="Scratchpad"})(Z4||(Z4={}));var AC=class extends he{};function ys(e){return e instanceof AC}function TC(e){const t=e;return y.isUri(t?.preferredResource)}function RC(e){const t=e;return ys(t?.primary)&&ys(t?.secondary)}function LC(e){const t=e;return ys(t?.modified)&&ys(t?.original)}var K4;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.REPLACE=1]="REPLACE",e[e.MOVE=2]="MOVE",e[e.UNPIN=3]="UNPIN"})(K4||(K4={}));var e5;(function(e){e[e.GROUP_ACTIVE=0]="GROUP_ACTIVE",e[e.GROUP_INDEX=1]="GROUP_INDEX",e[e.GROUP_LABEL=2]="GROUP_LABEL",e[e.GROUP_LOCKED=3]="GROUP_LOCKED",e[e.EDITORS_SELECTION=4]="EDITORS_SELECTION",e[e.EDITOR_OPEN=5]="EDITOR_OPEN",e[e.EDITOR_CLOSE=6]="EDITOR_CLOSE",e[e.EDITOR_MOVE=7]="EDITOR_MOVE",e[e.EDITOR_ACTIVE=8]="EDITOR_ACTIVE",e[e.EDITOR_LABEL=9]="EDITOR_LABEL",e[e.EDITOR_CAPABILITIES=10]="EDITOR_CAPABILITIES",e[e.EDITOR_PIN=11]="EDITOR_PIN",e[e.EDITOR_TRANSIENT=12]="EDITOR_TRANSIENT",e[e.EDITOR_STICKY=13]="EDITOR_STICKY",e[e.EDITOR_DIRTY=14]="EDITOR_DIRTY",e[e.EDITOR_WILL_DISPOSE=15]="EDITOR_WILL_DISPOSE"})(e5||(e5={}));var Es;(function(e){e[e.PRIMARY=1]="PRIMARY",e[e.SECONDARY=2]="SECONDARY",e[e.BOTH=3]="BOTH",e[e.ANY=4]="ANY"})(Es||(Es={}));var NC=class{getOriginalUri(e,t){if(!e)return;if(zu(e))return r5.getOriginalUri(e.result,t);if(t?.supportSideBySide){const{primary:i,secondary:s}=this.a(e);if(i&&s){if(t?.supportSideBySide===Es.BOTH)return{primary:this.getOriginalUri(i,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===Es.ANY)return this.getOriginalUri(i,{filterByScheme:t.filterByScheme})??this.getOriginalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===Es.PRIMARY?i:s}}if(_u(e)||J4(e)||Sg(e)||zu(e))return;const r=TC(e)?e.preferredResource:e.resource;return!r||!t||!t.filterByScheme?r:this.b(r,t.filterByScheme)}a(e){return RC(e)||Sg(e)?{primary:e.primary,secondary:e.secondary}:LC(e)||_u(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if(zu(e))return r5.getCanonicalUri(e.result,t);if(t?.supportSideBySide){const{primary:i,secondary:s}=this.a(e);if(i&&s){if(t?.supportSideBySide===Es.BOTH)return{primary:this.getCanonicalUri(i,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===Es.ANY)return this.getCanonicalUri(i,{filterByScheme:t.filterByScheme})??this.getCanonicalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===Es.PRIMARY?i:s}}if(_u(e)||J4(e)||Sg(e)||zu(e))return;const r=e.resource;return!r||!t||!t.filterByScheme?r:this.b(r,t.filterByScheme)}b(e,t){if(Array.isArray(t)){if(t.some(r=>e.scheme===r))return e}else if(t===e.scheme)return e}},t5;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.KEYBOARD=1]="KEYBOARD",e[e.MOUSE=2]="MOUSE"})(t5||(t5={}));var r5=new NC,i5;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(i5||(i5={}));var FC=class{constructor(){this.c=new Map,this.d=new Map}start(e){const t=this.a=e.get($u);for(const[r,i]of this.c)this.e(r,i,t);this.c.clear()}e(e,t,r){const i=r.createInstance(t);this.d.set(e,i)}registerFileEditorFactory(e){if(this.b)throw new Error("Can only register one file editor factory.");this.b=e}getFileEditorFactory(){return Kn(this.b)}registerEditorSerializer(e,t){if(this.c.has(e)||this.d.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.a?this.e(e,t,this.a):this.c.set(e,t),ce(()=>{this.c.delete(e),this.d.delete(e)})}getEditorSerializer(e){return this.d.get(typeof e=="string"?e:e.typeId)}};Bt.add(CC.EditorFactory,new FC);var s5;(function(e){e[e.MOST_RECENTLY_ACTIVE=0]="MOST_RECENTLY_ACTIVE",e[e.SEQUENTIAL=1]="SEQUENTIAL"})(s5||(s5={}));var lc=class{constructor(e,t,r){this.owner=e,this.debugNameSource=t,this.referenceFn=r}getDebugName(e){return MC(e,this)}},n5=new Map,Ig=new WeakMap;function MC(e,t){const r=Ig.get(e);if(r)return r;const i=OC(e,t);if(i){let s=n5.get(i)??0;s++,n5.set(i,s);const n=s===1?i:`${i}#${s}`;return Ig.set(e,n),n}}function OC(e,t){const r=Ig.get(e);if(r)return r;const i=t.owner?HC(t.owner)+".":"";let s;const n=t.debugNameSource;if(n!==void 0)if(typeof n=="function"){if(s=n(),s!==void 0)return i+s}else return i+n;const o=t.referenceFn;if(o!==void 0&&(s=Cg(o),s!==void 0))return i+s;if(t.owner!==void 0){const a=UC(t.owner,e);if(a!==void 0)return i+a}}function UC(e,t){for(const r in e)if(e[r]===t)return r}var o5=new Map,a5=new WeakMap;function HC(e){const t=a5.get(e);if(t)return t;const r=jC(e);let i=o5.get(r)??0;i++,o5.set(r,i);const s=i===1?r:`${r}#${i}`;return a5.set(e,s),s}function jC(e){const t=e.constructor;return t?t.name:"Object"}function Cg(e){const t=e.toString(),i=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(t);return(i?i[1]:void 0)?.trim()}var Dg=(e,t)=>e===t;function Pg(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Pg(e[r],t[r]))return!1;return!0}if(e&&typeof e=="object"&&t&&typeof t=="object"&&Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){const r=e,i=t,s=Object.keys(r),n=Object.keys(i),o=new Set(n);if(s.length!==n.length)return!1;for(const a of s)if(!o.has(a)||!Pg(r[a],i[a]))return!1;return!0}return!1}var uc;function c5(e){uc=e}function Tr(){return uc}function BC(e){if(uc)uc instanceof Ag&&uc.addFilteredObj(e);else{const t=new Ag;t.addFilteredObj(e),c5(t)}}var Ag=class{constructor(){this.a=0,this.f=new WeakMap}addFilteredObj(e){this.b||(this.b=new Set),this.b.add(e)}c(e){return this.b?.has(e)??!0}d(e){return _C([wo(VC("|  ",this.a)),e])}e(e){return e.hadValue?e.didChange?[wo(" "),Ur(hc(e.oldValue,70),{color:"red",strikeThrough:!0}),wo(" "),Ur(hc(e.newValue,60),{color:"green"})]:[wo(" (unchanged)")]:[wo(" "),Ur(hc(e.newValue,60),{color:"green"}),wo(" (initial)")]}handleObservableChanged(e,t){this.c(e)&&console.log(...this.d([bo("observable value changed"),Ur(e.debugName,{color:"BlueViolet"}),...this.e(t)]))}formatChanges(e){if(e.size!==0)return Ur(" (changed deps: "+[...e].map(t=>t.debugName).join(", ")+")",{color:"gray"})}handleDerivedCreated(e){const t=e.handleChange;if(this.f.set(e,new Set),e.handleChange=(i,s)=>(this.f.get(e).add(i),t.apply(e,[i,s])),!1){const i=[];e.__debugUpdating=i;const s=e.beginUpdate;e.beginUpdate=o=>(i.push(o),s.apply(e,[o]));const n=e.endUpdate;e.endUpdate=o=>{const a=i.indexOf(o);return a===-1&&console.error("endUpdate called without beginUpdate",e.debugName,o.debugName),i.splice(a,1),n.apply(e,[o])}}}handleDerivedRecomputed(e,t){if(!this.c(e))return;const r=this.f.get(e);r&&(console.log(...this.d([bo("derived recomputed"),Ur(e.debugName,{color:"BlueViolet"}),...this.e(t),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),r.clear())}handleDerivedCleared(e){this.c(e)&&console.log(...this.d([bo("derived cleared"),Ur(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,t){this.c(e)&&console.log(...this.d([bo("observable from event triggered"),Ur(e.debugName,{color:"BlueViolet"}),...this.e(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){if(!this.c(e))return;const t=e.handleChange;this.f.set(e,new Set),e.handleChange=(r,i)=>(this.f.get(e).add(r),t.apply(e,[r,i]))}handleAutorunTriggered(e){const t=this.f.get(e);t&&(this.c(e)&&console.log(...this.d([bo("autorun"),Ur(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.a++)}handleAutorunFinished(e){this.a--}handleBeginTransaction(e){let t=e.getDebugName();t===void 0&&(t=""),this.c(e)&&console.log(...this.d([bo("transaction"),Ur(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.a++}handleEndTransaction(){this.a--}};function _C(e){const t=new Array,r=[];let i="";function s(o){if("length"in o)for(const a of o)a&&s(a);else"text"in o?(i+=`%c${o.text}`,t.push(o.style),o.data&&r.push(...o.data)):"data"in o&&r.push(...o.data)}s(e);const n=[i,...t];return n.push(...r),n}function wo(e){return Ur(e,{color:"black"})}function bo(e){return Ur(qC(`${e}: `,10),{color:"black",bold:!0})}function Ur(e,t={color:"black"}){function r(s){return Object.entries(s).reduce((n,[o,a])=>`${n}${o}:${a};`,"")}const i={color:t.color};return t.strikeThrough&&(i["text-decoration"]="line-through"),t.bold&&(i["font-weight"]="bold"),{text:e,style:r(i)}}function hc(e,t){switch(typeof e){case"number":return""+e;case"string":return e.length+2<=t?`"${e}"`:`"${e.substr(0,t-7)}"+...`;case"boolean":return e?"true":"false";case"undefined":return"undefined";case"object":return e===null?"null":Array.isArray(e)?zC(e,t):WC(e,t);case"symbol":return e.toString();case"function":return`[[Function${e.name?" "+e.name:""}]]`;default:return""+e}}function zC(e,t){let r="[ ",i=!0;for(const s of e){if(i||(r+=", "),r.length-5>t){r+="...";break}i=!1,r+=`${hc(s,t-r.length)}`}return r+=" ]",r}function WC(e,t){if(typeof e.toString=="function"&&e.toString!==Object.prototype.toString){const s=e.toString();return s.length<=t?s:s.substring(0,t-3)+"..."}let r="{ ",i=!0;for(const[s,n]of Object.entries(e)){if(i||(r+=", "),r.length-5>t){r+="...";break}i=!1,r+=`${s}: ${hc(n,t-r.length)}`}return r+=" }",r}function VC(e,t){let r="";for(let i=1;i<=t;i++)r+=e;return r}function qC(e,t){for(;e.length<t;)e+=" ";return e}var l5;function GC(e){l5=e}var u5;function QC(e){u5=e}var Tg;function JC(e){Tg=e}var XC=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const r=t===void 0?void 0:e,i=t===void 0?e:t;return Tg({owner:r,debugName:()=>{const s=Cg(i);if(s!==void 0)return s;const o=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(o)return`${this.debugName}.${o[2]}`;if(!r)return`${this.debugName} (mapped)`},debugReferenceFn:i},s=>i(this.read(s),s))}log(){return BC(this),this}flatten(){return Tg({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(l5(this,t)),this}keepObserved(e){return e.add(u5(this)),this}get a(){return this.get()}},Rg=class extends XC{constructor(){super(...arguments),this.b=new Set}addObserver(e){const t=this.b.size;this.b.add(e),t===0&&this.c()}removeObserver(e){this.b.delete(e)&&this.b.size===0&&this.f()}c(){}f(){}};function YC(e,t){const r=new h5(e,t);try{e(r)}finally{r.finish()}}function ZC(e,t,r){e?t(e):YC(t,r)}var h5=class{constructor(e,t){this._fn=e,this.b=t,this.a=[],Tr()?.handleBeginTransaction(this)}getDebugName(){return this.b?this.b():Cg(this._fn)}updateObserver(e,t){this.a.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.a;for(let t=0;t<e.length;t++){const{observer:r,observable:i}=e[t];r.endUpdate(i)}this.a=null,Tr()?.handleEndTransaction()}};function KC(e,t){let r;return typeof e=="string"?r=new lc(void 0,e,void 0):r=new lc(e,void 0,void 0),new e2(r,t,Dg)}var e2=class extends Rg{get debugName(){return this.e.getDebugName(this)??"ObservableValue"}constructor(e,t,r){super(),this.e=e,this.g=r,this.d=t}get(){return this.d}set(e,t,r){if(r===void 0&&this.g(this.d,e))return;let i;t||(t=i=new h5(()=>{},()=>`Setting ${this.debugName}`));try{const s=this.d;this.h(e),Tr()?.handleObservableChanged(this,{oldValue:s,newValue:e,change:r,didChange:!0,hadValue:!0});for(const n of this.b)t.updateObserver(n,this),n.handleChange(this,r)}finally{i&&i.finish()}}toString(){return`${this.debugName}: ${this.d}`}h(e){this.d=e}};function Lg(e){return new f5(new lc(void 0,void 0,e),e,void 0,void 0)}var d5;(function(e){e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(d5||(d5={}));var f5=class{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,r,i){this._debugNameData=e,this._runFn=t,this.i=r,this.j=i,this.a=2,this.b=0,this.c=!1,this.f=new Set,this.g=new Set,this.l=!1,this.h=this.i?.(),Tr()?.handleAutorunCreated(this),this.k(),to(this)}dispose(){this.c=!0;for(const e of this.f)e.removeObserver(this);this.f.clear(),ro(this)}k(){if(this.a===3)return;const e=this.g;this.g=this.f,this.f=e,this.a=3;const t=this.c;try{if(!t){Tr()?.handleAutorunTriggered(this);const r=this.h;try{this.h=this.i?.(),this.l=!0,this._runFn(this,r)}catch(i){eu(i)}finally{this.l=!1}}}finally{t||Tr()?.handleAutorunFinished(this);for(const r of this.g)r.removeObserver(this);this.g.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.a===3&&(this.a=1),this.b++}endUpdate(){try{if(this.b===1)do{if(this.a===1){this.a=3;for(const e of this.f)if(e.reportChanges(),this.a===2)break}this.k()}while(this.a!==3)}finally{this.b--}Ew(()=>this.b>=0)}handlePossibleChange(e){this.a===3&&this.f.has(e)&&!this.g.has(e)&&(this.a=1)}handleChange(e,t){if(this.f.has(e)&&!this.g.has(e))try{(this.j?this.j({changedObservable:e,change:t,didChange:i=>i===e},this.h):!0)&&(this.a=2)}catch(r){eu(r)}}readObservable(e){if(!this.l)throw new Qs("The reader object cannot be used outside its compute function!");if(this.c)return e.get();e.addObserver(this);const t=e.get();return this.f.add(e),this.g.delete(e),t}};(function(e){e.Observer=f5})(Lg||(Lg={}));function t2(e,t){return new r2(new lc(e.owner,e.debugName,e.debugReferenceFn),t,void 0,void 0,e.onLastObserverRemoved,e.equalsFn??Dg)}JC(t2);var p5;(function(e){e[e.initial=0]="initial",e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(p5||(p5={}));var r2=class extends Rg{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,r,i,s=void 0,n){super(),this._debugNameData=e,this._computeFn=t,this.q=r,this.s=i,this.t=s,this.u=n,this.g=0,this.h=void 0,this.j=0,this.k=new Set,this.l=new Set,this.m=void 0,this.n=!1,this.p=!1,this.x=null,this.y=!1,this.m=this.q?.(),Tr()?.handleDerivedCreated(this)}f(){this.g=0,this.h=void 0,Tr()?.handleDerivedCleared(this);for(const e of this.k)e.removeObserver(this);this.k.clear(),this.t?.()}get(){if(this.p)throw new Qs("Cyclic deriveds are not supported yet!");if(this.b.size===0){let e;try{this.y=!0,e=this._computeFn(this,this.q?.())}finally{this.y=!1}return this.f(),e}else{do{if(this.g===1){for(const e of this.k)if(e.reportChanges(),this.g===2)break}this.g===1&&(this.g=3),this.w()}while(this.g!==3);return this.h}}w(){if(this.g===3)return;const e=this.l;this.l=this.k,this.k=e;const t=this.g!==0,r=this.h;this.g=3;let i=!1;this.p=!1;try{const s=this.m;this.m=this.q?.();try{this.y=!0,this.h=this._computeFn(this,s)}finally{this.y=!1;for(const n of this.l)n.removeObserver(this);this.l.clear()}i=t&&!this.u(r,this.h),Tr()?.handleDerivedRecomputed(this,{oldValue:r,newValue:this.h,change:void 0,didChange:i,hadValue:t})}catch(s){eu(s)}if(this.p=!1,i)for(const s of this.b)s.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){if(this.n)throw new Qs("Cyclic deriveds are not supported yet!");this.j++,this.n=!0;try{const t=this.j===1;if(this.g===3&&(this.g=1,!t))for(const r of this.b)r.handlePossibleChange(this);if(t)for(const r of this.b)r.beginUpdate(this)}finally{this.n=!1}}endUpdate(e){if(this.j--,this.j===0){const t=[...this.b];for(const r of t)r.endUpdate(this);if(this.x){const r=[...this.x];this.x=null;for(const i of r)i.endUpdate(this)}}Ew(()=>this.j>=0)}handlePossibleChange(e){if(this.g===3&&this.k.has(e)&&!this.l.has(e)){this.g=1;for(const t of this.b)t.handlePossibleChange(this)}}handleChange(e,t){if(this.k.has(e)&&!this.l.has(e)){let r=!1;try{r=this.s?this.s({changedObservable:e,change:t,didChange:s=>s===e},this.m):!0}catch(s){eu(s)}const i=this.g===3;if(r&&(this.g===1||i)&&(this.g=2,i))for(const s of this.b)s.handlePossibleChange(this)}}readObservable(e){if(!this.y)throw new Qs("The reader object cannot be used outside its compute function!");e.addObserver(this);const t=e.get();return this.k.add(e),this.l.delete(e),t}addObserver(e){const t=!this.b.has(e)&&this.j>0;super.addObserver(e),t&&(this.x&&this.x.has(e)?this.x.delete(e):e.beginUpdate(this))}removeObserver(e){this.b.has(e)&&this.j>0&&(this.x||(this.x=new Set),this.x.add(e)),super.removeObserver(e)}log(){return Tr()?super.log():(super.log(),Tr()?.handleDerivedCreated(this)),this}};function g5(...e){let t,r,i;return e.length===3?[t,r,i]=e:[r,i]=e,new yo(new lc(t,void 0,i),r,i,()=>yo.globalTransaction,Dg)}var yo=class extends Rg{constructor(e,t,r,i,s){super(),this.k=e,this.l=t,this._getValue=r,this.n=i,this.p=s,this.h=!1,this.s=n=>{const o=this._getValue(n),a=this.g,c=!this.h||!this.p(a,o);let l=!1;c&&(this.g=o,this.h&&(l=!0,ZC(this.n(),u=>{Tr()?.handleFromEventObservableTriggered(this,{oldValue:a,newValue:o,change:void 0,didChange:c,hadValue:this.h});for(const h of this.b)u.updateObserver(h,this),h.handleChange(this,void 0)},()=>{const u=this.q();return"Event fired"+(u?`: ${u}`:"")})),this.h=!0),l||Tr()?.handleFromEventObservableTriggered(this,{oldValue:a,newValue:o,change:void 0,didChange:c,hadValue:this.h})}}q(){return this.k.getDebugName(this)}get debugName(){const e=this.q();return"From Event"+(e?`: ${e}`:"")}c(){this.j=this.l(this.s)}f(){this.j.dispose(),this.j=void 0,this.h=!1,this.g=void 0}get(){return this.j?(this.h||this.s(void 0),this.g):this._getValue(void 0)}};(function(e){e.Observer=yo;function t(r,i){let s=!1;yo.globalTransaction===void 0&&(yo.globalTransaction=r,s=!0);try{i()}finally{s&&(yo.globalTransaction=void 0)}}e.batchEventsGlobally=t})(g5||(g5={}));function i2(e){const t=new m5(!1,void 0);return e.addObserver(t),ce(()=>{e.removeObserver(t)})}QC(i2);function s2(e,t){const r=new m5(!0,t);return e.addObserver(r),t?t(e.get()):e.reportChanges(),ce(()=>{e.removeObserver(r)})}GC(s2);var m5=class{constructor(e,t){this.b=e,this.c=t,this.a=0}beginUpdate(e){this.a++}endUpdate(e){this.a--,this.a===0&&this.b&&(this.c?this.c(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}},n2=!1;n2&&c5(new Ag);var o2=_("productService"),a2="vscode://schemas/vscode-product",Wu=_("configurationService"),v5;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.USER=2]="USER",e[e.USER_LOCAL=3]="USER_LOCAL",e[e.USER_REMOTE=4]="USER_REMOTE",e[e.WORKSPACE=5]="WORKSPACE",e[e.WORKSPACE_FOLDER=6]="WORKSPACE_FOLDER",e[e.DEFAULT=7]="DEFAULT",e[e.MEMORY=8]="MEMORY"})(v5||(v5={}));function Ng(e,t){const r=Object.create(null);for(const i in e)w5(r,i,e[i],t);return r}function w5(e,t,r,i){const s=t.split("."),n=s.pop();let o=e;for(let a=0;a<s.length;a++){const c=s[a];let l=o[c];switch(typeof l){case"undefined":l=o[c]=Object.create(null);break;case"object":if(l===null){i(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is null`);return}break;default:i(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(l)}`);return}o=l}if(typeof o=="object"&&o!==null)try{o[n]=r}catch{i(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}else i(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}function c2(e,t){const r=t.split(".");b5(e,r)}function b5(e,t){if(!e)return;const r=t.shift();if(t.length===0){delete e[r];return}if(Object.keys(e).indexOf(r)!==-1){const i=e[r];typeof i=="object"&&!Array.isArray(i)&&(b5(i,t),Object.keys(i).length===0&&delete e[r])}}function Vu(e,t,r){function i(o,a){let c=o;for(const l of a){if(typeof c!="object"||c===null)return;c=c[l]}return c}const s=t.split("."),n=i(e,s);return typeof n>"u"?r:n}function l2(e){return e.replace(/[\[\]]/g,"")}function u2(e){let t=!1;const r=new Map,i=new Map;if(h2(e,u=>{if(e===u)return!0;const h=JSON.stringify(u);if(h.length<30)return!0;const p=r.get(h);if(!p){const f={schemas:[u]};return r.set(h,f),i.set(u,f),!0}return p.schemas.push(u),i.set(u,p),t=!0,!1}),r.clear(),!t)return JSON.stringify(e);let n="$defs";for(;e.hasOwnProperty(n);)n+="_";const o=[];function a(u){return JSON.stringify(u,(h,p)=>{if(p!==u){const f=i.get(p);if(f&&f.schemas.length>1)return f.id||(f.id=`_${o.length}`,o.push(f.schemas[0])),{$ref:`#/${n}/${f.id}`}}return p})}const c=a(e),l=[];for(let u=0;u<o.length;u++)l.push(`"_${u}":${a(o[u])}`);return l.length?`${c.substring(0,c.length-1)},"${n}":{${l.join(",")}}}`:c}function Eo(e){return typeof e=="object"&&e!==null}function h2(e,t){if(!e||typeof e!="object")return;const r=(...c)=>{for(const l of c)Eo(l)&&o.push(l)},i=(...c)=>{for(const l of c)if(Eo(l))for(const u in l){const h=l[u];Eo(h)&&o.push(h)}},s=(...c)=>{for(const l of c)if(Array.isArray(l))for(const u of l)Eo(u)&&o.push(u)},n=c=>{if(Array.isArray(c))for(const l of c)Eo(l)&&o.push(l);else Eo(c)&&o.push(c)},o=[e];let a=o.pop();for(;a;)t(a)&&(r(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),i(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),s(a.anyOf,a.allOf,a.oneOf,a.prefixItems),n(a.items)),a=o.pop()}var qu={JSONContribution:"base.contributions.json"};function d2(e){return e.length>0&&e.charAt(e.length-1)==="#"?e.substring(0,e.length-1):e}var f2=class{constructor(){this.b=new D,this.onDidChangeSchema=this.b.event,this.a={}}registerSchema(e,t){this.a[d2(e)]=t,this.b.fire(e)}notifySchemaChanged(e){this.b.fire(e)}getSchemaContributions(){return{schemas:this.a}}getSchemaContent(e){const t=this.a[e];return t?u2(t):void 0}hasSchemaContent(e){return!!this.a[e]}},p2=new f2;Bt.add(qu.JSONContribution,p2);var y5;(function(e){e.Multiline="multilineText",e.Singleline="singlelineText"})(y5||(y5={}));var xo={Configuration:"base.contributions.configuration"},E5;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.MACHINE=2]="MACHINE",e[e.APPLICATION_MACHINE=3]="APPLICATION_MACHINE",e[e.WINDOW=4]="WINDOW",e[e.RESOURCE=5]="RESOURCE",e[e.LANGUAGE_OVERRIDABLE=6]="LANGUAGE_OVERRIDABLE",e[e.MACHINE_OVERRIDABLE=7]="MACHINE_OVERRIDABLE"})(E5||(E5={}));var Gu={properties:{},patternProperties:{}},Qu={properties:{},patternProperties:{}},Ju={properties:{},patternProperties:{}},Xu={properties:{},patternProperties:{}},Yu={properties:{},patternProperties:{}},Zu={properties:{},patternProperties:{}},dc={properties:{},patternProperties:{}},dn="vscode://schemas/settings/resourceLanguage",Ku=Bt.as(qu.JSONContribution),g2=class{constructor(){this.a=[],this.i=new Set,this.j=new D,this.onDidSchemaChange=this.j.event,this.k=new D,this.onDidUpdateConfiguration=this.k.event,this.b=new Map,this.c={id:"defaultOverrides",title:d(1734,null),properties:{}},this.d=[this.c],this.h={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.e={},this.f=new Map,this.g={},Ku.registerSchema(dn,this.h),this.z()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const r=new Set;this.r(e,t,r),Ku.registerSchema(dn,this.h),this.j.fire(),this.k.fire({properties:r})}deregisterConfigurations(e){const t=new Set;this.s(e,t),Ku.registerSchema(dn,this.h),this.j.fire(),this.k.fire({properties:t})}updateConfigurations({add:e,remove:t}){const r=new Set;this.s(t,r),this.r(e,!1,r),Ku.registerSchema(dn,this.h),this.j.fire(),this.k.fire({properties:r})}registerDefaultConfigurations(e){const t=new Set;this.l(e,t),this.j.fire(),this.k.fire({properties:t,defaultsOverrides:!0})}l(e,t){this.a.push(...e);const r=[];for(const{overrides:i,source:s}of e)for(const n in i){t.add(n);const o=this.b.get(n)??this.b.set(n,{configurationDefaultOverrides:[]}).get(n),a=i[n];if(o.configurationDefaultOverrides.push({value:a,source:s}),mi.test(n)){const c=this.o(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c,this.n(n,c,s),r.push(...fc(n))}else{const c=this.p(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c;const l=this.e[n];l&&(this.A(n,l),this.w(n,l))}}this.q(r)}deregisterDefaultConfigurations(e){const t=new Set;this.m(e,t),this.j.fire(),this.k.fire({properties:t,defaultsOverrides:!0})}m(e,t){for(const r of e){const i=this.a.indexOf(r);i!==-1&&this.a.splice(i,1)}for(const{overrides:r,source:i}of e)for(const s in r){const n=this.b.get(s);if(!n)continue;const o=n.configurationDefaultOverrides.findIndex(a=>i?a.source?.id===i.id:a.value===r[s]);if(o!==-1){if(n.configurationDefaultOverrides.splice(o,1),n.configurationDefaultOverrides.length===0&&this.b.delete(s),mi.test(s)){let a;for(const c of n.configurationDefaultOverrides)a=this.o(s,c.value,c.source,a);a&&!kw(a.value)?(n.configurationDefaultOverrideValue=a,this.n(s,a,i)):(this.b.delete(s),delete this.e[s],delete this.c.properties[s])}else{let a;for(const l of n.configurationDefaultOverrides)a=this.p(s,l.value,l.source,a);n.configurationDefaultOverrideValue=a;const c=this.e[s];c&&(this.A(s,c),this.w(s,c))}t.add(s)}}this.y()}n(e,t,r){const i={type:"object",default:t.value,description:d(1735,null,l2(e)),$ref:dn,defaultDefaultValue:t.value,source:r,defaultValueSource:r};this.e[e]=i,this.c.properties[e]=i}o(e,t,r,i){const s=i?.value||{},n=i?.source??new Map;if(!(n instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const o of Object.keys(t)){const a=t[o];if(gt(a)&&(La(s[o])||gt(s[o]))){if(s[o]={...s[o]??{},...a},r)for(const l in a)n.set(`${o}.${l}`,r)}else s[o]=a,r?n.set(o,r):n.delete(o)}return{value:s,source:n}}p(e,t,r,i){const s=this.e[e],n=i?.value??s?.defaultDefaultValue;let o=r;if(gt(t)&&(s!==void 0&&s.type==="object"||s===void 0&&(La(n)||gt(n)))){if(o=i?.source??new Map,!(o instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)r&&o.set(`${e}.${c}`,r);t={...gt(n)?n:{},...t}}return{value:t,source:o}}deltaConfiguration(e){let t=!1;const r=new Set;e.removedDefaults&&(this.m(e.removedDefaults,r),t=!0),e.addedDefaults&&(this.l(e.addedDefaults,r),t=!0),e.removedConfigurations&&this.s(e.removedConfigurations,r),e.addedConfigurations&&this.r(e.addedConfigurations,!1,r),this.j.fire(),this.k.fire({properties:r,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this.j.fire()}registerOverrideIdentifiers(e){this.q(e),this.j.fire()}q(e){for(const t of e)this.i.add(t);this.y()}r(e,t,r){e.forEach(i=>{this.u(i,t,i.extensionInfo,i.restrictedProperties,void 0,r),this.d.push(i),this.v(i)})}s(e,t){const r=i=>{if(i.properties)for(const s in i.properties){t.add(s);const n=this.e[s];n?.policy?.name&&this.f.delete(n.policy.name),delete this.e[s],this.x(s,i.properties[s])}i.allOf?.forEach(s=>r(s))};for(const i of e){r(i);const s=this.d.indexOf(i);s!==-1&&this.d.splice(s,1)}}u(e,t=!0,r,i,s=4,n){s=yt(e.scope)?s:e.scope;const o=e.properties;if(o)for(const c in o){const l=o[c];if(t&&v2(c,l)){delete o[c];continue}if(l.source=r,l.defaultDefaultValue=o[c].default,this.A(c,l),mi.test(c)?l.scope=void 0:(l.scope=yt(l.scope)?s:l.scope,l.restricted=yt(l.restricted)?!!i?.includes(c):l.restricted),o[c].hasOwnProperty("included")&&!o[c].included){this.g[c]=o[c],delete o[c];continue}else this.e[c]=o[c],o[c].policy?.name&&this.f.set(o[c].policy.name,c);!o[c].deprecationMessage&&o[c].markdownDeprecationMessage&&(o[c].deprecationMessage=o[c].markdownDeprecationMessage),n.add(c)}const a=e.allOf;if(a)for(const c of a)this.u(c,t,r,i,s,n)}getConfigurations(){return this.d}getConfigurationProperties(){return this.e}getPolicyConfigurations(){return this.f}getExcludedConfigurationProperties(){return this.g}getRegisteredDefaultConfigurations(){return[...this.a]}getConfigurationDefaultsOverrides(){const e=new Map;for(const[t,r]of this.b)r.configurationDefaultOverrideValue&&e.set(t,r.configurationDefaultOverrideValue);return e}v(e){const t=r=>{const i=r.properties;if(i)for(const n in i)this.w(n,i[n]);r.allOf?.forEach(t)};t(e)}w(e,t){switch(Gu.properties[e]=t,t.scope){case 1:Qu.properties[e]=t;break;case 2:Xu.properties[e]=t;break;case 3:Ju.properties[e]=t;break;case 7:Yu.properties[e]=t;break;case 4:Zu.properties[e]=t;break;case 5:dc.properties[e]=t;break;case 6:dc.properties[e]=t,this.h.properties[e]=t;break}}x(e,t){switch(delete Gu.properties[e],t.scope){case 1:delete Qu.properties[e];break;case 2:delete Xu.properties[e];break;case 3:delete Ju.properties[e];break;case 7:delete Yu.properties[e];break;case 4:delete Zu.properties[e];break;case 5:case 6:delete dc.properties[e],delete this.h.properties[e];break}}y(){for(const e of this.i.values()){const t=`[${e}]`,r={type:"object",description:d(1736,null),errorMessage:d(1737,null),$ref:dn};this.A(t,r),Gu.properties[t]=r,Qu.properties[t]=r,Ju.properties[t]=r,Xu.properties[t]=r,Yu.properties[t]=r,Zu.properties[t]=r,dc.properties[t]=r}}z(){const e={type:"object",description:d(1738,null),errorMessage:d(1739,null),$ref:dn};Gu.patternProperties[xs]=e,Qu.patternProperties[xs]=e,Ju.patternProperties[xs]=e,Xu.patternProperties[xs]=e,Yu.patternProperties[xs]=e,Zu.patternProperties[xs]=e,dc.patternProperties[xs]=e,this.j.fire()}A(e,t){const r=this.b.get(e)?.configurationDefaultOverrideValue;let i,s;r&&(!t.disallowConfigurationDefault||!r.source)&&(i=r.value,s=r.source),La(i)&&(i=t.defaultDefaultValue,s=void 0),La(i)&&(i=m2(t.type)),t.default=i,t.defaultValueSource=s}},x5="\\[([^\\]]+)\\]",k5=new RegExp(x5,"g"),xs=`^(${x5})+$`,mi=new RegExp(xs);function fc(e){const t=[];if(mi.test(e)){let r=k5.exec(e);for(;r?.length;){const i=r[1].trim();i&&t.push(i),r=k5.exec(e)}}return Zn(t)}function m2(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var eh=new g2;Bt.add(xo.Configuration,eh);function v2(e,t){return e.trim()?mi.test(e)?d(1741,null,e):eh.getConfigurationProperties()[e]!==void 0?d(1742,null,e):t.policy?.name&&eh.getPolicyConfigurations().get(t.policy?.name)!==void 0?d(1743,null,e,t.policy?.name,eh.getPolicyConfigurations().get(t.policy?.name)):null:d(1740,null)}var w2=_("requestService");function b2(e){return e.res.statusCode&&e.res.statusCode>=200&&e.res.statusCode<300||e.res.statusCode===1223}function y2(e){return e.res.statusCode===204}async function E2(e){if(!b2(e))throw new Error("Server returned "+e.res.statusCode);if(y2(e))return null;const r=(await Rk(e.stream)).toString();try{return JSON.parse(r)}catch(i){throw i.message+=`:
`+r,i}}var Fg=[],$5=void 0,S5=void 0;function x2(e=!0,t=!0){if($5===e&&S5===t)return;$5=e,S5=t;const r=Bt.as(xo.Configuration),i=Fg;Fg=[{id:"http",order:15,title:d(2128,null),type:"object",scope:2,properties:{"http.useLocalProxyConfiguration":{type:"boolean",default:t,markdownDescription:d(2129,null),restricted:!0}}},{id:"http",order:15,title:d(2130,null),type:"object",scope:1,properties:{"http.electronFetch":{type:"boolean",default:!1,description:d(2131,null),restricted:!0}}},{id:"http",order:15,title:d(2132,null),type:"object",scope:e?1:2,properties:{"http.proxy":{type:"string",pattern:"^(https?|socks|socks4a?|socks5h?)://([^:]*(:[^@]*)?@)?([^:]+|\\[[:0-9a-fA-F]+\\])(:\\d+)?/?$|^$",markdownDescription:d(2133,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyStrictSSL":{type:"boolean",default:!0,markdownDescription:d(2134,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyKerberosServicePrincipal":{type:"string",markdownDescription:d(2135,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.noProxy":{type:"array",items:{type:"string"},markdownDescription:d(2136,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyAuthorization":{type:["null","string"],default:null,markdownDescription:d(2137,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxySupport":{type:"string",enum:["off","on","fallback","override"],enumDescriptions:[d(2138,null),d(2139,null),d(2140,null),d(2141,null)],default:"override",markdownDescription:d(2142,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.systemCertificates":{type:"boolean",default:!0,markdownDescription:d(2143,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.experimental.systemCertificatesV2":{type:"boolean",tags:["experimental"],default:!1,markdownDescription:d(2144,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.fetchAdditionalSupport":{type:"boolean",default:!0,markdownDescription:d(2145,null,"`#http.useLocalProxyConfiguration#`","`#http.proxySupport#`","`#http.systemCertificates#`"),restricted:!0}}}],r.updateConfigurations({add:Fg,remove:i})}x2();var pc;(function(e){e[e.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",e[e.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(pc||(pc={}));var Jr;(function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"})(Jr||(Jr={}));var GM=class Jx extends he{static{this.a=100}constructor(t,r=Object.create(null)){super(),this.r=t,this.s=r,this.b=this.B(new au),this.onDidChangeStorage=this.b.event,this.c=Jr.None,this.f=new Map,this.g=this.B(new yS(Jx.a)),this.h=new Set,this.j=new Map,this.m=void 0,this.n=[],this.t()}t(){this.B(this.r.onDidChangeItemsExternal(t=>this.u(t)))}u(t){this.b.pause();try{t.changed?.forEach((r,i)=>this.w(i,r)),t.deleted?.forEach(r=>this.w(r,void 0))}finally{this.b.resume()}}w(t,r){if(this.c===Jr.Closed)return;let i=!1;yt(r)?i=this.f.delete(t):this.f.get(t)!==r&&(this.f.set(t,r),i=!0),i&&this.b.fire({key:t,external:!0})}get items(){return this.f}get size(){return this.f.size}async init(){this.c===Jr.None&&(this.c=Jr.Initialized,this.s.hint!==pc.STORAGE_DOES_NOT_EXIST&&(this.f=await this.r.getItems()))}get(t,r){const i=this.f.get(t);return yt(i)?r:i}getBoolean(t,r){const i=this.get(t);return yt(i)?r:i==="true"}getNumber(t,r){const i=this.get(t);return yt(i)?r:parseInt(i,10)}getObject(t,r){const i=this.get(t);return yt(i)?r:d4(i)}async set(t,r,i=!1){if(this.c===Jr.Closed)return;if(yt(r))return this.delete(t,i);const s=gt(r)||Array.isArray(r)?vC(r):String(r);if(this.f.get(t)!==s)return this.f.set(t,s),this.j.set(t,s),this.h.delete(t),this.b.fire({key:t,external:i}),this.D()}async delete(t,r=!1){if(!(this.c===Jr.Closed||!this.f.delete(t)))return this.h.has(t)||this.h.add(t),this.j.delete(t),this.b.fire({key:t,external:r}),this.D()}async optimize(){if(this.c!==Jr.Closed)return await this.flush(0),this.r.optimize()}async close(){return this.m||(this.m=this.y()),this.m}async y(){this.c=Jr.Closed;try{await this.D(0)}catch{}await this.r.close(()=>this.f)}get z(){return this.j.size>0||this.h.size>0}async C(){if(!this.z)return;const t={insert:this.j,delete:this.h};return this.h=new Set,this.j=new Map,this.r.updateItems(t).finally(()=>{if(!this.z)for(;this.n.length;)this.n.pop()?.()})}async flush(t){if(!(this.c===Jr.Closed||this.m))return this.D(t)}async D(t){return this.s.hint===pc.STORAGE_IN_MEMORY?this.C():this.g.trigger(()=>this.C(),t)}async whenFlushed(){if(this.z)return new Promise(t=>this.n.push(t))}isInMemory(){return this.s.hint===pc.STORAGE_IN_MEMORY}},Mg=_("environmentService"),QM=Mg,I5=_("IUriIdentityService"),C5;(function(e){e.Settings="settings",e.Keybindings="keybindings",e.Snippets="snippets",e.Tasks="tasks",e.Extensions="extensions",e.GlobalState="globalState"})(C5||(C5={}));function k2(e){const t=e;return!!(t&&typeof t=="object"&&typeof t.id=="string"&&typeof t.isDefault=="boolean"&&typeof t.name=="string"&&y.isUri(t.location)&&y.isUri(t.globalStorageHome)&&y.isUri(t.settingsResource)&&y.isUri(t.keybindingsResource)&&y.isUri(t.tasksResource)&&y.isUri(t.snippetsHome)&&y.isUri(t.extensionsResource))}var $2=_("IUserDataProfilesService");function th(e,t,r,i,s,n){return{id:e,name:t,location:r,isDefault:!1,icon:s?.icon,globalStorageHome:n&&s?.useDefaultFlags?.globalState?n.globalStorageHome:Qt(r,"globalStorage"),settingsResource:n&&s?.useDefaultFlags?.settings?n.settingsResource:Qt(r,"settings.json"),keybindingsResource:n&&s?.useDefaultFlags?.keybindings?n.keybindingsResource:Qt(r,"keybindings.json"),tasksResource:n&&s?.useDefaultFlags?.tasks?n.tasksResource:Qt(r,"tasks.json"),snippetsHome:n&&s?.useDefaultFlags?.snippets?n.snippetsHome:Qt(r,"snippets"),extensionsResource:n&&s?.useDefaultFlags?.extensions?n.extensionsResource:Qt(r,"extensions.json"),cacheHome:Qt(i,e),useDefaultFlags:s?.useDefaultFlags,isTransient:s?.transient,workspaces:s?.workspaces}}var D5=class extends he{static{this.b="userDataProfiles"}static{this.c="profileAssociations"}get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.C.profiles,...this.r.profiles]}constructor(t,r,i,s){super(),this.s=t,this.t=r,this.u=i,this.y=s,this.g=this.B(new D),this.onDidChangeProfiles=this.g.event,this.h=this.B(new D),this.onWillCreateProfile=this.h.event,this.j=this.B(new D),this.onWillRemoveProfile=this.j.event,this.m=this.B(new D),this.onDidResetWorkspaces=this.m.event,this.n=new Map,this.r={profiles:[],emptyWindows:new Map},this.profilesHome=Qt(this.s.userRoamingDataHome,"profiles"),this.f=Qt(this.s.cacheHome,"CachedProfilesData")}init(){this.z=void 0}get C(){if(!this.z){const t=this.D(),r=[t];try{for(const s of this.N()){if(!s.name||!Ce(s.name)||!s.location){this.y.warn("Skipping the invalid stored profile",s.location||s.name);continue}r.push(th(Mi(s.location),s.name,s.location,this.f,{icon:s.icon,useDefaultFlags:s.useDefaultFlags},t))}}catch(s){this.y.error(s)}const i=new Map;if(r.length)try{const s=this.P();if(s.workspaces)for(const[n,o]of Object.entries(s.workspaces)){const a=y.parse(n),c=r.find(l=>l.id===o);if(c){const l=c.workspaces?c.workspaces.slice(0):[];l.push(a),c.workspaces=l}}if(s.emptyWindows)for(const[n,o]of Object.entries(s.emptyWindows)){const a=r.find(c=>c.id===o);a&&i.set(n,a)}}catch(s){this.y.error(s)}this.z={profiles:r,emptyWindows:i}}return this.z}D(){const t=th("__default__profile__",d(2534,null),this.s.userRoamingDataHome,this.f);return{...t,extensionsResource:this.R()??t.extensionsResource,isDefault:!0}}async createTransientProfile(t){const r="Temp",i=new RegExp(`${Ks(r)}\\s(\\d+)`);let s=0;for(const o of this.profiles){const a=i.exec(o.name),c=a?parseInt(a[1]):0;s=c>s?c:s}const n=`${r} ${s+1}`;return this.createProfile(Qa(Dr()).toString(16),n,{transient:!0},t)}async createNamedProfile(t,r,i){return this.createProfile(Qa(Dr()).toString(16),t,r,i)}async createProfile(t,r,i,s){return await this.F(t,r,i,s)}async F(t,r,i,s){if(!Ce(r)||!r)throw new Error("Name of the profile is mandatory and must be of type `string`");let n=this.n.get(r);return n||(n=(async()=>{try{if(this.profiles.find(u=>u.id===t||!u.isTransient&&!i?.transient&&u.name===r))throw new Error(`Profile with ${r} name already exists`);const a=s?this.G(s):void 0;y.isUri(a)&&(i={...i,workspaces:[a]});const c=th(t,r,Qt(this.profilesHome,t),this.f,i,this.defaultProfile);await this.t.createFolder(c.location);const l=[];return this.h.fire({profile:c,join(u){l.push(u)}}),await lo.settled(l),a&&!y.isUri(a)&&this.L(a,c,!!c.isTransient),this.I([c],[],[]),c}finally{this.n.delete(r)}})(),this.n.set(r,n)),n}async updateProfile(t,r){const i=[];for(const n of this.profiles){let o;if(t.id===n.id)n.isDefault?r.workspaces&&(o=n,o.workspaces=r.workspaces):o=th(n.id,r.name??n.name,n.location,this.f,{icon:r.icon===null?void 0:r.icon??n.icon,transient:r.transient??n.isTransient,useDefaultFlags:r.useDefaultFlags??n.useDefaultFlags,workspaces:r.workspaces??n.workspaces},this.defaultProfile);else if(r.workspaces){const a=n.workspaces?.filter(c=>!r.workspaces?.some(l=>this.u.extUri.isEqual(c,l)));n.workspaces?.length!==a?.length&&(o=n,o.workspaces=a)}o&&i.push(o)}if(!i.length)throw t.isDefault?new Error("Cannot update default profile"):new Error(`Profile '${t.name}' does not exist`);this.I([],[],i);const s=this.profiles.find(n=>n.id===t.id);if(!s)throw new Error(`Profile '${t.name}' was not updated`);return s}async removeProfile(t){if(t.isDefault)throw new Error("Cannot remove default profile");const r=this.profiles.find(s=>s.id===t.id);if(!r)throw new Error(`Profile '${t.name}' does not exist`);const i=[];this.j.fire({profile:r,join(s){i.push(s)}});try{await Promise.allSettled(i)}catch(s){this.y.error(s)}this.I([],[r],[]);try{await this.t.del(r.cacheHome,{recursive:!0})}catch(s){$C(s)!==1&&this.y.error(s)}}async setProfileForWorkspace(t,r){const i=this.profiles.find(n=>n.id===r.id);if(!i)throw new Error(`Profile '${r.name}' does not exist`);const s=this.G(t);if(y.isUri(s)){const n=i.workspaces?[...i.workspaces]:[];n.some(o=>this.u.extUri.isEqual(o,s))||(n.push(s),await this.updateProfile(i,{workspaces:n}))}else this.L(s,i,!1),this.M(this.profiles)}unsetWorkspace(t,r=!1){const i=this.G(t);if(y.isUri(i)){const s=this.getProfileForWorkspace(t);s&&this.updateProfile(s,{workspaces:s.workspaces?.filter(n=>!this.u.extUri.isEqual(n,i))})}else this.L(i,void 0,r),this.M(this.profiles)}async resetWorkspaces(){this.r.emptyWindows.clear(),this.C.emptyWindows.clear();for(const t of this.profiles)t.workspaces=void 0;this.I([],[],this.profiles),this.m.fire()}async cleanUp(){if(await this.t.exists(this.profilesHome)){const t=await this.t.resolve(this.profilesHome);await Promise.all((t.children||[]).filter(r=>r.isDirectory&&this.profiles.every(i=>!this.u.extUri.isEqual(i.location,r.resource))).map(r=>this.t.del(r.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){const t=this.r.profiles.filter(r=>!this.H(r));await Promise.allSettled(t.map(r=>this.removeProfile(r)))}getProfileForWorkspace(t){const r=this.G(t);return y.isUri(r)?this.profiles.find(i=>i.workspaces?.some(s=>this.u.extUri.isEqual(s,r))):this.C.emptyWindows.get(r)??this.r.emptyWindows.get(r)}G(t){return wI(t)?t.uri:bI(t)?t.configPath:t.id}H(t){return!!(t.workspaces?.length||[...this.C.emptyWindows.values()].some(r=>this.u.extUri.isEqual(r.location,t.location))||[...this.r.emptyWindows.values()].some(r=>this.u.extUri.isEqual(r.location,t.location)))}I(t,r,i){const s=[...this.profiles,...t],n=this.r.profiles;this.r.profiles=[];const o=[];for(let a of s){if(r.some(c=>a.id===c.id)){for(const c of[...this.C.emptyWindows.keys()])a.id===this.C.emptyWindows.get(c)?.id&&this.C.emptyWindows.delete(c);continue}if(!a.isDefault){a=i.find(l=>a.id===l.id)??a;const c=n.find(l=>a.id===l.id);if(a.isTransient)this.r.profiles.push(a);else if(c){for(const[l,u]of this.r.emptyWindows.entries())if(a.id===u.id){this.r.emptyWindows.delete(l),this.C.emptyWindows.set(l,a);break}}}a.workspaces?.length===0&&(a.workspaces=void 0),o.push(a)}this.M(o),this.J(t,r,i)}J(t,r,i){this.g.fire({added:t,removed:r,updated:i,all:this.profiles})}L(t,r,i){i=r?.isTransient?!0:i,i?r?this.r.emptyWindows.set(t,r):this.r.emptyWindows.delete(t):(this.r.emptyWindows.delete(t),r?this.C.emptyWindows.set(t,r):this.C.emptyWindows.delete(t))}M(t){const r=[],i={},s={};for(const n of t)if(!n.isTransient&&(n.isDefault||r.push({location:n.location,name:n.name,icon:n.icon,useDefaultFlags:n.useDefaultFlags}),n.workspaces))for(const o of n.workspaces)i[o.toString()]=n.id;for(const[n,o]of this.C.emptyWindows.entries())s[n.toString()]=o.id;this.Q({workspaces:i,emptyWindows:s}),this.O(r),this.z=void 0}N(){return[]}O(t){throw new Error("not implemented")}P(){return{}}Q(t){throw new Error("not implemented")}R(){}};D5=__decorate([__param(0,Mg),__param(1,O4),__param(2,I5),__param(3,He)],D5);var S2="__$__isNewStorageMarker",rh="__$__targetStorageMarker",P5=_("storageService"),ko;(function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"})(ko||(ko={}));var A5;(function(e){e[e.APPLICATION=-1]="APPLICATION",e[e.PROFILE=0]="PROFILE",e[e.WORKSPACE=1]="WORKSPACE"})(A5||(A5={}));var T5;(function(e){e[e.USER=0]="USER",e[e.MACHINE=1]="MACHINE"})(T5||(T5={}));function I2(e){const t=e.get(rh);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}var XM=class Xx extends he{static{this.a=60*1e3}constructor(t={flushInterval:Xx.a}){super(),this.n=t,this.b=this.B(new au),this.f=this.B(new au),this.onDidChangeTarget=this.f.event,this.g=this.B(new D),this.onWillSaveState=this.g.event,this.j=this.B(new ao(()=>this.r(),this.n.flushInterval)),this.m=this.B(new us),this.D=void 0,this.G=void 0,this.I=void 0}onDidChangeValue(t,r,i){return ht.filter(this.b.event,s=>s.scope===t&&(r===void 0||s.key===r),i)}r(){this.m.value=Hb(()=>{this.t()&&this.flush(),this.j.schedule()})}t(){return!0}u(){Li([this.m,this.j])}initialize(){return this.h||(this.h=(async()=>{er("code/willInitStorage");try{await this.P()}finally{er("code/didInitStorage")}this.j.schedule()})()),this.h}w(t,r){const{key:i,external:s}=r;if(i===rh){switch(t){case-1:this.I=void 0;break;case 0:this.G=void 0;break;case 1:this.D=void 0;break}this.f.fire({scope:t})}else this.b.fire({scope:t,key:i,target:this.L(t)[i],external:s})}y(t){this.g.fire({reason:t})}get(t,r,i){return this.Q(r)?.get(t,i)}getBoolean(t,r,i){return this.Q(r)?.getBoolean(t,i)}getNumber(t,r,i){return this.Q(r)?.getNumber(t,i)}getObject(t,r,i){return this.Q(r)?.getObject(t,i)}storeAll(t,r){this.z(()=>{for(const i of t)this.store(i.key,i.value,i.scope,i.target,r)})}store(t,r,i,s,n=!1){if(yt(r)){this.remove(t,i,n);return}this.z(()=>{this.C(t,i,s),this.Q(i)?.set(t,r,n)})}remove(t,r,i=!1){this.z(()=>{this.C(t,r,void 0),this.Q(r)?.delete(t,i)})}z(t){this.b.pause(),this.f.pause();try{t()}finally{this.b.resume(),this.f.resume()}}keys(t,r){const i=[],s=this.L(t);for(const n of Object.keys(s))s[n]===r&&i.push(n);return i}C(t,r,i,s=!1){const n=this.L(r);typeof i=="number"?n[t]!==i&&(n[t]=i,this.Q(r)?.set(rh,JSON.stringify(n),s)):typeof n[t]=="number"&&(delete n[t],this.Q(r)?.set(rh,JSON.stringify(n),s))}get F(){return this.D||(this.D=this.M(1)),this.D}get H(){return this.G||(this.G=this.M(0)),this.G}get J(){return this.I||(this.I=this.M(-1)),this.I}L(t){switch(t){case-1:return this.J;case 0:return this.H;default:return this.F}}M(t){const r=this.Q(t);return r?I2(r):Object.create(null)}isNew(t){return this.getBoolean(S2,t)===!0}async flush(t=ko.NONE){this.g.fire({reason:t});const r=this.Q(-1),i=this.Q(0),s=this.Q(1);switch(t){case ko.NONE:await lo.settled([r?.whenFlushed()??Promise.resolve(),i?.whenFlushed()??Promise.resolve(),s?.whenFlushed()??Promise.resolve()]);break;case ko.SHUTDOWN:await lo.settled([r?.flush(0)??Promise.resolve(),i?.flush(0)??Promise.resolve(),s?.flush(0)??Promise.resolve()]);break}}async log(){const t=this.Q(-1)?.items??new Map,r=this.Q(0)?.items??new Map,i=this.Q(1)?.items??new Map;return C2(t,r,i,this.R(-1)??"",this.R(0)??"",this.R(1)??"")}async optimize(t){return await this.flush(),this.Q(t)?.optimize()}async switch(t,r){return this.y(ko.NONE),k2(t)?this.S(t,r):this.U(t,r)}N(t,r){return!(t.id===r.id||R5(r)&&R5(t))}O(t,r,i){this.z(()=>{const s=new Set;for(const[n,o]of t)s.add(n),r.get(n)!==o&&this.w(i,{key:n,external:!0});for(const[n]of r.items)s.has(n)||this.w(i,{key:n,external:!0})})}};function R5(e){return e.isDefault||!!e.useDefaultFlags?.globalState}async function C2(e,t,r,i,s,n){const o=w=>{try{return JSON.parse(w)}catch{return w}},a=new Map,c=new Map;e.forEach((w,E)=>{a.set(E,w),c.set(E,o(w))});const l=new Map,u=new Map;t.forEach((w,E)=>{l.set(E,w),u.set(E,o(w))});const h=new Map,p=new Map;r.forEach((w,E)=>{h.set(E,w),p.set(E,o(w))}),console.group(i!==s?`Storage: Application (path: ${i})`:`Storage: Application & Profile (path: ${i}, default profile)`);const f=[];if(a.forEach((w,E)=>{f.push({key:E,value:w})}),console.table(f),console.groupEnd(),console.log(c),i!==s){console.group(`Storage: Profile (path: ${s}, profile specific)`);const w=[];l.forEach((E,$)=>{w.push({key:$,value:E})}),console.table(w),console.groupEnd(),console.log(u)}console.group(`Storage: Workspace (path: ${n})`);const m=[];h.forEach((w,E)=>{m.push({key:E,value:w})}),console.table(m),console.groupEnd(),console.log(p)}var YM=new C("isMac",Ir,d(1756,null)),ZM=new C("isLinux",di,d(1757,null)),KM=new C("isWindows",tr,d(1758,null)),D2=new C("isWeb",Ba,d(1759,null)),eO=new C("isMacNative",Ir&&!Ba,d(1760,null)),tO=new C("isIOS",s$,d(1761,null)),rO=new C("isMobile",n$,d(1762,null)),iO=new C("isDevelopment",!1,!0),sO=new C("productQualityType","",d(1763,null)),P2="inputFocus",nO=new C(P2,!1,d(1764,null)),A2=_("languageService"),T2=_("modelService"),Er,Og=globalThis.vscode;if(typeof Og<"u"&&typeof Og.context<"u"){const e=Og.context.configuration();if(e)Er=e.product;else throw new Error("Sandbox: unable to resolve product configuration from preload script.")}else if(globalThis._VSCODE_PRODUCT_JSON&&globalThis._VSCODE_PACKAGE_JSON){if(Er=globalThis._VSCODE_PRODUCT_JSON,hu.VSCODE_DEV&&Object.assign(Er,{nameShort:`${Er.nameShort} Dev`,nameLong:`${Er.nameLong} Dev`,dataFolderName:`${Er.dataFolderName}-dev`,serverDataFolderName:Er.serverDataFolderName?`${Er.serverDataFolderName}-dev`:void 0}),!Er.version){const e=globalThis._VSCODE_PACKAGE_JSON;Object.assign(Er,{version:e.version})}}else Er={},Object.keys(Er).length===0&&Object.assign(Er,{version:"1.95.0-dev",nameShort:"Code - OSS Dev",nameLong:"Code - OSS Dev",applicationName:"code-oss",dataFolderName:".vscode-oss",urlProtocol:"code-oss",reportIssueUrl:"https://github.com/microsoft/vscode/issues/new",licenseName:"MIT",licenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt",serverLicenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt"});var L5=Er,Xr,oO=new C("workbenchState",void 0,{type:"string",description:d(4109,null)}),aO=new C("workspaceFolderCount",0,d(4110,null)),cO=new C("openFolderWorkspaceSupport",!0,!0),lO=new C("enterMultiRootWorkspaceSupport",!0,!0),uO=new C("emptyWorkspaceSupport",!0,!0),hO=new C("dirtyWorkingCopies",!1,d(4111,null)),R2=new C("remoteName","",d(4112,null)),dO=new C("virtualWorkspace","",d(4113,null)),fO=new C("temporaryWorkspace",!1,d(4114,null)),pO=new C("isFullscreen",!1,d(4115,null)),gO=new C("isAuxiliaryWindowFocusedContext",!1,d(4116,null)),mO=new C("hasWebFileSystemAccess",!1,!0),vO=new C("embedderIdentifier",void 0,d(4117,null)),wO=new C("activeEditorIsDirty",!1,d(4118,null)),bO=new C("activeEditorIsNotPreview",!1,d(4119,null)),yO=new C("activeEditorIsFirstInGroup",!1,d(4120,null)),EO=new C("activeEditorIsLastInGroup",!1,d(4121,null)),xO=new C("activeEditorIsPinned",!1,d(4122,null)),kO=new C("activeEditorIsReadonly",!1,d(4123,null)),$O=new C("activeCompareEditorCanSwap",!1,d(4124,null)),SO=new C("activeEditorCanToggleReadonly",!0,d(4125,null)),IO=new C("activeEditorCanRevert",!1,d(4126,null)),CO=new C("activeEditorCanSplitInGroup",!0),DO=new C("activeEditor",null,{type:"string",description:d(4127,null)}),PO=new C("activeEditorAvailableEditorIds","",d(4128,null)),AO=new C("textCompareEditorVisible",!1,d(4129,null)),TO=new C("textCompareEditorActive",!1,d(4130,null)),RO=new C("sideBySideEditorActive",!1,d(4131,null)),LO=new C("groupEditorsCount",0,d(4132,null)),NO=new C("activeEditorGroupEmpty",!1,d(4133,null)),FO=new C("activeEditorGroupIndex",0,d(4134,null)),MO=new C("activeEditorGroupLast",!1,d(4135,null)),OO=new C("activeEditorGroupLocked",!1,d(4136,null)),L2=new C("multipleEditorGroups",!1,d(4137,null)),UO=L2.toNegated(),HO=new C("multipleEditorsSelectedInGroup",!1,d(4138,null)),jO=new C("twoEditorsSelectedInGroup",!1,d(4139,null)),BO=new C("SelectedEditorsInGroupFileOrUntitledResourceContextKey",!0,d(4140,null)),N2=new C("editorPartMultipleEditorGroups",!1,d(4141,null)),_O=N2.toNegated(),zO=new C("editorPartMaximizedEditorGroup",!1,d(4142,null)),WO=new C("isAuxiliaryEditorPart",!1,d(4143,null)),VO=new C("editorIsOpen",!1,d(4144,null)),qO=new C("inZenMode",!1,d(4145,null)),GO=new C("isCenteredLayout",!1,d(4146,null)),QO=new C("splitEditorsVertically",!1,d(4147,null)),JO=new C("mainEditorAreaVisible",!0,d(4148,null)),XO=new C("editorTabsVisible",!0,d(4149,null)),YO=new C("sideBarVisible",!1,d(4150,null)),ZO=new C("sideBarFocus",!1,d(4151,null)),KO=new C("activeViewlet","",d(4152,null)),eU=new C("statusBarFocused",!1,d(4153,null)),tU=new C("titleBarStyle",di&&L5.quality==="stable"?"native":"custom",d(4154,null)),rU=new C("titleBarVisible",!1,d(4155,null)),iU=new C("bannerFocused",!1,d(4156,null)),sU=new C("notificationFocus",!0,d(4157,null)),nU=new C("notificationCenterVisible",!1,d(4158,null)),oU=new C("notificationToastsVisible",!1,d(4159,null)),aU=new C("activeAuxiliary","",d(4160,null)),cU=new C("auxiliaryBarFocus",!1,d(4161,null)),lU=new C("auxiliaryBarVisible",!1,d(4162,null)),uU=new C("activePanel","",d(4163,null)),hU=new C("panelFocus",!1,d(4164,null)),dU=new C("panelPosition","bottom",d(4165,null)),fU=new C("panelAlignment","center",d(4166,null)),pU=new C("panelVisible",!1,d(4167,null)),gU=new C("panelMaximized",!1,d(4168,null)),mU=new C("focusedView","",d(4169,null)),N5=class{static{Xr=this}static{this.Scheme=new C("resourceScheme",void 0,{type:"string",description:d(4170,null)})}static{this.Filename=new C("resourceFilename",void 0,{type:"string",description:d(4171,null)})}static{this.Dirname=new C("resourceDirname",void 0,{type:"string",description:d(4172,null)})}static{this.Path=new C("resourcePath",void 0,{type:"string",description:d(4173,null)})}static{this.LangId=new C("resourceLangId",void 0,{type:"string",description:d(4174,null)})}static{this.Resource=new C("resource",void 0,{type:"URI",description:d(4175,null)})}static{this.Extension=new C("resourceExtname",void 0,{type:"string",description:d(4176,null)})}static{this.HasResource=new C("resourceSet",void 0,{type:"boolean",description:d(4177,null)})}static{this.IsFileSystemResource=new C("isFileSystemResource",void 0,{type:"boolean",description:d(4178,null)})}constructor(t,r,i,s){this.m=t,this.n=r,this.o=i,this.p=s,this.a=new me,this.d=Xr.Scheme.bindTo(this.m),this.f=Xr.Filename.bindTo(this.m),this.g=Xr.Dirname.bindTo(this.m),this.h=Xr.Path.bindTo(this.m),this.i=Xr.LangId.bindTo(this.m),this.c=Xr.Resource.bindTo(this.m),this.j=Xr.Extension.bindTo(this.m),this.k=Xr.HasResource.bindTo(this.m),this.l=Xr.IsFileSystemResource.bindTo(this.m),this.a.add(r.onDidChangeFileSystemProviderRegistrations(()=>{const n=this.get();this.l.set(!!(n&&r.hasProvider(n)))})),this.a.add(s.onModelAdded(n=>{Va(n.uri,this.get())&&this.q()})),this.a.add(s.onModelLanguageChanged(n=>{Va(n.model.uri,this.get())&&this.q()}))}dispose(){this.a.dispose()}q(){const t=this.get();if(!t){this.i.set(null);return}const r=this.p.getModel(t)?.getLanguageId()??this.o.guessLanguageIdByFilepathOrFirstLine(t);this.i.set(r)}set(t){t=t??void 0,!Va(this.b,t)&&(this.b=t,this.m.bufferChangeEvents(()=>{this.c.set(t?t.toString():null),this.d.set(t?t.scheme:null),this.f.set(t?Mi(t):null),this.g.set(t?this.r(xu(t)):null),this.h.set(t?this.r(t):null),this.q(),this.j.set(t?uS(t):null),this.k.set(!!t),this.l.set(t?this.n.hasProvider(t):!1)}))}r(t){return t.scheme===q.file?t.fsPath:t.path}reset(){this.b=void 0,this.m.bufferChangeEvents(()=>{this.c.reset(),this.d.reset(),this.f.reset(),this.g.reset(),this.h.reset(),this.i.reset(),this.j.reset(),this.k.reset(),this.l.reset()})}get(){return this.b}};N5=Xr=__decorate([__param(0,py),__param(1,O4),__param(2,A2),__param(3,T2)],N5);var fn;(function(e){e.responseVote=new C("chatSessionResponseVote","",{type:"string",description:d(5199,null)}),e.responseDetectedAgentCommand=new C("chatSessionResponseDetectedAgentOrCommand",!1,{type:"boolean",description:d(5200,null)}),e.responseSupportsIssueReporting=new C("chatResponseSupportsIssueReporting",!1,{type:"boolean",description:d(5201,null)}),e.responseIsFiltered=new C("chatSessionResponseFiltered",!1,{type:"boolean",description:d(5202,null)}),e.responseHasError=new C("chatSessionResponseError",!1,{type:"boolean",description:d(5203,null)}),e.requestInProgress=new C("chatSessionRequestInProgress",!1,{type:"boolean",description:d(5204,null)}),e.isRequestPaused=new C("chatRequestIsPaused",!1,{type:"boolean",description:d(5205,null)}),e.canRequestBePaused=new C("chatCanRequestBePaused",!1,{type:"boolean",description:d(5206,null)}),e.isResponse=new C("chatResponse",!1,{type:"boolean",description:d(5207,null)}),e.isRequest=new C("chatRequest",!1,{type:"boolean",description:d(5208,null)}),e.itemId=new C("chatItemId","",{type:"string",description:d(5209,null)}),e.lastItemId=new C("chatLastItemId",[],{type:"string",description:d(5210,null)}),e.editApplied=new C("chatEditApplied",!1,{type:"boolean",description:d(5211,null)}),e.inputHasText=new C("chatInputHasText",!1,{type:"boolean",description:d(5212,null)}),e.inputHasFocus=new C("chatInputHasFocus",!1,{type:"boolean",description:d(5213,null)}),e.inChatInput=new C("inChatInput",!1,{type:"boolean",description:d(5214,null)}),e.inChatSession=new C("inChat",!1,{type:"boolean",description:d(5215,null)}),e.instructionsAttached=new C("chatInstructionsAttached",!1,{type:"boolean",description:d(5216,null)}),e.supported=at.or(D2.toNegated(),R2.notEqualsTo("")),e.enabled=new C("chatIsEnabled",!1,{type:"boolean",description:d(5217,null)}),e.panelParticipantRegistered=new C("chatPanelParticipantRegistered",!1,{type:"boolean",description:d(5218,null)}),e.editingParticipantRegistered=new C("chatEditingParticipantRegistered",!1,{type:"boolean",description:d(5219,null)}),e.chatEditingCanUndo=new C("chatEditingCanUndo",!1,{type:"boolean",description:d(5220,null)}),e.chatEditingCanRedo=new C("chatEditingCanRedo",!1,{type:"boolean",description:d(5221,null)}),e.extensionInvalid=new C("chatExtensionInvalid",!1,{type:"boolean",description:d(5222,null)}),e.inputCursorAtTop=new C("chatCursorAtTop",!1),e.inputHasAgent=new C("chatInputHasAgent",!1),e.location=new C("chatLocation",void 0),e.inQuickChat=new C("quickChatHasFocus",!1,{type:"boolean",description:d(5223,null)}),e.hasFileAttachments=new C("chatHasFileAttachments",!1,{type:"boolean",description:d(5224,null)}),e.languageModelsAreUserSelectable=new C("chatModelsAreUserSelectable",!1,{type:"boolean",description:d(5225,null)}),e.Setup={signedOut:new C("chatSetupSignedOut",!1,!0),hidden:new C("chatSetupHidden",!1,!0),installed:new C("chatSetupInstalled",!1,!0),canSignUp:new C("chatPlanCanSignUp",!1,!0),limited:new C("chatPlanLimited",!1,!0),pro:new C("chatPlanPro",!1,!0)},e.SetupViewKeys=new Set([e.Setup.hidden.key,e.Setup.installed.key,e.Setup.signedOut.key,e.Setup.canSignUp.key]),e.SetupViewCondition=at.or(at.and(e.Setup.hidden.negate(),e.Setup.installed.negate()),at.and(e.Setup.canSignUp,e.Setup.installed),at.and(e.Setup.signedOut,e.Setup.installed)),e.chatQuotaExceeded=new C("chatQuotaExceeded",!1,!0),e.completionsQuotaExceeded=new C("completionsQuotaExceeded",!1,!0),e.Editing={hasToolsAgent:new C("chatHasToolsAgent",!1,{type:"boolean",description:d(5226,null)}),agentMode:new C("chatAgentMode",!1,{type:"boolean",description:d(5227,null)}),agentModeDisallowed:new C("chatAgentModeDisallowed",void 0,{type:"boolean",description:d(5228,null)})}})(fn||(fn={}));var gc,St;(function(e){e.Panel="panel",e.Terminal="terminal",e.Notebook="notebook",e.Editor="editor",e.EditingSession="editing-session"})(St||(St={})),function(e){function t(r){switch(r){case"panel":return e.Panel;case"terminal":return e.Terminal;case"notebook":return e.Notebook;case"editor":return e.Editor;case"editing-session":return e.EditingSession}return e.Panel}e.fromRaw=t}(St||(St={}));var wU=_("chatAgentService"),F5="chat.toolsAgentMode",M5=class extends he{static{this.AGENT_LEADER="@"}constructor(t,r){super(),this.u=t,this.w=r,this.b=new Map,this.f=new D,this.onDidChangeAgents=this.f.event,this.g=new D,this.onDidChangeToolsAgentModeEnabled=this.g.event,this.h=new Set,this.t=new Map,this.C=new Map,this.j=fn.enabled.bindTo(this.u),this.m=fn.panelParticipantRegistered.bindTo(this.u),this.n=fn.editingParticipantRegistered.bindTo(this.u),this.B(t.onDidChangeContext(i=>{i.affectsSome(this.h)&&this.z()})),this.r=fn.Editing.agentMode.bindTo(t),this.s=fn.Editing.hasToolsAgent.bindTo(t),this.r.set(this.w.getBoolean(F5,1,!1)),this.B(this.w.onWillSaveState(()=>this.w.store(F5,this.r.get(),1,0)))}registerAgent(t,r){if(this.getAgent(t))throw new Error(`Agent already registered: ${JSON.stringify(t)}`);const s=this,n=r.slashCommands;r={...r,get slashCommands(){return n.filter(a=>!a.when||s.u.contextMatchesRules(at.deserialize(a.when)))}};const o={data:r};return this.b.set(t,o),this.y(),this.z(),this.f.fire(void 0),ce(()=>{this.b.delete(t),this.y(),this.z(),this.f.fire(void 0)})}y(){this.h.clear();for(const t of this.b.values())if(t.data.when){const r=at.deserialize(t.data.when);for(const i of r?.keys()||[])this.h.add(i)}}z(){let t=!1,r=!1,i=!1;for(const s of this.getAgents())s.isDefault&&s.locations.includes(St.EditingSession)?(t=!0,s.isToolsAgent&&(i=!0)):s.isDefault&&(r=!0);this.n.set(t),this.m.set(r),i!==this.s.get()&&(this.s.set(i),this.f.fire(this.getDefaultAgent(St.EditingSession)))}registerAgentImplementation(t,r){const i=this.b.get(t);if(!i)throw new Error(`Unknown agent: ${JSON.stringify(t)}`);if(i.impl)throw new Error(`Agent already has implementation: ${JSON.stringify(t)}`);return i.data.isDefault&&this.j.set(!0),i.impl=r,this.f.fire(new ih(i.data,r)),ce(()=>{i.impl=void 0,this.f.fire(void 0),i.data.isDefault&&this.j.set(!1)})}registerDynamicAgent(t,r){t.isDynamic=!0;const i={data:t,impl:r};return this.b.set(t.id,i),this.f.fire(new ih(t,r)),ce(()=>{this.b.delete(t.id),this.f.fire(void 0)})}registerAgentCompletionProvider(t,r){return this.C.set(t,r),{dispose:()=>{this.C.delete(t)}}}async getAgentCompletionItems(t,r,i){return await this.C.get(t)?.(r,i)??[]}updateAgent(t,r){const i=this.b.get(t);if(!i?.impl)throw new Error(`No activated agent with id ${JSON.stringify(t)} registered`);i.data.metadata={...i.data.metadata,...r},this.f.fire(new ih(i.data,i.impl))}getDefaultAgent(t){return X3(this.getActivatedAgents(),r=>t===St.EditingSession&&this.toolsAgentModeEnabled!==!!r.isToolsAgent?!1:!!r.isDefault&&r.locations.includes(t))}get toolsAgentModeEnabled(){return!!this.s.get()&&!!this.r.get()}toggleToolsAgentMode(t){this.r.set(t??!this.r.get()),this.g.fire(),this.f.fire(this.getDefaultAgent(St.EditingSession))}getContributedDefaultAgent(t){return this.getAgents().find(r=>!!r.isDefault&&r.locations.includes(t))}getSecondaryAgent(){return mr.find(this.b.values(),t=>!!t.data.metadata.isSecondary)?.data}getAgent(t,r=!1){if(!(!this.D(t)&&!r))return this.b.get(t)?.data}D(t){const r=typeof t=="string"?this.b.get(t):t;return!r?.data.when||this.u.contextMatchesRules(at.deserialize(r.data.when))}getAgentByFullyQualifiedId(t){const r=mr.find(this.b.values(),i=>F2(i.data)===t)?.data;if(!(r&&!this.D(r.id)))return r}getAgents(){return Array.from(this.b.values()).map(t=>t.data).filter(t=>this.D(t.id))}getActivatedAgents(){return Array.from(this.b.values()).filter(t=>!!t.impl).filter(t=>this.D(t.data.id)).map(t=>new ih(t.data,t.impl))}getAgentsByName(t){return this.getAgents().filter(r=>r.name===t)}agentHasDupeName(t){const r=this.getAgent(t);return r?this.getAgentsByName(r.name).filter(i=>i.extensionId.value!==r.extensionId.value).length>0:!1}async invokeAgent(t,r,i,s,n){const o=this.b.get(t);if(!o?.impl)throw new Error(`No activated agent with id "${t}"`);return await o.impl.invoke(r,i,s,n)}setRequestPaused(t,r,i){const s=this.b.get(t);if(!s?.impl)throw new Error(`No activated agent with id "${t}"`);s.impl.setRequestPaused?.(r,i)}async getFollowups(t,r,i,s,n){const o=this.b.get(t);if(!o?.impl)throw new Error(`No activated agent with id "${t}"`);return o.impl?.provideFollowups?o.impl.provideFollowups(r,i,s,n):[]}async getChatTitle(t,r,i){const s=this.b.get(t);if(!s?.impl)throw new Error(`No activated agent with id "${t}"`);if(s.impl?.provideChatTitle)return s.impl.provideChatTitle(r,i)}registerChatParticipantDetectionProvider(t,r){return this.t.set(t,r),ce(()=>{this.t.delete(t)})}hasChatParticipantDetectionProviders(){return this.t.size>0}async detectAgentOrCommand(t,r,i,s){const n=mr.first(this.t.values());if(!n)return;const o=this.getAgents().reduce((u,h)=>{if(h.locations.includes(i.location)){u.push({participant:h.id,disambiguation:h.disambiguation??[]});for(const p of h.slashCommands)u.push({participant:h.id,command:p.name,disambiguation:p.disambiguation??[]})}return u},[]),a=await n.provideParticipantDetection(t,r,{...i,participants:o},s);if(!a)return;const c=this.getAgent(a.participant);if(!c)return;if(!a.command)return{agent:c};const l=c?.slashCommands.find(u=>u.name===a.command);if(l)return{agent:c,command:l}}};M5=__decorate([__param(0,py),__param(1,P5)],M5);var ih=class{constructor(e,t){this.b=e,this.d=t}get id(){return this.b.id}get name(){return this.b.name??""}get fullName(){return this.b.fullName??""}get description(){return this.b.description??""}get extensionId(){return this.b.extensionId}get extensionPublisherId(){return this.b.extensionPublisherId}get extensionPublisherDisplayName(){return this.b.publisherDisplayName}get extensionDisplayName(){return this.b.extensionDisplayName}get isDefault(){return this.b.isDefault}get isToolsAgent(){return this.b.isToolsAgent}get metadata(){return this.b.metadata}get slashCommands(){return this.b.slashCommands}get locations(){return this.b.locations}get disambiguation(){return this.b.disambiguation}async invoke(e,t,r,i){return this.d.invoke(e,t,r,i)}setRequestPaused(e,t){this.d.setRequestPaused&&this.d.setRequestPaused(e,t)}async provideFollowups(e,t,r,i){return this.d.provideFollowups?this.d.provideFollowups(e,t,r,i):[]}provideWelcomeMessage(e){if(this.d.provideWelcomeMessage)return this.d.provideWelcomeMessage(e)}provideSampleQuestions(e,t){if(this.d.provideSampleQuestions)return this.d.provideSampleQuestions(e,t)}toJSON(){return this.b}},yU=_("chatAgentNameService"),O5=class{static{gc=this}static{this.b="chat.participantNameRegistry"}constructor(t,r,i,s){if(this.h=r,this.i=i,this.j=s,this.f=KC(this,Object.create(null)),this.g=!1,!t.chatParticipantRegistry)return;this.d=t.chatParticipantRegistry;const n=s.get(gc.b,-1);try{this.f.set(JSON.parse(n??"{}"),void 0)}catch{s.remove(gc.b,-1)}this.k()}k(){this.g||this.l().catch(t=>this.i.warn("Failed to fetch chat participant registry",t)).then(()=>gi(5*60*1e3)).then(()=>this.k())}async l(){const t=await this.h.request({type:"GET",url:this.d},st.None);if(t.res.statusCode!==200)throw new Error("Could not get extensions report.");const r=await E2(t);if(!r||r.version!==1)throw new Error("Unexpected chat participant registry response.");const i=r.restrictedChatParticipants;this.f.set(i,void 0),this.j.store(gc.b,JSON.stringify(i),-1,1)}getAgentNameRestriction(t){const r=this.m(t.name,t).get(),i=!t.fullName||this.m(t.fullName.replace(/\s/g,""),t).get();return r&&i}m(t,r){return this.f.map(s=>s[t.toLowerCase()]).map(s=>s?s.some(n=>ms(n,n.includes(".")?r.extensionId.value:r.extensionPublisherId)):!0)}dispose(){this.g=!0}};O5=gc=__decorate([__param(0,o2),__param(1,w2),__param(2,He),__param(3,P5)],O5);function F2(e){return`${e.extensionId.value}.${e.id}`}var pn="**",Ug="/",sh="[/\\\\]",nh="[^/\\\\]",M2=/\//g;function U5(e,t){switch(e){case 0:return"";case 1:return`${nh}*?`;default:return`(?:${sh}|${nh}+${sh}${t?`|${sh}${nh}+`:""})*?`}}function Hg(e,t){if(!e)return[];const r=[];let i=!1,s=!1,n="";for(const o of e){switch(o){case t:if(!i&&!s){r.push(n),n="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":s=!0;break;case"]":s=!1;break}n+=o}return n&&r.push(n),r}function H5(e){if(!e)return"";let t="";const r=Hg(e,Ug);if(r.every(i=>i===pn))t=".*";else{let i=!1;r.forEach((s,n)=>{if(s===pn){if(i)return;t+=U5(2,n===r.length-1)}else{let o=!1,a="",c=!1,l="";for(const u of s){if(u!=="}"&&o){a+=u;continue}if(c&&(u!=="]"||!l)){let h;u==="-"?h=u:(u==="^"||u==="!")&&!l?h="^":u===Ug?h="":h=Ks(u),l+=h;continue}switch(u){case"{":o=!0;continue;case"[":c=!0;continue;case"}":{const p=`(?:${Hg(a,",").map(f=>H5(f)).join("|")})`;t+=p,o=!1,a="";break}case"]":{t+="["+l+"]",c=!1,l="";break}case"?":t+=nh;continue;case"*":t+=U5(1);continue;default:t+=Ks(u)}}n<r.length-1&&(r[n+1]!==pn||n+2<r.length)&&(t+=sh)}i=s===pn})}return t}var O2=/^\*\*\/\*\.[\w\.-]+$/,U2=/^\*\*\/([\w\.-]+)\/?$/,H2=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,j2=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,B2=/^\*\*((\/[\w\.-]+)+)\/?$/,_2=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,j5=new fp(1e4),B5=function(){return!1},vi=function(){return null};function jg(e,t){if(!e)return vi;let r;typeof e!="string"?r=e.pattern:r=e,r=r.trim();const i=`${r}_${!!t.trimForExclusions}`;let s=j5.get(i);if(s)return _5(s,e);let n;return O2.test(r)?s=z2(r.substr(4),r):(n=U2.exec(Bg(r,t)))?s=W2(n[1],r):(t.trimForExclusions?j2:H2).test(r)?s=V2(r,t):(n=B2.exec(Bg(r,t)))?s=z5(n[1].substr(1),r,!0):(n=_2.exec(Bg(r,t)))?s=z5(n[1],r,!1):s=q2(r),j5.set(i,s),_5(s,e)}function _5(e,t){if(typeof t=="string")return e;const r=function(i,s){return Eu(i,t.base,!di)?e(R$(i.substr(t.base.length),Wr),s):null};return r.allBasenames=e.allBasenames,r.allPaths=e.allPaths,r.basenames=e.basenames,r.patterns=e.patterns,r}function Bg(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function z2(e,t){return function(r,i){return typeof r=="string"&&r.endsWith(e)?t:null}}function W2(e,t){const r=`/${e}`,i=`\\${e}`,s=function(o,a){return typeof o!="string"?null:a?a===e?t:null:o===e||o.endsWith(r)||o.endsWith(i)?t:null},n=[e];return s.basenames=n,s.patterns=[t],s.allBasenames=n,s}function V2(e,t){const r=W5(e.slice(1,-1).split(",").map(a=>jg(a,t)).filter(a=>a!==vi),e),i=r.length;if(!i)return vi;if(i===1)return r[0];const s=function(a,c){for(let l=0,u=r.length;l<u;l++)if(r[l](a,c))return e;return null},n=r.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=r.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function z5(e,t,r){const i=Wr===Te.sep,s=i?e:e.replace(M2,Wr),n=Wr+s,o=Te.sep+e;let a;return r?a=function(c,l){return typeof c=="string"&&(c===s||c.endsWith(n)||!i&&(c===e||c.endsWith(o)))?t:null}:a=function(c,l){return typeof c=="string"&&(c===s||!i&&c===e)?t:null},a.allPaths=[(r?"*/":"./")+e],a}function q2(e){try{const t=new RegExp(`^${H5(e)}$`);return function(r){return t.lastIndex=0,typeof r=="string"&&t.test(r)?e:null}}catch{return vi}}function mc(e,t,r){return!e||typeof t!="string"?!1:$o(e)(t,void 0,r)}function $o(e,t={}){if(!e)return B5;if(typeof e=="string"||G2(e)){const r=jg(e,t);if(r===vi)return B5;const i=function(s,n){return!!r(s,n)};return r.allBasenames&&(i.allBasenames=r.allBasenames),r.allPaths&&(i.allPaths=r.allPaths),i}return Q2(e,t)}function G2(e){const t=e;return t?typeof t.base=="string"&&typeof t.pattern=="string":!1}function Q2(e,t){const r=W5(Object.getOwnPropertyNames(e).map(a=>J2(a,e[a],t)).filter(a=>a!==vi)),i=r.length;if(!i)return vi;if(!r.some(a=>!!a.requiresSiblings)){if(i===1)return r[0];const a=function(u,h){let p;for(let f=0,m=r.length;f<m;f++){const w=r[f](u,h);if(typeof w=="string")return w;ws(w)&&(p||(p=[]),p.push(w))}return p?(async()=>{for(const f of p){const m=await f;if(typeof m=="string")return m}return null})():null},c=r.find(u=>!!u.allBasenames);c&&(a.allBasenames=c.allBasenames);const l=r.reduce((u,h)=>h.allPaths?u.concat(h.allPaths):u,[]);return l.length&&(a.allPaths=l),a}const s=function(a,c,l){let u,h;for(let p=0,f=r.length;p<f;p++){const m=r[p];m.requiresSiblings&&l&&(c||(c=br(a)),u||(u=c.substr(0,c.length-Pp(a).length)));const w=m(a,c,u,l);if(typeof w=="string")return w;ws(w)&&(h||(h=[]),h.push(w))}return h?(async()=>{for(const p of h){const f=await p;if(typeof f=="string")return f}return null})():null},n=r.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=r.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function J2(e,t,r){if(t===!1)return vi;const i=jg(e,r);if(i===vi)return vi;if(typeof t=="boolean")return i;if(t){const s=t.when;if(typeof s=="string"){const n=(o,a,c,l)=>{if(!l||!i(o,a))return null;const u=s.replace("$(basename)",()=>c),h=l(u);return ws(h)?h.then(p=>p?e:null):h?e:null};return n.requiresSiblings=!0,n}}return i}function W5(e,t){const r=e.filter(a=>!!a.basenames);if(r.length<2)return e;const i=r.reduce((a,c)=>{const l=c.basenames;return l?a.concat(l):a},[]);let s;if(t){s=[];for(let a=0,c=i.length;a<c;a++)s.push(t)}else s=r.reduce((a,c)=>{const l=c.patterns;return l?a.concat(l):a},[]);const n=function(a,c){if(typeof a!="string")return null;if(!c){let u;for(u=a.length;u>0;u--){const h=a.charCodeAt(u-1);if(h===47||h===92)break}c=a.substr(u)}const l=i.indexOf(c);return l!==-1?s[l]:null};n.basenames=i,n.patterns=s,n.allBasenames=i;const o=e.filter(a=>!a.basenames);return o.push(n),o}var X2=_("notebookDocumentService"),_g=["W","X","Y","Z","a","b","c","d","e","f"],Y2=new RegExp(`^[${_g.join("")}]+`),V5=7;function q5(e){if(e.scheme!==q.vscodeNotebookCell)return;const t=e.fragment.indexOf("s");if(t<0)return;const r=parseInt(e.fragment.substring(0,t).replace(Y2,""),V5),i=nu(e.fragment.substring(t+1)).toString();if(!isNaN(r))return{handle:r,notebook:e.with({scheme:i,fragment:null})}}function Z2(e,t){const r=t.toString(V5),s=`${r.length<_g.length?_g[r.length-1]:"z"}${r}s${wp(ke.fromString(e.scheme),!0,!0)}`;return e.with({scheme:q.vscodeNotebookCell,fragment:s})}function K2(e){if(e.scheme!==q.vscodeNotebookMetadata)return;const t=nu(e.fragment).toString();return e.with({scheme:t,fragment:null})}function eD(e){const t=`${wp(ke.fromString(e.scheme),!0,!0)}`;return e.with({scheme:q.vscodeNotebookMetadata,fragment:t})}var tD=class{constructor(){this.a=new Nt}getNotebook(e){if(e.scheme===q.vscodeNotebookCell){const t=q5(e);if(t){const r=this.a.get(t.notebook);if(r)return r}}return this.a.get(e)}addNotebookDocument(e){this.a.set(e.uri,e)}removeNotebookDocument(e){this.a.delete(e.uri)}};Ge(X2,tD,1);var So;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(So||(So={}));var xU=["application/json","application/javascript","text/html","image/svg+xml",ji.latex,ji.markdown,"image/png","image/jpeg",ji.text],kU=[ji.latex,ji.markdown,"application/json","text/html","image/svg+xml","image/png","image/jpeg",ji.text],G5;(function(e){e[e.Running=1]="Running",e[e.Idle=2]="Idle"})(G5||(G5={}));var vc;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(vc||(vc={}));var Q5;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(Q5||(Q5={}));var J5;(function(e){e[e.WithHardKernelDependency=0]="WithHardKernelDependency",e[e.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",e[e.Pure=2]="Pure",e[e.Never=3]="Never"})(J5||(J5={}));var X5;(function(e){e.Always="always",e.Never="never",e.Optional="optional"})(X5||(X5={}));var Yr;(function(e){e[e.ModelChange=1]="ModelChange",e[e.Move=2]="Move",e[e.ChangeCellLanguage=5]="ChangeCellLanguage",e[e.Initialize=6]="Initialize",e[e.ChangeCellMetadata=7]="ChangeCellMetadata",e[e.Output=8]="Output",e[e.OutputItem=9]="OutputItem",e[e.ChangeCellContent=10]="ChangeCellContent",e[e.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",e[e.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",e[e.ChangeCellMime=13]="ChangeCellMime",e[e.Unknown=100]="Unknown"})(Yr||(Yr={}));var Y5;(function(e){e[e.Handle=0]="Handle",e[e.Index=1]="Index"})(Y5||(Y5={}));var Z5;(function(e){e[e.Replace=1]="Replace",e[e.Output=2]="Output",e[e.Metadata=3]="Metadata",e[e.CellLanguage=4]="CellLanguage",e[e.DocumentMetadata=5]="DocumentMetadata",e[e.Move=6]="Move",e[e.OutputItems=7]="OutputItems",e[e.PartialMetadata=8]="PartialMetadata",e[e.PartialInternalMetadata=9]="PartialInternalMetadata"})(Z5||(Z5={}));var K5;(function(e){e.scheme=q.vscodeNotebookMetadata;function t(i){return eD(i)}e.generate=t;function r(i){return K2(i)}e.parse=r})(K5||(K5={}));var e6;(function(e){e.scheme=q.vscodeNotebookCell;function t(a,c){return Z2(a,c)}e.generate=t;function r(a){return q5(a)}e.parse=r;function i(a,c){return a.with({scheme:q.vscodeNotebookCellOutput,fragment:`op${c??""},${a.scheme!==q.file?a.scheme:""}`})}e.generateCellOutputUri=i;function s(a){if(a.scheme!==q.vscodeNotebookCellOutput)return;const c=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(a.fragment);if(!c)return;const l=c[1]&&c[1]!==""?c[1]:void 0,u=c[2];return{outputId:l,notebook:a.with({scheme:u||q.file,fragment:null})}}e.parseCellOutputUri=s;function n(a,c,l){return e.generate(a,c).with({scheme:l})}e.generateCellPropertyUri=n;function o(a,c){if(a.scheme===c)return e.parse(a.with({scheme:e.scheme}))}e.parseCellPropertyUri=o})(e6||(e6={}));var $U=new C("notebookEditorCursorAtBoundary","none"),SU=new C("notebookEditorCursorAtLineBoundary","none"),t6;(function(e){e.default="default",e.option="option"})(t6||(t6={}));var r6;(function(e){e.Cells="cells",e.Text="text",e.None="none"})(r6||(r6={}));var i6;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(i6||(i6={}));var IU=class Gf{static{this.d="notebook/"}static create(t,r){return`${Gf.d}${t}/${r??t}`}static parse(t){if(t.startsWith(Gf.d)){const r=t.substring(Gf.d.length).split("/");if(r.length===2)return{notebookType:r[0],viewType:r[1]}}}};function s6(e){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(e)}var rD=new TextDecoder;function iD(e){const t=[];let r=!1;for(const o of e)(t.length===0||r)&&(t.push(o),r=!0);let i=nD(t);const s=ke.concat(t.map(o=>ke.wrap(o))),n=uD(s);return i=i||n.byteLength!==s.byteLength,{data:n,didCompression:i}}var oh="\x1B[A",zg=oh.split("").map(e=>e.charCodeAt(0)),sD=10;function nD(e){let t=!1;return e.forEach((r,i)=>{if(i===0||r.length<oh.length)return;const s=e[i-1],n=r.subarray(0,oh.length);if(n[0]===zg[0]&&n[1]===zg[1]&&n[2]===zg[2]){const o=s.lastIndexOf(sD);if(o===-1)return;t=!0,e[i-1]=s.subarray(0,o),e[i]=r.subarray(oh.length)}}),t}function oD(e){let t=e;do e=t,t=e.replace(/[^\n]\x08/gm,"");while(t.length<e.length);return e}function aD(e){for(e=e.replace(/\r+\n/gm,`
`);e.search(/\r[^$]/g)>-1;){const t=e.match(/^(.*)\r+/m)[1];let r=e.match(/\r+(.*)$/m)[1];r=r+t.slice(r.length,t.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,r)}return e}var cD=8,lD=13;function uD(e){return!e.buffer.includes(cD)&&!e.buffer.includes(lD)?e:ke.fromString(aD(oD(rD.decode(e.buffer))))}var n6;(function(e){e.Delimiter="\0"})(n6||(n6={}));var o6;(function(e){e[e.IsSame=0]="IsSame",e[e.Disconnected=1]="Disconnected",e[e.IsChild=2]="IsChild",e[e.IsParent=3]="IsParent"})(o6||(o6={}));var De=class _r{static fromExtHostTestItem(t,r,i=t.parent){if(t._isRoot)return new _r([r]);const s=[t.id];for(let n=i;n&&n.id!==r;n=n.parent)s.push(n.id);return s.push(r),new _r(s.reverse())}static isRoot(t){return!t.includes("\0")}static root(t){const r=t.indexOf("\0");return r===-1?t:t.slice(0,r)}static fromString(t){return new _r(t.split("\0"))}static join(t,r){return new _r([...t.path,r])}static split(t){return t.split("\0")}static joinToString(t,r){return t.toString()+"\0"+r}static parentId(t){const r=t.lastIndexOf("\0");return r===-1?void 0:t.slice(0,r)}static localId(t){const r=t.lastIndexOf("\0");return r===-1?t:t.slice(r+1)}static isChild(t,r){return r[t.length]==="\0"&&r.startsWith(t)}static compare(t,r){return t===r?0:_r.isChild(t,r)?2:_r.isChild(r,t)?3:1}static getLengthOfCommonPrefix(t,r){if(t===0)return 0;let i=0;for(;i<t-1;){for(let s=1;s<t;s++){const n=r(s-1),o=r(s);if(n.path[i]!==o.path[i])return i}i++}return i}constructor(t,r=t.length){if(this.path=t,this.d=r,t.length===0||r<1)throw new Error("cannot create test with empty path")}get rootId(){return new _r(this.path,1)}get parentId(){return this.d>1?new _r(this.path,this.d-1):void 0}get localId(){return this.path[this.d-1]}get controllerId(){return this.path[0]}get isRoot(){return this.d===1}*idsFromRoot(){for(let t=1;t<=this.d;t++)yield new _r(this.path,t)}*idsToRoot(){for(let t=this.d;t>0;t--)yield new _r(this.path,t)}compare(t){if(typeof t=="string")return _r.compare(this.toString(),t);for(let r=0;r<t.d&&r<this.d;r++)if(t.path[r]!==this.path[r])return 1;return t.d>this.d?2:t.d<this.d?3:0}toJSON(){return this.toString()}toString(){if(!this.c){this.c=this.path[0];for(let t=1;t<this.d;t++)this.c+="\0",this.c+=this.path[t]}return this.c}},a6;(function(e){e[e.Unset=0]="Unset",e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(a6||(a6={}));var c6;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(c6||(c6={}));var l6;(function(e){e[e.Refresh=2]="Refresh",e[e.CodeRelatedToTest=4]="CodeRelatedToTest",e[e.TestRelatedToCode=8]="TestRelatedToCode"})(l6||(l6={}));var u6;(function(e){e[e.Run=2]="Run",e[e.Debug=4]="Debug",e[e.Coverage=8]="Coverage",e[e.HasNonDefaultProfile=16]="HasNonDefaultProfile",e[e.HasConfigurable=32]="HasConfigurable",e[e.SupportsContinuousRun=64]="SupportsContinuousRun"})(u6||(u6={}));var CU={2:d(11573,null),4:d(11574,null),8:d(11575,null)},hD=e=>"runId"in e,Io;(function(e){e.serialize=t=>({range:t.range.toJSON(),uri:t.uri.toJSON()}),e.deserialize=(t,r)=>({range:ze.lift(r.range),uri:t.asCanonicalUri(y.revive(r.uri))})})(Io||(Io={}));var h6;(function(e){e[e.Error=0]="Error",e[e.Output=1]="Output"})(h6||(h6={}));var ah;(function(e){e.serialize=t=>({label:t.label,uri:t.uri?.toJSON(),position:t.position?.toJSON()}),e.deserialize=(t,r)=>({label:r.label,uri:r.uri?t.asCanonicalUri(y.revive(r.uri)):void 0,position:r.position?Ar.lift(r.position):void 0})})(ah||(ah={}));var ch;(function(e){e.serialize=t=>({message:t.message,type:0,expected:t.expected,actual:t.actual,contextValue:t.contextValue,location:t.location&&Io.serialize(t.location),stackTrace:t.stackTrace?.map(ah.serialize)}),e.deserialize=(t,r)=>({message:r.message,type:0,expected:r.expected,actual:r.actual,contextValue:r.contextValue,location:r.location&&Io.deserialize(t,r.location),stackTrace:r.stackTrace&&r.stackTrace.map(i=>ah.deserialize(t,i))})})(ch||(ch={}));var lh;(function(e){e.serialize=t=>({message:t.message,type:1,offset:t.offset,length:t.length,location:t.location&&Io.serialize(t.location)}),e.deserialize=(t,r)=>({message:r.message,type:1,offset:r.offset,length:r.length,location:r.location&&Io.deserialize(t,r.location)})})(lh||(lh={}));var uh;(function(e){e.serialize=t=>t.type===0?ch.serialize(t):lh.serialize(t),e.deserialize=(t,r)=>r.type===0?ch.deserialize(t,r):lh.deserialize(t,r),e.isDiffable=t=>t.type===0&&t.actual!==void 0&&t.expected!==void 0})(uh||(uh={}));var wc;(function(e){e.serializeWithoutMessages=t=>({state:t.state,duration:t.duration,messages:[]}),e.serialize=t=>({state:t.state,duration:t.duration,messages:t.messages.map(uh.serialize)}),e.deserialize=(t,r)=>({state:r.state,duration:r.duration,messages:r.messages.map(i=>uh.deserialize(t,i))})})(wc||(wc={}));var d6="\0",hh=(e,t)=>e+d6+t,f6=e=>{const t=e.indexOf(d6);return{ctrlId:e.slice(0,t),tagId:e.slice(t+1)}},dh;(function(e){e.serialize=t=>({extId:t.extId,label:t.label,tags:t.tags,busy:t.busy,children:void 0,uri:t.uri?.toJSON(),range:t.range?.toJSON()||null,description:t.description,error:t.error,sortText:t.sortText}),e.deserialize=(t,r)=>({extId:r.extId,label:r.label,tags:r.tags,busy:r.busy,children:void 0,uri:r.uri?t.asCanonicalUri(y.revive(r.uri)):void 0,range:r.range?ze.lift(r.range):null,description:r.description,error:r.error,sortText:r.sortText})})(dh||(dh={}));var p6;(function(e){e[e.NotExpandable=0]="NotExpandable",e[e.Expandable=1]="Expandable",e[e.BusyExpanding=2]="BusyExpanding",e[e.Expanded=3]="Expanded"})(p6||(p6={}));var ks;(function(e){e.serialize=t=>({expand:t.expand,item:dh.serialize(t.item)}),e.deserialize=(t,r)=>({controllerId:De.root(r.item.extId),expand:r.expand,item:dh.deserialize(t,r.item)})})(ks||(ks={}));var bc;(function(e){e.serialize=t=>{let r;return t.item&&(r={},t.item.label!==void 0&&(r.label=t.item.label),t.item.tags!==void 0&&(r.tags=t.item.tags),t.item.busy!==void 0&&(r.busy=t.item.busy),t.item.uri!==void 0&&(r.uri=t.item.uri?.toJSON()),t.item.range!==void 0&&(r.range=t.item.range?.toJSON()),t.item.description!==void 0&&(r.description=t.item.description),t.item.error!==void 0&&(r.error=t.item.error),t.item.sortText!==void 0&&(r.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:r}},e.deserialize=t=>{let r;return t.item&&(r={},t.item.label!==void 0&&(r.label=t.item.label),t.item.tags!==void 0&&(r.tags=t.item.tags),t.item.busy!==void 0&&(r.busy=t.item.busy),t.item.range!==void 0&&(r.range=t.item.range?ze.lift(t.item.range):null),t.item.description!==void 0&&(r.description=t.item.description),t.item.error!==void 0&&(r.error=t.item.error),t.item.sortText!==void 0&&(r.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:r}}})(bc||(bc={}));var Wg=(e,t)=>{t.expand!==void 0&&(e.expand=t.expand),t.item!==void 0&&(e.item=e.item?Object.assign(e.item,t.item):t.item)},g6;(function(e){e.serializeWithoutMessages=t=>({...ks.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(wc.serializeWithoutMessages)}),e.serialize=t=>({...ks.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(wc.serialize)}),e.deserialize=(t,r)=>({...ks.deserialize(t,r),ownComputedState:r.ownComputedState,computedState:r.computedState,tasks:r.tasks.map(i=>wc.deserialize(t,i)),retired:!0})})(g6||(g6={}));var Vg;(function(e){e.empty=()=>({covered:0,total:0}),e.sum=(t,r)=>{t.covered+=r.covered,t.total+=r.total}})(Vg||(Vg={}));var m6;(function(e){e.serialize=t=>({id:t.id,statement:t.statement,branch:t.branch,declaration:t.declaration,testIds:t.testIds,uri:t.uri.toJSON()}),e.deserialize=(t,r)=>({id:r.id,statement:r.statement,branch:r.branch,declaration:r.declaration,testIds:r.testIds,uri:t.asCanonicalUri(y.revive(r.uri))}),e.empty=(t,r)=>({id:t,uri:r,statement:Vg.empty()})})(m6||(m6={}));function qg(e){return{...e,location:e.location?.toJSON()}}function Gg(e){return e.location=e.location?Ar.isIPosition(e.location)?Ar.lift(e.location):ze.lift(e.location):void 0,e}var v6;(function(e){e[e.Declaration=0]="Declaration",e[e.Statement=1]="Statement",e[e.Branch=2]="Branch"})(v6||(v6={}));var w6;(function(e){e.serialize=t=>t.type===0?ph.serialize(t):gh.serialize(t),e.deserialize=t=>t.type===0?ph.deserialize(t):gh.deserialize(t)})(w6||(w6={}));var fh;(function(e){e.serialize=qg,e.deserialize=Gg})(fh||(fh={}));var ph;(function(e){e.serialize=qg,e.deserialize=Gg})(ph||(ph={}));var gh;(function(e){e.serialize=t=>({...qg(t),branches:t.branches?.map(fh.serialize)}),e.deserialize=t=>({...Gg(t),branches:t.branches?.map(fh.deserialize)})})(gh||(gh={}));var b6;(function(e){e[e.Add=0]="Add",e[e.Update=1]="Update",e[e.DocumentSynced=2]="DocumentSynced",e[e.Remove=3]="Remove",e[e.IncrementPendingExtHosts=4]="IncrementPendingExtHosts",e[e.Retire=5]="Retire",e[e.AddTag=6]="AddTag",e[e.RemoveTag=7]="RemoveTag"})(b6||(b6={}));var mh;(function(e){e.deserialize=(t,r)=>r.op===0?{op:r.op,item:ks.deserialize(t,r.item)}:r.op===1?{op:r.op,item:bc.deserialize(r.item)}:r.op===2?{op:r.op,uri:t.asCanonicalUri(y.revive(r.uri)),docv:r.docv}:r,e.serialize=t=>t.op===0?{op:t.op,item:ks.serialize(t.item)}:t.op===1?{op:t.op,item:bc.serialize(t.item)}:t})(mh||(mh={}));var dD=class{constructor(e){this.l=e,this.f=new Map,this.g=new Map,this.h=new Set,this.j=0,this.k=0,this.tags=this.f}apply(e){const t=this.x();for(const r of e)switch(r.op){case 0:this.p(ks.deserialize(this.l,r.item),t);break;case 1:this.q(bc.deserialize(r.item),t);break;case 3:this.v(r.itemId,t);break;case 5:this.w(r.itemId);break;case 4:this.updatePendingRoots(r.amount);break;case 6:this.f.set(r.tag.id,r.tag);break;case 7:this.f.delete(r.id);break}t.complete?.()}p(e,t){const r=De.parentId(e.item.extId)?.toString();let i;if(!r)i=this.y(e),this.h.add(i),this.g.set(e.item.extId,i);else if(this.g.has(r)){const s=this.g.get(r);s.children.add(e.item.extId),i=this.y(e,s),this.g.set(e.item.extId,i)}else{console.error(`Test with unknown parent ID: ${JSON.stringify(e)}`);return}return t.add?.(i),e.expand===2&&this.j++,i}q(e,t){const r=this.g.get(e.extId);if(r)return e.expand!==void 0&&(r.expand===2&&this.j--,e.expand===2&&this.j++),Wg(r,e),t.update?.(r),r}v(e,t){const r=this.g.get(e);if(!r)return;const i=De.parentId(r.item.extId)?.toString();i?this.g.get(i).children.delete(r.item.extId):this.h.delete(r);const s=[[e]];for(;s.length;)for(const n of s.pop()){const o=this.g.get(n);o&&(s.push(o.children),this.g.delete(n),t.remove?.(o,o!==r),o.expand===2&&this.j--)}}w(e){}updatePendingRoots(e){this.k+=e}x(){return{}}},fD=_("editorGroupsService"),y6;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(y6||(y6={}));var E6;(function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"})(E6||(E6={}));var x6;(function(e){e[e.FIRST=0]="FIRST",e[e.LAST=1]="LAST",e[e.NEXT=2]="NEXT",e[e.PREVIOUS=3]="PREVIOUS"})(x6||(x6={}));var k6;(function(e){e[e.MAXIMIZE=0]="MAXIMIZE",e[e.EXPAND=1]="EXPAND",e[e.EVEN=2]="EVEN"})(k6||(k6={}));var $6;(function(e){e[e.COPY_EDITORS=0]="COPY_EDITORS",e[e.MOVE_EDITORS=1]="MOVE_EDITORS"})($6||($6={}));var S6;(function(e){e[e.CREATION_TIME=0]="CREATION_TIME",e[e.MOST_RECENTLY_ACTIVE=1]="MOST_RECENTLY_ACTIVE",e[e.GRID_APPEARANCE=2]="GRID_APPEARANCE"})(S6||(S6={}));var I6;(function(e){e[e.NEW_EDITOR=1]="NEW_EDITOR",e[e.MOVE_EDITOR=2]="MOVE_EDITOR",e[e.COPY_EDITOR=3]="COPY_EDITOR"})(I6||(I6={}));var DU=_("editorService"),pD=-1,gD=-2,C6;(function(e){e[e.Upsert=0]="Upsert",e[e.SetTags=1]="SetTags",e[e.UpdateCanResolveChildren=2]="UpdateCanResolveChildren",e[e.RemoveChild=3]="RemoveChild",e[e.SetProp=4]="SetProp",e[e.Bulk=5]="Bulk",e[e.DocumentSynced=6]="DocumentSynced"})(C6||(C6={}));var yc=(e,t)=>e===t,mD={range:(e,t)=>e===t?!0:!e||!t?!1:e.equalsRange(t),busy:yc,label:yc,description:yc,error:yc,sortText:yc,tags:(e,t)=>!(e.length!==t.length||e.some(r=>!t.includes(r)))},vD=Object.entries(mD),wD=(e,t)=>{let r;for(const[i,s]of vD)s(e[i],t[i])||(r?r[i]=t[i]:r={[i]:t[i]});return r},bD=class extends he{get root(){return this.s.root}constructor(e){super(),this.s=e,this.f=this.B(new ao(()=>this.flushDiff(),200)),this.g=this.B(new D),this.tree=new Map,this.j=new Map,this.m=[],this.onDidGenerateDiff=this.g.event,this.root.canResolveChildren=!0,this.z(this.root,void 0)}set resolveHandler(e){this.h=e;for(const t of this.tree.values())this.J(t)}get resolveHandler(){return this.h}collectDiff(){const e=this.m;return this.m=[],e}pushDiff(e){switch(e.op){case 2:{for(const t of this.m)if(t.op===2&&t.uri===e.uri){t.docv=e.docv;return}break}case 1:{const t=this.m[this.m.length-1];if(t){if(t.op===1&&t.item.extId===e.item.extId){Wg(t.item,e.item);return}if(t.op===0&&t.item.item.extId===e.item.extId){Wg(t.item,e.item);return}}break}}this.m.push(e),this.f.isScheduled()||this.f.schedule()}expand(e,t){const r=this.tree.get(e);if(r){if((r.expandLevels===void 0||t>r.expandLevels)&&(r.expandLevels=t),r.expand===1){const i=this.M(r);return i.isOpen()?this.L(r,t-1):i.wait().then(()=>this.L(r,t-1))}else if(r.expand===3)return r.resolveBarrier?.isOpen()===!1?r.resolveBarrier.wait().then(()=>this.L(r,t-1)):this.L(r,t-1)}}dispose(){for(const e of this.tree.values())this.s.getApiFor(e.actual).listener=void 0;this.tree.clear(),this.m=[],super.dispose()}w(e,t){switch(t.op){case 3:this.O(De.joinToString(e.fullId,t.id));break;case 0:this.z(t.item,e);break;case 5:for(const r of t.ops)this.w(e,r);break;case 1:this.C(t.new,t.old,e.fullId.toString());break;case 2:this.J(e);break;case 4:this.pushDiff({op:1,item:{extId:e.fullId.toString(),item:t.update}});break;case 6:this.y(e.actual.uri);break;default:uk(t)}}y(e){e&&this.pushDiff({op:2,uri:e,docv:this.s.getDocumentVersion(e)})}z(e,t){const r=De.fromExtHostTestItem(e,this.root.id,t?.actual),i=this.s.getApiFor(e);i.parent&&i.parent!==t?.actual&&this.s.getChildren(i.parent).delete(e.id);let s=this.tree.get(r.toString());if(!s){s={fullId:r,actual:e,expandLevels:t?.expandLevels?t.expandLevels-1:void 0,expand:0},e.tags.forEach(this.D,this),this.tree.set(s.fullId.toString(),s),this.G(e,t),this.pushDiff({op:0,item:{controllerId:this.s.controllerId,expand:s.expand,item:this.s.toITestItem(e)}}),this.I(e,s,t);return}if(s.actual===e){this.H(e,s,t);return}if(s.actual.uri?.toString()!==e.uri?.toString())return this.O(r.toString()),this.z(e,t);const n=this.s.getChildren(s.actual),o=s.actual,a=wD(this.s.toITestItem(o),this.s.toITestItem(e));this.s.getApiFor(o).listener=void 0,s.actual=e,s.resolveBarrier=void 0,s.expand=0,a&&(a.hasOwnProperty("tags")&&(this.C(e.tags,o.tags,r.toString()),delete a.tags),this.w(s,{op:4,update:a})),this.I(e,s,t);for(const[l,u]of n)this.s.getChildren(e).get(u.id)||this.O(De.joinToString(r,u.id));const c=s.expandLevels;c!==void 0&&queueMicrotask(()=>{s.expand===1&&(s.expandLevels=void 0,this.expand(r.toString(),c))}),this.y(s.actual.uri)}C(e,t,r){const i=new Set(t.map(s=>s.id));for(const s of e)i.delete(s.id)||this.D(s);this.pushDiff({op:1,item:{extId:r,item:{tags:e.map(s=>hh(this.s.controllerId,s.id))}}}),i.forEach(this.F,this)}D(e){const t=this.j.get(e.id);t?t.refCount++:(this.j.set(e.id,{refCount:1}),this.pushDiff({op:6,tag:{id:hh(this.s.controllerId,e.id)}}))}F(e){const t=this.j.get(e);t&&!--t.refCount&&(this.j.delete(e),this.pushDiff({op:7,id:hh(this.s.controllerId,e)}))}G(e,t){this.s.getApiFor(e).parent=t&&t.actual!==this.root?t.actual:void 0}H(e,t,r){this.G(e,r);const i=this.s.getApiFor(e);i.parent=r?.actual,i.listener=s=>this.w(t,s),this.J(t)}I(e,t,r){this.H(e,t,r);for(const[i,s]of this.s.getChildren(e))this.z(s,t)}J(e){let t;this.h?e.resolveBarrier?t=e.resolveBarrier.isOpen()?3:2:t=e.actual.canResolveChildren?1:0:t=0,t!==e.expand&&(e.expand=t,this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:t}}),t===1&&e.expandLevels!==void 0&&this.M(e))}L(e,t){if(t<0)return;const r=[];for(const[i,s]of this.s.getChildren(e.actual)){const n=this.expand(De.joinToString(e.fullId,s.id),t);ws(n)&&r.push(n)}if(r.length)return Promise.all(r).then(()=>{})}M(e){if(e.resolveBarrier)return e.resolveBarrier;if(!this.h){const s=new pi;return s.open(),s}e.expand=2,this.N(e);const t=e.resolveBarrier=new pi,r=s=>{console.error(`Unhandled error in resolveHandler of test controller "${this.s.controllerId}"`,s)};let i;try{i=this.h(e.actual===this.root?void 0:e.actual)}catch(s){r(s)}return ws(i)?i.catch(r).then(()=>{t.open(),this.J(e)}):(t.open(),this.J(e)),e.resolveBarrier}N(e){this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:e.expand}})}O(e){const t=this.tree.get(e);if(!t)throw new Error("attempting to remove non-existent child");this.pushDiff({op:3,itemId:e});const r=[t];for(;r.length;){const i=r.pop();if(i){this.s.getApiFor(i.actual).listener=void 0;for(const s of i.actual.tags)this.F(s.id);this.tree.delete(i.fullId.toString());for(const[s,n]of this.s.getChildren(i.actual))r.push(this.tree.get(De.joinToString(i.fullId,n.id)))}}}flushDiff(){const e=this.collectDiff();e.length&&this.g.fire(e)}},yD=class extends Error{constructor(e){super(`Attempted to insert a duplicate test item ID ${e}`)}},vh=class extends Error{constructor(e){super(`TestItem with ID "${e}" is invalid. Make sure to create it from the createTestItem method.`)}},ED=class extends Error{constructor(e,t,r){super(`TestItem with ID "${e}" is from controller "${t}" and cannot be added as a child of an item from controller "${r}".`)}},xD=(e,t,r)=>{let i=new Map;return{get size(){return i.size},forEach(s,n){for(const o of i.values())s.call(n,o,this)},[Symbol.iterator](){return i.entries()},replace(s){const n=new Map,o=new Set(i.keys()),a={op:5,ops:[]};for(const c of s){if(!(c instanceof r))throw new vh(c.id);const l=t(c).controllerId;if(l!==e.controllerId)throw new ED(c.id,l,e.controllerId);if(n.has(c.id))throw new yD(c.id);n.set(c.id,c),o.delete(c.id),a.ops.push({op:0,item:c})}for(const c of o.keys())a.ops.push({op:3,id:c});e.listener?.(a),i=n},add(s){if(!(s instanceof r))throw new vh(s.id);i.set(s.id,s),e.listener?.({op:0,item:s})},delete(s){i.delete(s)&&e.listener?.({op:3,id:s})},get(s){return i.get(s)},toJSON(){return Array.from(i.values())}}},D6=new WeakMap,kD=(e,t)=>{const r={controllerId:t};return D6.set(e,r),r},wh=e=>{const t=D6.get(e);if(!t)throw new vh(e?.id||"<unknown>");return t},PU=_("remoteAuthorityResolverService"),P6;(function(e){e[e.WebSocket=0]="WebSocket",e[e.Managed=1]="Managed"})(P6||(P6={}));var $D=class{constructor(e){this.id=e,this.type=1}toString(){return`Managed(${this.id})`}},SD=class{constructor(e,t){this.host=e,this.port=t,this.type=0}toString(){return`WebSocket(${this.host}:${this.port})`}},Bi;(function(e){e.Unknown="Unknown",e.NotAvailable="NotAvailable",e.TemporarilyNotAvailable="TemporarilyNotAvailable",e.NoResolverFound="NoResolverFound",e.InvalidAuthority="InvalidAuthority"})(Bi||(Bi={}));function A6(e){const t=e.indexOf("+");return t===-1?e:e.substring(0,t)}var Qg,gn,_i,Jg,mn,$s,vn,Xg,Yg,bh,Ec,Zg,wi,bi,Kg,nr,em;function te(e){return Object.assign(e,{apply:function(...r){if(r.length===0)return Reflect.construct(e,[]);{const i=r.length===1?[]:r[1];return Reflect.construct(e,i,r[0].constructor)}},call:function(...r){if(r.length===0)return Reflect.construct(e,[]);{const[i,...s]=r;return Reflect.construct(e,s,i.constructor)}}})}var tm;(function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"})(tm||(tm={}));var T6;(function(e){e[e.TerminalCommand=0]="TerminalCommand",e[e.Opener=1]="Opener",e[e.Command=3]="Command"})(T6||(T6={}));var Ie=Qg=class{static from(...t){let r=t;return new Qg(function(){if(r){for(const i of r)i&&typeof i.dispose=="function"&&i.dispose();r=void 0}})}#e;constructor(t){this.#e=t}dispose(){typeof this.#e=="function"&&(this.#e(),this.#e=void 0)}};Ie=Qg=__decorate([te],Ie);var xe=gn=class{static Min(...t){if(t.length===0)throw new TypeError;let r=t[0];for(let i=1;i<t.length;i++){const s=t[i];s.isBefore(r)&&(r=s)}return r}static Max(...t){if(t.length===0)throw new TypeError;let r=t[0];for(let i=1;i<t.length;i++){const s=t[i];s.isAfter(r)&&(r=s)}return r}static isPosition(t){if(!t)return!1;if(t instanceof gn)return!0;const{line:r,character:i}=t;return typeof r=="number"&&typeof i=="number"}static of(t){if(t instanceof gn)return t;if(this.isPosition(t))return new gn(t.line,t.character);throw new Error("Invalid argument, is NOT a position-like object")}get line(){return this.c}get character(){return this.e}constructor(t,r){if(t<0)throw Ee("line must be non-negative");if(r<0)throw Ee("character must be non-negative");this.c=t,this.e=r}isBefore(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<t.e}isBeforeOrEqual(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<=t.e}isAfter(t){return!this.isBeforeOrEqual(t)}isAfterOrEqual(t){return!this.isBefore(t)}isEqual(t){return this.c===t.c&&this.e===t.e}compareTo(t){return this.c<t.c?-1:this.c>t.line?1:this.e<t.e?-1:this.e>t.e?1:0}translate(t,r=0){if(t===null||r===null)throw Ee();let i;return typeof t>"u"?i=0:typeof t=="number"?i=t:(i=typeof t.lineDelta=="number"?t.lineDelta:0,r=typeof t.characterDelta=="number"?t.characterDelta:0),i===0&&r===0?this:new gn(this.line+i,this.character+r)}with(t,r=this.character){if(t===null||r===null)throw Ee();let i;return typeof t>"u"?i=this.line:typeof t=="number"?i=t:(i=typeof t.line=="number"?t.line:this.line,r=typeof t.character=="number"?t.character:this.character),i===this.line&&r===this.character?this:new gn(i,r)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}};xe=gn=__decorate([te],xe);var we=_i=class{static isRange(t){return t instanceof _i?!0:t?xe.isPosition(t.start)&&xe.isPosition(t.end):!1}static of(t){if(t instanceof _i)return t;if(this.isRange(t))return new _i(t.start,t.end);throw new Error("Invalid argument, is NOT a range-like object")}get start(){return this.c}get end(){return this.e}constructor(t,r,i,s){let n,o;if(typeof t=="number"&&typeof r=="number"&&typeof i=="number"&&typeof s=="number"?(n=new xe(t,r),o=new xe(i,s)):xe.isPosition(t)&&xe.isPosition(r)&&(n=xe.of(t),o=xe.of(r)),!n||!o)throw new Error("Invalid arguments");n.isBefore(o)?(this.c=n,this.e=o):(this.c=o,this.e=n)}contains(t){return _i.isRange(t)?this.contains(t.start)&&this.contains(t.end):xe.isPosition(t)?!(xe.of(t).isBefore(this.c)||this.e.isBefore(t)):!1}isEqual(t){return this.c.isEqual(t.c)&&this.e.isEqual(t.e)}intersection(t){const r=xe.Max(t.start,this.c),i=xe.Min(t.end,this.e);if(!r.isAfter(i))return new _i(r,i)}union(t){if(this.contains(t))return this;if(t.contains(this))return t;const r=xe.Min(t.start,this.c),i=xe.Max(t.end,this.end);return new _i(r,i)}get isEmpty(){return this.c.isEqual(this.e)}get isSingleLine(){return this.c.line===this.e.line}with(t,r=this.end){if(t===null||r===null)throw Ee();let i;return t?xe.isPosition(t)?i=t:(i=t.start||this.start,r=t.end||this.end):i=this.start,i.isEqual(this.c)&&r.isEqual(this.end)?this:new _i(i,r)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return R6(this)}};we=_i=__decorate([te],we);var zi=Jg=class extends we{static isSelection(t){return t instanceof Jg?!0:t?we.isRange(t)&&xe.isPosition(t.anchor)&&xe.isPosition(t.active)&&typeof t.isReversed=="boolean":!1}get anchor(){return this.f}get active(){return this.g}constructor(t,r,i,s){let n,o;if(typeof t=="number"&&typeof r=="number"&&typeof i=="number"&&typeof s=="number"?(n=new xe(t,r),o=new xe(i,s)):xe.isPosition(t)&&xe.isPosition(r)&&(n=xe.of(t),o=xe.of(r)),!n||!o)throw new Error("Invalid arguments");super(n,o),this.f=n,this.g=o}get isReversed(){return this.f===this.e}toJSON(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}}[Symbol.for("debug.description")](){return ID(this)}};zi=Jg=__decorate([te],zi);function R6(e){return e.isEmpty?`[${e.start.line}:${e.start.character})`:`[${e.start.line}:${e.start.character} -> ${e.end.line}:${e.end.character})`}function ID(e){let t=R6(e);return e.isEmpty||(e.active.isEqual(e.start)?t=`|${t}`:t=`${t}|`),t}var L6=e=>{if(typeof e!="string"||e.length===0||!/^[0-9A-Za-z_\-]+$/.test(e))throw Ee("connectionToken")},CD=class{static isResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.host=="string"&&typeof e.port=="number"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t,r){if(typeof e!="string"||e.length===0)throw Ee("host");if(typeof t!="number"||t===0||Math.round(t)!==t)throw Ee("port");typeof r<"u"&&L6(r),this.host=e,this.port=Math.round(t),this.connectionToken=r}},yh=class{static isManagedResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.makeConnection=="function"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t){this.makeConnection=e,this.connectionToken=t,typeof t<"u"&&L6(t)}},Co=class Qf extends Error{static NotAvailable(t,r){return new Qf(t,Bi.NotAvailable,r)}static TemporarilyNotAvailable(t){return new Qf(t,Bi.TemporarilyNotAvailable)}constructor(t,r=Bi.Unknown,i){super(t),this._message=t,this._code=r,this._detail=i,Object.setPrototypeOf(this,Qf.prototype)}},Zr;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(Zr||(Zr={}));var Do;(function(e){e[e.Replace=1]="Replace",e[e.Append=2]="Append",e[e.Prepend=3]="Prepend"})(Do||(Do={}));var Ss=mn=class{static isTextEdit(t){return t instanceof mn?!0:t?we.isRange(t)&&typeof t.newText=="string":!1}static replace(t,r){return new mn(t,r)}static insert(t,r){return mn.replace(new we(t,t),r)}static delete(t){return mn.replace(t,"")}static setEndOfLine(t){const r=new mn(new we(new xe(0,0),new xe(0,0)),"");return r.newEol=t,r}get range(){return this.c}set range(t){if(t&&!we.isRange(t))throw Ee("range");this.c=t}get newText(){return this.e||""}set newText(t){if(t&&typeof t!="string")throw Ee("newText");this.e=t}get newEol(){return this.f}set newEol(t){if(t&&typeof t!="number")throw Ee("newEol");this.f=t}constructor(t,r){this.c=t,this.e=r}toJSON(){return{range:this.range,newText:this.newText,newEol:this.f}}};Ss=mn=__decorate([te],Ss);var Eh=$s=class{static isNotebookCellEdit(t){return t instanceof $s?!0:t?Vi.isNotebookRange(t)&&Array.isArray(t.newCells):!1}static replaceCells(t,r){return new $s(t,r)}static insertCells(t,r){return new $s(new Vi(t,t),r)}static deleteCells(t){return new $s(t,[])}static updateCellMetadata(t,r){const i=new $s(new Vi(t,t),[]);return i.newCellMetadata=r,i}static updateNotebookMetadata(t){const r=new $s(new Vi(0,0),[]);return r.newNotebookMetadata=t,r}constructor(t,r){this.range=t,this.newCells=r}};Eh=$s=__decorate([te],Eh);var rm=class Jf{static isSnippetTextEdit(t){return t instanceof Jf?!0:t?we.isRange(t.range)&&bn.isSnippetString(t.snippet):!1}static replace(t,r){return new Jf(t,r)}static insert(t,r){return Jf.replace(new we(t,t),r)}constructor(t,r){this.range=t,this.snippet=r}},N6;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.Cell=3]="Cell",e[e.CellReplace=5]="CellReplace",e[e.Snippet=6]="Snippet"})(N6||(N6={}));var wn=class{constructor(){this.c=[]}_allEntries(){return this.c}renameFile(t,r,i,s){this.c.push({_type:1,from:t,to:r,options:i,metadata:s})}createFile(t,r,i){this.c.push({_type:1,from:void 0,to:t,options:r,metadata:i})}deleteFile(t,r,i){this.c.push({_type:1,from:t,to:void 0,options:r,metadata:i})}e(t,r,i){this.c.push({_type:3,metadata:i,uri:t,edit:{editType:5,metadata:r}})}f(t,r,i,s){const n=r.start,o=r.end;(n!==o||i.length>0)&&this.c.push({_type:5,uri:t,index:n,count:o-n,cells:i,metadata:s})}g(t,r,i,s){this.c.push({_type:3,metadata:s,uri:t,edit:{editType:3,index:r,metadata:i}})}replace(t,r,i,s){this.c.push({_type:2,uri:t,edit:new Ss(r,i),metadata:s})}insert(t,r,i,s){this.replace(t,new we(r,r),i,s)}delete(t,r,i){this.replace(t,r,"",i)}has(t){return this.c.some(r=>r._type===2&&r.uri.toString()===t.toString())}set(t,r){if(r)for(const i of r){if(!i)continue;let s,n;Array.isArray(i)?(s=i[0],n=i[1]):s=i,Eh.isNotebookCellEdit(s)?s.newCellMetadata?this.g(t,s.range.start,s.newCellMetadata,n):s.newNotebookMetadata?this.e(t,s.newNotebookMetadata,n):this.f(t,s.range,s.newCells,n):rm.isSnippetTextEdit(s)?this.c.push({_type:6,uri:t,range:s.range,edit:s.snippet,metadata:n}):this.c.push({_type:2,uri:t,edit:s,metadata:n})}else{for(let i=0;i<this.c.length;i++){const s=this.c[i];switch(s._type){case 2:case 6:case 3:case 5:s.uri.toString()===t.toString()&&(this.c[i]=void 0);break}}tk(this.c)}}get(t){const r=[];for(const i of this.c)i._type===2&&i.uri.toString()===t.toString()&&r.push(i.edit);return r}entries(){const t=new Nt;for(const r of this.c)if(r._type===2){let i=t.get(r.uri);i||(i=[r.uri,[]],t.set(r.uri,i)),i[1].push(r.edit)}return[...t.values()]}get size(){return this.entries().length}toJSON(){return this.entries()}};wn=__decorate([te],wn);var bn=vn=class{static isSnippetString(t){return t instanceof vn?!0:t?typeof t.value=="string":!1}static c(t){return t.replace(/\$|}|\\/g,"\\$&")}constructor(t){this.e=1,this.value=t||""}appendText(t){return this.value+=vn.c(t),this}appendTabstop(t=this.e++){return this.value+="$",this.value+=t,this}appendPlaceholder(t,r=this.e++){if(typeof t=="function"){const i=new vn;i.e=this.e,t(i),this.e=i.e,t=i.value}else t=vn.c(t);return this.value+="${",this.value+=r,this.value+=":",this.value+=t,this.value+="}",this}appendChoice(t,r=this.e++){const i=t.map(s=>s.replaceAll(/[|\\,]/g,"\\$&")).join(",");return this.value+="${",this.value+=r,this.value+="|",this.value+=i,this.value+="|}",this}appendVariable(t,r){if(typeof r=="function"){const i=new vn;i.e=this.e,r(i),this.e=i.e,r=i.value}else typeof r=="string"&&(r=r.replace(/\$|}/g,"\\$&"));return this.value+="${",this.value+=t,r&&(this.value+=":",this.value+=r),this.value+="}",this}};bn=vn=__decorate([te],bn);var yn;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(yn||(yn={}));var _t;(function(e){e[e.Hint=3]="Hint",e[e.Information=2]="Information",e[e.Warning=1]="Warning",e[e.Error=0]="Error"})(_t||(_t={}));var Rr=Xg=class{static isLocation(t){return t instanceof Xg?!0:t?we.isRange(t.range)&&y.isUri(t.uri):!1}constructor(t,r){if(this.uri=t,r)if(we.isRange(r))this.range=we.of(r);else if(xe.isPosition(r))this.range=new we(r,r);else throw new Error("Illegal argument")}toJSON(){return{uri:this.uri,range:this.range}}};Rr=Xg=__decorate([te],Rr);var xc=class{static is(t){return t?typeof t.message=="string"&&t.location&&we.isRange(t.location.range)&&y.isUri(t.location.uri):!1}constructor(t,r){this.location=t,this.message=r}static isEqual(t,r){return t===r?!0:!t||!r?!1:t.message===r.message&&t.location.range.isEqual(r.location.range)&&t.location.uri.toString()===r.location.uri.toString()}};xc=__decorate([te],xc);var xh=class{constructor(t,r,i=_t.Error){if(!we.isRange(t))throw new TypeError("range must be set");if(!r)throw new TypeError("message must be set");this.range=t,this.message=r,this.severity=i}toJSON(){return{severity:_t[this.severity],message:this.message,range:this.range,source:this.source,code:this.code}}static isEqual(t,r){return t===r?!0:!t||!r?!1:t.message===r.message&&t.severity===r.severity&&t.code===r.code&&t.severity===r.severity&&t.source===r.source&&t.range.isEqual(r.range)&&Ri(t.tags,r.tags)&&Ri(t.relatedInformation,r.relatedInformation,xc.isEqual)}};xh=__decorate([te],xh);var kh=class{constructor(t,r){if(!t)throw new Error("Illegal argument, contents must be defined");Array.isArray(t)?this.contents=t:this.contents=[t],this.range=r}};kh=__decorate([te],kh);var $h=class extends kh{constructor(t,r,i,s){super(t,r),this.canIncreaseVerbosity=i,this.canDecreaseVerbosity=s}};$h=__decorate([te],$h);var im;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(im||(im={}));var kc;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(kc||(kc={}));var Sh=class{constructor(t,r=kc.Text){this.range=t,this.kind=r}toJSON(){return{range:this.range,kind:kc[this.kind]}}};Sh=__decorate([te],Sh);var Ih=class{constructor(t,r){this.uri=t,this.highlights=r}toJSON(){return{uri:this.uri,highlights:this.highlights.map(t=>t.toJSON())}}};Ih=__decorate([te],Ih);var Je;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(Je||(Je={}));var $c;(function(e){e[e.Deprecated=1]="Deprecated"})($c||($c={}));var Sc=Yg=class{static validate(t){if(!t.name)throw new Error("name must not be falsy")}constructor(t,r,i,s,n){this.name=t,this.kind=r,this.containerName=n,typeof i=="string"&&(this.containerName=i),s instanceof Rr?this.location=s:i instanceof we&&(this.location=new Rr(s,i)),Yg.validate(this)}toJSON(){return{name:this.name,kind:Je[this.kind],location:this.location,containerName:this.containerName}}};Sc=Yg=__decorate([te],Sc);var Ic=bh=class{static validate(t){if(!t.name)throw new Error("name must not be falsy");if(!t.range.contains(t.selectionRange))throw new Error("selectionRange must be contained in fullRange");t.children?.forEach(bh.validate)}constructor(t,r,i,s,n){this.name=t,this.detail=r,this.kind=i,this.range=s,this.selectionRange=n,this.children=[],bh.validate(this)}};Ic=bh=__decorate([te],Ic);var Cc;(function(e){e[e.Invoke=1]="Invoke",e[e.Automatic=2]="Automatic"})(Cc||(Cc={}));var Dc=class{constructor(t,r){this.title=t,this.kind=r}};Dc=__decorate([te],Dc);var nt=class{static{Ec=this}static{this.c="."}constructor(t){this.value=t}append(t){return new Ec(this.value?this.value+Ec.c+t:t)}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+Ec.c)}};nt=Ec=__decorate([te],nt),nt.Empty=new nt(""),nt.QuickFix=nt.Empty.append("quickfix"),nt.Refactor=nt.Empty.append("refactor"),nt.RefactorExtract=nt.Refactor.append("extract"),nt.RefactorInline=nt.Refactor.append("inline"),nt.RefactorMove=nt.Refactor.append("move"),nt.RefactorRewrite=nt.Refactor.append("rewrite"),nt.Source=nt.Empty.append("source"),nt.SourceOrganizeImports=nt.Source.append("organizeImports"),nt.SourceFixAll=nt.Source.append("fixAll"),nt.Notebook=nt.Empty.append("notebook");var Pc=class{constructor(t,r){if(this.range=t,this.parent=r,r&&!r.range.contains(this.range))throw new Error("Invalid argument: parent must contain this range")}};Pc=__decorate([te],Pc);var sm=class{constructor(e,t,r,i,s,n){this.kind=e,this.name=t,this.detail=r,this.uri=i,this.range=s,this.selectionRange=n}},F6=class{constructor(e,t){this.fromRanges=t,this.from=e}},M6=class{constructor(e,t){this.fromRanges=t,this.to=e}},Po;(function(e){e[e.Information=0]="Information",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(Po||(Po={}));var Ch=class{constructor(t,r){this.range=t,this.command=r}get isResolved(){return!!this.command}};Ch=__decorate([te],Ch);var xr=Zg=class{#e;static isMarkdownString(t){return t instanceof Zg?!0:t&&t.appendCodeblock&&t.appendMarkdown&&t.appendText&&t.value!==void 0}constructor(t,r=!1){this.#e=new Tu(t,{supportThemeIcons:r})}get value(){return this.#e.value}set value(t){this.#e.value=t}get isTrusted(){return this.#e.isTrusted}set isTrusted(t){this.#e.isTrusted=t}get supportThemeIcons(){return this.#e.supportThemeIcons}set supportThemeIcons(t){this.#e.supportThemeIcons=t}get supportHtml(){return this.#e.supportHtml}set supportHtml(t){this.#e.supportHtml=t}get baseUri(){return this.#e.baseUri}set baseUri(t){this.#e.baseUri=t}appendText(t){return this.#e.appendText(t),this}appendMarkdown(t){return this.#e.appendMarkdown(t),this}appendCodeblock(t,r){return this.#e.appendCodeblock(r??"",t),this}};xr=Zg=__decorate([te],xr);var nm=class{constructor(t,r){this.label=t,this.documentation=r}};nm=__decorate([te],nm);var om=class{constructor(t,r){this.label=t,this.documentation=r,this.parameters=[]}};om=__decorate([te],om);var am=class{constructor(){this.activeSignature=0,this.activeParameter=0,this.signatures=[]}};am=__decorate([te],am);var cm;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(cm||(cm={}));var lm;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(lm||(lm={}));var Dh=class{constructor(t){this.value=t}};Dh=__decorate([te],Dh);var Ph=class{constructor(t,r,i){this.position=t,this.label=r,this.kind=i}};Ph=__decorate([te],Ph);var Ao;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(Ao||(Ao={}));var oe;(function(e){e[e.Text=0]="Text",e[e.Method=1]="Method",e[e.Function=2]="Function",e[e.Constructor=3]="Constructor",e[e.Field=4]="Field",e[e.Variable=5]="Variable",e[e.Class=6]="Class",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Unit=10]="Unit",e[e.Value=11]="Value",e[e.Enum=12]="Enum",e[e.Keyword=13]="Keyword",e[e.Snippet=14]="Snippet",e[e.Color=15]="Color",e[e.File=16]="File",e[e.Reference=17]="Reference",e[e.Folder=18]="Folder",e[e.EnumMember=19]="EnumMember",e[e.Constant=20]="Constant",e[e.Struct=21]="Struct",e[e.Event=22]="Event",e[e.Operator=23]="Operator",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue"})(oe||(oe={}));var Ac;(function(e){e[e.Deprecated=1]="Deprecated"})(Ac||(Ac={}));var Ah=class{constructor(t,r){this.label=t,this.kind=r}toJSON(){return{label:this.label,kind:this.kind&&oe[this.kind],detail:this.detail,documentation:this.documentation,sortText:this.sortText,filterText:this.filterText,preselect:this.preselect,insertText:this.insertText,textEdit:this.textEdit}}};Ah=__decorate([te],Ah);var To=class{constructor(t=[],r=!1){this.items=t,this.isIncomplete=r}};To=__decorate([te],To);var um=class{constructor(t,r,i){this.insertText=t,this.range=r,this.command=i}};um=__decorate([te],um);var hm=class{constructor(t){this.commands=void 0,this.suppressSuggestions=void 0,this.items=t}};hm=__decorate([te],hm);var En;(function(e){e[e.Unknown=0]="Unknown",e[e.Word=1]="Word",e[e.Line=2]="Line",e[e.Suggest=3]="Suggest"})(En||(En={}));var Tc;(function(e){e[e.Active=-1]="Active",e[e.Beside=-2]="Beside",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Nine=9]="Nine"})(Tc||(Tc={}));var Is;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(Is||(Is={}));function DD(e,t){return`${Ue.toKey(e)}.${t}`}var Kr;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval"})(Kr||(Kr={}));var Ro;(function(e){e[e.Manual=1]="Manual",e[e.AfterDelay=2]="AfterDelay",e[e.FocusOut=3]="FocusOut"})(Ro||(Ro={}));var Th;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(Th||(Th={}));var Lo;(function(e){e[e.Keyboard=1]="Keyboard",e[e.Mouse=2]="Mouse",e[e.Command=3]="Command"})(Lo||(Lo={}));var No;(function(e){e[e.Addition=1]="Addition",e[e.Deletion=2]="Deletion",e[e.Modification=3]="Modification"})(No||(No={}));var Rc;(function(e){e[e.Undo=1]="Undo",e[e.Redo=2]="Redo"})(Rc||(Rc={}));var xn;(function(e){e[e.OpenOpen=0]="OpenOpen",e[e.ClosedClosed=1]="ClosedClosed",e[e.OpenClosed=2]="OpenClosed",e[e.ClosedOpen=3]="ClosedOpen"})(xn||(xn={})),function(e){function t(r){switch(r){case"keyboard":return e.Keyboard;case"mouse":return e.Mouse;case"api":case"api":case"code.jump":case"code.navigation":return e.Command}}e.fromValue=t}(Lo||(Lo={}));var Fo;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(Fo||(Fo={})),function(e){function t(r){switch(r){case e.Other:return"other";case e.Comment:return"comment";case e.String:return"string";case e.RegEx:return"regex"}return"other"}e.toString=t}(Fo||(Fo={}));var Rh=class{constructor(t,r){if(r&&!y.isUri(r))throw Ee("target");if(!we.isRange(t)||t.isEmpty)throw Ee("range");this.range=t,this.target=r}};Rh=__decorate([te],Rh);var Mo=class{constructor(t,r,i,s){this.red=t,this.green=r,this.blue=i,this.alpha=s}};Mo=__decorate([te],Mo);var Lh=class{constructor(t,r){if(r&&!(r instanceof Mo))throw Ee("color");if(!we.isRange(t)||t.isEmpty)throw Ee("range");this.range=t,this.color=r}};Lh=__decorate([te],Lh);var Nh=class{constructor(t){if(!t||typeof t!="string")throw Ee("label");this.label=t}};Nh=__decorate([te],Nh);var O6;(function(e){e[e.RGB=0]="RGB",e[e.HEX=1]="HEX",e[e.HSL=2]="HSL"})(O6||(O6={}));var dm;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Information=2]="Information"})(dm||(dm={}));var fm;(function(e){e[e.Unknown=0]="Unknown",e[e.Shutdown=1]="Shutdown",e[e.Process=2]="Process",e[e.User=3]="User",e[e.Extension=4]="Extension"})(fm||(fm={}));var Fh;(function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"})(Fh||(Fh={}));var or;(function(e){e[e.Sh=1]="Sh",e[e.Bash=2]="Bash",e[e.Fish=3]="Fish",e[e.Csh=4]="Csh",e[e.Ksh=5]="Ksh",e[e.Zsh=6]="Zsh",e[e.CommandPrompt=7]="CommandPrompt",e[e.GitBash=8]="GitBash",e[e.PowerShell=9]="PowerShell",e[e.Python=10]="Python",e[e.Julia=11]="Julia",e[e.NuShell=12]="NuShell",e[e.Node=13]="Node"})(or||(or={}));var PD=class{constructor(e,t,r){if(this.startIndex=e,this.length=t,this.tooltip=r,typeof e!="number"||e<0)throw Ee("startIndex");if(typeof t!="number"||t<1)throw Ee("length");if(r!==void 0&&typeof r!="string")throw Ee("tooltip")}},AD=class{constructor(e){this.uri=e}},TD=class{constructor(e){this.terminalCommand=e}},pm;(function(e){e[e.Panel=1]="Panel",e[e.Editor=2]="Editor"})(pm||(pm={}));var RD=class{constructor(e){if(this.options=e,typeof e!="object")throw Ee("options")}},gm;(function(e){e[e.File=0]="File",e[e.Folder=1]="Folder",e[e.Flag=2]="Flag",e[e.Method=3]="Method",e[e.Argument=4]="Argument"})(gm||(gm={}));var LD=class{constructor(e,t,r,i,s,n,o,a){this.label=e,this.icon=t,this.detail=r,this.isFile=i,this.isDirectory=s,this.isKeyword=n,this.replacementIndex=o??0,this.replacementLength=a??0}},ND=class{constructor(e,t){this.items=e??[],this.resourceRequestConfig=t}},mm;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(mm||(mm={}));var vm;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(vm||(vm={}));var Lc=class{static{wi=this}static{this.Clean=new wi("clean","Clean")}static{this.Build=new wi("build","Build")}static{this.Rebuild=new wi("rebuild","Rebuild")}static{this.Test=new wi("test","Test")}static from(t){switch(t){case"clean":return wi.Clean;case"build":return wi.Build;case"rebuild":return wi.Rebuild;case"test":return wi.Test;default:return}}constructor(t,r){if(this.label=r,typeof t!="string"||typeof r!="string")throw Ee("name");this.c=t}get id(){return this.c}};Lc=wi=__decorate([te],Lc);function U6(e){let t="";for(let r=0;r<e.length;r++)t+=e[r].replace(/,/g,",,")+",";return t}var Oo=class{constructor(t,r,i){if(typeof t!="string")throw Ee("process");this.e=[],this.c=t,r!==void 0&&(Array.isArray(r)?(this.e=r,this.f=i):this.f=r)}get process(){return this.c}set process(t){if(typeof t!="string")throw Ee("process");this.c=t}get args(){return this.e}set args(t){Array.isArray(t)||(t=[]),this.e=t}get options(){return this.f}set options(t){this.f=t}computeId(){const t=[];if(t.push("process"),this.c!==void 0&&t.push(this.c),this.e&&this.e.length>0)for(const r of this.e)t.push(r);return U6(t)}};Oo=__decorate([te],Oo);var kn=class{constructor(t,r,i){if(this.f=[],Array.isArray(r)){if(!t)throw Ee("command can't be undefined or null");if(typeof t!="string"&&typeof t.value!="string")throw Ee("command");this.e=t,r&&(this.f=r),this.g=i}else{if(typeof t!="string")throw Ee("commandLine");this.c=t,this.g=r}}get commandLine(){return this.c}set commandLine(t){if(typeof t!="string")throw Ee("commandLine");this.c=t}get command(){return this.e?this.e:""}set command(t){if(typeof t!="string"&&typeof t.value!="string")throw Ee("command");this.e=t}get args(){return this.f}set args(t){this.f=t||[]}get options(){return this.g}set options(t){this.g=t}computeId(){const t=[];if(t.push("shell"),this.c!==void 0&&t.push(this.c),this.e!==void 0&&t.push(typeof this.e=="string"?this.e:this.e.value),this.f&&this.f.length>0)for(const r of this.f)t.push(typeof r=="string"?r:r.value);return U6(t)}};kn=__decorate([te],kn);var wm;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(wm||(wm={}));var Cs;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace"})(Cs||(Cs={}));var bm=class{constructor(e){this.c=e}computeId(){return"customExecution"+Dr()}set callback(e){this.c=e}get callback(){return this.c}},Mh=class{static{bi=this}static{this.c="customExecution"}static{this.e="process"}static{this.f="shell"}static{this.g="$empty"}constructor(t,r,i,s,n,o){this.k=!1,this.l=this.definition=t;let a;typeof r=="string"?(this.o=this.name=r,this.w=this.source=i,this.execution=s,a=n,this.k=!0):r===Cs.Global||r===Cs.Workspace?(this.target=r,this.o=this.name=i,this.w=this.source=s,this.execution=n,a=o):(this.target=r,this.o=this.name=i,this.w=this.source=s,this.execution=n,a=o),typeof a=="string"?(this.r=[a],this.t=!0):Array.isArray(a)?(this.r=a,this.t=!0):(this.r=[],this.t=!1),this.u=!1,this.y=Object.create(null),this.z=Object.create(null)}get _id(){return this.j}set _id(t){this.j=t}get _deprecated(){return this.k}B(){this.j!==void 0&&(this.j=void 0,this.m=void 0,this.C())}C(){this.q instanceof Oo?this.l={type:bi.e,id:this.q.computeId()}:this.q instanceof kn?this.l={type:bi.f,id:this.q.computeId()}:this.q instanceof bm?this.l={type:bi.c,id:this.q.computeId()}:this.l={type:bi.g,id:Dr()}}get definition(){return this.l}set definition(t){if(t==null)throw Ee("Kind can't be undefined or null");this.B(),this.l=t}get scope(){return this.m}set target(t){this.B(),this.m=t}get name(){return this.o}set name(t){if(typeof t!="string")throw Ee("name");this.B(),this.o=t}get execution(){return this.q}set execution(t){t===null&&(t=void 0),this.B(),this.q=t;const r=this.l.type;(bi.g===r||bi.e===r||bi.f===r||bi.c===r)&&this.C()}get problemMatchers(){return this.r}set problemMatchers(t){if(Array.isArray(t))this.B(),this.r=t,this.t=!0;else{this.B(),this.r=[],this.t=!1;return}}get hasDefinedMatchers(){return this.t}get isBackground(){return this.u}set isBackground(t){t!==!0&&t!==!1&&(t=!1),this.B(),this.u=t}get source(){return this.w}set source(t){if(typeof t!="string"||t.length===0)throw Ee("source must be a string of length > 0");this.B(),this.w=t}get group(){return this.x}set group(t){t===null&&(t=void 0),this.B(),this.x=t}get detail(){return this.A}set detail(t){t===null&&(t=void 0),this.A=t}get presentationOptions(){return this.y}set presentationOptions(t){t==null&&(t=Object.create(null)),this.B(),this.y=t}get runOptions(){return this.z}set runOptions(t){t==null&&(t=Object.create(null)),this.B(),this.z=t}};Mh=bi=__decorate([te],Mh);var $n;(function(e){e[e.SourceControl=1]="SourceControl",e[e.Window=10]="Window",e[e.Notification=15]="Notification"})($n||($n={}));var ym;(function(e){function t(r){const i=r;return ls(i.value)?i.tooltip&&!Ce(i.tooltip)?(console.log("INVALID view badge, invalid tooltip",i.tooltip),!1):!0:(console.log("INVALID view badge, invalid value",i.value),!1)}e.isViewBadge=t})(ym||(ym={}));var Oh=Kg=class{static isTreeItem(t,r){const i=t;if(i.checkboxState!==void 0){const s=ls(i.checkboxState)?i.checkboxState:gt(i.checkboxState)&&ls(i.checkboxState.state)?i.checkboxState.state:void 0,n=!ls(i.checkboxState)&&gt(i.checkboxState)?i.checkboxState.tooltip:void 0;if(s===void 0||s!==yi.Checked&&s!==yi.Unchecked||n!==void 0&&!Ce(n))return console.log("INVALID tree item, invalid checkboxState",i.checkboxState),!1}if(t instanceof Kg)return!0;if(i.label!==void 0&&!Ce(i.label)&&!i.label?.label)return console.log("INVALID tree item, invalid label",i.label),!1;if(i.id!==void 0&&!Ce(i.id))return console.log("INVALID tree item, invalid id",i.id),!1;if(i.iconPath!==void 0&&!Ce(i.iconPath)&&!y.isUri(i.iconPath)&&(!i.iconPath||!Ce(i.iconPath.id))){const s=i.iconPath;if(!s||!Ce(s.light)&&!y.isUri(s.light)&&!Ce(s.dark)&&!y.isUri(s.dark))return console.log("INVALID tree item, invalid iconPath",i.iconPath),!1}return i.description!==void 0&&!Ce(i.description)&&typeof i.description!="boolean"?(console.log("INVALID tree item, invalid description",i.description),!1):i.resourceUri!==void 0&&!y.isUri(i.resourceUri)?(console.log("INVALID tree item, invalid resourceUri",i.resourceUri),!1):i.tooltip!==void 0&&!Ce(i.tooltip)&&!(i.tooltip instanceof xr)?(console.log("INVALID tree item, invalid tooltip",i.tooltip),!1):i.command!==void 0&&!i.command.command?(console.log("INVALID tree item, invalid command",i.command),!1):i.collapsibleState!==void 0&&i.collapsibleState<Sn.None&&i.collapsibleState>Sn.Expanded?(console.log("INVALID tree item, invalid collapsibleState",i.collapsibleState),!1):i.contextValue!==void 0&&!Ce(i.contextValue)?(console.log("INVALID tree item, invalid contextValue",i.contextValue),!1):i.accessibilityInformation!==void 0&&!i.accessibilityInformation?.label?(console.log("INVALID tree item, invalid accessibilityInformation",i.accessibilityInformation),!1):!0}constructor(t,r=Sn.None){this.collapsibleState=r,y.isUri(t)?this.resourceUri=t:this.label=t}};Oh=Kg=__decorate([te],Oh);var Sn;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(Sn||(Sn={}));var yi;(function(e){e[e.Unchecked=0]="Unchecked",e[e.Checked=1]="Checked"})(yi||(yi={}));var Uh=class{async asString(){return typeof this.value=="string"?this.value:JSON.stringify(this.value)}asFile(){}constructor(t){this.value=t}};Uh=__decorate([te],Uh);var Hh=class extends Uh{},FD=class extends Hh{#e;constructor(e){super(""),this.#e=e}asFile(){return this.#e}},MD=class{constructor(e,t,r,i){this.name=e,this.uri=t,this._itemId=r,this.c=i}data(){return this.c()}},Nc=class{#e=new Map;constructor(t){for(const[r,i]of t??[]){const s=this.#e.get(this.#t(r));s?s.push(i):this.#e.set(this.#t(r),[i])}}get(t){return this.#e.get(this.#t(t))?.[0]}set(t,r){this.#e.set(this.#t(t),[r])}forEach(t,r){for(const[i,s]of this.#e)for(const n of s)t.call(r,n,i,this)}*[Symbol.iterator](){for(const[t,r]of this.#e)for(const i of r)yield[t,i]}#t(t){return t.toLowerCase()}};Nc=__decorate([te],Nc);var Em=class{constructor(t,r,i){this.insertText=t,this.title=r,this.kind=i}};Em=__decorate([te],Em);var xm;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(xm||(xm={}));var Ds=class Xf{static{this.c="."}constructor(t){this.value=t}append(...t){return new Xf((this.value?[this.value,...t]:t).join(Xf.c))}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+Xf.c)}};Ds.Empty=new Ds(""),Ds.Text=new Ds("text"),Ds.TextUpdateImports=Ds.Text.append("updateImports");var OD=class{constructor(e,t,r){this.title=t,this.insertText=e,this.kind=r}},Xt=class{constructor(t,r){this.id=t,this.color=r}static isThemeIcon(t){return typeof t.id!="string"?(console.log("INVALID ThemeIcon, invalid id",t.id),!1):!0}};Xt=__decorate([te],Xt),Xt.File=new Xt("file"),Xt.Folder=new Xt("folder");var Fc=class{constructor(t){this.id=t}};Fc=__decorate([te],Fc);var Uo;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.WorkspaceFolder=3]="WorkspaceFolder"})(Uo||(Uo={}));var Ho=class{get base(){return this.c}set base(t){this.c=t,this.e=y.file(t)}get baseUri(){return this.e}set baseUri(t){this.e=t,this.c=t.fsPath}constructor(t,r){if(typeof t!="string"&&(!t||!y.isUri(t)&&!y.isUri(t.uri)))throw Ee("base");if(typeof r!="string")throw Ee("pattern");typeof t=="string"?this.baseUri=y.file(t):y.isUri(t)?this.baseUri=t:this.baseUri=t.uri,this.pattern=r}toJSON(){return{pattern:this.pattern,base:this.base,baseUri:this.baseUri.toJSON()}}};Ho=__decorate([te],Ho);var H6=new WeakMap;function UD(e,t){H6.set(e,t)}var jo=class{constructor(t,r,i,s,n){this.enabled=typeof t=="boolean"?t:!0,typeof r=="string"&&(this.condition=r),typeof i=="string"&&(this.hitCondition=i),typeof s=="string"&&(this.logMessage=s),typeof n=="string"&&(this.mode=n)}get id(){return this.c||(this.c=H6.get(this)??Dr()),this.c}};jo=__decorate([te],jo);var In=class extends jo{constructor(t,r,i,s,n,o){if(super(r,i,s,n,o),t===null)throw Ee("location");this.location=t}};In=__decorate([te],In);var Cn=class extends jo{constructor(t,r,i,s,n,o){super(r,i,s,n,o),this.functionName=t}};Cn=__decorate([te],Cn);var jh=class extends jo{constructor(t,r,i,s,n,o,a,c){if(super(s,n,o,a,c),!r)throw Ee("dataId");this.label=t,this.dataId=r,this.canPersist=i}};jh=__decorate([te],jh);var Bh=class{constructor(t,r,i){this.command=t,this.args=r||[],this.options=i}};Bh=__decorate([te],Bh);var Mc=class{constructor(t,r){this.port=t,this.host=r}};Mc=__decorate([te],Mc);var _h=class{constructor(t){this.path=t}};_h=__decorate([te],_h);var Oc=class{constructor(t){this.implementation=t}};Oc=__decorate([te],Oc);var j6=class{constructor(e,t,r){this.session=e,this.threadId=t,this.frameId=r}},B6=class{constructor(e,t){this.session=e,this.threadId=t}},zh=class{constructor(t,r){this.range=t,this.expression=r}};zh=__decorate([te],zh);var Uc;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(Uc||(Uc={}));var Wh=class{constructor(t,r){this.range=t,this.text=r}};Wh=__decorate([te],Wh);var Vh=class{constructor(t,r,i=!0){this.range=t,this.variableName=r,this.caseSensitiveLookup=i}};Vh=__decorate([te],Vh);var qh=class{constructor(t,r){this.range=t,this.expression=r}};qh=__decorate([te],qh);var km=class{constructor(t,r){this.frameId=t,this.stoppedLocation=r}};km=__decorate([te],km);var $m;(function(e){e[e.AIGenerated=1]="AIGenerated"})($m||($m={}));var Hc;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(Hc||(Hc={}));var HD=class{constructor(e,t){this.newSymbolName=e,this.tags=t}},Bo;(function(e){e[e.Changed=1]="Changed",e[e.Created=2]="Created",e[e.Deleted=3]="Deleted"})(Bo||(Bo={}));var It=nr=class extends Error{static FileExists(t){return new nr(t,ve.FileExists,nr.FileExists)}static FileNotFound(t){return new nr(t,ve.FileNotFound,nr.FileNotFound)}static FileNotADirectory(t){return new nr(t,ve.FileNotADirectory,nr.FileNotADirectory)}static FileIsADirectory(t){return new nr(t,ve.FileIsADirectory,nr.FileIsADirectory)}static NoPermissions(t){return new nr(t,ve.NoPermissions,nr.NoPermissions)}static Unavailable(t){return new nr(t,ve.Unavailable,nr.Unavailable)}constructor(t,r=ve.Unknown,i){super(y.isUri(t)?t.toString(!0):t),this.code=i?.name??"Unknown",B4(this,r),Object.setPrototypeOf(this,nr.prototype),typeof Error.captureStackTrace=="function"&&typeof i=="function"&&Error.captureStackTrace(this,i)}};It=nr=__decorate([te],It);var Sm=class{constructor(t,r,i){this.start=t,this.end=r,this.kind=i}};Sm=__decorate([te],Sm);var Wi;(function(e){e[e.Comment=1]="Comment",e[e.Imports=2]="Imports",e[e.Region=3]="Region"})(Wi||(Wi={}));var jc;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(jc||(jc={}));var Im;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(Im||(Im={}));var Cm;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(Cm||(Cm={}));var Bc;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(Bc||(Bc={}));var _c;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(_c||(_c={}));var zc;(function(e){e[e.Reply=1]="Reply",e[e.Comment=2]="Comment"})(zc||(zc={}));var Dm=class{constructor(e,t=[]){this.tokenTypes=e,this.tokenModifiers=t}};function jD(e){return typeof e>"u"||dk(e)}var BD=class Yx{constructor(t){if(this.c=0,this.e=0,this.f=!0,this.g=[],this.j=0,this.k=new Map,this.l=new Map,this.m=!1,t){this.m=!0;for(let r=0,i=t.tokenTypes.length;r<i;r++)this.k.set(t.tokenTypes[r],r);for(let r=0,i=t.tokenModifiers.length;r<i;r++)this.l.set(t.tokenModifiers[r],r)}}push(t,r,i,s,n){if(typeof t=="number"&&typeof r=="number"&&typeof i=="number"&&typeof s=="number"&&(typeof n=="number"||typeof n>"u"))return typeof n>"u"&&(n=0),this.q(t,r,i,s,n);if(we.isRange(t)&&typeof r=="string"&&jD(i))return this.o(t,r,i);throw Ee()}o(t,r,i){if(!this.m)throw new Error("Legend must be provided in constructor");if(t.start.line!==t.end.line)throw new Error("`range` cannot span multiple lines");if(!this.k.has(r))throw new Error("`tokenType` is not in the provided legend");const s=t.start.line,n=t.start.character,o=t.end.character-t.start.character,a=this.k.get(r);let c=0;if(i)for(const l of i){if(!this.l.has(l))throw new Error("`tokenModifier` is not in the provided legend");const u=this.l.get(l);c|=1<<u>>>0}this.q(s,n,o,a,c)}q(t,r,i,s,n){if(this.f&&(t<this.c||t===this.c&&r<this.e)){this.f=!1;const c=this.g.length/5|0;let l=0,u=0;for(let h=0;h<c;h++){let p=this.g[5*h],f=this.g[5*h+1];p===0?(p=l,f+=u):p+=l,this.g[5*h]=p,this.g[5*h+1]=f,l=p,u=f}}let o=t,a=r;this.f&&this.j>0&&(o-=this.c,o===0&&(a-=this.e)),this.g[this.j++]=o,this.g[this.j++]=a,this.g[this.j++]=i,this.g[this.j++]=s,this.g[this.j++]=n,this.c=t,this.e=r}static r(t){const r=[],i=t.length/5|0;for(let a=0;a<i;a++)r[a]=a;r.sort((a,c)=>{const l=t[5*a],u=t[5*c];if(l===u){const h=t[5*a+1],p=t[5*c+1];return h-p}return l-u});const s=new Uint32Array(t.length);let n=0,o=0;for(let a=0;a<i;a++){const c=5*r[a],l=t[c+0],u=t[c+1],h=t[c+2],p=t[c+3],f=t[c+4],m=l-n,w=m===0?u-o:u,E=5*a;s[E+0]=m,s[E+1]=w,s[E+2]=h,s[E+3]=p,s[E+4]=f,n=l,o=u}return s}build(t){return this.f?new _o(new Uint32Array(this.g),t):new _o(Yx.r(this.g),t)}},_o=class{constructor(e,t){this.resultId=t,this.data=e}},_6=class{constructor(e,t,r){this.start=e,this.deleteCount=t,this.data=r}},Gh=class{constructor(e,t){this.resultId=t,this.edits=e}},Qh;(function(e){e[e.Separate=0]="Separate",e[e.MergeWithParent=1]="MergeWithParent"})(Qh||(Qh={}));var _D=class{constructor(e){this.name=e}},Pm;(function(e){e[e.Title=1]="Title",e[e.Inline=2]="Inline"})(Pm||(Pm={}));var Wc=class{static{this.Back={iconPath:new Xt("arrow-left")}}constructor(){}};Wc=__decorate([te],Wc);var Vc;(function(e){e[e.Separator=-1]="Separator",e[e.Default=0]="Default"})(Vc||(Vc={}));var zo;(function(e){e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(zo||(zo={}));var Dn;(function(e){e[e.UI=1]="UI",e[e.Workspace=2]="Workspace"})(Dn||(Dn={}));var Am=class{static validate(e){if(typeof e.badge=="string"){let t=xb(e.badge,0);if(t<e.badge.length&&(t+=xb(e.badge,t)),e.badge.length>t)throw new Error("The 'badge'-property must be undefined or a short character")}else if(e.badge&&!Xt.isThemeIcon(e.badge))throw new Error("The 'badge'-property is not a valid ThemeIcon");if(!e.color&&!e.badge&&!e.tooltip)throw new Error("The decoration is empty");return!0}constructor(e,t,r){this.badge=e,this.tooltip=t,this.color=r}},Jh=class{constructor(t){this.kind=t}};Jh=__decorate([te],Jh);var Ps;(function(e){e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.HighContrast=3]="HighContrast",e[e.HighContrastLight=4]="HighContrastLight"})(Ps||(Ps={}));var Vi=class X0{static isNotebookRange(t){return t instanceof X0?!0:t?typeof t.start=="number"&&typeof t.end=="number":!1}get start(){return this.c}get end(){return this.e}get isEmpty(){return this.c===this.e}constructor(t,r){if(t<0)throw Ee("start must be positive");if(r<0)throw Ee("end must be positive");t<=r?(this.c=t,this.e=r):(this.c=r,this.e=t)}with(t){let r=this.c,i=this.e;return t.start!==void 0&&(r=t.start),t.end!==void 0&&(i=t.end),r===this.c&&i===this.e?this:new X0(r,i)}},Xh=class Y0{static validate(t){if(typeof t.kind!="number")throw new Error("NotebookCellData MUST have 'kind' property");if(typeof t.value!="string")throw new Error("NotebookCellData MUST have 'value' property");if(typeof t.languageId!="string")throw new Error("NotebookCellData MUST have 'languageId' property")}static isNotebookCellDataArray(t){return Array.isArray(t)&&t.every(r=>Y0.isNotebookCellData(r))}static isNotebookCellData(t){return!0}constructor(t,r,i,s,n,o,a){this.kind=t,this.value=r,this.languageId=i,this.mime=s,this.outputs=n??[],this.metadata=o,this.executionSummary=a,Y0.validate(this)}},z6=class{constructor(e){this.cells=e}},W6=class os{static isNotebookCellOutputItem(t){return t instanceof os?!0:t?typeof t.mime=="string"&&t.data instanceof Uint8Array:!1}static error(t){const r={name:t.name,message:t.message,stack:t.stack};return os.json(r,"application/vnd.code.notebook.error")}static stdout(t){return os.text(t,"application/vnd.code.notebook.stdout")}static stderr(t){return os.text(t,"application/vnd.code.notebook.stderr")}static bytes(t,r="application/octet-stream"){return new os(t,r)}static#e=new TextEncoder;static text(t,r=ji.text){const i=os.#e.encode(String(t));return new os(i,r)}static json(t,r="text/x-json"){const i=JSON.stringify(t,void 0,"	");return os.text(i,r)}constructor(t,r){this.data=t,this.mime=r;const i=f4(r,!0);if(!i)throw new Error(`INVALID mime type: ${r}. Must be in the format "type/subtype[;optionalparameter]"`);this.mime=i}},Yh=class Z0{static isNotebookCellOutput(t){return t instanceof Z0?!0:!t||typeof t!="object"?!1:typeof t.id=="string"&&Array.isArray(t.items)}static ensureUniqueMimeTypes(t,r=!1){const i=new Set,s=new Set;for(let n=0;n<t.length;n++){const o=t[n],a=f4(o.mime);if(!i.has(a)||s6(a)){i.add(a);continue}s.add(n),r&&console.warn(`DUPLICATED mime type '${o.mime}' will be dropped`)}return s.size===0?t:t.filter((n,o)=>!s.has(o))}constructor(t,r,i){this.items=Z0.ensureUniqueMimeTypes(t,!0),typeof r=="string"?(this.id=r,this.metadata=i):(this.id=Dr(),this.metadata=r??i)}},zD=class{constructor(e,t,r){this.label=e,this.uri=t,this.position=r}},Pn;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(Pn||(Pn={}));var Wo;(function(e){e[e.Idle=1]="Idle",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(Wo||(Wo={}));var Zh;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(Zh||(Zh={}));var Kh;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(Kh||(Kh={}));var WD=class{constructor(e,t){this.text=e,this.alignment=t}},Tm;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred"})(Tm||(Tm={}));var ed;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred",e[e.Hidden=-1]="Hidden"})(ed||(ed={}));var V6=class{constructor(e,t=[]){this.uri=e,this.provides=hi(t)}},VD=class{constructor(e){this.label=e}},qc;(function(e){e[e.Named=1]="Named",e[e.Indexed=2]="Indexed"})(qc||(qc={}));var Rm=class{constructor(t,r){this.label=t,this.timestamp=r}};Rm=__decorate([te],Rm);var Vo;(function(e){e[e.Production=1]="Production",e[e.Development=2]="Development",e[e.Test=3]="Test"})(Vo||(Vo={}));var td;(function(e){e[e.Node=1]="Node",e[e.Webworker=2]="Webworker"})(td||(td={}));var As;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(As||(As={}));var qD=class{constructor(e,t){this.ranges=e,this.wordPattern=t}},GD=class{constructor(e){this.c=e}get autoForwardAction(){return this.c}},Lm;(function(e){e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(Lm||(Lm={}));var qo;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(qo||(qo={}));var q6=class{constructor(e,t,r){this.controllerId=e,this.profileId=t,this.kind=r}},rd=class{constructor(t=void 0,r=void 0,i=void 0,s=!1,n=!0){this.include=t,this.exclude=r,this.profile=i,this.continuous=s,this.preserveFocus=n}};rd=__decorate([te],rd);var id=em=class{static diff(t,r,i){const s=new em(t);return s.expectedOutput=r,s.actualOutput=i,s}constructor(t){this.message=t}};id=em=__decorate([te],id);var Gc=class{constructor(t){this.id=t}};Gc=__decorate([te],Gc);var QD=class{constructor(e,t,r){this.label=e,this.uri=t,this.position=r}},sd=class{constructor(e,t){this.covered=e,this.total=t,nd(this)}};function nd(e){if(e){if(e.covered>e.total)throw new Error(`The total number of covered items (${e.covered}) cannot be greater than the total (${e.total})`);if(e.total<0)throw new Error(`The number of covered items (${e.total}) cannot be negative`)}}var od=class Zx{static fromDetails(t,r){const i=new sd(0,0),s=new sd(0,0),n=new sd(0,0);for(const a of r)if("branches"in a){i.total+=1,i.covered+=a.executed?1:0;for(const c of a.branches)s.total+=1,s.covered+=c.executed?1:0}else n.total+=1,n.covered+=a.executed?1:0;const o=new Zx(t,i,s.total>0?s:void 0,n.total>0?n:void 0);return o.detailedCoverage=r,o}constructor(t,r,i,s,n=[]){this.uri=t,this.statementCoverage=r,this.branchCoverage=i,this.declarationCoverage=s,this.includesTests=n}},G6=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,r=[]){this.executed=e,this.location=t,this.branches=r}},Q6=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,r){this.executed=e,this.location=t,this.label=r}},J6=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,r){this.name=e,this.executed=t,this.location=r}},Nm;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(Nm||(Nm={}));var Fm;(function(e){e[e.Untrusted=0]="Untrusted",e[e.Trusted=1]="Trusted",e[e.Unspecified=2]="Unspecified"})(Fm||(Fm={}));var Mm;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(Mm||(Mm={}));var Om=class{constructor(e,t,r,i,s,n){this.kind=e,this.name=t,this.detail=r,this.uri=i,this.range=s,this.selectionRange=n}},Um=class{constructor(e){this.uri=e}},ad=class{constructor(e,t){this.original=e,this.modified=t}},X6=class{constructor(e,t,r,i){this.base=e,this.input1=t,this.input2=r,this.result=i}},Hm=class{constructor(e,t){this.uri=e,this.viewType=t}},Y6=class{constructor(e){this.viewType=e}},jm=class{constructor(e,t){this.uri=e,this.notebookType=t}},Bm=class{constructor(e,t,r){this.original=e,this.modified=t,this.notebookType=r}},Z6=class{constructor(){}},K6=class{constructor(e,t){this.uri=e,this.inputBoxUri=t}},e7=class{constructor(){}},t7=class{constructor(e){this.textDiffs=e}},_m;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(_m||(_m={}));var zm;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(zm||(zm={}));var Wm;(function(e){e[e.Short=1]="Short",e[e.Medium=2]="Medium",e[e.Full=3]="Full"})(Wm||(Wm={}));var JD=class{constructor(e,t,r){this.id=e,this.label=t,this.values=r}},An;(function(e){e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected",e[e.Saved=3]="Saved"})(An||(An={}));var Vm;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful",e[e.Undone=2]="Undone",e[e.Accepted=3]="Accepted",e[e.Bug=4]="Bug"})(Vm||(Vm={}));var Qc;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful"})(Qc||(Qc={}));var cd=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new xr(e):e}},Jc=class{constructor(e,t){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new xr(e):e,this.vulnerabilities=t}},Xc=class{constructor(e,t){this.participant=e,this.command=t}},ld=class{constructor(e,t,r,i){this.title=e,this.message=t,this.data=r,this.buttons=i}},ud=class{constructor(e,t){this.value=e,this.baseUri=t}},Yc=class{constructor(e,t){this.value=e,this.value2=e,this.title=t}},Zc=class{constructor(e){this.value=e}},hd=class{constructor(e,t){this.value=e,this.task=t}},Kc=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new xr(e):e}},dd=class{constructor(e){this.value=e}},qi=class{constructor(e,t,r){this.value=e,this.iconPath=t,this.options=r}},fd=class{constructor(e){this.value=e}},pd=class{constructor(e,t,r){this.value=e,this.license=t,this.snippet=r}},gd=class{constructor(e,t){this.uri=e,this.range=t}},el=class{constructor(e,t){this.uri=e,t===!0?(this.isDone=!0,this.edits=[]):this.edits=Array.isArray(t)?t:[t]}},r7=class{constructor(e,t,r,i,s){this.prompt=e,this.command=t,this.references=r,this.participant=i,this.toolReferences=s}},i7=class{constructor(e,t,r,i){this.response=e,this.result=t,this.participant=r,this.command=i}},Lr;(function(e){e[e.Panel=1]="Panel",e[e.Terminal=2]="Terminal",e[e.Notebook=3]="Notebook",e[e.Editor=4]="Editor",e[e.EditingSession=5]="EditingSession"})(Lr||(Lr={}));var qm;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(qm||(qm={}));var s7=class{constructor(e,t,r){this.document=e,this.selection=t,this.wholeRange=r}},n7=class{constructor(e){this.cell=e}},o7=class{constructor(e,t,r){this.mimeType=e,this.data=t,this.reference=r}},Hr;(function(e){e[e.User=1]="User",e[e.Assistant=2]="Assistant",e[e.System=3]="System"})(Hr||(Hr={}));var Gm=class{constructor(e,t,r){this.callId=e,this.content=t,this.isError=r??!1}},a7=class K0{static User(t,r){return new K0(Hr.User,t,r)}static Assistant(t,r){return new K0(Hr.Assistant,t,r)}set content(t){typeof t=="string"?this.c=[new ar(t)]:this.c=t}get content(){return this.c}set content2(t){t&&(this.content=t.map(r=>typeof r=="string"?new ar(r):r))}get content2(){return this.content.map(t=>t instanceof ar?t.value:t)}constructor(t,r,i){this.c=[],this.role=t,this.content=r,this.name=i}},tl=class{constructor(e,t,r){this.callId=e,this.name=t,this.input=r}},ar=class{constructor(e){this.value=e}toJSON(){return{$mid:21,value:this.value}}},Go=class{constructor(e){this.value=e}toJSON(){return{$mid:22,value:this.value}}},Ei=class Ii extends Error{static#e="LanguageModelError";static NotFound(t){return new Ii(t,Ii.NotFound.name)}static NoPermissions(t){return new Ii(t,Ii.NoPermissions.name)}static Blocked(t){return new Ii(t,Ii.Blocked.name)}static tryDeserialize(t){if(t.name===Ii.#e)return new Ii(t.message,t.code,t.cause)}constructor(t,r,i){super(t,{cause:i}),this.name=Ii.#e,this.code=r??""}},Qm=class{constructor(e){this.content=e}toJSON(){return{$mid:20,content:this.content}}},Jm;(function(e){e[e.Auto=1]="Auto",e[e.Required=2]="Required"})(Jm||(Jm={}));var Xm;(function(e){e[e.SymbolInformation=1]="SymbolInformation",e[e.CommandInformation=2]="CommandInformation",e[e.SearchInformation=3]="SearchInformation",e[e.SettingInformation=4]="SettingInformation"})(Xm||(Xm={}));var Ym;(function(e){e[e.Started=1]="Started",e[e.Recognizing=2]="Recognizing",e[e.Recognized=3]="Recognized",e[e.Stopped=4]="Stopped",e[e.Error=5]="Error"})(Ym||(Ym={}));var Zm;(function(e){e[e.Started=1]="Started",e[e.Stopped=2]="Stopped",e[e.Error=3]="Error"})(Zm||(Zm={}));var Km;(function(e){e[e.Recognized=1]="Recognized",e[e.Stopped=2]="Stopped"})(Km||(Km={}));var XD=class{constructor(e,t){this.text=e,this.range=t}},rl;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(rl||(rl={}));var ei;(function(e){function t(i){const{selectionStartLineNumber:s,selectionStartColumn:n,positionLineNumber:o,positionColumn:a}=i,c=new xe(s-1,n-1),l=new xe(o-1,a-1);return new zi(c,l)}e.to=t;function r(i){const{anchor:s,active:n}=i;return{selectionStartLineNumber:s.line+1,selectionStartColumn:s.character+1,positionLineNumber:n.line+1,positionColumn:n.character+1}}e.from=r})(ei||(ei={}));var M;(function(e){function t(i){if(!i)return;const{start:s,end:n}=i;return{startLineNumber:s.line+1,startColumn:s.character+1,endLineNumber:n.line+1,endColumn:n.character+1}}e.from=t;function r(i){if(!i)return;const{startLineNumber:s,startColumn:n,endLineNumber:o,endColumn:a}=i;return new we(s-1,n-1,o-1,a-1)}e.to=r})(M||(M={}));var Ts;(function(e){function t(i){return{uri:i.uri,range:M.from(i.range)}}e.from=t;function r(i){return new Rr(y.revive(i.uri),M.to(i.range))}e.to=r})(Ts||(Ts={}));var e1;(function(e){function t(r){switch(r){case 1:return As.Comment;case 0:return As.Other;case 3:return As.RegEx;case 2:return As.String}}e.to=t})(e1||(e1={}));var Fe;(function(e){function t(i){return new xe(i.lineNumber-1,i.column-1)}e.to=t;function r(i){return{lineNumber:i.line+1,column:i.character+1}}e.from=r})(Fe||(Fe={}));var Qo;(function(e){function t(s,n,o){return Rt(hi(s).map(a=>r(a,n,o)))}e.from=t;function r(s,n,o){if(typeof s=="string")return{$serialized:!0,language:s,isBuiltin:o?.isBuiltin};if(s)return{$serialized:!0,language:s.language,scheme:i(s.scheme,n),pattern:$r.from(s.pattern)??void 0,exclusive:s.exclusive,notebookType:s.notebookType,isBuiltin:o?.isBuiltin}}function i(s,n){return n&&typeof s=="string"?n.transformOutgoingScheme(s):s}})(Qo||(Qo={}));var md;(function(e){function t(i){switch(i){case yn.Unnecessary:return 1;case yn.Deprecated:return 2}}e.from=t;function r(i){switch(i){case 1:return yn.Unnecessary;case 2:return yn.Deprecated;default:return}}e.to=r})(md||(md={}));var Jo;(function(e){function t(i){let s;return i.code&&(Ce(i.code)||ls(i.code)?s=String(i.code):s={value:String(i.code.value),target:i.code.target}),{...M.from(i.range),message:i.message,source:i.source,code:s,severity:wd.from(i.severity),relatedInformation:i.relatedInformation&&i.relatedInformation.map(vd.from),tags:Array.isArray(i.tags)?Rt(i.tags.map(md.from)):void 0}}e.from=t;function r(i){const s=new xh(M.to(i),i.message,wd.to(i.severity));return s.source=i.source,s.code=Ce(i.code)?i.code:i.code?.value,s.relatedInformation=i.relatedInformation&&i.relatedInformation.map(vd.to),s.tags=i.tags&&Rt(i.tags.map(md.to)),s}e.to=r})(Jo||(Jo={}));var vd;(function(e){function t(i){return{...M.from(i.location.range),message:i.message,resource:i.location.uri}}e.from=t;function r(i){return new xc(new Rr(i.resource,M.to(i)),i.message)}e.to=r})(vd||(vd={}));var wd;(function(e){function t(i){switch(i){case _t.Error:return sr.Error;case _t.Warning:return sr.Warning;case _t.Information:return sr.Info;case _t.Hint:return sr.Hint}return sr.Error}e.from=t;function r(i){switch(i){case sr.Info:return _t.Information;case sr.Warning:return _t.Warning;case sr.Error:return _t.Error;case sr.Hint:return _t.Hint;default:return _t.Error}}e.to=r})(wd||(wd={}));var Ct;(function(e){function t(i){return typeof i=="number"&&i>=Tc.One?i-1:i===Tc.Beside?gD:pD}e.from=t;function r(i){if(typeof i=="number"&&i>=0)return i+1;throw new Error("invalid 'EditorGroupColumn'")}e.to=r})(Ct||(Ct={}));function YD(e){return typeof e.range<"u"}function c7(e){return e.length===0?!0:!!YD(e[0])}var be;(function(e){function t(a){return a.map(e.from)}e.fromMany=t;function r(a){return a&&typeof a=="object"&&typeof a.language=="string"&&typeof a.value=="string"}function i(a){let c;if(r(a)){const{language:h,value:p}=a;c={value:"```"+h+`
`+p+"\n```\n"}}else xr.isMarkdownString(a)?c={value:a.value,isTrusted:a.isTrusted,supportThemeIcons:a.supportThemeIcons,supportHtml:a.supportHtml,baseUri:a.baseUri}:typeof a=="string"?c={value:a}:c={value:""};const l=Object.create(null);c.uris=l;const u=({href:h})=>{try{let p=y.parse(h,!0);p=p.with({query:s(p.query,l)}),l[h]=p}catch{}return""};return Xe.walkTokens(Xe.lexer(c.value),h=>{h.type==="link"?u({href:h.href}):h.type==="image"&&typeof h.href=="string"&&u(OI(h.href))}),c}e.from=i;function s(a,c){if(!a)return a;let l;try{l=d4(a)}catch{}if(!l)return a;let u=!1;return l=ho(l,h=>{if(y.isUri(h)){const p=`__uri_${Math.random().toString(16).slice(2,8)}`;return c[p]=h,u=!0,p}else return}),u?JSON.stringify(l):a}function n(a){const c=new xr(a.value,a.supportThemeIcons);return c.isTrusted=a.isTrusted,c.supportHtml=a.supportHtml,c.baseUri=a.baseUri?y.from(a.baseUri):void 0,c}e.to=n;function o(a){if(a)return typeof a=="string"?a:e.from(a)}e.fromStrict=o})(be||(be={}));function ZD(e){return c7(e)?e.map(t=>({range:M.from(t.range),hoverMessage:Array.isArray(t.hoverMessage)?be.fromMany(t.hoverMessage):t.hoverMessage?be.from(t.hoverMessage):void 0,renderOptions:t.renderOptions})):e.map(t=>({range:M.from(t)}))}function bd(e){return typeof e>"u"?e:typeof e=="string"?y.file(e):e}var Xo;(function(e){function t(r){return typeof r>"u"?r:{contentText:r.contentText,contentIconPath:r.contentIconPath?bd(r.contentIconPath):void 0,border:r.border,borderColor:r.borderColor,fontStyle:r.fontStyle,fontWeight:r.fontWeight,textDecoration:r.textDecoration,color:r.color,backgroundColor:r.backgroundColor,margin:r.margin,width:r.width,height:r.height}}e.from=t})(Xo||(Xo={}));var yd;(function(e){function t(r){return typeof r>"u"?r:{backgroundColor:r.backgroundColor,outline:r.outline,outlineColor:r.outlineColor,outlineStyle:r.outlineStyle,outlineWidth:r.outlineWidth,border:r.border,borderColor:r.borderColor,borderRadius:r.borderRadius,borderSpacing:r.borderSpacing,borderStyle:r.borderStyle,borderWidth:r.borderWidth,fontStyle:r.fontStyle,fontWeight:r.fontWeight,textDecoration:r.textDecoration,cursor:r.cursor,color:r.color,opacity:r.opacity,letterSpacing:r.letterSpacing,gutterIconPath:r.gutterIconPath?bd(r.gutterIconPath):void 0,gutterIconSize:r.gutterIconSize,overviewRulerColor:r.overviewRulerColor,before:r.before?Xo.from(r.before):void 0,after:r.after?Xo.from(r.after):void 0}}e.from=t})(yd||(yd={}));var t1;(function(e){function t(r){if(typeof r>"u")return r;switch(r){case xn.OpenOpen:return 0;case xn.ClosedClosed:return 1;case xn.OpenClosed:return 2;case xn.ClosedOpen:return 3}}e.from=t})(t1||(t1={}));var r1;(function(e){function t(r){return{isWholeLine:r.isWholeLine,rangeBehavior:r.rangeBehavior?t1.from(r.rangeBehavior):void 0,overviewRulerLane:r.overviewRulerLane,light:r.light?yd.from(r.light):void 0,dark:r.dark?yd.from(r.dark):void 0,backgroundColor:r.backgroundColor,outline:r.outline,outlineColor:r.outlineColor,outlineStyle:r.outlineStyle,outlineWidth:r.outlineWidth,border:r.border,borderColor:r.borderColor,borderRadius:r.borderRadius,borderSpacing:r.borderSpacing,borderStyle:r.borderStyle,borderWidth:r.borderWidth,fontStyle:r.fontStyle,fontWeight:r.fontWeight,textDecoration:r.textDecoration,cursor:r.cursor,color:r.color,opacity:r.opacity,letterSpacing:r.letterSpacing,gutterIconPath:r.gutterIconPath?bd(r.gutterIconPath):void 0,gutterIconSize:r.gutterIconSize,overviewRulerColor:r.overviewRulerColor,before:r.before?Xo.from(r.before):void 0,after:r.after?Xo.from(r.after):void 0}}e.from=t})(r1||(r1={}));var Dt;(function(e){function t(i){return{text:i.newText,eol:i.newEol&&ea.from(i.newEol),range:M.from(i.range)}}e.from=t;function r(i){const s=new Ss(M.to(i.range),i.text);return s.newEol=typeof i.eol>"u"?void 0:ea.to(i.eol),s}e.to=r})(Dt||(Dt={}));var kr;(function(e){function t(i,s){const n={edits:[]};if(i instanceof wn){const o=new ww;for(const a of i._allEntries())a._type===1&&y.isUri(a.to)&&a.from===void 0&&o.add(a.to);for(const a of i._allEntries())if(a._type===1){let c;a.options?.contents&&(ArrayBuffer.isView(a.options.contents)?c={type:"base64",value:wp(ke.wrap(a.options.contents))}:c={type:"dataTransferItem",id:a.options.contents._itemId}),n.edits.push({oldResource:a.from,newResource:a.to,options:{...a.options,contents:c},metadata:a.metadata})}else a._type===2?n.edits.push({resource:a.uri,textEdit:Dt.from(a.edit),versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===6?n.edits.push({resource:a.uri,textEdit:{range:M.from(a.range),text:a.edit.value,insertAsSnippet:!0},versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===3?n.edits.push({metadata:a.metadata,resource:a.uri,cellEdit:a.edit,notebookVersionId:s?.getNotebookDocumentVersion(a.uri)}):a._type===5&&n.edits.push({metadata:a.metadata,resource:a.uri,notebookVersionId:s?.getNotebookDocumentVersion(a.uri),cellEdit:{editType:1,index:a.index,count:a.count,cells:a.cells.map(cl.from)}})}return n}e.from=t;function r(i){const s=new wn,n=new Nt;for(const o of i.edits)if(o.textEdit){const a=o,c=y.revive(a.resource),l=M.to(a.textEdit.range),u=a.textEdit.text,h=a.textEdit.insertAsSnippet;let p;h?p=rm.replace(l,new bn(u)):p=Ss.replace(l,u);const f=n.get(c);f?f.push(p):n.set(c,[p])}else s.renameFile(y.revive(o.oldResource),y.revive(o.newResource),o.options);for(const[o,a]of n)s.set(o,a);return s}e.to=r})(kr||(kr={}));var jr;(function(e){const t=Object.create(null);t[Je.File]=0,t[Je.Module]=1,t[Je.Namespace]=2,t[Je.Package]=3,t[Je.Class]=4,t[Je.Method]=5,t[Je.Property]=6,t[Je.Field]=7,t[Je.Constructor]=8,t[Je.Enum]=9,t[Je.Interface]=10,t[Je.Function]=11,t[Je.Variable]=12,t[Je.Constant]=13,t[Je.String]=14,t[Je.Number]=15,t[Je.Boolean]=16,t[Je.Array]=17,t[Je.Object]=18,t[Je.Key]=19,t[Je.Null]=20,t[Je.EnumMember]=21,t[Je.Struct]=22,t[Je.Event]=23,t[Je.Operator]=24,t[Je.TypeParameter]=25;function r(s){return typeof t[s]=="number"?t[s]:6}e.from=r;function i(s){for(const n in t)if(t[n]===s)return Number(n);return Je.Property}e.to=i})(jr||(jr={}));var Gi;(function(e){function t(i){switch(i){case $c.Deprecated:return 1}}e.from=t;function r(i){switch(i){case 1:return $c.Deprecated}}e.to=r})(Gi||(Gi={}));var Tn;(function(e){function t(i){return{name:i.name,kind:jr.from(i.kind),tags:i.tags&&i.tags.map(Gi.from),containerName:i.containerName,location:cr.from(i.location)}}e.from=t;function r(i){const s=new Sc(i.name,jr.to(i.kind),i.containerName,cr.to(i.location));return s.tags=i.tags&&i.tags.map(Gi.to),s}e.to=r})(Tn||(Tn={}));var i1;(function(e){function t(i){const s={name:i.name||"!!MISSING: name!!",detail:i.detail,range:M.from(i.range),selectionRange:M.from(i.selectionRange),kind:jr.from(i.kind),tags:i.tags?.map(Gi.from)??[]};return i.children&&(s.children=i.children.map(t)),s}e.from=t;function r(i){const s=new Ic(i.name,i.detail,jr.to(i.kind),M.to(i.range),M.to(i.selectionRange));return Ra(i.tags)&&(s.tags=i.tags.map(Gi.to)),i.children&&(s.children=i.children.map(r)),s}e.to=r})(i1||(i1={}));var Rn;(function(e){function t(i){const s=new sm(jr.to(i.kind),i.name,i.detail||"",y.revive(i.uri),M.to(i.range),M.to(i.selectionRange));return s._sessionId=i._sessionId,s._itemId=i._itemId,s}e.to=t;function r(i,s,n){if(s=s??i._sessionId,n=n??i._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,name:i.name,detail:i.detail,kind:jr.from(i.kind),uri:i.uri,range:M.from(i.range),selectionRange:M.from(i.selectionRange),tags:i.tags?.map(Gi.from)}}e.from=r})(Rn||(Rn={}));var s1;(function(e){function t(r){return new F6(Rn.to(r.from),r.fromRanges.map(i=>M.to(i)))}e.to=t})(s1||(s1={}));var n1;(function(e){function t(r){return new M6(Rn.to(r.to),r.fromRanges.map(i=>M.to(i)))}e.to=t})(n1||(n1={}));var cr;(function(e){function t(i){return{range:i.range&&M.from(i.range),uri:i.uri}}e.from=t;function r(i){return new Rr(y.revive(i.uri),M.to(i.range))}e.to=r})(cr||(cr={}));var il;(function(e){function t(i){const s=i,n=i;return{originSelectionRange:s.originSelectionRange?M.from(s.originSelectionRange):void 0,uri:s.targetUri?s.targetUri:n.uri,range:M.from(s.targetRange?s.targetRange:n.range),targetSelectionRange:s.targetSelectionRange?M.from(s.targetSelectionRange):void 0}}e.from=t;function r(i){return{targetUri:y.revive(i.uri),targetRange:M.to(i.range),targetSelectionRange:i.targetSelectionRange?M.to(i.targetSelectionRange):void 0,originSelectionRange:i.originSelectionRange?M.to(i.originSelectionRange):void 0}}e.to=r})(il||(il={}));var sl;(function(e){function t(i){return{range:M.from(i.range),contents:be.fromMany(i.contents),canIncreaseVerbosity:i.canIncreaseVerbosity,canDecreaseVerbosity:i.canDecreaseVerbosity}}e.from=t;function r(i){const s=i.contents.map(be.to),n=M.to(i.range),o=i.canIncreaseVerbosity,a=i.canDecreaseVerbosity;return new $h(s,n,o,a)}e.to=r})(sl||(sl={}));var o1;(function(e){function t(i){return{range:M.from(i.range),expression:i.expression}}e.from=t;function r(i){return new zh(M.to(i.range),i.expression)}e.to=r})(o1||(o1={}));var Ed;(function(e){function t(i){if(i instanceof Wh)return{type:"text",range:M.from(i.range),text:i.text};if(i instanceof Vh)return{type:"variable",range:M.from(i.range),variableName:i.variableName,caseSensitiveLookup:i.caseSensitiveLookup};if(i instanceof qh)return{type:"expression",range:M.from(i.range),expression:i.expression};throw new Error("Unknown 'InlineValue' type")}e.from=t;function r(i){switch(i.type){case"text":return{range:M.to(i.range),text:i.text};case"variable":return{range:M.to(i.range),variableName:i.variableName,caseSensitiveLookup:i.caseSensitiveLookup};case"expression":return{range:M.to(i.range),expression:i.expression}}}e.to=r})(Ed||(Ed={}));var xd;(function(e){function t(i){return{frameId:i.frameId,stoppedLocation:M.from(i.stoppedLocation)}}e.from=t;function r(i){return new km(i.frameId,M.to(i.stoppedLocation))}e.to=r})(xd||(xd={}));var Yo;(function(e){function t(i){return{range:M.from(i.range),kind:i.kind}}e.from=t;function r(i){return new Sh(M.to(i.range),i.kind)}e.to=r})(Yo||(Yo={}));var a1;(function(e){function t(i){return{uri:i.uri,highlights:i.highlights.map(Yo.from)}}e.from=t;function r(i){return new Ih(y.revive(i.uri),i.highlights.map(Yo.to))}e.to=r})(a1||(a1={}));var c1;(function(e){function t(r){switch(r){case 1:return Ao.TriggerCharacter;case 2:return Ao.TriggerForIncompleteCompletions;case 0:default:return Ao.Invoke}}e.to=t})(c1||(c1={}));var l1;(function(e){function t(r){return{triggerKind:c1.to(r.triggerKind),triggerCharacter:r.triggerCharacter}}e.to=t})(l1||(l1={}));var kd;(function(e){function t(i){switch(i){case Ac.Deprecated:return 1}}e.from=t;function r(i){switch(i){case 1:return Ac.Deprecated}}e.to=r})(kd||(kd={}));var $d;(function(e){const t=new Map([[oe.Method,0],[oe.Function,1],[oe.Constructor,2],[oe.Field,3],[oe.Variable,4],[oe.Class,5],[oe.Interface,7],[oe.Struct,6],[oe.Module,8],[oe.Property,9],[oe.Unit,12],[oe.Value,13],[oe.Constant,14],[oe.Enum,15],[oe.EnumMember,16],[oe.Keyword,17],[oe.Snippet,27],[oe.Text,18],[oe.Color,19],[oe.File,20],[oe.Reference,21],[oe.Folder,23],[oe.Event,10],[oe.Operator,11],[oe.TypeParameter,24],[oe.Issue,26],[oe.User,25]]);function r(n){return t.get(n)??9}e.from=r;const i=new Map([[0,oe.Method],[1,oe.Function],[2,oe.Constructor],[3,oe.Field],[4,oe.Variable],[5,oe.Class],[7,oe.Interface],[6,oe.Struct],[8,oe.Module],[9,oe.Property],[12,oe.Unit],[13,oe.Value],[14,oe.Constant],[15,oe.Enum],[16,oe.EnumMember],[17,oe.Keyword],[27,oe.Snippet],[18,oe.Text],[19,oe.Color],[20,oe.File],[21,oe.Reference],[23,oe.Folder],[10,oe.Event],[11,oe.Operator],[24,oe.TypeParameter],[25,oe.User],[26,oe.Issue]]);function s(n){return i.get(n)??oe.Property}e.to=s})($d||($d={}));var u1;(function(e){function t(r,i){const s=new Ah(r.label);return s.insertText=r.insertText,s.kind=$d.to(r.kind),s.tags=r.tags?.map(kd.to),s.detail=r.detail,s.documentation=on(r.documentation)?be.to(r.documentation):r.documentation,s.sortText=r.sortText,s.filterText=r.filterText,s.preselect=r.preselect,s.commitCharacters=r.commitCharacters,ze.isIRange(r.range)?s.range=M.to(r.range):typeof r.range=="object"&&(s.range={inserting:M.to(r.range.insert),replacing:M.to(r.range.replace)}),s.keepWhitespace=typeof r.insertTextRules>"u"?!1:!!(r.insertTextRules&1),typeof r.insertTextRules<"u"&&r.insertTextRules&4?s.insertText=new bn(r.insertText):(s.insertText=r.insertText,s.textEdit=s.range instanceof we?new Ss(s.range,s.insertText):void 0),r.additionalTextEdits&&r.additionalTextEdits.length>0&&(s.additionalTextEdits=r.additionalTextEdits.map(n=>Dt.to(n))),s.command=i&&r.command?i.fromInternal(r.command):void 0,s}e.to=t})(u1||(u1={}));var Sd;(function(e){function t(i){if(typeof i.label!="string"&&!Array.isArray(i.label))throw new TypeError("Invalid label");return{label:i.label,documentation:be.fromStrict(i.documentation)}}e.from=t;function r(i){return{label:i.label,documentation:on(i.documentation)?be.to(i.documentation):i.documentation}}e.to=r})(Sd||(Sd={}));var Id;(function(e){function t(i){return{label:i.label,documentation:be.fromStrict(i.documentation),parameters:Array.isArray(i.parameters)?i.parameters.map(Sd.from):[],activeParameter:i.activeParameter}}e.from=t;function r(i){return{label:i.label,documentation:on(i.documentation)?be.to(i.documentation):i.documentation,parameters:Array.isArray(i.parameters)?i.parameters.map(Sd.to):[],activeParameter:i.activeParameter}}e.to=r})(Id||(Id={}));var nl;(function(e){function t(i){return{activeSignature:i.activeSignature,activeParameter:i.activeParameter,signatures:Array.isArray(i.signatures)?i.signatures.map(Id.from):[]}}e.from=t;function r(i){return{activeSignature:i.activeSignature,activeParameter:i.activeParameter,signatures:Array.isArray(i.signatures)?i.signatures.map(Id.to):[]}}e.to=r})(nl||(nl={}));var h1;(function(e){function t(r,i){const s=new Ph(Fe.to(i.position),typeof i.label=="string"?i.label:i.label.map(d1.to.bind(void 0,r)),i.kind&&Cd.to(i.kind));return s.textEdits=i.textEdits&&i.textEdits.map(Dt.to),s.tooltip=on(i.tooltip)?be.to(i.tooltip):i.tooltip,s.paddingLeft=i.paddingLeft,s.paddingRight=i.paddingRight,s}e.to=t})(h1||(h1={}));var d1;(function(e){function t(r,i){const s=new Dh(i.label);return s.tooltip=on(i.tooltip)?be.to(i.tooltip):i.tooltip,kg.is(i.command)&&(s.command=r.fromInternal(i.command)),i.location&&(s.location=cr.to(i.location)),s}e.to=t})(d1||(d1={}));var Cd;(function(e){function t(i){return i}e.from=t;function r(i){return i}e.to=r})(Cd||(Cd={}));var Ln;(function(e){function t(i){return{range:M.from(i.range),url:i.target,tooltip:i.tooltip}}e.from=t;function r(i){let s;if(i.url)try{s=typeof i.url=="string"?y.parse(i.url,!0):y.revive(i.url)}catch{}const n=new Rh(M.to(i.range),s);return n.tooltip=i.tooltip,n}e.to=r})(Ln||(Ln={}));var Dd;(function(e){function t(i){const s=new Nh(i.label);return i.textEdit&&(s.textEdit=Dt.to(i.textEdit)),i.additionalTextEdits&&(s.additionalTextEdits=i.additionalTextEdits.map(n=>Dt.to(n))),s}e.to=t;function r(i){return{label:i.label,textEdit:i.textEdit?Dt.from(i.textEdit):void 0,additionalTextEdits:i.additionalTextEdits?i.additionalTextEdits.map(s=>Dt.from(s)):void 0}}e.from=r})(Dd||(Dd={}));var Zo;(function(e){function t(i){return new Mo(i[0],i[1],i[2],i[3])}e.to=t;function r(i){return[i.red,i.green,i.blue,i.alpha]}e.from=r})(Zo||(Zo={}));var f1;(function(e){function t(i){return{range:M.from(i.range)}}e.from=t;function r(i){return new Pc(M.to(i.range))}e.to=r})(f1||(f1={}));var Pd;(function(e){function t(r){switch(r){case 2:return Ro.AfterDelay;case 1:return Ro.Manual;case 3:case 4:return Ro.FocusOut}}e.to=t})(Pd||(Pd={}));var Ko;(function(e){function t(i){switch(i){case Kr.Off:return 0;case Kr.Relative:return 2;case Kr.Interval:return 3;case Kr.On:default:return 1}}e.from=t;function r(i){switch(i){case 0:return Kr.Off;case 2:return Kr.Relative;case 3:return Kr.Interval;case 1:default:return Kr.On}}e.to=r})(Ko||(Ko={}));var ea;(function(e){function t(i){if(i===Zr.CRLF)return 1;if(i===Zr.LF)return 0}e.from=t;function r(i){if(i===1)return Zr.CRLF;if(i===0)return Zr.LF}e.to=r})(ea||(ea={}));var p1;(function(e){function t(r){if(typeof r=="object")return r.viewId;switch(r){case $n.SourceControl:return 3;case $n.Window:return 10;case $n.Notification:return 15}throw new Error("Unknown 'ProgressLocation'")}e.from=t})(p1||(p1={}));var Ad;(function(e){function t(i){const s={start:i.start+1,end:i.end+1};return i.kind&&(s.kind=Td.from(i.kind)),s}e.from=t;function r(i){const s={start:i.start-1,end:i.end-1};return i.kind&&(s.kind=Td.to(i.kind)),s}e.to=r})(Ad||(Ad={}));var Td;(function(e){function t(i){if(i)switch(i){case Wi.Comment:return go.Comment;case Wi.Imports:return go.Imports;case Wi.Region:return go.Region}}e.from=t;function r(i){if(i)switch(i.value){case go.Comment.value:return Wi.Comment;case go.Imports.value:return Wi.Imports;case go.Region.value:return Wi.Region}}e.to=r})(Td||(Td={}));var ol;(function(e){function t(r){if(r)return{pinned:typeof r.preview=="boolean"?!r.preview:void 0,inactive:r.background,preserveFocus:r.preserveFocus,selection:typeof r.selection=="object"?M.from(r.selection):void 0,override:typeof r.override=="boolean"?DC.id:void 0}}e.from=t})(ol||(ol={}));var $r;(function(e){function t(n){return n instanceof Ho?n.toJSON():typeof n=="string"?n:r(n)||i(n)?new Ho(n.baseUri??n.base,n.pattern).toJSON():n}e.from=t;function r(n){const o=n;return o?y.isUri(o.baseUri)&&typeof o.pattern=="string":!1}function i(n){const o=n;return o?typeof o.base=="string"&&typeof o.pattern=="string":!1}function s(n){return typeof n=="string"?n:new Ho(y.revive(n.baseUri),n.pattern)}e.to=s})($r||($r={}));var g1;(function(e){function t(r){if(r){if(Array.isArray(r))return r.map(t);if(typeof r=="string")return r;{const i=r;return{language:i.language,scheme:i.scheme,pattern:$r.from(i.pattern)??void 0,exclusive:i.exclusive,notebookType:i.notebookType}}}else return}e.from=t})(g1||(g1={}));var xi;(function(e){function t(i){return{start:i.start,end:i.end}}e.from=t;function r(i){return new Vi(i.start,i.end)}e.to=r})(xi||(xi={}));var ta;(function(e){function t(i){return{timing:typeof i.runStartTime=="number"&&typeof i.runEndTime=="number"?{startTime:i.runStartTime,endTime:i.runEndTime}:void 0,executionOrder:i.executionOrder,success:i.lastRunSuccess}}e.to=t;function r(i){return{lastRunSuccess:i.success,runStartTime:i.timing?.startTime,runEndTime:i.timing?.endTime,executionOrder:i.executionOrder}}e.from=r})(ta||(ta={}));var m1;(function(e){function t(r){if(r===vc.Unconfirmed)return Wo.Pending;if(r===vc.Pending)return;if(r===vc.Executing)return Wo.Executing;throw new Error(`Unknown state: ${r}`)}e.to=t})(m1||(m1={}));var al;(function(e){function t(i){switch(i){case Pn.Markup:return So.Markup;case Pn.Code:default:return So.Code}}e.from=t;function r(i){switch(i){case So.Markup:return Pn.Markup;case So.Code:default:return Pn.Code}}e.to=r})(al||(al={}));var Rs;(function(e){function t(i){const s={metadata:i.metadata??Object.create(null),cells:[]};for(const n of i.cells)Xh.validate(n),s.cells.push(cl.from(n));return s}e.from=t;function r(i){const s=new z6(i.cells.map(cl.to));return kw(i.metadata)||(s.metadata=i.metadata),s}e.to=r})(Rs||(Rs={}));var cl;(function(e){function t(i){return{cellKind:al.from(i.kind),language:i.languageId,mime:i.mime,source:i.value,metadata:i.metadata,internalMetadata:ta.from(i.executionSummary??{}),outputs:i.outputs?i.outputs.map(Ls.from):[]}}e.from=t;function r(i){return new Xh(al.to(i.cellKind),i.source,i.language,i.mime,i.outputs?i.outputs.map(Ls.to):void 0,i.metadata,i.internalMetadata?ta.to(i.internalMetadata):void 0)}e.to=r})(cl||(cl={}));var ra;(function(e){function t(i){return{mime:i.mime,valueBytes:ke.wrap(i.data)}}e.from=t;function r(i){return new W6(i.valueBytes.buffer,i.mime)}e.to=r})(ra||(ra={}));var Ls;(function(e){function t(i){return{outputId:i.id,items:i.items.map(ra.from),metadata:i.metadata}}e.from=t;function r(i){const s=i.items.map(ra.to);return new Yh(s,i.outputId,i.metadata)}e.to=r})(Ls||(Ls={}));var Rd;(function(e){function t(s){return i(s)?{include:$r.from(s.include)??void 0,exclude:$r.from(s.exclude)??void 0}:$r.from(s)??void 0}e.from=t;function r(s){return i(s)?{include:$r.to(s.include),exclude:$r.to(s.exclude)}:$r.to(s)}e.to=r;function i(s){const n=s;return n?!yt(n.include)&&!yt(n.exclude):!1}})(Rd||(Rd={}));var v1;(function(e){function t(r,i,s){const n=typeof r.command=="string"?{title:"",command:r.command}:r.command;return{alignment:r.alignment===Zh.Left?1:2,command:i.toInternal(n,s),text:r.text,tooltip:r.tooltip,accessibilityInformation:r.accessibilityInformation,priority:r.priority}}e.from=t})(v1||(v1={}));var w1;(function(e){function t(r,i,s){const n=typeof r.command=="string"?{title:"",command:r.command}:r.command;return{command:i.toInternal(n,s),label:r.label,description:r.description,detail:r.detail,documentation:r.documentation}}e.from=t})(w1||(w1={}));var b1;(function(e){function t(r){return{transientOutputs:r?.transientOutputs??!1,transientCellMetadata:r?.transientCellMetadata??{},transientDocumentMetadata:r?.transientDocumentMetadata??{},cellContentMetadata:r?.cellContentMetadata??{}}}e.from=t})(b1||(b1={}));var Ld;(function(e){function t(i){return{uri:i.uri,provides:i.provides}}e.from=t;function r(i){return new V6(y.revive(i.uri),i.provides)}e.to=r})(Ld||(Ld={}));var ia;(function(e){function t(i){return{message:be.fromStrict(i.message)||"",type:0,expected:i.expectedOutput,actual:i.actualOutput,contextValue:i.contextValue,location:i.location&&{range:M.from(i.location.range),uri:i.location.uri},stackTrace:i.stackTrace?.map(s=>({label:s.label,position:s.position&&Fe.from(s.position),uri:s.uri&&y.revive(s.uri).toJSON()}))}}e.from=t;function r(i){const s=new id(typeof i.message=="string"?i.message:be.to(i.message));return s.actualOutput=i.actual,s.expectedOutput=i.expected,s.contextValue=i.contextValue,s.location=i.location?cr.to(i.location):void 0,s}e.to=r})(ia||(ia={}));var ti;(function(e){e.namespace=hh,e.denamespace=f6})(ti||(ti={}));var y1;(function(e){function t(r){return{controllerId:r.controllerId,profileId:r.profileId,group:sa.from(r.kind)}}e.from=t})(y1||(y1={}));var sa;(function(e){const t={[qo.Coverage]:8,[qo.Debug]:4,[qo.Run]:2};function r(i){return t.hasOwnProperty(i)?t[i]:2}e.from=r})(sa||(sa={}));var Ns;(function(e){function t(i){const s=wh(i).controllerId;return{extId:De.fromExtHostTestItem(i,s).toString(),label:i.label,uri:y.revive(i.uri),busy:i.busy,tags:i.tags.map(n=>ti.namespace(s,n.id)),range:ze.lift(M.from(i.range)),description:i.description||null,sortText:i.sortText||null,error:i.error&&be.fromStrict(i.error)||null}}e.from=t;function r(i){return{parent:void 0,error:void 0,id:De.fromString(i.extId).localId,label:i.label,uri:y.revive(i.uri),tags:(i.tags||[]).map(s=>{const{tagId:n}=ti.denamespace(s);return new Gc(n)}),children:{add:()=>{},delete:()=>{},forEach:()=>{},*[Symbol.iterator](){},get:()=>{},replace:()=>{},size:0},range:M.to(i.range||void 0),canResolveChildren:!1,busy:i.busy,description:i.description||void 0,sortText:i.sortText||void 0}}e.toPlain=r})(Ns||(Ns={})),function(e){function t(i){return{id:i.id}}e.from=t;function r(i){return new Gc(i.id)}e.to=r}(ti||(ti={}));var E1;(function(e){const t=(i,s)=>{const n=i.value;if(!n)return;const o={...Ns.toPlain(n.item),parent:s,taskStates:n.tasks.map(a=>({state:a.state,duration:a.duration,messages:a.messages.filter(c=>c.type===0).map(ia.to)})),children:[]};if(i.children)for(const a of i.children.values()){const c=t(a,o);c&&o.children.push(c)}return o};function r(i){const s=new yC;for(const a of i.items)s.insert(De.fromString(a.item.extId).path,a);const n=[s.nodes],o=[];for(;n.length;)for(const a of n.pop())a.value?o.push(a):a.children&&n.push(a.children.values());return{completedAt:i.completedAt,results:o.map(a=>t(a)).filter(Js)}}e.to=r})(E1||(E1={}));var ll;(function(e){function t(a){return{covered:a.covered,total:a.total}}function r(a){return"line"in a?Fe.from(a):M.from(a)}function i(a){if(a)return"endLineNumber"in a?M.to(a):Fe.to(a)}function s(a){if(a.type===1){const c=[];if(a.branches)for(const l of a.branches)c.push({executed:l.count,location:i(l.location),label:l.label});return new G6(a.count,i(a.location),a.branches?.map(l=>new Q6(l.count,i(l.location),l.label)))}else return new J6(a.name,a.count,i(a.location))}e.to=s;function n(a){if(typeof a.executed=="number"&&a.executed<0)throw new Error(`Invalid coverage count ${a.executed}`);return"branches"in a?{count:a.executed,location:r(a.location),type:1,branches:a.branches.length?a.branches.map(c=>({count:c.executed,location:c.location&&r(c.location),label:c.label})):void 0}:{type:0,name:a.name,count:a.executed,location:r(a.location)}}e.fromDetails=n;function o(a,c,l){return nd(l.statementCoverage),nd(l.branchCoverage),nd(l.declarationCoverage),{id:c,uri:l.uri,statement:t(l.statementCoverage),branch:l.branchCoverage&&t(l.branchCoverage),declaration:l.declarationCoverage&&t(l.declarationCoverage),testIds:l instanceof od&&l.includesTests.length?l.includesTests.map(u=>De.fromExtHostTestItem(u,a).toString()):void 0}}e.fromFile=o})(ll||(ll={}));var x1;(function(e){function t(r){switch(r){case 1:return Cc.Invoke;case 2:return Cc.Automatic}}e.to=t})(x1||(x1={}));var Nn;(function(e){function t(i){const s=new Om(jr.to(i.kind),i.name,i.detail||"",y.revive(i.uri),M.to(i.range),M.to(i.selectionRange));return s._sessionId=i._sessionId,s._itemId=i._itemId,s}e.to=t;function r(i,s,n){if(s=s??i._sessionId,n=n??i._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,kind:jr.from(i.kind),name:i.name,detail:i.detail??"",uri:i.uri,range:M.from(i.range),selectionRange:M.from(i.selectionRange),tags:i.tags?.map(Gi.from)}}e.from=r})(Nn||(Nn={}));var Nd;(function(e){function t(r){if(r)return{value:r.value,tooltip:r.tooltip}}e.from=t})(Nd||(Nd={}));var Fd;(function(e){function t(n,o,a){const c=o.fileData;return c?new FD(new MD(c.name,y.revive(c.uri),c.id,pp(()=>a(c.id)))):n===ji.uriList&&o.uriListData?new Hh(s(o.uriListData)):new Hh(o.asString)}e.to=t;async function r(n,o){const a=await o.asString();if(n===ji.uriList)return{asString:a,fileData:void 0,uriListData:i(a)};const c=o.asFile();return{asString:a,fileData:c?{name:c.name,uri:c.uri,id:c._itemId??c.id}:void 0}}e.from=r;function i(n){return og.split(n).map(o=>{if(o.startsWith("#"))return o;try{return y.parse(o)}catch{}return o})}function s(n){return og.create(n.map(o=>typeof o=="string"?o:y.revive(o)))}})(Fd||(Fd={}));var Fs;(function(e){function t(i,s){const n=i.items.map(([o,a])=>[o,Fd.to(o,a,s)]);return new Nc(n)}e.toDataTransfer=t;async function r(i){const s={items:[]},n=[];for(const[o,a]of i)n.push((async()=>{s.items.push([o,await Fd.from(o,a)])})());return await Promise.all(n),s}e.from=r})(Fs||(Fs={}));var ul;(function(e){function t(i,s){return{kind:"reply",agentId:i.participant??s?.agentId??"",subCommand:i.command??s?.command,message:i.prompt,title:i.label}}e.from=t;function r(i){return{prompt:i.message,label:i.title,participant:i.agentId,command:i.subCommand}}e.to=r})(ul||(ul={}));var Md;(function(e){function t(i){switch(i){case 0:return Hr.System;case 1:return Hr.User;case 2:return Hr.Assistant}}e.to=t;function r(i){switch(i){case Hr.System:return 0;case Hr.User:return 1;case Hr.Assistant:return 2}return 1}e.from=r})(Md||(Md={}));var na;(function(e){function t(i){const s=i.content.map(a=>{if(a.type==="text")return new ar(a.value);if(a.type==="tool_result"){const c=a.value.map(l=>l.type==="text"?new ar(l.value):new Go(l.value));return new Gm(a.toolCallId,c,a.isError)}else return new tl(a.toolCallId,a.name,a.parameters)}),n=Md.to(i.role);return new a7(n,s,i.name)}e.to=t;function r(i){const s=Md.from(i.role),n=i.name;let o=i.content;typeof o=="string"&&(o=[new ar(o)]);const a=o.map(c=>{if(c instanceof Gm)return{type:"tool_result",toolCallId:c.callId,value:Rt(c.content.map(l=>l instanceof ar?{type:"text",value:l.value}:l instanceof Go?{type:"prompt_tsx",value:l.value}:void 0)),isError:c.isError};if(c instanceof tl)return{type:"tool_use",toolCallId:c.callId,name:c.name,parameters:c.input};if(c instanceof ar)return{type:"text",value:c.value};if(typeof c!="string")throw new Error("Unexpected chat message content type");return{type:"text",value:c}});return{role:s,name:n,content:a}}e.from=r})(na||(na={}));var hl;(function(e){function t(i){return{kind:"markdownContent",content:be.from(i.value)}}e.from=t;function r(i){return new cd(be.to(i.content))}e.to=r})(hl||(hl={}));var Od;(function(e){function t(i){return{kind:"codeblockUri",uri:i.value}}e.from=t;function r(i){return new fd(y.revive(i.uri))}e.to=r})(Od||(Od={}));var Ud;(function(e){function t(i){return{kind:"markdownVuln",content:be.from(i.value),vulnerabilities:i.vulnerabilities}}e.from=t;function r(i){return new Jc(be.to(i.content),i.vulnerabilities)}e.to=r})(Ud||(Ud={}));var Hd;(function(e){function t(i){return{kind:"agentDetection",agentId:i.participant,command:i.command}}e.from=t;function r(i){return new Xc(i.agentId,i.command)}e.to=r})(Hd||(Hd={}));var jd;(function(e){function t(r){return{kind:"confirmation",title:r.title,message:r.message,data:r.data,buttons:r.buttons}}e.from=t})(jd||(jd={}));var dl;(function(e){function t(i){const{value:s,baseUri:n}=i;function o(a,c){return a.map(l=>{const u=y.joinPath(c,l.name);return{label:l.name,uri:u,children:l.children&&o(l.children,u)}})}return{kind:"treeData",treeData:{label:Mi(n),uri:n,children:o(s,n)}}}e.from=t;function r(i){const s=ir(i.treeData);function n(c){return c.map(l=>({name:l.label,children:l.children&&n(l.children)}))}const o=s.uri,a=s.children?n(s.children):[];return new ud(a,o)}e.to=r})(dl||(dl={}));var oa;(function(e){function t(i){const s=o=>y.isUri(o),n=o=>"name"in o;return{kind:"inlineReference",name:i.title,inlineReference:s(i.value)?i.value:n(i.value)?Tn.from(i.value):Ts.from(i.value)}}e.from=t;function r(i){const s=ir(i);return new Yc(y.isUri(s.inlineReference)?s.inlineReference:"location"in s.inlineReference?Tn.to(s.inlineReference):Ts.to(s.inlineReference),i.name)}e.to=r})(oa||(oa={}));var Fn;(function(e){function t(i){return{kind:"progressMessage",content:be.from(i.value)}}e.from=t;function r(i){return new Zc(i.content.value)}e.to=r})(Fn||(Fn={}));var fl;(function(e){function t(i){return{kind:"warning",content:be.from(i.value)}}e.from=t;function r(i){return new Kc(i.content.value)}e.to=r})(fl||(fl={}));var k1;(function(e){function t(i){return{kind:"move",uri:i.uri,range:M.from(i.range)}}e.from=t;function r(i){return new gd(y.revive(i.uri),M.to(i.range))}e.to=r})(k1||(k1={}));var Bd;(function(e){function t(r){return{kind:"progressTask",content:be.from(r.value)}}e.from=t})(Bd||(Bd={}));var $1;(function(e){function t(r){return{kind:"progressTaskResult",content:typeof r=="string"?be.from(r):void 0}}e.from=t})($1||($1={}));var pl;(function(e){function t(i,s,n){return{kind:"command",command:s.toInternal(i.value,n)??{command:i.value.command,title:i.value.title}}}e.from=t;function r(i,s){return new dd(s.fromInternal(i.command)??{command:i.command.id,title:i.command.title})}e.to=r})(pl||(pl={}));var _d;(function(e){function t(i){return{kind:"textEdit",uri:i.uri,edits:i.edits.map(s=>Dt.from(s)),done:i.isDone}}e.from=t;function r(i){const s=new el(y.revive(i.uri),i.edits.map(n=>Dt.to(n)));return s.isDone=i.done,s}e.to=r})(_d||(_d={}));var Qi;(function(e){function t(i){const s=Mt.isThemeIcon(i.iconPath)?i.iconPath:y.isUri(i.iconPath)?{light:y.revive(i.iconPath)}:i.iconPath&&"light"in i.iconPath&&"dark"in i.iconPath&&y.isUri(i.iconPath.light)&&y.isUri(i.iconPath.dark)?{light:y.revive(i.iconPath.light),dark:y.revive(i.iconPath.dark)}:void 0;return typeof i.value=="object"&&"variableName"in i.value?{kind:"reference",reference:{variableName:i.value.variableName,value:y.isUri(i.value.value)||!i.value.value?i.value.value:Ts.from(i.value.value)},iconPath:s,options:i.options}:{kind:"reference",reference:y.isUri(i.value)||typeof i.value=="string"?i.value:Ts.from(i.value),iconPath:s,options:i.options}}e.from=t;function r(i){const s=ir(i),n=o=>y.isUri(o)?o:Ts.to(o);return new qi(typeof s.reference=="string"?s.reference:"variableName"in s.reference?{variableName:s.reference.variableName,value:s.reference.value&&n(s.reference.value)}:n(s.reference))}e.to=r})(Qi||(Qi={}));var zd;(function(e){function t(r){return{kind:"codeCitation",value:r.value,license:r.license,snippet:r.snippet}}e.from=t})(zd||(zd={}));var Wd;(function(e){function t(s,n,o){return s instanceof cd?hl.from(s):s instanceof Yc?oa.from(s):s instanceof qi?Qi.from(s):s instanceof Zc?Fn.from(s):s instanceof ud?dl.from(s):s instanceof dd?pl.from(s,n,o):s instanceof el?_d.from(s):s instanceof Jc?Ud.from(s):s instanceof fd?Od.from(s):s instanceof Xc?Hd.from(s):s instanceof Kc?fl.from(s):s instanceof ld?jd.from(s):s instanceof pd?zd.from(s):s instanceof gd?k1.from(s):{kind:"markdownContent",content:be.from("")}}e.from=t;function r(s,n){switch(s.kind){case"reference":return Qi.to(s);case"markdownContent":case"inlineReference":case"progressMessage":case"treeData":case"command":return i(s,n)}}e.to=r;function i(s,n){switch(s.kind){case"markdownContent":return hl.to(s);case"inlineReference":return oa.to(s);case"progressMessage":return;case"treeData":return dl.to(s);case"command":return pl.to(s,n)}}e.toContent=i})(Wd||(Wd={}));var Vd;(function(e){function t(r,i,s,n){const o=r.variables.variables.filter(c=>c.isTool),a=r.variables.variables.filter(c=>!c.isTool);return{prompt:r.message,command:r.command,attempt:r.attempt??0,enableCommandDetection:r.enableCommandDetection??!0,isParticipantDetected:r.isParticipantDetected??!1,references:a.map(c=>qd.to(c,n)),toolReferences:o.map(Gd.to),location:gl.to(r.location),acceptedConfirmationData:r.acceptedConfirmationData,rejectedConfirmationData:r.rejectedConfirmationData,location2:i,toolInvocationToken:Object.freeze({sessionId:r.sessionId}),model:s}}e.to=t})(Vd||(Vd={}));var S1;(function(e){function t(r){return{prompt:r.prompt,files:r.files.map(i=>y.revive(i))}}e.to=t})(S1||(S1={}));var gl;(function(e){function t(i){switch(i){case St.Notebook:return Lr.Notebook;case St.Terminal:return Lr.Terminal;case St.Panel:return Lr.Panel;case St.Editor:return Lr.Editor;case St.EditingSession:return Lr.EditingSession}}e.to=t;function r(i){switch(i){case Lr.Notebook:return St.Notebook;case Lr.Terminal:return St.Terminal;case Lr.Panel:return St.Panel;case Lr.Editor:return St.Editor;case Lr.EditingSession:return St.EditingSession}}e.from=r})(gl||(gl={}));var qd;(function(e){function t(r,i){const s=r.value;if(!s)throw new Error("Invalid value reference");return{id:r.id,name:r.name,range:r.range&&[r.range.start,r.range.endExclusive],value:Yw(s)?y.revive(s):s&&typeof s=="object"&&"uri"in s&&"range"in s&&Yw(s.uri)?Ts.to(ir(s)):r.isImage?new o7(r.mimeType??"image/png",()=>Promise.resolve(new Uint8Array(Object.values(s))),r.references&&y.isUri(r.references[0].reference)?r.references[0].reference:void 0):s,modelDescription:r.modelDescription,isReadonly:i?r.isMarkedReadonly:void 0}}e.to=t})(qd||(qd={}));var Gd;(function(e){function t(r){if(r.value)throw new Error("Invalid tool reference");return{name:r.id,range:r.range&&[r.range.start,r.range.endExclusive]}}e.to=t})(Gd||(Gd={}));var I1;(function(e){function t(r,i,s){return{id:r.id,label:r.label,fullName:r.fullName,icon:r.icon?.id,value:r.values[0].value,insertText:r.insertText,detail:r.detail,documentation:r.documentation,command:i.toInternal(r.command,s)}}e.from=t})(I1||(I1={}));var aa;(function(e){function t(s){return{errorDetails:s.errorDetails,metadata:i(s.metadata),nextQuestion:s.nextQuestion}}e.to=t;function r(s){return{errorDetails:s.errorDetails,metadata:s.metadata,nextQuestion:s.nextQuestion}}e.from=r;function i(s){return ho(s,n=>{if(n.$mid===20)return new Qm(ho(n.content,i));if(n.$mid===21)return new ar(n.value);if(n.$mid===22)return new Go(n.value)})}})(aa||(aa={}));var C1;(function(e){function t(r,i,s){if(i.action.kind==="vote")return;const n=aa.to(r);if(i.action.kind==="command"){const o=i.action.commandButton.command;return{action:{kind:"command",commandButton:{command:s.fromInternal(o)??{command:o.id,title:o.title}}},result:n}}else return i.action.kind==="followUp"?{action:{kind:"followUp",followup:ul.to(i.action.followup)},result:n}:i.action.kind==="inlineChat"?{action:{kind:"editor",accepted:i.action.action==="accepted"},result:n}:i.action.kind==="chatEditingSessionAction"?{action:{kind:"chatEditingSessionAction",outcome:new Map([["accepted",An.Accepted],["rejected",An.Rejected],["saved",An.Saved]]).get(i.action.outcome)??An.Rejected,uri:y.revive(i.action.uri),hasRemainingEdits:i.action.hasRemainingEdits},result:n}:{action:i.action,result:n}}e.to=t})(C1||(C1={}));var Qd;(function(e){function t(r,i,s){return"terminalCommand"in r?{terminalCommand:r.terminalCommand,shouldExecute:r.shouldExecute}:"uri"in r?{uri:r.uri}:i.toInternal(r,s)}e.from=t})(Qd||(Qd={}));var D1;(function(e){function t(r){return{kind:P1.to(r.kind)}}e.to=t})(D1||(D1={}));var P1;(function(e){function t(r){switch(r){case 0:return En.Word;case 1:return En.Line;case 2:return En.Suggest;default:return En.Unknown}}e.to=t})(P1||(P1={}));var A1;(function(e){function t(r,i){return{id:i,label:r.label,description:r.description,canEdit:r.canEdit,collapsibleState:r.collapsibleState||0,contextValue:r.contextValue}}e.from=t})(A1||(A1={}));var T1;(function(e){function t(r){return{name:r.id,description:r.modelDescription,inputSchema:r.inputSchema,tags:r.tags??[]}}e.to=t})(T1||(T1={}));var Jd;(function(e){function t(i){return new Qm(i.content.map(s=>s.kind==="text"?new ar(s.value):new Go(s.value)))}e.to=t;function r(i){return{content:i.content.map(s=>{if(s instanceof ar)return{kind:"text",value:s.value};if(s instanceof Go)return{kind:"promptTsx",value:s.value};throw new Error("Unknown LanguageModelToolResult part type")})}}e.from=r})(Jd||(Jd={}));var Ms=class{constructor(e,t,r){this.uri=e,this.ranges=t,this.previewText=r}},R1=class{constructor(e,t,r){this.uri=e,this.text=t,this.lineNumber=r}},Ji;(function(e){e[e.None=1]="None",e[e.FilesExclude=2]="FilesExclude",e[e.SearchAndFilesExclude=3]="SearchAndFilesExclude"})(Ji||(Ji={}));var Xd;(function(e){e[e.Information=1]="Information",e[e.Warning=2]="Warning"})(Xd||(Xd={}));var l7=2e4,u7="\u27EA ",h7=" characters skipped \u27EB",KD=(u7.length+h7.length+5)*2,zH=_("searchService"),d7;(function(e){e[e.file=0]="file",e[e.text=1]="text",e[e.aiText=2]="aiText"})(d7||(d7={}));var f7;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.aiText=3]="aiText"})(f7||(f7={}));function p7(e){return!!e.rangeLocations&&!!e.previewText}var g7;(function(e){e[e.Normal=0]="Normal",e[e.NewSearchStarted=1]="NewSearchStarted"})(g7||(g7={}));var eP=class{constructor(e,t,r,i){this.rangeLocations=[],this.webviewIndex=i;const s=Array.isArray(t)?t:[t];if(r&&r.matchLines===1&&tP(s)){e=q$(e,r.matchLines);let n="",o=0,a=0;const c=Math.floor(r.charsPerLine/5);for(const l of s){const u=Math.max(l.startColumn-c,0),h=l.startColumn+r.charsPerLine;if(u>a+c+KD){const p=u7+(u-a)+h7;n+=p+e.slice(u,h),o+=u-(a+p.length)}else n+=e.slice(a,h);a=h,this.rangeLocations.push({source:l,preview:new rP(0,l.startColumn-o,l.endColumn-o)})}this.previewText=n}else{const n=Array.isArray(t)?t[0].startLineNumber:t.startLineNumber,o=hp(t,a=>({preview:new m7(a.startLineNumber-n,a.startColumn,a.endLineNumber-n,a.endColumn),source:a}));this.rangeLocations=Array.isArray(o)?o:[o],this.previewText=e}}};function tP(e){const t=e[0].startLineNumber;for(const r of e)if(r.startLineNumber!==t||r.endLineNumber!==t)return!1;return!0}var m7=class{constructor(e,t,r,i){this.startLineNumber=e,this.startColumn=t,this.endLineNumber=r,this.endColumn=i}},rP=class extends m7{constructor(e,t,r){super(e,t,e,r)}},v7;(function(e){e.List="list",e.Tree="tree"})(v7||(v7={}));var w7;(function(e){e.Default="default",e.FileNames="fileNames",e.Type="type",e.Modified="modified",e.CountDescending="countDescending",e.CountAscending="countAscending"})(w7||(w7={}));function iP(e,t=!0){const r=e&&e.files&&e.files.exclude,i=t&&e&&e.search&&e.search.exclude;if(!r&&!i)return;if(!r||!i)return r||i||void 0;let s=Object.create(null);return s=nn(s,Qe(r)),s=nn(s,Qe(i),!0),s}function b7(e,t){return e.excludePattern&&mc(e.excludePattern,t)?!1:e.includePattern||e.usingSearchPaths?e.includePattern&&mc(e.includePattern,t)?!0:e.usingSearchPaths?!!e.folderQueries&&e.folderQueries.some(r=>{const i=r.folder.fsPath;if(Eu(t,i)){const s=_a(i,t);return!r.includePattern||!!mc(r.includePattern,s)}else return!1}):!1:!0}var y7;(function(e){e[e.unknownEncoding=1]="unknownEncoding",e[e.regexParseError=2]="regexParseError",e[e.globParseError=3]="globParseError",e[e.invalidLiteral=4]="invalidLiteral",e[e.rgProcessError=5]="rgProcessError",e[e.other=6]="other",e[e.canceled=7]="canceled"})(y7||(y7={}));function ca(e,t){const r={...e||{},...t||{}};return Object.keys(r).filter(i=>{const s=r[i];return typeof s=="boolean"&&s})}var E7=class{constructor(e,t){this.c=null,this.a=t.excludePattern?.map(i=>({...e.excludePattern||{},...i.pattern||{}}))??[],this.a.length===0&&(this.a=[e.excludePattern||{}]),this.b=this.a.map(i=>$o(i));let r=e.includePattern;t.includePattern&&(r?r={...r,...t.includePattern}:r=t.includePattern),r&&(this.c=$o(r))}d(e,t,r){let i=null;for(const s of this.b){const n=s(e,t,r);if(typeof n=="string"){i=n;break}}return i}matchesExcludesSync(e,t,r){return!!(this.b&&this.d(e,t,r))}includedInQuerySync(e,t,r){return!(this.b&&this.d(e,t,r)||this.c&&!this.c(e,t,r))}includedInQuery(e,t,r){const i=()=>this.c?!!this.c(e,t,r):!0;return Promise.all(this.b.map(s=>{const n=s(e,t,r);return ws(n)?n.then(o=>o?!1:i()):i()})).then(s=>s.some(n=>!!n))}hasSiblingExcludeClauses(){return this.a.reduce((e,t)=>sP(t)||e,!1)}};function sP(e){for(const t in e)if(typeof e[t]!="boolean")return!0;return!1}function nP(e){if(!e)return;let t;return r=>(t||(t=(e()||Promise.resolve([])).then(i=>i?x7(i):{})),t.then(i=>!!i[r]))}function oP(e){if(!e)return;let t;return r=>{if(!t){const i=e();t=i?x7(i):{}}return!!t[r]}}function x7(e){const t={};for(const r of e)t[r]=!0;return t}function k7(e){return e.flatMap(t=>t.patterns.map(r=>t.baseUri?{baseUri:t.baseUri,pattern:r}:r))}var L1={matchLines:100,charsPerLine:1e4};function ml(e,t,r){return new Wa(i=>N1(i,r)).isEqual(e,t)}function aP(e,t,r){return ml(e.uri,t.uri,r)?0:en(e.uri.toString(),t.uri.toString())}function cP(e,t,r){return e.index!==t.index?e.index<t.index?-1:1:ml(e.uri,t.uri,r)?en(e.name,t.name):en(e.uri.toString(),t.uri.toString())}function $7(e,t,r,i){const s=e.slice(0).sort((o,a)=>r(o,a,i)),n=t.slice(0).sort((o,a)=>r(o,a,i));return ek(s,n,(o,a)=>r(o,a,i))}function N1(e,t){const r=t.getCapabilities(e.scheme);return!(r&&r&1024)}var F1=class ew extends yI{static toExtHostWorkspace(t,r,i,s){if(!t)return{workspace:null,added:[],removed:[]};const{id:n,name:o,folders:a,configuration:c,transient:l,isUntitled:u}=t,h=[],p=r;r?a.forEach((E,$)=>{const S=y.revive(E.uri),P=ew.o(i||r,S,s);P?(P.name=E.name,P.index=E.index,h.push(P)):h.push({uri:S,name:E.name,index:$})}):h.push(...a.map(({uri:E,name:$,index:S})=>({uri:y.revive(E),name:$,index:S}))),h.sort((E,$)=>E.index<$.index?-1:1);const f=new ew(n,o,h,!!l,c?y.revive(c):null,!!u,E=>N1(E,s)),{added:m,removed:w}=$7(p?p.workspaceFolders:[],f.workspaceFolders,aP,s);return{workspace:f,added:m,removed:w}}static o(t,r,i){for(let s=0;s<t.folders.length;s++){const n=t.workspaceFolders[s];if(ml(n.uri,r,i))return n}}constructor(t,r,i,s,n,o,a){super(t,i.map(c=>new Fy(c)),s,n,a),this.t=r,this.u=o,this.q=[],this.s=bs.forUris(a,()=>!0),i.forEach(c=>{this.q.push(c),this.s.set(c.uri,c)})}get name(){return this.t}get isUntitled(){return this.u}get workspaceFolders(){return this.q.slice(0)}getWorkspaceFolder(t,r){return r&&this.s.get(t)&&(t=xu(t)),this.s.findSubstr(t)}resolveWorkspaceFolder(t){return this.s.get(t)}},M1=class{constructor(t,r,i,s,n){this.c=new D,this.onDidChangeWorkspace=this.c.event,this.g=new D,this.onDidGrantWorkspaceTrust=this.g.event,this.u=[],this.v=!1,this.w=new Map,this.B=0,this.C=new Ma,this.D=new Map,this.h=s,this.s=i,this.t=n,this.j=new mI,this.k=new pi,this.o=t.getProxy(z.MainThreadWorkspace),this.q=t.getProxy(z.MainThreadMessageService);const o=r.workspace;this.l=o?new F1(o.id,o.name,[],!!o.transient,o.configuration?y.revive(o.configuration):null,!!o.isUntitled,a=>N1(a,i)):void 0}$initializeWorkspace(t,r){this.v=r,this.$acceptWorkspaceData(t),this.k.open()}waitForInitializeCall(){return this.k.wait()}get workspace(){return this.x}get name(){return this.x?this.x.name:void 0}get workspaceFile(){if(this.x&&this.x.configuration)return this.x.isUntitled?y.from({scheme:q.untitled,path:Mi(xu(this.x.configuration))}):this.x.configuration}get x(){return this.n||this.l}getWorkspaceFolders(){if(this.x)return this.x.workspaceFolders.slice(0)}async getWorkspaceFolders2(){if(await this.k.wait(),!!this.x)return this.x.workspaceFolders.slice(0)}updateWorkspaceFolders(t,r,i,...s){const n=[];if(Array.isArray(s)&&s.forEach(u=>{y.isUri(u.uri)&&!n.some(h=>ml(h.uri,u.uri,this.s))&&n.push({uri:u.uri,name:u.name||Hp(u.uri)})}),this.n||[r,i].some(u=>typeof u!="number"||u<0)||i===0&&n.length===0)return!1;const o=this.x?this.x.workspaceFolders:[];if(r+i>o.length)return!1;const a=o.slice(0);a.splice(r,i,...n.map(u=>({uri:u.uri,name:u.name||Hp(u.uri),index:void 0})));for(let u=0;u<a.length;u++){const h=a[u];if(a.some((p,f)=>f!==u&&ml(h.uri,p.uri,this.s)))return!1}a.forEach((u,h)=>u.index=h);const{added:c,removed:l}=$7(o,a,cP,this.s);if(c.length===0&&l.length===0)return!1;if(this.o){const u=t.displayName||t.name;this.o.$updateWorkspaceFolders(u,r,i,n).then(void 0,h=>{this.n=void 0;const p={source:{identifier:t.identifier,label:t.displayName||t.name}};this.q.$showMessage(vI.Error,d(2814,null,u,h.toString()),p,[])})}return this.y(a),!0}getWorkspaceFolder(t,r){if(this.x)return this.x.getWorkspaceFolder(t,r)}async getWorkspaceFolder2(t,r){if(await this.k.wait(),!!this.x)return this.x.getWorkspaceFolder(t,r)}async resolveWorkspaceFolder(t){if(await this.k.wait(),!!this.x)return this.x.resolveWorkspaceFolder(t)}getPath(){if(!this.x)return;const{folders:t}=this.x;if(t.length!==0)return t[0].uri.fsPath}getRelativePath(t,r){let i,s="";if(typeof t=="string"?(i=y.file(t),s=t):typeof t<"u"&&(i=t,s=t.fsPath),!i)return s;const n=this.getWorkspaceFolder(i,!0);if(!n)return s;typeof r>"u"&&this.x&&(r=this.x.folders.length>1);let o=Nb(n.uri,i);return r&&n.name&&(o=`${n.name}/${o}`),o}y(t){this.x&&(this.n=F1.toExtHostWorkspace({id:this.x.id,name:this.x.name,configuration:this.x.configuration,folders:t,isUntitled:this.x.isUntitled},this.x,void 0,this.s).workspace||void 0)}$acceptWorkspaceData(t){const{workspace:r,added:i,removed:s}=F1.toExtHostWorkspace(t,this.l,this.n,this.s);this.l=r||void 0,this.n=void 0,this.c.fire(Object.freeze({added:i,removed:s}))}findFiles(t,r,i,s,n=st.None){this.h.trace(`extHostWorkspace#findFiles: fileSearch, extension: ${s.value}, entryPoint: findFiles`);let o="",a=!0;return r===null?a=!1:r!==void 0&&(typeof r=="string"?o=r:o=r.pattern),this.z({type:"include",value:t},{exclude:[o],maxResults:i,useExcludeSettings:a?Ji.FilesExclude:Ji.None,useIgnoreFiles:{local:!1}},n)}findFiles2(t,r={},i,s=st.None){return this.h.trace(`extHostWorkspace#findFiles2New: fileSearch, extension: ${i.value}, entryPoint: findFiles2New`),this.z({type:"filePatterns",value:t},r,s)}async z(t,r,i){if(i.isCancellationRequested)return Promise.resolve([]);const s=t.type==="include"?[t.value]:t.value??[];if(!Array.isArray(s))throw console.error("Invalid file pattern provided",s),new Error(`Invalid file pattern provided ${JSON.stringify(s)}`);const n=s.map(o=>{const a=S7(r.exclude),c={ignoreSymlinks:typeof r.followSymlinks=="boolean"?!r.followSymlinks:void 0,disregardIgnoreFiles:typeof r.useIgnoreFiles?.local=="boolean"?!r.useIgnoreFiles.local:void 0,disregardGlobalIgnoreFiles:typeof r.useIgnoreFiles?.global=="boolean"?!r.useIgnoreFiles.global:void 0,disregardParentIgnoreFiles:typeof r.useIgnoreFiles?.parent=="boolean"?!r.useIgnoreFiles.parent:void 0,disregardExcludeSettings:r.useExcludeSettings!==void 0&&r.useExcludeSettings===Ji.None,disregardSearchExcludeSettings:r.useExcludeSettings!==void 0&&r.useExcludeSettings!==Ji.SearchAndFilesExclude,maxResults:r.maxResults,excludePattern:a.length>0?a:void 0,_reason:"startFileSearch",shouldGlobSearch:t.type==="include"?void 0:!0},l=Yd($r.from(o)),u=l?.folder;return t.type==="include"?c.includePattern=l?.pattern:c.filePattern=l?.pattern,{folder:u,options:c}});return this.A(n,i)}async A(t,r){return(await Promise.all(t?.map(s=>this.o.$startFileSearch(s.folder??null,s.options,r).then(n=>Array.isArray(n)?n.map(o=>y.revive(o)):[]))??[])).flat()}findTextInFiles2(t,r,i,s=st.None){this.h.trace(`extHostWorkspace#findTextInFiles2: textSearch, extension: ${i.value}, entryPoint: findTextInFiles2`);const n=p=>{if(!r)return{folder:void 0,options:{}};const f=p?Yd($r.from(p)):void 0,m=r.exclude?S7(r.exclude):void 0;return{options:{ignoreSymlinks:typeof r.followSymlinks=="boolean"?!r.followSymlinks:void 0,disregardIgnoreFiles:typeof r.useIgnoreFiles=="boolean"?!r.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof r.useIgnoreFiles?.global=="boolean"?!r.useIgnoreFiles?.global:void 0,disregardParentIgnoreFiles:typeof r.useIgnoreFiles?.parent=="boolean"?!r.useIgnoreFiles?.parent:void 0,disregardExcludeSettings:r.useExcludeSettings!==void 0&&r.useExcludeSettings===Ji.None,disregardSearchExcludeSettings:r.useExcludeSettings!==void 0&&r.useExcludeSettings!==Ji.SearchAndFilesExclude,fileEncoding:r.encoding,maxResults:r.maxResults,previewOptions:r.previewOptions?{matchLines:r.previewOptions?.numMatchLines??100,charsPerLine:r.previewOptions?.charsPerLine??1e4}:void 0,surroundingContext:r.surroundingContext,includePattern:f?.pattern,excludePattern:m},folder:f?.folder}},a=(r?.include?.map(p=>n(p))??[n(void 0)]).filter(p=>!!p),c=new me,l=c.add(new D),u=this.findTextInFilesBase(t,a,(p,f)=>l.fire({result:p,uri:f}),s);return{results:new qa(async p=>{c.add(l.event(f=>{const m=f.result,w=f.uri;p7(m)?p.emitOne(new Ms(w,m.rangeLocations.map(E=>({previewRange:new we(E.preview.startLineNumber,E.preview.startColumn,E.preview.endLineNumber,E.preview.endColumn),sourceRange:new we(E.source.startLineNumber,E.source.startColumn,E.source.endLineNumber,E.source.endColumn)})),m.previewText)):p.emitOne(new R1(w,m.text,m.lineNumber))})),await u}),complete:u.then(p=>(c.dispose(),{limitHit:p?.limitHit??!1}))}}async findTextInFilesBase(t,r,i,s=st.None){const n=this.j.getNext();let o=!1;if(s.onCancellationRequested(a=>{o=!0}),this.u[n]=a=>{if(o)return;const c=y.revive(a.resource);a.results.forEach(l=>{const u=ir(l);i(u,c)})},s.isCancellationRequested)return{};try{const a=await Promise.all(r?.map(c=>this.o.$startTextSearch(t,c.folder??null,c.options,n,s)||{})??[]);return delete this.u[n],a.reduce((c,l)=>({limitHit:c?.limitHit||(l?.limitHit??!1),message:[c?.message??[],l?.message??[]].flat()}),{})??{limitHit:!1}}catch(a){throw delete this.u[n],a}}async findTextInFiles(t,r,i,s,n=st.None){this.h.trace(`extHostWorkspace#findTextInFiles: textSearch, extension: ${s.value}, entryPoint: findTextInFiles`);const o=typeof r.previewOptions>"u"?{matchLines:100,charsPerLine:1e4}:r.previewOptions,a=Yd($r.from(r.include)),c=typeof r.exclude=="string"?r.exclude:r.exclude?r.exclude.pattern:void 0,l={ignoreSymlinks:typeof r.followSymlinks=="boolean"?!r.followSymlinks:void 0,disregardIgnoreFiles:typeof r.useIgnoreFiles=="boolean"?!r.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof r.useGlobalIgnoreFiles=="boolean"?!r.useGlobalIgnoreFiles:void 0,disregardParentIgnoreFiles:typeof r.useParentIgnoreFiles=="boolean"?!r.useParentIgnoreFiles:void 0,disregardExcludeSettings:typeof r.useDefaultExcludes=="boolean"?!r.useDefaultExcludes:!0,disregardSearchExcludeSettings:typeof r.useSearchExclude=="boolean"?!r.useSearchExclude:!0,fileEncoding:r.encoding,maxResults:r.maxResults,previewOptions:o,surroundingContext:r.afterContext,includePattern:a?.pattern,excludePattern:c?[{pattern:c}]:void 0},u=(h,p)=>{p7(h)?i({uri:p,preview:{text:h.previewText,matches:hp(h.rangeLocations,f=>new we(f.preview.startLineNumber,f.preview.startColumn,f.preview.endLineNumber,f.preview.endColumn))},ranges:hp(h.rangeLocations,f=>new we(f.source.startLineNumber,f.source.startColumn,f.source.endLineNumber,f.source.endColumn))}):i({uri:p,text:h.text,lineNumber:h.lineNumber})};return this.findTextInFilesBase(t,[{options:l,folder:a?.folder}],u,n)}$handleTextSearchResult(t,r){this.u[r]?.(t)}async save(t){const r=await this.o.$save(t,{saveAs:!1});return y.revive(r)}async saveAs(t){const r=await this.o.$save(t,{saveAs:!0});return y.revive(r)}saveAll(t){return this.o.$saveAll(t)}resolveProxy(t){return this.o.$resolveProxy(t)}lookupAuthorization(t){return this.o.$lookupAuthorization(t)}lookupKerberosAuthorization(t){return this.o.$lookupKerberosAuthorization(t)}loadCertificates(){return this.o.$loadCertificates()}get trusted(){return this.v}requestWorkspaceTrust(t){return this.o.$requestWorkspaceTrust(t)}$onDidGrantWorkspaceTrust(){this.v||(this.v=!0,this.g.fire())}registerEditSessionIdentityProvider(t,r){if(this.w.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.w.set(t,r);const i=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerEditSessionIdentityProvider(s,i),ce(()=>{this.w.delete(t),this.o.$unregisterEditSessionIdentityProvider(s)})}async $getEditSessionIdentifier(t,r){this.h.info("Getting edit session identifier for workspaceFolder",t);const i=await this.resolveWorkspaceFolder(y.revive(t));if(!i){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",i);const s=this.w.get(i.uri.scheme);if(this.h.info(`Provider for scheme ${i.uri.scheme} is defined: `,!!s),!s)return;const n=await s.provideEditSessionIdentity(i,r);if(this.h.info("Provider returned edit session identifier: ",n),!!n)return n}async $provideEditSessionIdentityMatch(t,r,i,s){this.h.info("Getting edit session identifier for workspaceFolder",t);const n=await this.resolveWorkspaceFolder(y.revive(t));if(!n){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",n);const o=this.w.get(n.uri.scheme);if(this.h.info(`Provider for scheme ${n.uri.scheme} is defined: `,!!o),!o)return;const a=await o.provideEditSessionIdentityMatch?.(r,i,s);if(this.h.info("Provider returned edit session identifier match result: ",a),!!a)return a}getOnWillCreateEditSessionIdentityEvent(t){return(r,i,s)=>{const n=function(a){r.call(i,a)};return n.extension=t,this.C.event(n,void 0,s)}}async $onWillCreateEditSessionIdentity(t,r,i){const s=await this.resolveWorkspaceFolder(y.revive(t));if(s===void 0)throw new Error("Unable to resolve workspace folder");await this.C.fireAsync({workspaceFolder:s},r,async(n,o)=>{const a=Date.now();await Promise.resolve(n),Date.now()-a>i&&this.h.warn("SLOW edit session create-participant",o.extension.identifier)}),r.isCancellationRequested}registerCanonicalUriProvider(t,r){if(this.D.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.D.set(t,r);const i=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerCanonicalUriProvider(s,i),ce(()=>{this.D.delete(t),this.o.$unregisterCanonicalUriProvider(s)})}async provideCanonicalUri(t,r,i){const s=this.D.get(t.scheme);if(!s)return;const n=await s.provideCanonicalUri?.(y.revive(t),r,i);if(n)return n}async $provideCanonicalUri(t,r,i){return this.provideCanonicalUri(y.revive(t),{targetScheme:r},i)}};M1=__decorate([__param(0,Me),__param(1,jt),__param(2,fo),__param(3,He),__param(4,Iu)],M1);var Xi=_("IExtHostWorkspace");function Yd(e){let t,r;if(e)return typeof e=="string"?t=e:(t=e.pattern,r=y.revive(e.baseUri)),{pattern:t,folder:r}}function S7(e){return(e?.map(t=>{if(typeof t=="string")return t===""?void 0:{pattern:t,uri:void 0};{const r=Yd(t);return r?{pattern:r.pattern,uri:r.folder}:void 0}})??[]).filter(t=>!!t)}var I7;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(I7||(I7={}));var C7;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(C7||(C7={}));var D7;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(D7||(D7={}));var O1;(function(e){e.DEFAULT={allowTrailingComma:!0}})(O1||(O1={}));function lP(e,t=!1){let r=0;const i=e.length;let s="",n=0,o=16,a=0;function c(w){let E=0,$=0;for(;E<w;){const S=e.charCodeAt(r);if(S>=48&&S<=57)$=$*16+S-48;else if(S>=65&&S<=70)$=$*16+S-65+10;else if(S>=97&&S<=102)$=$*16+S-97+10;else break;r++,E++}return E<w&&($=-1),$}function l(w){r=w,s="",n=0,o=16,a=0}function u(){const w=r;if(e.charCodeAt(r)===48)r++;else for(r++;r<e.length&&la(e.charCodeAt(r));)r++;if(r<e.length&&e.charCodeAt(r)===46)if(r++,r<e.length&&la(e.charCodeAt(r)))for(r++;r<e.length&&la(e.charCodeAt(r));)r++;else return a=3,e.substring(w,r);let E=r;if(r<e.length&&(e.charCodeAt(r)===69||e.charCodeAt(r)===101))if(r++,(r<e.length&&e.charCodeAt(r)===43||e.charCodeAt(r)===45)&&r++,r<e.length&&la(e.charCodeAt(r))){for(r++;r<e.length&&la(e.charCodeAt(r));)r++;E=r}else a=3;return e.substring(w,E)}function h(){let w="",E=r;for(;;){if(r>=i){w+=e.substring(E,r),a=2;break}const $=e.charCodeAt(r);if($===34){w+=e.substring(E,r),r++;break}if($===92){if(w+=e.substring(E,r),r++,r>=i){a=2;break}switch(e.charCodeAt(r++)){case 34:w+='"';break;case 92:w+="\\";break;case 47:w+="/";break;case 98:w+="\b";break;case 102:w+="\f";break;case 110:w+=`
`;break;case 114:w+="\r";break;case 116:w+="	";break;case 117:{const P=c(4);P>=0?w+=String.fromCharCode(P):a=4;break}default:a=5}E=r;continue}if($>=0&&$<=31)if(Zd($)){w+=e.substring(E,r),a=2;break}else a=6;r++}return w}function p(){if(s="",a=0,n=r,r>=i)return n=i,o=17;let w=e.charCodeAt(r);if(U1(w)){do r++,s+=String.fromCharCode(w),w=e.charCodeAt(r);while(U1(w));return o=15}if(Zd(w))return r++,s+=String.fromCharCode(w),w===13&&e.charCodeAt(r)===10&&(r++,s+=`
`),o=14;switch(w){case 123:return r++,o=1;case 125:return r++,o=2;case 91:return r++,o=3;case 93:return r++,o=4;case 58:return r++,o=6;case 44:return r++,o=5;case 34:return r++,s=h(),o=10;case 47:{const E=r-1;if(e.charCodeAt(r+1)===47){for(r+=2;r<i&&!Zd(e.charCodeAt(r));)r++;return s=e.substring(E,r),o=12}if(e.charCodeAt(r+1)===42){r+=2;const $=i-1;let S=!1;for(;r<$;){if(e.charCodeAt(r)===42&&e.charCodeAt(r+1)===47){r+=2,S=!0;break}r++}return S||(r++,a=1),s=e.substring(E,r),o=13}return s+=String.fromCharCode(w),r++,o=16}case 45:if(s+=String.fromCharCode(w),r++,r===i||!la(e.charCodeAt(r)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return s+=u(),o=11;default:for(;r<i&&f(w);)r++,w=e.charCodeAt(r);if(n!==r){switch(s=e.substring(n,r),s){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return s+=String.fromCharCode(w),r++,o=16}}function f(w){if(U1(w)||Zd(w))return!1;switch(w){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function m(){let w;do w=p();while(w>=12&&w<=15);return w}return{setPosition:l,getPosition:()=>r,scan:t?m:p,getToken:()=>o,getTokenValue:()=>s,getTokenOffset:()=>n,getTokenLength:()=>r-n,getTokenError:()=>a}}function U1(e){return e===32||e===9||e===11||e===12||e===160||e===5760||e>=8192&&e<=8203||e===8239||e===8287||e===12288||e===65279}function Zd(e){return e===10||e===13||e===8232||e===8233}function la(e){return e>=48&&e<=57}var P7;(function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"})(P7||(P7={}));function uP(e,t,r=O1.DEFAULT){const i=lP(e,!1);function s(X){return X?()=>X(i.getTokenOffset(),i.getTokenLength()):()=>!0}function n(X){return X?Se=>X(Se,i.getTokenOffset(),i.getTokenLength()):()=>!0}const o=s(t.onObjectBegin),a=n(t.onObjectProperty),c=s(t.onObjectEnd),l=s(t.onArrayBegin),u=s(t.onArrayEnd),h=n(t.onLiteralValue),p=n(t.onSeparator),f=s(t.onComment),m=n(t.onError),w=r&&r.disallowComments,E=r&&r.allowTrailingComma;function $(){for(;;){const X=i.scan();switch(i.getTokenError()){case 4:S(14);break;case 5:S(15);break;case 3:S(13);break;case 1:w||S(11);break;case 2:S(12);break;case 6:S(16);break}switch(X){case 12:case 13:w?S(10):f();break;case 16:S(1);break;case 15:case 14:break;default:return X}}}function S(X,Se=[],de=[]){if(m(X),Se.length+de.length>0){let et=i.getToken();for(;et!==17;){if(Se.indexOf(et)!==-1){$();break}else if(de.indexOf(et)!==-1)break;et=$()}}}function P(X){const Se=i.getTokenValue();return X?h(Se):a(Se),$(),!0}function O(){switch(i.getToken()){case 11:{let X=0;try{X=JSON.parse(i.getTokenValue()),typeof X!="number"&&(S(2),X=0)}catch{S(2)}h(X);break}case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return $(),!0}function F(){return i.getToken()!==10?(S(3,[],[2,5]),!1):(P(!1),i.getToken()===6?(p(":"),$(),J()||S(4,[],[2,5])):S(5,[],[2,5]),!0)}function W(){o(),$();let X=!1;for(;i.getToken()!==2&&i.getToken()!==17;){if(i.getToken()===5){if(X||S(4,[],[]),p(","),$(),i.getToken()===2&&E)break}else X&&S(6,[],[]);F()||S(4,[],[2,5]),X=!0}return c(),i.getToken()!==2?S(7,[2],[]):$(),!0}function Z(){l(),$();let X=!1;for(;i.getToken()!==4&&i.getToken()!==17;){if(i.getToken()===5){if(X||S(4,[],[]),p(","),$(),i.getToken()===4&&E)break}else X&&S(6,[],[]);J()||S(4,[],[4,5]),X=!0}return u(),i.getToken()!==4?S(8,[4],[]):$(),!0}function J(){switch(i.getToken()){case 3:return Z();case 1:return W();case 10:return P(!0);default:return O()}}return $(),i.getToken()===17?r.allowEmptyContent?!0:(S(4,[],[]),!1):J()?(i.getToken()!==17&&S(9,[],[]),!0):(S(4,[],[]),!1)}function vl(e){return Object.isFrozen(e)?e:Dy(e)}var ua=class Vn{static createEmptyModel(t){return new Vn({},[],[],void 0,t)}constructor(t,r,i,s,n){this.b=t,this.c=r,this.d=i,this.raw=s,this.f=n,this.a=new Map}get rawConfiguration(){if(!this.g)if(this.raw){const t=(Array.isArray(this.raw)?this.raw:[this.raw]).map(r=>{if(r instanceof Vn)return r;const i=new hP("",this.f);return i.parseRaw(r),i.configurationModel});this.g=t.reduce((r,i)=>i===r?i:r.merge(i),t[0])}else this.g=this;return this.g}get contents(){return this.b}get overrides(){return this.d}get keys(){return this.c}isEmpty(){return this.c.length===0&&Object.keys(this.b).length===0&&this.d.length===0}getValue(t){return t?Vu(this.contents,t):this.contents}inspect(t,r){const i=this;return{get value(){return vl(i.rawConfiguration.getValue(t))},get override(){return r?vl(i.rawConfiguration.getOverrideValue(t,r)):void 0},get merged(){return vl(r?i.rawConfiguration.override(r).getValue(t):i.rawConfiguration.getValue(t))},get overrides(){const s=[];for(const{contents:n,identifiers:o,keys:a}of i.rawConfiguration.overrides){const c=new Vn(n,a,[],void 0,i.f).getValue(t);c!==void 0&&s.push({identifiers:o,value:c})}return s.length?vl(s):void 0}}}getOverrideValue(t,r){const i=this.j(r);return i?t?Vu(i,t):i:void 0}getKeysForOverrideIdentifier(t){const r=[];for(const i of this.overrides)i.identifiers.includes(t)&&r.push(...i.keys);return Zn(r)}getAllOverrideIdentifiers(){const t=[];for(const r of this.overrides)t.push(...r.identifiers);return Zn(t)}override(t){let r=this.a.get(t);return r||(r=this.h(t),this.a.set(t,r)),r}merge(...t){const r=Qe(this.contents),i=Qe(this.overrides),s=[...this.keys],n=this.raw?Array.isArray(this.raw)?[...this.raw]:[this.raw]:[this];for(const o of t)if(n.push(...o.raw?Array.isArray(o.raw)?o.raw:[o.raw]:[o]),!o.isEmpty()){this.i(r,o.contents);for(const a of o.overrides){const[c]=i.filter(l=>Ri(l.identifiers,a.identifiers));c?(this.i(c.contents,a.contents),c.keys.push(...a.keys),c.keys=Zn(c.keys)):i.push(Qe(a))}for(const a of o.keys)s.indexOf(a)===-1&&s.push(a)}return new Vn(r,s,i,!n.length||n.every(o=>o instanceof Vn)?void 0:n,this.f)}h(t){const r=this.j(t);if(!r||typeof r!="object"||!Object.keys(r).length)return this;const i={};for(const s of Zn([...Object.keys(this.contents),...Object.keys(r)])){let n=this.contents[s];const o=r[s];o&&(typeof n=="object"&&typeof o=="object"?(n=Qe(n),this.i(n,o)):n=o),i[s]=n}return new Vn(i,this.keys,this.overrides,void 0,this.f)}i(t,r){for(const i of Object.keys(r)){if(i in t&&gt(t[i])&&gt(r[i])){this.i(t[i],r[i]);continue}t[i]=Qe(r[i])}}j(t){let r=null,i=null;const s=n=>{n&&(i?this.i(i,n):i=Qe(n))};for(const n of this.overrides)n.identifiers.length===1&&n.identifiers[0]===t?r=n.contents:n.identifiers.includes(t)&&s(n.contents);return s(r),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(t,r){this.k(t,r,!0)}setValue(t,r){this.k(t,r,!1)}removeValue(t){const r=this.keys.indexOf(t);r!==-1&&(this.keys.splice(r,1),c2(this.contents,t),mi.test(t)&&this.overrides.splice(this.overrides.findIndex(i=>Ri(i.identifiers,fc(t))),1))}k(t,r,i){if(w5(this.contents,t,r,s=>this.f.error(s)),i=i||this.keys.indexOf(t)===-1,i&&this.keys.push(t),mi.test(t)){const s=fc(t),n={identifiers:s,keys:Object.keys(this.contents[t]),contents:Ng(this.contents[t],a=>this.f.error(a))},o=this.overrides.findIndex(a=>Ri(a.identifiers,s));o!==-1?this.overrides[o]=n:this.overrides.push(n)}}},hP=class{constructor(e,t){this.f=e,this.g=t,this.a=null,this.b=null,this.c=[],this.d=[]}get configurationModel(){return this.b||ua.createEmptyModel(this.g)}get restrictedConfigurations(){return this.c}get errors(){return this.d}parse(e,t){if(!yt(e)){const r=this.h(e);this.parseRaw(r,t)}}reparse(e){this.a&&this.parseRaw(this.a,e)}parseRaw(e,t){this.a=e;const{contents:r,keys:i,overrides:s,restricted:n,hasExcludedProperties:o}=this.i(e,t);this.b=new ua(r,i,s,o?[e]:void 0,this.g),this.c=n||[]}h(e){let t={},r=null,i=[];const s=[],n=[];function o(c){Array.isArray(i)?i.push(c):r!==null&&(i[r]=c)}const a={onObjectBegin:()=>{const c={};o(c),s.push(i),i=c,r=null},onObjectProperty:c=>{r=c},onObjectEnd:()=>{i=s.pop()},onArrayBegin:()=>{const c=[];o(c),s.push(i),i=c,r=null},onArrayEnd:()=>{i=s.pop()},onLiteralValue:o,onError:(c,l,u)=>{n.push({error:c,offset:l,length:u})}};if(e)try{uP(e,a),t=i[0]||{}}catch(c){this.g.error(`Error while parsing settings file ${this.f}: ${c}`),this.d=[c]}return t}i(e,t){const r=Bt.as(xo.Configuration).getConfigurationProperties(),i=this.j(e,r,!0,t);e=i.raw;const s=Ng(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`)),n=Object.keys(e),o=this.m(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`));return{contents:s,keys:n,overrides:o,restricted:i.restricted,hasExcludedProperties:i.hasExcludedProperties}}j(e,t,r,i){let s=!1;if(!i?.scopes&&!i?.skipRestricted&&!i?.exclude?.length)return{raw:e,restricted:[],hasExcludedProperties:s};const n={},o=[];for(const a in e)if(mi.test(a)&&r){const c=this.j(e[a],t,!1,i);n[a]=c.raw,s=s||c.hasExcludedProperties,o.push(...c.restricted)}else{const c=t[a];c?.restricted&&o.push(a),this.l(a,c,i)?n[a]=e[a]:s=!0}return{raw:n,restricted:o,hasExcludedProperties:s}}l(e,t,r){if(r.exclude?.includes(e))return!1;if(r.include?.includes(e))return!0;if(r.skipRestricted&&t?.restricted||r.skipUnregistered&&!t)return!1;const i=t?typeof t.scope<"u"?t.scope:4:void 0;return i===void 0||r.scopes===void 0?!0:r.scopes.includes(i)}m(e,t){const r=[];for(const i of Object.keys(e))if(mi.test(i)){const s={};for(const n in e[i])s[n]=e[i][n];r.push({identifiers:fc(i),keys:Object.keys(s),contents:Ng(s,t)})}return r}},dP=class{constructor(e,t,r,i,s,n,o,a,c,l,u,h,p){this.a=e,this.b=t,this.c=r,this.overrideIdentifiers=i,this.d=s,this.f=n,this.g=o,this.h=a,this.i=c,this.j=l,this.k=u,this.l=h,this.m=p}get value(){return vl(this.c)}n(e){return e?.value!==void 0||e?.override!==void 0||e?.overrides!==void 0?e:void 0}get q(){return this.p||(this.p=this.d.inspect(this.a,this.b.overrideIdentifier)),this.p}get defaultValue(){return this.q.merged}get default(){return this.n(this.q)}get s(){return this.r===void 0&&(this.r=this.f?this.f.inspect(this.a):null),this.r}get policyValue(){return this.s?.merged}get policy(){return this.s?.value!==void 0?{value:this.s.value}:void 0}get u(){return this.t===void 0&&(this.t=this.g?this.g.inspect(this.a):null),this.t}get applicationValue(){return this.u?.merged}get application(){return this.n(this.u)}get w(){return this.v||(this.v=this.h.inspect(this.a,this.b.overrideIdentifier)),this.v}get userValue(){return this.w.merged}get user(){return this.n(this.w)}get y(){return this.x||(this.x=this.i.inspect(this.a,this.b.overrideIdentifier)),this.x}get userLocalValue(){return this.y.merged}get userLocal(){return this.n(this.y)}get A(){return this.z||(this.z=this.j.inspect(this.a,this.b.overrideIdentifier)),this.z}get userRemoteValue(){return this.A.merged}get userRemote(){return this.n(this.A)}get D(){return this.B===void 0&&(this.B=this.k?this.k.inspect(this.a,this.b.overrideIdentifier):null),this.B}get workspaceValue(){return this.D?.merged}get workspace(){return this.n(this.D)}get F(){return this.E===void 0&&(this.E=this.l?this.l.inspect(this.a,this.b.overrideIdentifier):null),this.E}get workspaceFolderValue(){return this.F?.merged}get workspaceFolder(){return this.n(this.F)}get H(){return this.G===void 0&&(this.G=this.m.inspect(this.a,this.b.overrideIdentifier)),this.G}get memoryValue(){return this.H.merged}get memory(){return this.n(this.H)}},H1=class Kx{constructor(t,r,i,s,n,o,a,c,l,u){this.j=t,this.l=r,this.m=i,this.n=s,this.p=n,this.q=o,this.r=a,this.s=c,this.t=l,this.u=u,this.h=null,this.i=new Nt,this.v=null}getValue(t,r,i){return this.w(r,i).getValue(t)}updateValue(t,r,i={}){let s;i.resource?(s=this.t.get(i.resource),s||(s=ua.createEmptyModel(this.u),this.t.set(i.resource,s))):s=this.s,r===void 0?s.removeValue(t):s.setValue(t,r),i.resource||(this.h=null)}inspect(t,r,i){const s=this.w(r,i),n=this.A(r.resource,i),o=r.resource?this.t.get(r.resource)||this.s:this.s,a=new Set;for(const c of s.overrides)for(const l of c.identifiers)s.getOverrideValue(t,l)!==void 0&&a.add(l);return new dP(t,r,s.getValue(t),a.size?[...a]:void 0,this.j,this.l.isEmpty()?void 0:this.l,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this.q:void 0,n||void 0,o)}keys(t){const r=this.A(void 0,t);return{default:this.j.keys.slice(0),user:this.userConfiguration.keys.slice(0),workspace:this.q.keys.slice(0),workspaceFolder:r?r.keys.slice(0):[]}}updateDefaultConfiguration(t){this.j=t,this.h=null,this.i.clear()}updatePolicyConfiguration(t){this.l=t}updateApplicationConfiguration(t){this.m=t,this.h=null,this.i.clear()}updateLocalUserConfiguration(t){this.n=t,this.v=null,this.h=null,this.i.clear()}updateRemoteUserConfiguration(t){this.p=t,this.v=null,this.h=null,this.i.clear()}updateWorkspaceConfiguration(t){this.q=t,this.h=null,this.i.clear()}updateFolderConfiguration(t,r){this.r.set(t,r),this.i.delete(t)}deleteFolderConfiguration(t){this.folderConfigurations.delete(t),this.i.delete(t)}compareAndUpdateDefaultConfiguration(t,r){const i=[];if(!r){const{added:s,updated:n,removed:o}=Os(this.j,t);r=[...s,...n,...o]}for(const s of r)for(const n of fc(s)){const o=this.j.getKeysForOverrideIdentifier(n),a=t.getKeysForOverrideIdentifier(n),c=[...a.filter(l=>o.indexOf(l)===-1),...o.filter(l=>a.indexOf(l)===-1),...o.filter(l=>!Qr(this.j.override(n).getValue(l),t.override(n).getValue(l)))];i.push([n,c])}return this.updateDefaultConfiguration(t),{keys:r,overrides:i}}compareAndUpdatePolicyConfiguration(t){const{added:r,updated:i,removed:s}=Os(this.l,t),n=[...r,...i,...s];return n.length&&this.updatePolicyConfiguration(t),{keys:n,overrides:[]}}compareAndUpdateApplicationConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=Os(this.applicationConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateApplicationConfiguration(t),{keys:o,overrides:n}}compareAndUpdateLocalUserConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=Os(this.localUserConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateLocalUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateRemoteUserConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=Os(this.remoteUserConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateRemoteUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateWorkspaceConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=Os(this.workspaceConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateWorkspaceConfiguration(t),{keys:o,overrides:n}}compareAndUpdateFolderConfiguration(t,r){const i=this.folderConfigurations.get(t),{added:s,updated:n,removed:o,overrides:a}=Os(i,r),c=[...s,...n,...o];return(c.length||!i)&&this.updateFolderConfiguration(t,r),{keys:c,overrides:a}}compareAndDeleteFolderConfiguration(t){const r=this.folderConfigurations.get(t);if(!r)throw new Error("Unknown folder");this.deleteFolderConfiguration(t);const{added:i,updated:s,removed:n,overrides:o}=Os(r,void 0);return{keys:[...i,...s,...n],overrides:o}}get defaults(){return this.j}get applicationConfiguration(){return this.m}get userConfiguration(){if(!this.v)if(this.p.isEmpty())this.v=this.n;else{const t=this.n.merge(this.p);this.v=new ua(t.contents,t.keys,t.overrides,void 0,this.u)}return this.v}get localUserConfiguration(){return this.n}get remoteUserConfiguration(){return this.p}get workspaceConfiguration(){return this.q}get folderConfigurations(){return this.r}w(t,r){let i=this.x(t,r);if(t.overrideIdentifier&&(i=i.override(t.overrideIdentifier)),!this.l.isEmpty()){i=i.merge();for(const s of this.l.keys)i.setValue(s,this.l.getValue(s))}return i}x({resource:t},r){let i=this.y();if(r&&t){const s=r.getFolder(t);s&&(i=this.z(s.uri)||i);const n=this.t.get(t);n&&(i=i.merge(n))}return i}y(){return this.h||(this.h=this.j.merge(this.applicationConfiguration,this.userConfiguration,this.q,this.s)),this.h}z(t){let r=this.i.get(t);if(!r){const i=this.y(),s=this.r.get(t);s?(r=i.merge(s),this.i.set(t,r)):r=i}return r}A(t,r){if(r&&t){const i=r.getFolder(t);if(i)return this.r.get(i.uri)}}toData(){return{defaults:{contents:this.j.contents,overrides:this.j.overrides,keys:this.j.keys},policy:{contents:this.l.contents,overrides:this.l.overrides,keys:this.l.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys,raw:Array.isArray(this.applicationConfiguration.raw)?void 0:this.applicationConfiguration.raw},userLocal:{contents:this.localUserConfiguration.contents,overrides:this.localUserConfiguration.overrides,keys:this.localUserConfiguration.keys,raw:Array.isArray(this.localUserConfiguration.raw)?void 0:this.localUserConfiguration.raw},userRemote:{contents:this.remoteUserConfiguration.contents,overrides:this.remoteUserConfiguration.overrides,keys:this.remoteUserConfiguration.keys,raw:Array.isArray(this.remoteUserConfiguration.raw)?void 0:this.remoteUserConfiguration.raw},workspace:{contents:this.q.contents,overrides:this.q.overrides,keys:this.q.keys},folders:[...this.r.keys()].reduce((t,r)=>{const{contents:i,overrides:s,keys:n}=this.r.get(r);return t.push([r,{contents:i,overrides:s,keys:n}]),t},[])}}allKeys(){const t=new Set;return this.j.keys.forEach(r=>t.add(r)),this.userConfiguration.keys.forEach(r=>t.add(r)),this.q.keys.forEach(r=>t.add(r)),this.r.forEach(r=>r.keys.forEach(i=>t.add(i))),[...t.values()]}B(){const t=new Set;return this.j.getAllOverrideIdentifiers().forEach(r=>t.add(r)),this.userConfiguration.getAllOverrideIdentifiers().forEach(r=>t.add(r)),this.q.getAllOverrideIdentifiers().forEach(r=>t.add(r)),this.r.forEach(r=>r.getAllOverrideIdentifiers().forEach(i=>t.add(i))),[...t.values()]}D(t){const r=new Set;return this.j.getKeysForOverrideIdentifier(t).forEach(i=>r.add(i)),this.userConfiguration.getKeysForOverrideIdentifier(t).forEach(i=>r.add(i)),this.q.getKeysForOverrideIdentifier(t).forEach(i=>r.add(i)),this.r.forEach(i=>i.getKeysForOverrideIdentifier(t).forEach(s=>r.add(s))),[...r.values()]}static parse(t,r){const i=this.E(t.defaults,r),s=this.E(t.policy,r),n=this.E(t.application,r),o=this.E(t.userLocal,r),a=this.E(t.userRemote,r),c=this.E(t.workspace,r),l=t.folders.reduce((u,h)=>(u.set(y.revive(h[0]),this.E(h[1],r)),u),new Nt);return new Kx(i,s,n,o,a,c,l,ua.createEmptyModel(r),new Nt,r)}static E(t,r){return new ua(t.contents,t.keys,t.overrides,t.raw,r)}},fP=class{constructor(e,t,r,i,s){this.change=e,this.f=t,this.g=r,this.h=i,this.i=s,this.a=`
`,this.b=this.a.charCodeAt(0),this.c=46,this.affectedKeys=new Set,this.j=void 0;for(const n of e.keys)this.affectedKeys.add(n);for(const[,n]of e.overrides)for(const o of n)this.affectedKeys.add(o);this.d=this.a;for(const n of this.affectedKeys)this.d+=n+this.a}get previousConfiguration(){return!this.j&&this.f&&(this.j=H1.parse(this.f.data,this.i)),this.j}affectsConfiguration(e,t){const r=this.a+e,i=this.d.indexOf(r);if(i<0)return!1;const s=i+r.length;if(s>=this.d.length)return!1;const n=this.d.charCodeAt(s);if(n!==this.b&&n!==this.c)return!1;if(t){const o=this.previousConfiguration?this.previousConfiguration.getValue(e,t,this.f?.workspace):void 0,a=this.g.getValue(e,t,this.h);return!Qr(o,a)}return!0}};function Os(e,t){const{added:r,removed:i,updated:s}=A7(t?.rawConfiguration,e?.rawConfiguration),n=[],o=e?.getAllOverrideIdentifiers()||[],a=t?.getAllOverrideIdentifiers()||[];if(t){const c=a.filter(l=>!o.includes(l));for(const l of c)n.push([l,t.getKeysForOverrideIdentifier(l)])}if(e){const c=o.filter(l=>!a.includes(l));for(const l of c)n.push([l,e.getKeysForOverrideIdentifier(l)])}if(t&&e){for(const c of o)if(a.includes(c)){const l=A7({contents:e.getOverrideValue(void 0,c)||{},keys:e.getKeysForOverrideIdentifier(c)},{contents:t.getOverrideValue(void 0,c)||{},keys:t.getKeysForOverrideIdentifier(c)});n.push([c,[...l.added,...l.removed,...l.updated]])}}return{added:r,removed:i,updated:s,overrides:n}}function A7(e,t){const r=e?t?e.keys.filter(n=>t.keys.indexOf(n)===-1):[...e.keys]:[],i=t?e?t.keys.filter(n=>e.keys.indexOf(n)===-1):[...t.keys]:[],s=[];if(e&&t){for(const n of t.keys)if(e.keys.indexOf(n)!==-1){const o=Vu(t.contents,n),a=Vu(e.contents,n);Qr(o,a)||s.push(n)}}return{added:r,removed:i,updated:s}}function wl(e,t){if(t){const r=t.split(".");let i=e;for(let s=0;i&&s<r.length;s++)i=i[r[s]];return i}}function pP(e){return e instanceof y}function gP(e){return e&&e.uri instanceof y&&e.languageId&&typeof e.languageId=="string"}function mP(e){return e&&!e.uri&&e.languageId&&typeof e.languageId=="string"}function vP(e){return e&&e.uri instanceof y&&(!e.name||typeof e.name=="string")&&(!e.index||typeof e.index=="number")}function T7(e){if(pP(e))return{resource:e};if(gP(e))return{resource:e.uri,overrideIdentifier:e.languageId};if(mP(e))return{overrideIdentifier:e.languageId};if(vP(e))return{resource:e.uri};if(e===null)return{resource:null}}var j1=class{constructor(t,r,i){this.a=t.getProxy(z.MainThreadConfiguration),this.c=r,this.b=i,this.d=new pi,this.e=null}getConfigProvider(){return this.d.wait().then(t=>this.e)}$initializeConfiguration(t){this.e=new wP(this.a,this.c,t,this.b),this.d.open()}$acceptConfigurationChanged(t,r){this.getConfigProvider().then(i=>i.$acceptConfigurationChanged(t,r))}};j1=__decorate([__param(0,Me),__param(1,Xi),__param(2,He)],j1);var wP=class{constructor(e,t,r,i){this.a=new D,this.b=e,this.f=i,this.c=t,this.e=H1.parse(r,i),this.d=this.k(r.configurationScopes)}get onDidChangeConfiguration(){return this.a&&this.a.event}$acceptConfigurationChanged(e,t){const r={data:this.e.toData(),workspace:this.c.workspace};this.e=H1.parse(e,this.f),this.d=this.k(e.configurationScopes),this.a.fire(this.j(t,r))}getConfiguration(e,t,r){const i=T7(t)||{},s=this.g(e?wl(this.e.getValue(void 0,i,this.c.workspace),e):this.e.getValue(void 0,i,this.c.workspace));e&&this.h(e,i,r?.identifier);function n(a){if(a==null)return null;if(typeof a=="boolean")return a?2:5;switch(a){case Uo.Global:return 2;case Uo.Workspace:return 5;case Uo.WorkspaceFolder:return 6}}const o={has(a){return typeof wl(s,a)<"u"},get:(a,c)=>{this.h(e?`${e}.${a}`:a,i,r?.identifier);let l=wl(s,a);if(typeof l>"u")l=c;else{let u;const h=(p,f)=>{if(gt(p)){let m;const w=()=>{u=u||Qe(s),m=m||wl(u,f)};return new Proxy(p,{get:(E,$)=>{if(typeof $=="string"&&$.toLowerCase()==="tojson")return w(),()=>m;if(u)return m=m||wl(u,f),m[$];const S=E[$];return typeof $=="string"?h(S,`${f}.${$}`):S},set:(E,$,S)=>(w(),m&&(m[$]=S),!0),deleteProperty:(E,$)=>(w(),m&&delete m[$],!0),defineProperty:(E,$,S)=>(w(),m&&Object.defineProperty(m,$,S),!0)})}return Array.isArray(p)?Qe(p):p};l=h(l,a)}return l},update:(a,c,l,u)=>{a=e?`${e}.${a}`:a;const h=n(l);return c!==void 0?this.b.$updateConfigurationOption(h,a,c,i,u):this.b.$removeConfigurationOption(h,a,i,u)},inspect:a=>{a=e?`${e}.${a}`:a;const c=this.e.inspect(a,i,this.c.workspace);if(c)return{key:a,defaultValue:Qe(c.policy?.value??c.default?.value),globalLocalValue:Qe(c.userLocal?.value),globalRemoteValue:Qe(c.userRemote?.value),globalValue:Qe(c.user?.value??c.application?.value),workspaceValue:Qe(c.workspace?.value),workspaceFolderValue:Qe(c.workspaceFolder?.value),defaultLanguageValue:Qe(c.default?.override),globalLocalLanguageValue:Qe(c.userLocal?.override),globalRemoteLanguageValue:Qe(c.userRemote?.override),globalLanguageValue:Qe(c.user?.override??c.application?.override),workspaceLanguageValue:Qe(c.workspace?.override),workspaceFolderLanguageValue:Qe(c.workspaceFolder?.override),languageIds:Qe(c.overrideIdentifiers)}}};return typeof s=="object"&&nn(o,s,!1),Object.freeze(o)}g(e){const t=r=>gt(r)?new Proxy(r,{get:(i,s)=>t(i[s]),set:(i,s,n)=>{throw new Error(`TypeError: Cannot assign to read only property '${String(s)}' of object`)},deleteProperty:(i,s)=>{throw new Error(`TypeError: Cannot delete read only property '${String(s)}' of object`)},defineProperty:(i,s)=>{throw new Error(`TypeError: Cannot define property '${String(s)}' for a readonly object`)},setPrototypeOf:i=>{throw new Error("TypeError: Cannot set prototype for a readonly object")},isExtensible:()=>!1,preventExtensions:()=>!0}):r;return t(e)}h(e,t,r){const i=mi.test(e)?5:this.d.get(e),s=r?`[${r.value}] `:"";if(i===5){typeof t?.resource>"u"&&this.f.warn(`${s}Accessing a resource scoped configuration without providing a resource is not expected. To get the effective value for '${e}', provide the URI of a resource or 'null' for any resource.`);return}if(i===4){t?.resource&&this.f.warn(`${s}Accessing a window scoped configuration for a resource is not expected. To associate '${e}' to a resource, define its scope to 'resource' in configuration contributions in 'package.json'.`);return}}j(e,t){const r=new fP(e,t,this.e,this.c.workspace,this.f);return Object.freeze({affectsConfiguration:(i,s)=>r.affectsConfiguration(i,T7(s))})}k(e){return e.reduce((t,r)=>(t.set(r[0],r[1]),t),new Map)}},Yi=_("IExtHostConfiguration"),bP=class{constructor(e,t){this.versionId=e,this.removedDueToLooping=t}},bl=class e3{static isHostExtension(t,r,i){if(r.getExtensionDescription(t))return!1;const s=i.getExtensionDescription(t);return s?!!((s.main||s.browser)&&s.api==="none"):!1}constructor(t,r){this.j=t,this.c=new D,this.onDidChange=this.c.event,this.d=0,this.e=r,this.k()}k(){this.e.sort(EP),this.f=new Oi,this.g=[],this.h=new Map;for(const t of this.e){if(this.f.has(t.identifier)){console.error("Extension `"+t.identifier.value+"` is already registered");continue}this.f.set(t.identifier,t),this.g.push(t);const r=this.j.readActivationEvents(t);for(const i of r)this.h.has(i)||this.h.set(i,[]),this.h.get(i).push(t)}}set(t){return this.e=t,this.k(),this.d++,this.c.fire(void 0),{versionId:this.d}}deltaExtensions(t,r){this.e=L7(this.e,r),this.e=this.e.concat(t);const i=e3.l(this.e);return this.e=L7(this.e,i.map(s=>s.identifier)),this.k(),this.d++,this.c.fire(void 0),new bP(this.d,i)}static l(t){const r=new class{constructor(){this.c=new Map,this.d=new Set,this.e=[]}addNode(a){this.d.has(a)||(this.d.add(a),this.e.push(a))}addArc(a,c){this.addNode(a),this.addNode(c),this.c.has(a)?this.c.get(a).push(c):this.c.set(a,[c])}getArcs(a){return this.c.has(a)?this.c.get(a):[]}hasOnlyGoodArcs(a,c){const l=r.getArcs(a);for(let u=0;u<l.length;u++)if(!c.has(l[u]))return!1;return!0}getNodes(){return this.e}},i=new Oi;for(const a of t)if(i.set(a.identifier,a),a.extensionDependencies)for(const c of a.extensionDependencies)r.addArc(Ue.toKey(a.identifier),Ue.toKey(c));const s=new Set;r.getNodes().filter(a=>r.getArcs(a).length===0).forEach(a=>s.add(a));const n=r.getNodes().filter(a=>!s.has(a));let o;do{o=!1;for(let a=0;a<n.length;a++){const c=n[a];r.hasOnlyGoodArcs(c,s)&&(n.splice(a,1),a--,s.add(c),o=!0)}}while(o);return n.map(a=>i.get(a))}containsActivationEvent(t){return this.h.has(t)}containsExtension(t){return this.f.has(t)}getExtensionDescriptionsForActivationEvent(t){const r=this.h.get(t);return r?r.slice(0):[]}getAllExtensionDescriptions(){return this.g.slice(0)}getSnapshot(){return new yP(this.d,this.getAllExtensionDescriptions())}getExtensionDescription(t){const r=this.f.get(t);return r||void 0}getExtensionDescriptionByUUID(t){for(const r of this.g)if(r.uuid===t)return r}getExtensionDescriptionByIdOrUUID(t,r){return this.getExtensionDescription(t)??(r?this.getExtensionDescriptionByUUID(r):void 0)}},yP=class{constructor(e,t){this.versionId=e,this.extensions=t}},R7;(function(e){e[e.Builtin=0]="Builtin",e[e.User=1]="User",e[e.Dev=2]="Dev"})(R7||(R7={}));function EP(e,t){const r=e.isBuiltin?0:e.isUnderDevelopment?2:1,i=t.isBuiltin?0:t.isUnderDevelopment?2:1;if(r!==i)return r-i;const s=Te.basename(e.extensionLocation.path),n=Te.basename(t.extensionLocation.path);return s<n?-1:s>n?1:0}function L7(e,t){const r=new tn(t);return e.filter(i=>!r.has(i.identifier))}var B1="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",qH=new RegExp(B1),N7;(function(e){e.COMMAND="command",e.SETTINGS_SYNC="settingsSync"})(N7||(N7={}));var F7;(function(e){e[e.NoneOrRelevance=0]="NoneOrRelevance",e[e.LastUpdatedDate=1]="LastUpdatedDate",e[e.Title=2]="Title",e[e.PublisherName=3]="PublisherName",e[e.InstallCount=4]="InstallCount",e[e.PublishedDate=10]="PublishedDate",e[e.AverageRating=6]="AverageRating",e[e.WeightedRating=12]="WeightedRating"})(F7||(F7={}));var M7;(function(e){e[e.Default=0]="Default",e[e.Ascending=1]="Ascending",e[e.Descending=2]="Descending"})(M7||(M7={}));var O7;(function(e){e.Install="install",e.Uninstall="uninstall"})(O7||(O7={}));var U7;(function(e){e[e.None=1]="None",e[e.Install=2]="Install",e[e.Update=3]="Update",e[e.Migrate=4]="Migrate"})(U7||(U7={}));var GH=_("extensionGalleryService"),H7;(function(e){e.Timeout="Timeout",e.Cancelled="Cancelled",e.Failed="Failed",e.DownloadFailedWriting="DownloadFailedWriting",e.Offline="Offline"})(H7||(H7={}));var j7;(function(e){e.Unsupported="Unsupported",e.Deprecated="Deprecated",e.Malicious="Malicious",e.Incompatible="Incompatible",e.IncompatibleApi="IncompatibleApi",e.IncompatibleTargetPlatform="IncompatibleTargetPlatform",e.ReleaseVersionNotFound="ReleaseVersionNotFound",e.Invalid="Invalid",e.Download="Download",e.DownloadSignature="DownloadSignature",e.DownloadFailedWriting="DownloadFailedWriting",e.UpdateMetadata="UpdateMetadata",e.Extract="Extract",e.Scanning="Scanning",e.ScanningExtension="ScanningExtension",e.ReadRemoved="ReadRemoved",e.UnsetRemoved="UnsetRemoved",e.Delete="Delete",e.Rename="Rename",e.IntializeDefaultProfile="IntializeDefaultProfile",e.AddToProfile="AddToProfile",e.InstalledExtensionNotFound="InstalledExtensionNotFound",e.PostInstall="PostInstall",e.CorruptZip="CorruptZip",e.IncompleteZip="IncompleteZip",e.PackageNotSigned="PackageNotSigned",e.SignatureVerificationInternal="SignatureVerificationInternal",e.SignatureVerificationFailed="SignatureVerificationFailed",e.NotAllowed="NotAllowed",e.Gallery="Gallery",e.Cancelled="Cancelled",e.Unknown="Unknown",e.Internal="Internal"})(j7||(j7={}));var B7;(function(e){e.NotSigned="NotSigned",e.Success="Success",e.RequiredArgumentMissing="RequiredArgumentMissing",e.InvalidArgument="InvalidArgument",e.PackageIsUnreadable="PackageIsUnreadable",e.UnhandledException="UnhandledException",e.SignatureManifestIsMissing="SignatureManifestIsMissing",e.SignatureManifestIsUnreadable="SignatureManifestIsUnreadable",e.SignatureIsMissing="SignatureIsMissing",e.SignatureIsUnreadable="SignatureIsUnreadable",e.CertificateIsUnreadable="CertificateIsUnreadable",e.SignatureArchiveIsUnreadable="SignatureArchiveIsUnreadable",e.FileAlreadyExists="FileAlreadyExists",e.SignatureArchiveIsInvalidZip="SignatureArchiveIsInvalidZip",e.SignatureArchiveHasSameSignatureFile="SignatureArchiveHasSameSignatureFile",e.PackageIntegrityCheckFailed="PackageIntegrityCheckFailed",e.SignatureIsInvalid="SignatureIsInvalid",e.SignatureManifestIsInvalid="SignatureManifestIsInvalid",e.SignatureIntegrityCheckFailed="SignatureIntegrityCheckFailed",e.EntryIsMissing="EntryIsMissing",e.EntryIsTampered="EntryIsTampered",e.Untrusted="Untrusted",e.CertificateRevoked="CertificateRevoked",e.SignatureIsNotValid="SignatureIsNotValid",e.UnknownError="UnknownError",e.PackageIsInvalidZip="PackageIsInvalidZip",e.SignatureArchiveHasTooManyEntries="SignatureArchiveHasTooManyEntries"})(B7||(B7={}));var QH=_("extensionManagementService"),JH=_("IGlobalExtensionEnablementService"),XH=_("IExtensionTipsService"),YH=_("IAllowedExtensionsService"),ZH=Ep(1861,"Extensions"),KH=Ep(1862,"Preferences"),ej=_("telemetryService"),tj=_("customEndpointTelemetryService"),_7;(function(e){e[e.NONE=0]="NONE",e[e.CRASH=1]="CRASH",e[e.ERROR=2]="ERROR",e[e.USAGE=3]="USAGE"})(_7||(_7={}));var z7;(function(e){e.OFF="off",e.CRASH="crash",e.ERROR="error",e.ON="all"})(z7||(z7={}));var _1=class{constructor(e){this.value=e,this.isTrustedTelemetryValue=!0}},xP=class{constructor(){this.telemetryLevel=0,this.sessionId="someValue.sessionId",this.machineId="someValue.machineId",this.sqmId="someValue.sqmId",this.devDeviceId="someValue.devDeviceId",this.firstSessionDate="someValue.firstSessionDate",this.sendErrorTelemetry=!1}publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}},rj=new xP,kP="extensionTelemetryLog",$P={id:"telemetry",name:d(2168,null)},SP=new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces","amlext"]);function IP(e){if(!e)return"none";const t=zp(e);return SP.has(t)?t:"other"}function CP(e,t){if(!e||!e.includes("/")&&!e.includes("\\"))return e;let r=e;const i=[];for(const a of t)for(;;){const c=a.exec(e);if(!c)break;i.push([c.index,a.lastIndex])}const s=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,n=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let o=0;for(r="";;){const a=n.exec(e);if(!a)break;const c=i.some(([l,u])=>a.index<u&&l<n.lastIndex);!s.test(a[0])&&!c&&(r+=e.substring(o,a.index)+"<REDACTED: user-file-path>",o=n.lastIndex)}return o<e.length&&(r+=e.substr(o)),r}function DP(e){if(!e)return e;const t=[{label:"Google API Key",regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:"Slack Token",regex:/xox[pbar]\-[A-Za-z0-9]/},{label:"GitHub Token",regex:/(gh[psuro]_[a-zA-Z0-9]{36}|github_pat_[a-zA-Z0-9]{22}_[a-zA-Z0-9]{59})/},{label:"Generic Secret",regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/i},{label:"CLI Credentials",regex:/((login|psexec|(certutil|psexec)\.exe).{1,50}(\s-u(ser(name)?)?\s+.{3,100})?\s-(admin|user|vm|root)?p(ass(word)?)?\s+["']?[^$\-\/\s]|(^|[\s\r\n\\])net(\.exe)?.{1,5}(user\s+|share\s+\/user:| user -? secrets ? set) \s + [^ $\s \/])/},{label:"Microsoft Entra ID",regex:/eyJ(?:0eXAiOiJKV1Qi|hbGci|[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.)/},{label:"Email",regex:/@[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+/}];for(const r of t)if(r.regex.test(e))return`<REDACTED: ${r.label}>`;return e}function W7(e,t){return ho(e,r=>{if(r instanceof _1||Object.hasOwnProperty.call(r,"isTrustedTelemetryValue"))return r.value;if(typeof r=="string"){let i=r.replaceAll("%20"," ");i=CP(i,t);for(const s of t)i=i.replace(s,"");return i=DP(i),i}})}var ij=new Ue("pprice.better-merge"),PP=class{constructor(){this.a=new Map,this.b=new WeakMap}register(e,t){this.a.set(e,t)}readActivationEvents(e){return this.b.has(e)||this.b.set(e,this.c(e)),this.b.get(e)}createActivationEventsMap(e){const t=Object.create(null);for(const r of e){const i=this.readActivationEvents(r);i.length>0&&(t[Ue.toKey(r.identifier)]=i)}return t}c(e){if(typeof e.main>"u"&&typeof e.browser>"u")return[];const t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let r=0;r<t.length;r++)t[r]==="onUri"&&(t[r]=`onUri:${Ue.toKey(e.identifier)}`);if(!e.contributes)return t;for(const r in e.contributes){const i=this.a.get(r);if(!i)continue;const s=e.contributes[r],n=Array.isArray(s)?s:[s];try{i(n,t)}catch(o){gr(o)}}return t}},AP=new PP,TP=Object.freeze({identifier:new Ue("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:y.parse("void:location"),isBuiltin:!1,targetPlatform:"undefined",isUserBuiltin:!1,isUnderDevelopment:!1,preRelease:!1}),sj=_("extensionService"),V7=class{constructor(e){this.dependency=e}},q7;(function(e){e[e.EagerAutoStart=1]="EagerAutoStart",e[e.EagerManualStart=2]="EagerManualStart",e[e.Lazy=3]="Lazy"})(q7||(q7={}));function ct(e,t){return e.enabledApiProposals?e.enabledApiProposals.includes(t):!1}function R(e,t){if(!ct(e,t))throw new Error(`Extension '${e.identifier.value}' CANNOT use API proposal: ${t}.
Its package.json#enabledApiProposals-property declares: ${e.enabledApiProposals?.join(", ")??"[]"} but NOT ${t}.
 The missing proposal MUST be added and you must start in extension development mode or use the following command line switch: --enable-proposed-api ${e.identifier.value}`)}var G7;(function(e){e[e.Normal=0]="Normal",e[e.Immediate=1]="Immediate"})(G7||(G7={}));var Kd=class t3{static{this.NONE=new t3(!1,-1,-1,-1)}constructor(t,r,i,s){this.startup=t,this.codeLoadingTime=r,this.activateCallTime=i,this.activateResolvedTime=s}},Q7=class{constructor(e){this.a=e,this.b=-1,this.c=-1,this.d=-1,this.f=-1,this.g=-1,this.h=-1}j(e,t){return e===-1||t===-1?-1:t-e}build(){return new Kd(this.a,this.j(this.b,this.c),this.j(this.d,this.f),this.j(this.g,this.h))}codeLoadingStart(){this.b=Date.now()}codeLoadingStop(){this.c=Date.now()}activateCallStart(){this.d=Date.now()}activateCallStop(){this.f=Date.now()}activateResolveStart(){this.g=Date.now()}activateResolveStop(){this.h=Date.now()}},ef=class{constructor(e,t,r,i,s,n){this.activationFailed=e,this.activationFailedError=t,this.activationTimes=r,this.module=i,this.exports=s,this.disposable=n}},RP=class extends ef{constructor(e){super(!1,null,e,{activate:void 0,deactivate:void 0},void 0,he.None)}},LP=class extends ef{constructor(){super(!1,null,Kd.NONE,{activate:void 0,deactivate:void 0},void 0,he.None)}},tf=class extends ef{constructor(e){super(!0,e,Kd.NONE,{activate:void 0,deactivate:void 0},void 0,he.None)}},z1=class{constructor(t,r,i,s){this.g=s,this.a=t,this.b=r,this.c=i,this.d=new Oi,this.f=Object.create(null)}dispose(){for(const[t,r]of this.d)r.dispose()}async waitForActivatingExtensions(){const t=[];for(const[r,i]of this.d)t.push(i.wait());await Promise.all(t)}isActivated(t){const r=this.d.get(t);return!!(r&&r.value)}getActivatedExtension(t){const r=this.d.get(t);if(!r||!r.value)throw new Error(`Extension '${t.value}' is not known or not activated`);return r.value}async activateByEvent(t,r){if(this.f[t])return;const i=this.a.getExtensionDescriptionsForActivationEvent(t);await this.h(i.map(s=>({id:s.identifier,reason:{startup:r,extensionId:s.identifier,activationEvent:t}}))),this.f[t]=!0}activateById(t,r){const i=this.a.getExtensionDescription(t);if(!i)throw new Error(`Extension '${t.value}' is not known`);return this.h([{id:i.identifier,reason:r}])}async h(t){const r=t.filter(i=>!this.isActivated(i.id)).map(i=>this.j(i));await Promise.all(r.map(i=>i.wait()))}j(t){if(this.d.has(t.id))return this.d.get(t.id);if(this.l(t.id))return this.k(t,null,[],null);const r=this.a.getExtensionDescription(t.id);if(!r){const n=new Error(`Cannot activate unknown extension '${t.id.value}'`),o=this.k(t,null,[],new tf(n));return this.c.onExtensionActivationError(t.id,n,new V7(t.id.value)),o}const i=[],s=typeof r.extensionDependencies>"u"?[]:r.extensionDependencies;for(const n of s){if(this.m(n))continue;const o=this.d.get(n);if(o){i.push(o);continue}if(this.l(n)){i.push(this.j({id:this.b.getExtensionDescription(n).identifier,reason:t.reason}));continue}const a=this.a.getExtensionDescription(n);if(a){if(!a.main&&!a.browser)continue;i.push(this.j({id:a.identifier,reason:t.reason}));continue}const c=r.displayName||r.identifier.value,l=new Error(`Cannot activate the '${c}' extension because it depends on unknown extension '${n}'`),u=this.k(t,r.displayName,[],new tf(l));return this.c.onExtensionActivationError(r.identifier,l,new V7(n)),u}return this.k(t,r.displayName,i,null)}k(t,r,i,s){const n=new W1(t.id,r,t.reason,i,s,this.c,this.g);return this.d.set(t.id,n),n}l(t){return bl.isHostExtension(t,this.a,this.b)}m(t){const r=this.b.getExtensionDescription(t);return r?!r.main&&!r.browser:!1}};z1=__decorate([__param(3,He)],z1);var W1=class{get value(){return this.h}get friendlyName(){return this.d||this.c.value}constructor(t,r,i,s,n,o,a){this.c=t,this.d=r,this.f=i,this.g=s,this.h=n,this.j=o,this.k=a,this.a=new pi,this.b=!1,this.l()}dispose(){this.b=!0}wait(){return this.a.wait()}async l(){await this.m(),this.a.open()}async m(){if(!this.h){for(;this.g.length>0;){for(let t=0;t<this.g.length;t++){const r=this.g[t];if(r.value&&!r.value.activationFailed){this.g.splice(t,1),t--;continue}if(r.value&&r.value.activationFailed){const i=new Error(`Cannot activate the '${this.friendlyName}' extension because its dependency '${r.friendlyName}' failed to activate`);i.detail=r.value.activationFailedError,this.h=new tf(i),this.j.onExtensionActivationError(this.c,i,null);return}}this.g.length>0&&await Promise.race(this.g.map(t=>t.wait()))}await this.n()}}async n(){try{this.h=await this.j.actualActivateExtension(this.c,this.f)}catch(t){const r=new Error;if(t&&t.name&&(r.name=t.name),t&&t.message?r.message=`Activating extension '${this.c.value}' failed: ${t.message}.`:r.message=`Activating extension '${this.c.value}' failed: ${t}.`,t&&t.stack&&(r.stack=t.stack),this.h=new tf(r),this.b&&Vs(t))return;this.j.onExtensionActivationError(this.c,r,null),this.k.error(`Activating extension ${this.c.value} failed due to an error:`),this.k.error(t)}}};W1=__decorate([__param(6,He)],W1);var J7=class{constructor(e,t){this.c=t,this.b=new D,this.onDidChangeStorage=this.b.event,this.a=e.getProxy(z.MainThreadStorage)}registerExtensionStorageKeysToSync(e,t){this.a.$registerExtensionStorageKeysToSync(e,t)}async initializeExtensionStorage(e,t,r){const i=await this.a.$initializeExtensionStorage(e,t);let s;return i&&(s=this.d(e,t,i)),s||r}setValue(e,t,r){return this.a.$setValue(e,t,r)}$acceptValue(e,t,r){const i=this.d(e,t,r);i&&this.b.fire({shared:e,key:t,value:i})}d(e,t,r){try{return JSON.parse(r)}catch(i){this.c.error(`[extHostStorage] unexpected error parsing storage contents (extensionId: ${t}, global: ${e}): ${i}`)}}},V1=_("IExtHostStorage"),X7=class{constructor(e,t,r){this.h=new Map,this.a=e,this.b=t,this.c=r,this.d=this.c.initializeExtensionStorage(this.b,this.a,Object.create(null)).then(i=>(this.f=i,this)),this.g=this.c.onDidChangeStorage(i=>{i.shared===this.b&&i.key===this.a&&(this.f=i.value)}),this.i=new ao(()=>{const i=this.h;this.h=new Map,(async()=>{try{await this.c.setValue(this.b,this.a,this.f);for(const s of i.values())s.complete()}catch(s){for(const n of i.values())n.error(s)}})()},0)}keys(){return Object.entries(this.f??{}).filter(([,e])=>e!==void 0).map(([e])=>e)}get whenReady(){return this.d}get(e,t){let r=this.f[e];return typeof r>"u"&&(r=t),r}update(e,t){t!==null&&typeof t=="object"?this.f[e]=JSON.parse(JSON.stringify(t)):this.f[e]=t;const r=this.h.get(e);if(r!==void 0)return r.p;const i=new co;return this.h.set(e,i),this.i.isScheduled()||this.i.schedule(),i.p}dispose(){this.g.dispose()}},NP=class extends X7{setKeysForSync(e){this.c.registerExtensionStorageKeysToSync({id:this.a,version:this.j.version},e)}constructor(e,t){super(e.identifier.value,!0,t),this.j=e}},ki,q1=ki=class{constructor(t,r){this.b=new Map,this.c=new $S,this.a=t.getProxy(z.MainThreadFileSystem);const i=this;this.value=Object.freeze({async stat(s){try{let n;const o=i.b.get(s.scheme);return o?(await i.a.$ensureActivation(s.scheme),n=await o.impl.stat(s)):n=await i.a.$stat(s),{type:n.type,ctime:n.ctime,mtime:n.mtime,size:n.size,permissions:n.permissions===vo.Readonly?1:void 0}}catch(n){ki.e(n)}},async readDirectory(s){try{const n=i.b.get(s.scheme);return n?(await i.a.$ensureActivation(s.scheme),(await n.impl.readDirectory(s)).slice()):await i.a.$readdir(s)}catch(n){return ki.e(n)}},async createDirectory(s){try{const n=i.b.get(s.scheme);return n&&!n.isReadonly?(await i.a.$ensureActivation(s.scheme),await i.d(n.impl,n.extUri,s)):await i.a.$mkdir(s)}catch(n){return ki.e(n)}},async readFile(s){try{const n=i.b.get(s.scheme);return n?(await i.a.$ensureActivation(s.scheme),(await n.impl.readFile(s)).slice()):(await i.a.$readFile(s)).buffer}catch(n){return ki.e(n)}},async writeFile(s,n){try{const o=i.b.get(s.scheme);return o&&!o.isReadonly?(await i.a.$ensureActivation(s.scheme),await i.d(o.impl,o.extUri,o.extUri.dirname(s)),await i.c.queueFor(s,()=>Promise.resolve(o.impl.writeFile(s,n,{create:!0,overwrite:!0})))):await i.a.$writeFile(s,ke.wrap(n))}catch(o){return ki.e(o)}},async delete(s,n){try{const o=i.b.get(s.scheme);return o&&!o.isReadonly&&!n?.useTrash?(await i.a.$ensureActivation(s.scheme),await o.impl.delete(s,{recursive:!1,...n})):await i.a.$delete(s,{recursive:!1,useTrash:!1,atomic:!1,...n})}catch(o){return ki.e(o)}},async rename(s,n,o){try{return await i.a.$rename(s,n,{overwrite:!1,...o})}catch(a){return ki.e(a)}},async copy(s,n,o){try{return await i.a.$copy(s,n,{overwrite:!1,...o})}catch(a){return ki.e(a)}},isWritableFileSystem(s){const n=r.getCapabilities(s);if(typeof n=="number")return!(n&2048)}})}async d(t,r,i){const s=[];for(;!r.isEqual(i,r.dirname(i));)try{if(!((await t.stat(i)).type&hn.Directory))throw It.FileExists(`Unable to create folder '${i.scheme===q.file?i.fsPath:i.toString(!0)}' that already exists but is not a directory`);break}catch(n){if(Bu(n)!==ve.FileNotFound)throw n;s.push(r.basename(i)),i=r.dirname(i)}for(let n=s.length-1;n>=0;n--){i=r.joinPath(i,s[n]);try{await t.createDirectory(i)}catch(o){if(Bu(o)!==ve.FileExists)throw o}}}static e(t){if(t instanceof It)throw t;if(t instanceof j4)switch(t.code){case ve.FileExists:throw It.FileExists(t.message);case ve.FileNotFound:throw It.FileNotFound(t.message);case ve.FileNotADirectory:throw It.FileNotADirectory(t.message);case ve.FileIsADirectory:throw It.FileIsADirectory(t.message);case ve.NoPermissions:throw It.NoPermissions(t.message);case ve.Unavailable:throw It.Unavailable(t.message);default:throw new It(t.message,t.name)}if(!(t instanceof Error))throw new It(String(t));if(t.name==="ENOPRO"||t.message.includes("ENOPRO"))throw It.Unavailable(t.message);switch(t.name){case ve.FileExists:throw It.FileExists(t.message);case ve.FileNotFound:throw It.FileNotFound(t.message);case ve.FileNotADirectory:throw It.FileNotADirectory(t.message);case ve.FileIsADirectory:throw It.FileIsADirectory(t.message);case ve.NoPermissions:throw It.NoPermissions(t.message);case ve.Unavailable:throw It.Unavailable(t.message);default:throw new It(t.message,t.name)}}addFileSystemProvider(t,r,i){return this.b.set(t,{impl:r,extUri:i?.isCaseSensitive?Ne:lS,isReadonly:!!i?.isReadonly}),ce(()=>this.b.delete(t))}getFileSystemProviderExtUri(t){return this.b.get(t)?.extUri??Ne}};q1=ki=__decorate([__param(0,Me),__param(1,fo)],q1);var rf=_("IExtHostConsumerFileSystem"),G1=_("IExtensionStoragePaths"),Q1=class{constructor(t,r,i){this.d=r,this.f=i,this.a=t.workspace??void 0,this.b=t.environment,this.whenReady=this.h().then(s=>this.c=s)}async g(t){return y.joinPath(this.b.workspaceStorageHome,t)}async h(){if(!this.a)return Promise.resolve(void 0);const t=this.a.id,r=await this.g(t);try{return await this.f.value.stat(r),this.d.trace("[ExtHostStorage] storage dir already exists",r),r}catch{}try{return this.d.trace("[ExtHostStorage] creating dir and metadata-file",r),await this.f.value.createDirectory(r),await this.f.value.writeFile(y.joinPath(r,"meta.json"),new TextEncoder().encode(JSON.stringify({id:this.a.id,configuration:y.revive(this.a.configuration)?.toString(),name:this.a.name},void 0,2))),r}catch(i){this.d.error("[ExtHostStorage]",i);return}}workspaceValue(t){if(this.c)return y.joinPath(this.c,t.identifier.value)}globalValue(t){return y.joinPath(this.b.globalStorageHome,t.identifier.value.toLowerCase())}onWillDeactivateAll(){}};Q1=__decorate([__param(0,jt),__param(1,He),__param(2,rf)],Q1);var lj=_("tunnelService"),uj=_("sharedTunnelsService"),Y7;(function(e){e.Http="http",e.Https="https"})(Y7||(Y7={}));var Mn;(function(e){e.ConstantPrivate="constantPrivate",e.Private="private",e.Public="public"})(Mn||(Mn={}));var Z7;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(Z7||(Z7={}));function FP(e){if(e.scheme!=="http"&&e.scheme!=="https")return;const t=/^(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d+)$/.exec(e.authority);if(t)return{address:t[1],port:+t[2]}}var J1=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"];function K7(e){return J1.indexOf(e)>=0}var X1=["0.0.0.0","0:0:0:0:0:0:0:0","::"];function e9(e){return X1.indexOf(e)>=0}var MP=class{constructor(e,t,r){this.remoteAddress=e,this.localAddress=t,this.b=r,this.a=new D,this.onDidDispose=this.a.event}dispose(){return this.a.fire(),this.b()}},t9=class extends he{constructor(t,r){super(),this.r=t,this.s=r,this.a=new D,this.onTunnelOpened=this.a.event,this.b=new D,this.onTunnelClosed=this.b.event,this.c=new D,this.onAddedTunnelProvider=this.c.event,this.f=new Map,this.h=!1,this.j=!0,this.m=[],this.n=new Set}get hasTunnelProvider(){return!!this.g}get t(){const t=this.s.getValue("remote.localPortHost");return!t||t==="localhost"?"127.0.0.1":"0.0.0.0"}setTunnelProvider(t){return this.g=t,t?(this.c.fire(),{dispose:()=>{this.g=void 0,this.h=!1,this.m=[]}}):(this.h=!1,this.m=[],this.c.fire(),{dispose:()=>{}})}setTunnelFeatures(t){this.h=t.elevation,this.m=t.privacyOptions,this.j=t.protocol}get canChangeProtocol(){return this.j}get canElevate(){return this.h}get canChangePrivacy(){return this.m.length>0}get privacyOptions(){return this.m}get tunnels(){return this.u()}async u(){const t=[],r=Array.from(this.f.values());for(const i of r){const s=Array.from(i.values());for(const n of s){const o=await n.value;o&&typeof o!="string"&&t.push(o)}}return t}async dispose(){super.dispose();for(const t of this.f.values()){for(const{value:r}of t.values())await r.then(i=>typeof i!="string"?i?.dispose():void 0);t.clear()}this.f.clear()}setEnvironmentTunnel(t,r,i,s,n){this.z(t,r,Promise.resolve({tunnelRemoteHost:t,tunnelRemotePort:r,localAddress:i,privacy:s,protocol:n,dispose:()=>Promise.resolve()}))}async getExistingTunnel(t,r){(e9(t)||K7(t))&&(t=J1[0]);const i=this.D(t,r);if(i)return++i.refcount,i.value}openTunnel(t,r,i,s,n,o=!1,a,c){this.r.trace(`ForwardedPorts: (TunnelService) openTunnel request for ${r}:${i} on local port ${n}.`);const l=this.g??t;if(!l)return;if(r||(r="localhost"),s||(s=this.t),this.g&&this.n.has(i)){this.r.debug("ForwardedPorts: (TunnelService) Another call to create a tunnel with the same address has occurred before the last one completed. This call will be ignored.");return}const u=this.F(l,r,i,s,n,o,a,c);return u?u.then(h=>{if(h){if(typeof h=="string")return this.r.trace("ForwardedPorts: (TunnelService) The tunnel provider returned an error when creating the tunnel."),this.C(r,i),h}else{this.r.trace("ForwardedPorts: (TunnelService) New tunnel is undefined."),this.C(r,i);return}this.r.trace("ForwardedPorts: (TunnelService) New tunnel established.");const p=this.w(h);return(h.tunnelRemoteHost!==r||h.tunnelRemotePort!==i)&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Host or port mismatch."),a&&h.privacy!==a&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Privacy mismatch."),this.a.fire(p),p}):(this.r.trace("ForwardedPorts: (TunnelService) Tunnel was not created."),u)}w(t){return{tunnelRemotePort:t.tunnelRemotePort,tunnelRemoteHost:t.tunnelRemoteHost,tunnelLocalPort:t.tunnelLocalPort,localAddress:t.localAddress,privacy:t.privacy,protocol:t.protocol,dispose:async()=>{this.r.trace(`ForwardedPorts: (TunnelService) dispose request for ${t.tunnelRemoteHost}:${t.tunnelRemotePort} `);const r=this.f.get(t.tunnelRemoteHost);if(r){const i=r.get(t.tunnelRemotePort);i&&(i.refcount--,await this.y(t.tunnelRemoteHost,t.tunnelRemotePort,i))}}}}async y(t,r,i){if(i.refcount<=0){this.r.trace(`ForwardedPorts: (TunnelService) Tunnel is being disposed ${t}:${r}.`);const s=i.value.then(async n=>{n&&typeof n!="string"&&(await n.dispose(!0),this.b.fire({host:n.tunnelRemoteHost,port:n.tunnelRemotePort}))});return this.f.has(t)&&this.f.get(t).delete(r),s}}async closeTunnel(t,r){this.r.trace(`ForwardedPorts: (TunnelService) close request for ${t}:${r} `);const i=this.f.get(t);if(i&&i.has(r)){const s=i.get(r);s.refcount=0,await this.y(t,r,s)}}z(t,r,i){this.f.has(t)||this.f.set(t,new Map),this.f.get(t).set(r,{refcount:1,value:i})}async C(t,r){const i=this.f.get(t);if(i){const s=i.get(r),n=s?await s.value:void 0;(!n||typeof n=="string")&&i.delete(r),i.size===0&&this.f.delete(t)}}D(t,r){const i=[t];K7(t)?(i.push(...J1),i.push(...X1)):e9(t)&&i.push(...X1);const s=i.map(n=>this.f.get(n));for(const n of s){const o=n?.get(r);if(o)return o}}canTunnel(t){return!!FP(t)}G(t,r,i,s,n,o,a){this.r.trace(`ForwardedPorts: (TunnelService) Creating tunnel with provider ${r}:${i} on local port ${s}.`);const c=i;this.n.add(c);const l=s===void 0?i:s,u={elevationRequired:n?this.isPortPrivileged(l):!1},h={remoteAddress:{host:r,port:i},localAddressPort:s,privacy:o,public:o?o!==Mn.Private:void 0,protocol:a},p=t.forwardPort(h,u);return p?(this.z(r,i,p),p.finally(()=>{this.r.trace("ForwardedPorts: (TunnelService) Tunnel created by provider."),this.n.delete(c)})):this.n.delete(c),p}};t9=__decorate([__param(0,He),__param(1,Wu)],t9);var OP=class extends MP{},Y1;(function(e){function t(i){return{remoteAddress:i.remoteAddress,localAddress:i.localAddress,public:!!i.public,privacy:i.privacy??(i.public?Mn.Public:Mn.Private),protocol:i.protocol}}e.fromApiTunnel=t;function r(i){return{remoteAddress:{host:i.tunnelRemoteHost,port:i.tunnelRemotePort},localAddress:i.localAddress,public:i.privacy!==Mn.ConstantPrivate&&i.privacy!==Mn.ConstantPrivate,privacy:i.privacy,protocol:i.protocol}}e.fromServiceTunnel=r})(Y1||(Y1={}));var Z1=_("IExtHostTunnelService"),K1=class extends he{constructor(t,r,i){super(),this.s=i,this.f=()=>Promise.resolve(!0),this.g=new Map,this.h=new D,this.onDidChangeTunnels=this.h.event,this.n=0,this.r=new Map,this.a=t.getProxy(z.MainThreadTunnelService)}async openTunnel(t,r){this.s.trace(`ForwardedPorts: (ExtHostTunnelService) ${t.identifier.value} called openTunnel API for ${r.remoteAddress.host}:${r.remoteAddress.port}.`);const i=await this.a.$openTunnel(r,t.displayName);if(i){const s=new OP(i.remoteAddress,i.localAddress,()=>this.a.$closeTunnel(i.remoteAddress));return this.B(s),s}}async getTunnels(){return this.a.$getTunnels()}u(){return this.n++}registerPortsAttributesProvider(t,r){t.portRange===void 0&&t.commandPattern===void 0&&this.s.error("PortAttributesProvider must specify either a portRange or a commandPattern");const i=this.u();return this.r.set(i,{selector:t,provider:r}),this.a.$registerPortsAttributesProvider(t,i),new Ie(()=>{this.r.delete(i),this.a.$unregisterPortsAttributesProvider(i)})}async $providePortAttributes(t,r,i,s,n){const o=[];for(const c of t){const l=this.r.get(c);if(!l)return[];o.push(...await Promise.all(r.map(async u=>{let h;try{h=await l.provider.providePortAttributes({port:u,pid:i,commandLine:s},n)}catch{h=await l.provider.providePortAttributes(u,i,s,n)}return{providedAttributes:h,port:u}})))}const a=o.filter(c=>!!c.providedAttributes);return a.length>0?a.map(c=>({autoForwardAction:c.providedAttributes.autoForwardAction,port:c.port})):[]}async $registerCandidateFinder(t){}registerTunnelProvider(t,r){if(this.b)throw new Error("A tunnel provider has already been registered. Only the first tunnel provider to be registered will be used.");this.b=async(s,n)=>await t.provideTunnel(s,n,st.None)??void 0;const i=r.tunnelFeatures?{elevation:!!r.tunnelFeatures?.elevation,privacyOptions:r.tunnelFeatures?.privacyOptions,protocol:r.tunnelFeatures.protocol===void 0?!0:r.tunnelFeatures.protocol}:void 0;return this.a.$setTunnelProvider(i,!0),Promise.resolve(ce(()=>{this.b=void 0,this.a.$setTunnelProvider(void 0,!1)}))}async setTunnelFactory(t,r){if(t){t.candidatePortSource!==void 0&&this.a.$setCandidatePortSource(t.candidatePortSource),t.showCandidatePort&&(this.f=t.showCandidatePort,this.a.$setCandidateFilter());const i=t.tunnelFactory??(r?this.w(r):void 0);if(i){this.b=i;let s=t.tunnelFeatures?.privacyOptions??[];t.tunnelFeatures?.public&&s.length===0&&(s=[{id:"private",label:d(2812,null),themeIcon:"lock"},{id:"public",label:d(2813,null),themeIcon:"eye"}]);const n=t.tunnelFeatures?{elevation:!!t.tunnelFeatures?.elevation,public:!!t.tunnelFeatures?.public,privacyOptions:s,protocol:!0}:void 0;this.a.$setTunnelProvider(n,!!t.tunnelFactory)}}else this.b=void 0;return ce(()=>{this.b=void 0})}w(t){}async $closeTunnel(t,r){if(this.g.has(t.host)){const i=this.g.get(t.host);i.has(t.port)&&(r&&i.get(t.port).disposeListener.dispose(),await i.get(t.port).tunnel.dispose(),i.delete(t.port))}}async $onDidTunnelsChange(){this.h.fire()}async $forwardPort(t,r){if(this.b)try{this.s.trace("ForwardedPorts: (ExtHostTunnelService) Getting tunnel from provider.");const i=this.b(t,r);if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Got tunnel promise from provider."),i!==void 0){const s=await i;if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Successfully awaited tunnel from provider."),s===void 0){this.s.error("ForwardedPorts: (ExtHostTunnelService) Resolved tunnel is undefined");return}this.g.has(t.remoteAddress.host)||this.g.set(t.remoteAddress.host,new Map);const n=this.B(s.onDidDispose(()=>(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Extension fired tunnel's onDidDispose."),this.a.$closeTunnel(s.remoteAddress))));return this.g.get(t.remoteAddress.host).set(t.remoteAddress.port,{tunnel:s,disposeListener:n}),Y1.fromApiTunnel(s)}else this.s.trace("ForwardedPorts: (ExtHostTunnelService) Tunnel is undefined")}catch(i){if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) tunnel provider error"),i instanceof Error)return i.message}}async $applyCandidateFilter(t){const r=await Promise.all(t.map(s=>this.f(s.host,s.port,s.detail??""))),i=t.filter((s,n)=>r[n]);return this.s.trace(`ForwardedPorts: (ExtHostTunnelService) filtered from ${t.map(s=>s.port).join(", ")} to ${i.map(s=>s.port).join(", ")}`),i}};K1=__decorate([__param(0,Me),__param(1,jt),__param(2,He)],K1);function UP(e){return[...e.entries()]}function HP(e){return e?[...e.entries()]:[]}var jP=class{constructor(e){this.b=e,this.a=new Map}dispose(){for(const e of this.a.values())e.dispose()}startBuffering(e,t,r=5){const i=t(s=>{const n=typeof s=="string"?s:s.data;let o=this.a.get(e);if(o){o.data.push(n);return}const a=setTimeout(()=>this.flushBuffer(e),r);o={data:[n],timeoutId:a,dispose:()=>{clearTimeout(a),this.flushBuffer(e),i.dispose()}},this.a.set(e,o)});return i}stopBuffering(e){this.a.get(e)?.dispose()}flushBuffer(e){const t=this.a.get(e);t&&(this.a.delete(e),this.b(e,t.data.join("")))}},On=(e,t,r,i)=>{let s=t;return{enumerable:!0,configurable:!1,get(){return s},set(n){if(!r(s,n)){const o=s;s=n,e.listener?.(i(n,o))}}}},ha=(e,t)=>e===t,Us={range:(e,t)=>e===t?!0:!e||!t?!1:e.isEqual(t),label:ha,description:ha,sortText:ha,busy:ha,error:ha,canResolveChildren:ha,tags:(e,t)=>!(e.length!==t.length||e.some(r=>!t.find(i=>r.id===i.id)))},da=e=>t=>({op:4,update:e(t)}),BP=(e,t)=>({range:(()=>{let r;const i=da(s=>({range:ze.lift(M.from(s))}));return{enumerable:!0,configurable:!1,get(){return r},set(s){e.listener?.({op:6}),Us.range(r,s)||(r=s,e.listener?.(i(s)))}}})(),label:On(e,t,Us.label,da(r=>({label:r}))),description:On(e,void 0,Us.description,da(r=>({description:r}))),sortText:On(e,void 0,Us.sortText,da(r=>({sortText:r}))),canResolveChildren:On(e,!1,Us.canResolveChildren,r=>({op:2,state:r})),busy:On(e,!1,Us.busy,da(r=>({busy:r}))),error:On(e,void 0,Us.error,da(r=>({error:be.fromStrict(r)||null}))),tags:On(e,[],Us.tags,(r,i)=>({op:1,new:r.map(ti.from),old:i.map(ti.from)}))}),_P=e=>{const t=De.fromString(e.extId),r=new yl(t.controllerId,t.localId,e.label,y.revive(e.uri)||void 0);return r.range=M.to(e.range||void 0),r.description=e.description||void 0,r.sortText=e.sortText||void 0,r.tags=e.tags.map(i=>ti.to({id:f6(i).tagId})),r},r9=e=>{let t;for(const r of e.tests){const i=_P(r.item);wh(i).parent=t,t=i}return t},yl=class r3{constructor(t,r,i,s){if(r.includes("\0"))throw new Error(`Test IDs may not include the ${JSON.stringify(r)} symbol`);const n=kD(this,t);Object.defineProperties(this,{id:{value:r,enumerable:!0,writable:!1},uri:{value:s,enumerable:!0,writable:!1},parent:{enumerable:!1,get(){return n.parent instanceof ev?void 0:n.parent}},children:{value:xD(n,wh,r3),enumerable:!0,writable:!1},...BP(n,i)})}},ev=class extends yl{constructor(e,t){super(e,e,t,void 0),this._isRoot=!0}},zP=class extends bD{constructor(e,t,r){super({controllerId:e,getDocumentVersion:i=>i&&r.getDocument(i)?.version,getApiFor:wh,getChildren:i=>i.children,root:new ev(e,t),toITestItem:Ns.from})}},tv=class extends he{constructor(t,r){super(),this.s=t,this.t=r,this.a=this.B(new D),this.onDidChangeTelemetryEnabled=this.a.event,this.b=this.B(new D),this.onDidChangeTelemetryConfiguration=this.b.event,this.c={usage:!0,error:!0},this.f=0,this.g=!1,this.j=!1,this.r=new Map,this.m=y.revive(this.s.environment.extensionTelemetryLogResource),this.j=this.s.environment.isExtensionTelemetryLoggingOnly,this.n=r.createLogger(this.m,{id:kP,name:d(2809,null,this.j?" (Not Sent)":""),hidden:!0,group:$P}),this.B(this.n),this.B(r.onDidChangeLogLevel(i=>{eI(i)&&this.u()}))}u(){this.t.setVisibility(this.m,this.g&&this.t.getLogLevel()===Re.Trace)}getTelemetryConfiguration(){return this.f===3}getTelemetryDetails(){return{isCrashEnabled:this.f>=1,isErrorsEnabled:this.c.error?this.f>=2:!1,isUsageEnabled:this.c.usage?this.f>=3:!1}}instantiateLogger(t,r,i){const s=this.getTelemetryDetails(),n=new i9(r,i,t,this.n,this.j,this.getBuiltInCommonProperties(t),{isUsageEnabled:s.isUsageEnabled,isErrorsEnabled:s.isErrorsEnabled}),o=this.r.get(t.identifier.value)??[];return this.r.set(t.identifier.value,[...o,n]),n.apiTelemetryLogger}$initializeTelemetryLevel(t,r,i){this.f=t,this.g=r,this.c=i??{usage:!0,error:!0},this.u()}getBuiltInCommonProperties(t){const r=Object.create(null);switch(r["common.extname"]=`${t.publisher}.${t.name}`,r["common.extversion"]=t.version,r["common.vscodemachineid"]=this.s.telemetryInfo.machineId,r["common.vscodesessionid"]=this.s.telemetryInfo.sessionId,r["common.vscodecommithash"]=this.s.commit,r["common.sqmid"]=this.s.telemetryInfo.sqmId,r["common.devDeviceId"]=this.s.telemetryInfo.devDeviceId,r["common.vscodeversion"]=this.s.version,r["common.isnewappinstall"]=s9(this.s.telemetryInfo.firstSessionDate),r["common.product"]=this.s.environment.appHost,this.s.uiKind){case Oa.Web:r["common.uikind"]="web";break;case Oa.Desktop:r["common.uikind"]="desktop";break;default:r["common.uikind"]="unknown"}return r["common.remotename"]=zp(IP(this.s.remote.authority)),r}$onDidChangeTelemetryLevel(t){this.h=this.getTelemetryConfiguration(),this.f=t;const r=this.getTelemetryDetails();this.r.forEach((i,s)=>{const n=i.filter(o=>!o.isDisposed);n.length===0?this.r.delete(s):this.r.set(s,n)}),this.r.forEach(i=>{for(const s of i)s.updateTelemetryEnablements(r.isUsageEnabled,r.isErrorsEnabled)}),this.h!==this.getTelemetryConfiguration()&&this.a.fire(this.getTelemetryConfiguration()),this.b.fire(this.getTelemetryDetails()),this.u()}onExtensionError(t,r){const s=this.r.get(t.value)?.filter(o=>!o.isDisposed);if(!s)return this.r.delete(t.value),!1;let n=!1;for(const o of s)o.ignoreUnhandledExtHostErrors||(o.logError(r),n=!0);return n}};tv=__decorate([__param(0,jt),__param(1,ec)],tv);var i9=class{static validateSender(e){if(typeof e!="object")throw new TypeError("TelemetrySender argument is invalid");if(typeof e.sendEventData!="function")throw new TypeError("TelemetrySender.sendEventData must be a function");if(typeof e.sendErrorData!="function")throw new TypeError("TelemetrySender.sendErrorData must be a function");if(typeof e.flush<"u"&&typeof e.flush!="function")throw new TypeError("TelemetrySender.flush must be a function or undefined")}constructor(e,t,r,i,s,n,o){this.g=r,this.h=i,this.i=s,this.j=n,this.a=new D,this.ignoreUnhandledExtHostErrors=t?.ignoreUnhandledErrors??!1,this.b=t?.ignoreBuiltInCommonProperties??!1,this.c=t?.additionalCommonProperties,this.f=e,this.d={isUsageEnabled:o.isUsageEnabled,isErrorsEnabled:o.isErrorsEnabled}}updateTelemetryEnablements(e,t){this.e&&(this.d={isUsageEnabled:e,isErrorsEnabled:t},this.a.fire(this.e))}mixInCommonPropsAndCleanData(e){let t="properties"in e?e.properties??{}:e;return t=W7(t,[]),this.c&&(t=nn(t,this.c)),this.b||(t=nn(t,this.j)),"properties"in e?e.properties=t:e=t,e}k(e,t){this.f&&(this.g.publisher==="vscode"?e=this.g.name+"/"+e:e=this.g.identifier.value+"/"+e,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f?.sendEventData(e,t),this.h.trace(e,t))}logUsage(e,t){this.d.isUsageEnabled&&this.k(e,t)}logError(e,t){if(!(!this.d.isErrorsEnabled||!this.f))if(typeof e=="string")this.k(e,t);else{const r={name:e.name,message:e.message,stack:e.stack,cause:e.cause},i=W7(r,[]),s=new Error(i.message,{cause:i.cause});s.stack=i.stack,s.name=i.name,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f.sendErrorData(s,t),this.h.trace("exception",t)}}get apiTelemetryLogger(){if(!this.e){const e=this,t={logUsage:e.logUsage.bind(e),get isUsageEnabled(){return e.d.isUsageEnabled},get isErrorsEnabled(){return e.d.isErrorsEnabled},logError:e.logError.bind(e),dispose:e.dispose.bind(e),onDidChangeEnableStates:e.a.event.bind(e)};this.e=Object.freeze(t)}return this.e}get isDisposed(){return!this.f}dispose(){if(this.f?.flush){let e=this.f;this.f=void 0,Promise.resolve(e.flush()).then(e=void 0),this.e=void 0}else this.f=void 0}};function s9(e){const t=Date.now()-new Date(e).getTime();return isNaN(t)?!1:t<1e3*60*60*24}var sf=_("IExtHostTelemetry"),rv=class{#e;#t;#r;constructor(t,r,i){this.b=new Map,this.c=new Map,this.#e=t.getProxy(z.MainThreadCommands),this.d=r,this.#r=i,this.#t=t.getProxy(z.MainThreadTelemetry),this.converter=new WP(this,s=>{const n=this.c.get(s);return n?.result===ae.Void?n:void 0},r),this.f=[{processArgument(s){return ir(s)}},{processArgument(s){return ho(s,function(n){if(ze.isIRange(n))return M.to(n);if(Ar.isIPosition(n))return Fe.to(n);if(ze.isIRange(n.range)&&y.isUri(n.uri))return cr.to(n);if(n instanceof ke)return n.buffer.buffer;if(!Array.isArray(n))return n})}}]}registerArgumentProcessor(t){this.f.push(t)}registerApiCommand(t){const r=this.registerCommand(!1,t.id,async(...i)=>{const s=t.args.map((o,a)=>{if(!o.validate(i[a]))throw new Error(`Invalid argument '${o.name}' when running '${t.id}', received: ${typeof i[a]=="object"?JSON.stringify(i[a],null,"	"):i[a]} `);return o.convert(i[a])}),n=await this.executeCommand(t.internalId,...s);return t.result.convert(n,i,this.converter)},void 0,{description:t.description,args:t.args,returns:t.result.description});return this.c.set(t.id,t),new Ie(()=>{r.dispose(),this.c.delete(t.id)})}registerCommand(t,r,i,s,n,o){if(this.d.trace("ExtHostCommands#registerCommand",r),!r.trim().length)throw new Error("invalid id");if(this.b.has(r))throw new Error(`command '${r}' already exists`);return this.b.set(r,{callback:i,thisArg:s,metadata:n,extension:o}),t&&this.#e.$registerCommand(r),new Ie(()=>{this.b.delete(r)&&t&&this.#e.$unregisterCommand(r)})}executeCommand(t,...r){return this.d.trace("ExtHostCommands#executeCommand",t),this.g(t,r,!0)}async g(t,r,i){if(this.b.has(t))return this.#e.$fireCommandActivationEvent(t),this.h(t,r,!1);{let s=!1;const n=ho(r,function(o){if(o instanceof xe)return Fe.from(o);if(o instanceof we)return M.from(o);if(o instanceof Rr)return cr.from(o);if(Vi.isNotebookRange(o))return xi.from(o);if(o instanceof ArrayBuffer)return s=!0,ke.wrap(new Uint8Array(o));if(o instanceof Uint8Array)return s=!0,ke.wrap(o);if(o instanceof ke)return s=!0,o;if(!Array.isArray(o))return o});try{const o=await this.#e.$executeCommand(t,s?new Cr(n):n,i);return ir(o)}catch(o){if(o instanceof Error&&o.message==="$executeCommand:retry")return this.g(t,r,!1);throw o}}}async h(t,r,i){const s=this.b.get(t);if(!s)throw new Error("Unknown command");const{callback:n,thisArg:o,metadata:a}=s;if(a?.args)for(let l=0;l<a.args.length;l++)try{vk(r[l],a.args[l].constraint)}catch{throw new Error(`Running the contributed command: '${t}' failed. Illegal argument '${a.args[l].name}' - ${a.args[l].description}`)}const c=Xs.create();try{return await n.apply(o,r)}catch(l){if(t===this.converter.delegatingCommandId){const u=this.converter.getActualCommand(...r);u&&(t=u.command)}if(this.d.error(l,t,s.extension?.identifier),!i)throw l;if(s.extension?.identifier){const u=this.#r.onExtensionError(s.extension.identifier,l);this.d.trace("forwarded error to extension?",u,s.extension?.identifier)}throw new class extends Error{constructor(){super(rn(l)),this.id=t,this.source=s.extension?.displayName??s.extension?.name}}}finally{this.j(s,t,c.elapsed())}}j(t,r,i){t.extension&&this.#t.$publicLog2("Extension:ActionExecuted",{extensionId:t.extension.identifier.value,id:new _1(r),duration:i})}$executeContributedCommand(t,...r){this.d.trace("ExtHostCommands#$executeContributedCommand",t);const i=this.b.get(t);return i?(r=r.map(s=>this.f.reduce((n,o)=>o.processArgument(n,i.extension),s)),this.h(t,r,!0)):Promise.reject(new Error(`Contributed command '${t}' does not exist.`))}getCommands(t=!1){return this.d.trace("ExtHostCommands#getCommands",t),this.#e.$getCommands().then(r=>(t&&(r=r.filter(i=>i[0]!=="_")),r))}$getContributedCommandMetadata(){const t=Object.create(null);for(const[r,i]of this.b){const{metadata:s}=i;s&&(t[r]=s)}return Promise.resolve(t)}};rv=__decorate([__param(0,Me),__param(1,He),__param(2,sf)],rv);var Un=_("IExtHostCommands"),WP=class{constructor(e,t,r){this.d=e,this.f=t,this.g=r,this.delegatingCommandId=`__vsc${Dr()}`,this.b=new Map,this.c=0,this.d.registerCommand(!0,this.delegatingCommandId,this.h,this)}toInternal(e,t){if(!e)return;const r={$ident:void 0,id:e.command,title:e.title,tooltip:e.tooltip};if(!e.command)return r;const i=this.f(e.command);if(i)r.id=i.internalId,r.arguments=i.args.map((s,n)=>s.convert(e.arguments&&e.arguments[n]));else if(Ra(e.arguments)){const s=`${e.command} /${++this.c}`;this.b.set(s,e),t.add(ce(()=>{this.b.delete(s),this.g.trace("CommandsConverter#DISPOSE",s)})),r.$ident=s,r.id=this.delegatingCommandId,r.arguments=[s],this.g.trace("CommandsConverter#CREATE",e.command,s)}return r}fromInternal(e){return typeof e.$ident=="string"?this.b.get(e.$ident):{command:e.id,title:e.title,arguments:e.arguments}}getActualCommand(...e){return this.b.get(e[0])}h(...e){const t=this.getActualCommand(...e);return this.g.trace("CommandsConverter#EXECUTE",e[0],t?t.command:"MISSING"),t?this.d.executeCommand(t.command,...t.arguments||[]):Promise.reject(`Actual command not found, wanted to execute ${e[0]}`)}},U=class Yt{static{this.Uri=new Yt("uri","Uri of a text document",t=>y.isUri(t),t=>t)}static{this.Position=new Yt("position","A position in a text document",t=>xe.isPosition(t),Fe.from)}static{this.Range=new Yt("range","A range in a text document",t=>we.isRange(t),M.from)}static{this.Selection=new Yt("selection","A selection in a text document",t=>zi.isSelection(t),ei.from)}static{this.Number=new Yt("number","",t=>typeof t=="number",t=>t)}static{this.String=new Yt("string","",t=>typeof t=="string",t=>t)}static{this.StringArray=Yt.Arr(Yt.String)}static Arr(t){return new Yt(`${t.name}_array`,`Array of ${t.name}, ${t.description}`,r=>Array.isArray(r)&&r.every(i=>t.validate(i)),r=>r.map(i=>t.convert(i)))}static{this.CallHierarchyItem=new Yt("item","A call hierarchy item",t=>t instanceof sm,Rn.from)}static{this.TypeHierarchyItem=new Yt("item","A type hierarchy item",t=>t instanceof Om,Nn.from)}static{this.TestItem=new Yt("testItem","A VS Code TestItem",t=>t instanceof yl,Ns.from)}static{this.TestProfile=new Yt("testProfile","A VS Code test profile",t=>t instanceof q6,y1.from)}constructor(t,r,i,s){this.name=t,this.description=r,this.validate=i,this.convert=s}optional(){return new Yt(this.name,`(optional) ${this.description}`,t=>t==null||this.validate(t),t=>t===void 0?void 0:t===null?null:this.convert(t))}with(t,r){return new Yt(t??this.name,r??this.description,this.validate,this.convert)}},ae=class i3{static{this.Void=new i3("no result",t=>t)}constructor(t,r){this.description=t,this.convert=r}},le=class{constructor(e,t,r,i,s){this.id=e,this.internalId=t,this.description=r,this.args=i,this.result=s}},fa=_("IExtHostTerminalService"),n9=class extends he{constructor(e,t,r,i){super(),this.u=e,this._id=t,this.w=r,this.y=i,this.a=!1,this.m={isInteractedWith:!1,shellType:void 0},this.isOpen=!1,this.s=this.B(new D),this.onWillDispose=this.s.event,this.w=Object.freeze(this.w),this.b=new Promise(n=>this.g=n);const s=this;this.value={get name(){return s.y||""},get processId(){return s.b},get creationOptions(){return s.w},get exitStatus(){return s.j},get state(){return s.m},get selection(){return s.n},get shellIntegration(){return s.shellIntegration},sendText(n,o=!0){s.C(),s.u.$sendText(s._id,n,o)},show(n){s.C(),s.u.$show(s._id,n)},hide(){s.C(),s.u.$hide(s._id)},dispose(){s.a||(s.a=!0,s.u.$dispose(s._id))},get dimensions(){if(!(s.f===void 0||s.h===void 0))return{columns:s.f,rows:s.h}}}}dispose(){this.s.fire(),super.dispose()}async create(e,t){if(typeof this._id!="string")throw new Error("Terminal has already been created");await this.u.$createTerminal(this._id,{name:e.name,shellPath:e.shellPath??void 0,shellArgs:e.shellArgs??void 0,cwd:e.cwd??t?.cwd??void 0,env:e.env??void 0,icon:a9(e.iconPath)??void 0,color:po.isThemeColor(e.color)?e.color.id:void 0,initialText:e.message??void 0,strictEnv:e.strictEnv??void 0,hideFromUser:e.hideFromUser??void 0,forceShellIntegration:t?.forceShellIntegration??void 0,isFeatureTerminal:t?.isFeatureTerminal??void 0,isExtensionOwnedTerminal:!0,useShellEnvironment:t?.useShellEnvironment??void 0,location:t?.location||this.z(e.location,t?.resolvedExtHostIdentifier),isTransient:e.isTransient??void 0})}async createExtensionTerminal(e,t,r,i,s){if(typeof this._id!="string")throw new Error("Terminal has already been created");if(await this.u.$createTerminal(this._id,{name:this.y,isExtensionCustomPtyTerminal:!0,icon:i,color:po.isThemeColor(s)?s.id:void 0,location:t?.location||this.z(e,r),isTransient:!0}),typeof this._id=="string")throw new Error("Terminal creation failed");return this._id}z(e,t){return typeof e=="object"?"parentTerminal"in e&&e.parentTerminal&&t?{parentTerminal:t}:"viewColumn"in e?{viewColumn:Ct.from(e.viewColumn),preserveFocus:e.preserveFocus}:void 0:e}C(){if(this.a)throw new Error("Terminal has already been disposed")}set name(e){this.y=e}setExitStatus(e,t){this.j=Object.freeze({code:e,reason:t})}setDimensions(e,t){return e===this.f&&t===this.h||e===0||t===0?!1:(this.f=e,this.h=t,!0)}setInteractedWith(){return this.m.isInteractedWith?!1:(this.m={...this.m,isInteractedWith:!0},!0)}setShellType(e){let t;switch(e){case"sh":t=or.Sh;break;case"bash":t=or.Bash;break;case"fish":t=or.Fish;break;case"csh":t=or.Csh;break;case"ksh":t=or.Ksh;break;case"zsh":t=or.Zsh;break;case"cmd":t=or.CommandPrompt;break;case"gitbash":t=or.GitBash;break;case"pwsh":t=or.PowerShell;break;case"python":t=or.Python;break;case"julia":t=or.Julia;break;case"nu":t=or.NuShell;break;default:t=void 0;break}return this.m.shellType!==e?(this.m={...this.m,shellType:t},!0):!1}setSelection(e){this.n=e}_setProcessId(e){this.g?(this.g(e),this.g=void 0):this.b.then(t=>{t!==e&&(this.b=Promise.resolve(e))})}},iv=class{get onProcessReady(){return this.b.event}constructor(e){this.g=e,this.id=0,this.shouldPersist=!1,this.a=new D,this.onProcessData=this.a.event,this.b=new D,this.d=new D,this.onDidChangeProperty=this.d.event,this.f=new D,this.onProcessExit=this.f.event}refreshProperty(e){throw new Error(`refreshProperty is not suppported in extension owned terminals. property: ${e}`)}updateProperty(e,t){throw new Error(`updateProperty is not suppported in extension owned terminals. property: ${e}, value: ${t}`)}async start(){}shutdown(){this.g.close()}input(e){this.g.handleInput?.(e)}resize(e,t){this.g.setDimensions?.({columns:e,rows:t})}clearBuffer(){}async processBinary(e){}acknowledgeDataEvent(e){}async setUnicodeVersion(e){}getInitialCwd(){return Promise.resolve("")}getCwd(){return Promise.resolve("")}startSendingEvents(e){this.g.onDidWrite(t=>this.a.fire(t)),this.g.onDidClose?.((t=void 0)=>{this.f.fire(t===void 0?void 0:t)}),this.g.onDidOverrideDimensions?.(t=>{t&&this.d.fire({type:"overrideDimensions",value:{cols:t.columns,rows:t.rows}})}),this.g.onDidChangeName?.(t=>{this.d.fire({type:"title",value:t})}),this.g.open(e||void 0),e&&this.g.setDimensions?.(e),this.b.fire({pid:-1,cwd:"",windowsPty:void 0})}},VP=1,sv=class extends he{get activeTerminal(){return this.b?.value}get terminals(){return this.f.map(t=>t.value)}constructor(t,r,i){super(),this.R=r,this.f=[],this.g=new Map,this.h={},this.j={},this.m={},this.n=new Map,this.w=this.B(new us),this.z=new Set,this.C=new Map,this.D=new Map,this.F=new Map,this.G=new Map,this.H=new Map,this.I=new D,this.onDidCloseTerminal=this.I.event,this.J=new D,this.onDidOpenTerminal=this.J.event,this.L=new D,this.onDidChangeActiveTerminal=this.L.event,this.M=new D,this.onDidChangeTerminalDimensions=this.M.event,this.N=new D,this.onDidChangeTerminalState=this.N.event,this.O=new D,this.onDidChangeShell=this.O.event,this.P=new D({onWillAddFirstListener:()=>this.a.$startSendingDataEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingDataEvents()}),this.onDidWriteTerminalData=this.P.event,this.Q=new D({onWillAddFirstListener:()=>this.a.$startSendingCommandEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingCommandEvents()}),this.onDidExecuteTerminalCommand=this.Q.event,this.a=i.getProxy(z.MainThreadTerminalService),this.y=new jP(this.a.$sendProcessData),this.a.$registerProcessSupport(t),this.R.registerArgumentProcessor({processArgument:s=>{const n=o=>{const a=o;return this.getTerminalById(a.instanceId)?.value};switch(s?.$mid){case 15:return n(s);default:{if(Array.isArray(s))for(let o=0;o<s.length&&s[o].$mid===15;o++)s[o]=n(s[o]);return s}}}}),this.B({dispose:()=>{for(const[s,n]of this.g)n.shutdown(!0)}})}getDefaultShell(t){return(t?this.u:this.s)?.path||""}getDefaultShellArgs(t){return(t?this.u:this.s)?.args||[]}createExtensionTerminal(t,r){const i=new n9(this.a,Dr(),t,t.name),s=new iv(t.pty);return i.createExtensionTerminal(t.location,r,this.S(t,r).resolvedExtHostIdentifier,a9(t.iconPath),GP(t.color)).then(n=>{const o=this.U(n,s);this.h[n]=o}),this.f.push(i),i.value}S(t,r){if(r=r||{},t.location&&typeof t.location=="object"&&"parentTerminal"in t.location){const i=t.location.parentTerminal;if(i){const s=this.f.find(n=>n.value===i);s&&(r.resolvedExtHostIdentifier=s._id)}}else t.location&&typeof t.location!="object"?r.location=t.location:r.location&&typeof r.location=="object"&&"splitActiveTerminal"in r.location&&(r.location={splitActiveTerminal:!0});return r}attachPtyToTerminal(t,r){if(!this.getTerminalById(t))throw new Error(`Cannot resolve terminal with id ${t} for virtual process`);const s=new iv(r),n=this.U(t,s);this.h[t]=n}async $acceptActiveTerminalChanged(t){const r=this.b;if(t===null){this.b=void 0,r!==this.b&&this.L.fire(this.b);return}const i=this.getTerminalById(t);i&&(this.b=i,r!==this.b&&this.L.fire(this.b.value))}async $acceptTerminalProcessData(t,r){const i=this.getTerminalById(t);i&&this.P.fire({terminal:i.value,data:r})}async $acceptTerminalDimensions(t,r,i){const s=this.getTerminalById(t);s&&s.setDimensions(r,i)&&this.M.fire({terminal:s.value,dimensions:s.value.dimensions})}async $acceptDidExecuteCommand(t,r){const i=this.getTerminalById(t);i&&this.Q.fire({terminal:i.value,...r})}async $acceptTerminalMaximumDimensions(t,r,i){this.g.get(t)?.resize(r,i)}async $acceptTerminalTitleChange(t,r){const i=this.getTerminalById(t);i&&(i.name=r)}async $acceptTerminalClosed(t,r,i){const s=this.Y(this.f,t);if(s!==null){const n=this.f.splice(s,1)[0];n.setExitStatus(r,i),this.I.fire(n.value)}}$acceptTerminalOpened(t,r,i,s){if(r){const a=this.Y(this.f,r);if(a!==null){this.f[a]._id=t,this.J.fire(this.terminals[a]),this.f[a].isOpen=!0;return}}const n={name:s.name,shellPath:s.executable,shellArgs:s.args,cwd:typeof s.cwd=="string"?s.cwd:y.revive(s.cwd),env:s.env,hideFromUser:s.hideFromUser},o=new n9(this.a,t,n,i);this.f.push(o),this.J.fire(o.value),o.isOpen=!0}async $acceptTerminalProcessId(t,r){this.getTerminalById(t)?._setProcessId(r)}async $startExtensionTerminal(t,r){const i=this.getTerminalById(t);if(!i)return{message:d(2810,null,t)};i.isOpen||await new Promise(n=>{const o=this.onDidOpenTerminal(async a=>{a===i.value&&(o.dispose(),n())})});const s=this.g.get(t);s?s.startSendingEvents(r):this.j[t]={initialDimensions:r}}U(t,r){const i=new me;i.add(r.onProcessReady(n=>this.a.$sendProcessReady(t,n.pid,n.cwd,n.windowsPty))),i.add(r.onDidChangeProperty(n=>this.a.$sendProcessProperty(t,n))),this.y.startBuffering(t,r.onProcessData),i.add(r.onProcessExit(n=>this.W(t,n))),this.g.set(t,r);const s=this.j[t];return s&&r instanceof iv&&(r.startSendingEvents(s.initialDimensions),delete this.j[t]),i}$acceptProcessAckDataEvent(t,r){this.g.get(t)?.acknowledgeDataEvent(r)}$acceptProcessInput(t,r){this.g.get(t)?.input(r)}$acceptTerminalInteraction(t){const r=this.getTerminalById(t);r?.setInteractedWith()&&this.N.fire(r.value)}$acceptTerminalSelection(t,r){this.getTerminalById(t)?.setSelection(r)}$acceptProcessResize(t,r,i){try{this.g.get(t)?.resize(r,i)}catch(s){if(s.code!=="EPIPE"&&s.code!=="ERR_IPC_CHANNEL_CLOSED")throw s}}$acceptProcessShutdown(t,r){this.g.get(t)?.shutdown(r)}$acceptProcessRequestInitialCwd(t){this.g.get(t)?.getInitialCwd().then(r=>this.a.$sendProcessProperty(t,{type:"initialCwd",value:r}))}$acceptProcessRequestCwd(t){this.g.get(t)?.getCwd().then(r=>this.a.$sendProcessProperty(t,{type:"cwd",value:r}))}$acceptProcessRequestLatency(t){return Promise.resolve(t)}registerProfileProvider(t,r,i){if(this.D.has(r))throw new Error(`Terminal profile provider "${r}" already registered`);return this.D.set(r,i),this.a.$registerProfileProvider(r,t.identifier.value),new Ie(()=>{this.D.delete(r),this.a.$unregisterProfileProvider(r)})}registerTerminalCompletionProvider(t,r,...i){if(this.C.has(r.id))throw new Error(`Terminal completion provider "${r.id}" already registered`);return this.C.set(r.id,r),this.a.$registerCompletionProvider(r.id,t.identifier.value,...i),new Ie(()=>{this.C.delete(r.id),this.a.$unregisterCompletionProvider(r.id)})}async $provideTerminalCompletions(t,r){const i=new dt().token;if(i.isCancellationRequested||!this.activeTerminal)return;const s=this.C.get(t);if(!s)return;const n=await s.provideTerminalCompletions(this.activeTerminal,r,i);if(n!=null)return n}$acceptTerminalShellType(t,r){const i=this.getTerminalById(t);i?.setShellType(r)&&this.N.fire(i.value)}registerTerminalQuickFixProvider(t,r,i){if(this.F.has(t))throw new Error(`Terminal quick fix provider "${t}" is already registered`);return this.F.set(t,i),this.a.$registerQuickFixProvider(t,r),new Ie(()=>{this.F.delete(t),this.a.$unregisterQuickFixProvider(t)})}async $provideTerminalQuickFixes(t,r){const i=new dt().token;if(i.isCancellationRequested)return;const s=this.F.get(t);if(!s)return;const n=await s.provideTerminalQuickFixes(r,i);if(n===null||Array.isArray(n)&&n.length===0)return;const o=new me;if(this.w.value=o,!Array.isArray(n))return n?Qd.from(n,this.R.converter,o):void 0;const a=[];for(const c of n){const l=Qd.from(c,this.R.converter,o);l&&a.push(l)}return a}async $createContributedProfileTerminal(t,r){const i=new dt().token;let s=await this.D.get(t)?.provideTerminalProfile(i);if(!i.isCancellationRequested){if(s&&!("options"in s)&&(s={options:s}),!s||!("options"in s))throw new Error(`No terminal profile options provided for id "${t}"`);if("pty"in s.options){this.createExtensionTerminal(s.options,r);return}this.createTerminalFromOptions(s.options,r)}}registerLinkProvider(t){return this.z.add(t),this.z.size===1&&this.a.$startLinkProvider(),new Ie(()=>{this.z.delete(t),this.z.size===0&&this.a.$stopLinkProvider()})}async $provideLinks(t,r){const i=this.getTerminalById(t);if(!i)return[];this.G.delete(t),this.H.get(t)?.dispose(!0);const n=new dt;this.H.set(t,n);const o=[],a={terminal:i.value,line:r},c=[];for(const h of this.z)c.push(lo.withAsyncBody(async p=>{n.token.onCancellationRequested(()=>p({provider:h,links:[]}));const f=await h.provideTerminalLinks(a,n.token)||[];n.token.isCancellationRequested||p({provider:h,links:f})}));const l=await Promise.all(c);if(n.token.isCancellationRequested)return[];const u=new Map;for(const h of l)h&&h.links.length>0&&o.push(...h.links.map(p=>{const f={id:VP++,startIndex:p.startIndex,length:p.length,label:p.tooltip};return u.set(f.id,{provider:h.provider,link:p}),f}));return this.G.set(t,u),o}$activateLink(t,r){const i=this.G.get(t)?.get(r);i&&i.provider.handleTerminalLink(i.link)}W(t,r){this.y.stopBuffering(t),this.g.delete(t),delete this.j[t];const i=this.h[t];i&&(i.dispose(),delete this.h[t]),this.a.$sendProcessExit(t,r)}getTerminalById(t){return this.X(this.f,t)}getTerminalIdByApiObject(t){const r=this.f.findIndex(i=>i.value===t);return r>=0?r:null}X(t,r){const i=this.Y(t,r);return i!==null?t[i]:null}Y(t,r){const i=t.findIndex(s=>s._id===r);return i>=0?i:null}getEnvironmentVariableCollection(t){let r=this.n.get(t.identifier.value);return r||(r=this.B(new o9),this.$(t.identifier.value,r)),r.getScopedEnvironmentVariableCollection(void 0)}Z(t,r){const i=UP(r.map),s=HP(r.descriptionMap);this.a.$setEnvironmentVariableCollection(t,r.persistent,i.length===0?void 0:i,s)}$initEnvironmentVariableCollections(t){t.forEach(r=>{const i=r[0],s=this.B(new o9(r[1]));this.$(i,s)})}$acceptDefaultProfile(t,r){const i=this.s;this.s=t,this.u=r,i?.path!==t.path&&this.O.fire(t.path)}$(t,r){this.n.set(t,r),this.B(r.onDidChangeCollection(()=>{this.Z(t,r)}))}};sv=__decorate([__param(1,Un),__param(2,Me)],sv);var o9=class extends he{get persistent(){return this.b}set persistent(e){this.b=e,this.f.fire()}get onDidChangeCollection(){return this.f&&this.f.event}constructor(e){super(),this.map=new Map,this.a=new Map,this.descriptionMap=new Map,this.b=!0,this.f=new D,this.map=new Map(e)}getScopedEnvironmentVariableCollection(e){const t=this.j(e);let r=this.a.get(t);return r||(r=new qP(this,e),this.a.set(t,r),this.B(r.onDidChangeCollection(()=>this.f.fire()))),r}replace(e,t,r,i){this.g(e,{value:t,type:Do.Replace,options:r??{applyAtProcessCreation:!0},scope:i})}append(e,t,r,i){this.g(e,{value:t,type:Do.Append,options:r??{applyAtProcessCreation:!0},scope:i})}prepend(e,t,r,i){this.g(e,{value:t,type:Do.Prepend,options:r??{applyAtProcessCreation:!0},scope:i})}g(e,t){if(t.options&&t.options.applyAtProcessCreation===!1&&!t.options.applyAtShellIntegration)throw new Error("EnvironmentVariableMutatorOptions must apply at either process creation or shell integration");const r=this.h(e,t.scope),i=this.map.get(r),s=t.options?{applyAtProcessCreation:t.options.applyAtProcessCreation??!1,applyAtShellIntegration:t.options.applyAtShellIntegration??!1}:{applyAtProcessCreation:!0};if(!i||i.value!==t.value||i.type!==t.type||i.options?.applyAtProcessCreation!==s.applyAtProcessCreation||i.options?.applyAtShellIntegration!==s.applyAtShellIntegration||i.scope?.workspaceFolder?.index!==t.scope?.workspaceFolder?.index){const n=this.h(e,t.scope),o={variable:e,...t,options:s};this.map.set(n,o),this.f.fire()}}get(e,t){const r=this.h(e,t),i=this.map.get(r);return i?c9(i):void 0}h(e,t){const r=this.j(t);return r.length?`${e}:::${r}`:e}j(e){return this.m(e?.workspaceFolder)??""}m(e){return e?e.uri.toString():void 0}getVariableMap(e){const t=new Map;for(const[r,i]of this.map)this.j(i.scope)===this.j(e)&&t.set(i.variable,c9(i));return t}delete(e,t){const r=this.h(e,t);this.map.delete(r),this.f.fire()}clear(e){if(e?.workspaceFolder){for(const[t,r]of this.map)r.scope?.workspaceFolder?.index===e.workspaceFolder.index&&this.map.delete(t);this.n(e)}else this.map.clear(),this.descriptionMap.clear();this.f.fire()}setDescription(e,t){const r=this.j(t),i=this.descriptionMap.get(r);if(!i||i.description!==e){let s;typeof e=="string"?s=e:s=e?.value.split(`

`)[0];const n={description:s,scope:t};this.descriptionMap.set(r,n),this.f.fire()}}getDescription(e){const t=this.j(e);return this.descriptionMap.get(t)?.description}n(e){const t=this.j(e);this.descriptionMap.delete(t)}},qP=class{get persistent(){return this.b.persistent}set persistent(e){this.b.persistent=e}get onDidChangeCollection(){return this.a&&this.a.event}constructor(e,t){this.b=e,this.d=t,this.a=new D}getScoped(e){return this.b.getScopedEnvironmentVariableCollection(e)}replace(e,t,r){this.b.replace(e,t,r,this.d)}append(e,t,r){this.b.append(e,t,r,this.d)}prepend(e,t,r){this.b.prepend(e,t,r,this.d)}get(e){return this.b.get(e,this.d)}forEach(e,t){this.b.getVariableMap(this.d).forEach((r,i)=>e.call(t,i,r,this),this.d)}[Symbol.iterator](){return this.b.getVariableMap(this.d).entries()}delete(e){this.b.delete(e,this.d),this.a.fire(void 0)}clear(){this.b.clear(this.d)}set description(e){this.b.setDescription(e,this.d)}get description(){return this.b.getDescription(this.d)}},nv=class extends sv{constructor(t,r){super(!1,t,r)}createTerminal(t,r,i){throw new lp}createTerminalFromOptions(t,r){throw new lp}};nv=__decorate([__param(0,Un),__param(1,Me)],nv);function a9(e){if(!(!e||typeof e=="string"))return"id"in e?{id:e.id,color:e.color}:e}function GP(e){return po.isThemeColor(e)?e:void 0}function c9(e){const t={...e};return delete t.scope,t.options=t.options??void 0,delete t.variable,t}var QP=_("progressService"),l9;(function(e){e[e.Explorer=1]="Explorer",e[e.Scm=3]="Scm",e[e.Extensions=5]="Extensions",e[e.Window=10]="Window",e[e.Notification=15]="Notification",e[e.Dialog=20]="Dialog"})(l9||(l9={}));var wj=Object.freeze({total(){},worked(){},done(){}}),u9=class{static{this.None=Object.freeze({report(){}})}get value(){return this.a}constructor(e){this.b=e}report(e){this.a=e,this.b(this.a)}},h9=class extends he{constructor(t,r){super(),this.a=new co,r.withProgress(t,i=>(this.b=i,this.c&&i.report(this.c),this.a.p)),this.B(ce(()=>this.a.complete()))}report(t){this.b?this.b.report(t):this.c=t}};h9=__decorate([__param(1,QP)],h9);var yj=_("editorProgressService"),d9="__",Ej=_("IAuthenticationService"),xj=_("IAuthenticationExtensionsService"),ov=_("IExtHostAuthentication"),av=class{constructor(t){this.b=new Map,this.c=new D,this.d=new JP,this.a=t.getProxy(z.MainThreadAuthentication)}getExtensionScopedSessionsEvent(t){const r=t.toLowerCase();return ht.chain(this.c.event,i=>i.filter(s=>!s.extensionIdFilter||s.extensionIdFilter.includes(r)).map(s=>({provider:s.provider})))}async getSession(t,r,i,s={}){const n=Ue.toKey(t.identifier),o=[...i].sort().join(" ");return await this.d.getOrCreate(`${n} ${r} ${o}`,async()=>{await this.a.$ensureProvider(r);const a=t.displayName||t.name;return this.a.$getSession(r,i,n,a,s)})}async getAccounts(t){return await this.a.$ensureProvider(t),await this.a.$getAccounts(t)}async removeSession(t,r){const i=this.b.get(t);return i?i.provider.removeSession(r):this.a.$removeSession(t,r)}registerAuthenticationProvider(t,r,i,s){if(this.b.get(t))throw new Error(`An authentication provider with id '${t}' is already registered.`);this.b.set(t,{label:r,provider:i,options:s??{supportsMultipleAccounts:!1}});const n=i.onDidChangeSessions(o=>this.a.$sendDidChangeSessions(t,o));return this.a.$registerAuthenticationProvider(t,r,s?.supportsMultipleAccounts??!1),new Ie(()=>{n.dispose(),this.b.delete(t),this.a.$unregisterAuthenticationProvider(t)})}async $createSession(t,r,i){const s=this.b.get(t);if(s)return await s.provider.createSession(r,i);throw new Error(`Unable to find authentication provider with handle: ${t}`)}async $removeSession(t,r){const i=this.b.get(t);if(i)return await i.provider.removeSession(r);throw new Error(`Unable to find authentication provider with handle: ${t}`)}async $getSessions(t,r,i){const s=this.b.get(t);if(s)return await s.provider.getSessions(r,i);throw new Error(`Unable to find authentication provider with handle: ${t}`)}$onDidChangeAuthenticationSessions(t,r,i){return t.startsWith(d9)||this.c.fire({provider:{id:t,label:r},extensionIdFilter:i}),Promise.resolve()}};av=__decorate([__param(0,Me)],av);var JP=class{constructor(){this.a=new Map}getOrCreate(e,t){const r=this.a.get(e);if(r)return r;const i=t().finally(()=>this.a.delete(e));return this.a.set(e,i),i}},nf,cv=_("IExtHostLanguageModels"),f9=class{constructor(e,t){this.option=e,this.stream=new jp,this.stream=t??new jp}},XP=class{constructor(){this.a=new Map,this.b=new jp,this.c=!1;const e=this;this.apiObject={get stream(){return e.b.asyncIterable},get text(){return qa.map(e.b.asyncIterable,t=>{if(t instanceof ar)return t.value}).coalesce()}}}*d(){if(this.a.size>0)for(const[,e]of this.a)yield e.stream;else yield this.b}handleFragment(e){if(this.c)return;let t=this.a.get(e.index);t||(this.a.size===0?t=new f9(e.index,this.b):t=new f9(e.index),this.a.set(e.index,t));let r;e.part.type==="text"?r=new ar(e.part.value):r=new tl(e.part.toolCallId,e.part.name,e.part.parameters),t.stream.emitOne(r)}reject(e){this.c=!0;for(const t of this.d())t.reject(e)}resolve(){this.c=!0;for(const e of this.d())e.resolve()}},lv=class{static{nf=this}static{this.a=1}constructor(t,r,i){this.k=r,this.l=i,this.c=new D,this.d=new D,this.onDidChangeProviders=this.d.event,this.f=new Map,this.g=new Map,this.h=new Oi,this.i=new Map,this.j=new Map,this.t=new Set,this.b=t.getProxy(z.MainThreadLanguageModels)}dispose(){this.c.dispose(),this.d.dispose()}registerLanguageModel(t,r,i,s){const n=nf.a++;this.f.set(n,{extension:t.identifier,provider:i,languageModelId:r});let o;s.auth&&(o={providerLabel:t.displayName||t.name,accountLabel:typeof s.auth=="object"?s.auth.label:void 0}),this.b.$registerLanguageModelProvider(n,`${Ue.toKey(t.identifier)}/${r}`,{extension:t.identifier,id:r,vendor:s.vendor??Ue.toKey(t.identifier),name:s.name??"",family:s.family??"",version:s.version,maxInputTokens:s.maxInputTokens,maxOutputTokens:s.maxOutputTokens,auth:o,targetExtensions:s.extensions,isDefault:s.isDefault,isUserSelectable:s.isUserSelectable,capabilities:s.capabilities});const a=i.onDidReceiveLanguageModelResponse2?.(({extensionId:c,participant:l,tokenCount:u})=>{this.b.$whenLanguageModelChatRequestMade(r,new Ue(c),l,u)});return ce(()=>{this.f.delete(n),this.b.$unregisterProvider(n),a?.dispose()})}async $startChatRequest(t,r,i,s,n,o){const a=this.f.get(t);if(!a)throw new Error("Provider not found");const c=new u9(async u=>{if(o.isCancellationRequested){this.k.warn(`[CHAT](${a.extension.value}) CANNOT send progress because the REQUEST IS CANCELLED`);return}let h;if(u.part instanceof tl?h={type:"tool_use",name:u.part.name,parameters:u.part.input,toolCallId:u.part.callId}:u.part instanceof ar&&(h={type:"text",value:u.part.value}),!h){this.k.warn(`[CHAT](${a.extension.value}) UNKNOWN part ${JSON.stringify(u)}`);return}this.b.$reportResponsePart(r,{index:u.index,part:h})});let l;a.provider.provideLanguageModelResponse2?l=Promise.resolve(a.provider.provideLanguageModelResponse2(s.map(na.to),n,Ue.toKey(i),c,o)):l=Promise.resolve(a.provider.provideLanguageModelResponse(s.map(na.to),n,Ue.toKey(i),c,o)),l.then(()=>{this.b.$reportResponseDone(r,void 0)},u=>{this.b.$reportResponseDone(r,Yn(u))})}$provideTokenLength(t,r,i){const s=this.f.get(t);return s?Promise.resolve(s.provider.provideTokenCount(r,i)):Promise.resolve(0)}$acceptChatModelMetadata(t){if(t.added)for(const{identifier:r,metadata:i}of t.added)this.g.set(r,{metadata:i,apiObjects:new Oi});if(t.removed)for(const r of t.removed){this.g.delete(r);for(const[i,s]of this.i)s.languageModelId===r&&(s.res.reject(new ui),this.i.delete(i))}t.added?.forEach(r=>this.r(r.metadata)),this.d.fire(void 0)}async getDefaultLanguageModel(t){const r=mr.find(this.g.entries(),([,i])=>!!i.metadata.isDefault)?.[0];if(r)return this.getLanguageModelByIdentifier(t,r)}async getLanguageModelByIdentifier(t,r){const i=this.g.get(r);if(!i)return;this.q(t.identifier,i.metadata)&&await this.r(i.metadata);let s=i.apiObjects.get(t.identifier);if(!s){const n=this;s={id:i.metadata.id,vendor:i.metadata.vendor,family:i.metadata.family,version:i.metadata.version,name:i.metadata.name,maxInputTokens:i.metadata.maxInputTokens,countTokens(o,a){if(!n.g.has(r))throw Ei.NotFound(r);return n.s(r,o,a??st.None)},sendRequest(o,a,c){if(!n.g.has(r))throw Ei.NotFound(r);return n.m(t,r,o,a??{},c??st.None)}},Object.freeze(s),i.apiObjects.set(t.identifier,s)}return s}async selectLanguageModels(t,r){const i=await this.b.$selectChatModels({...r,extension:t.identifier}),s=[];for(const n of i){const o=await this.getLanguageModelByIdentifier(t,n);o&&s.push(o)}return s}async m(t,r,i,s,n){const o=this.n(t,i),a=t.identifier,c=this.g.get(r)?.metadata;if(!c||!this.g.has(r))throw Ei.NotFound(`Language model '${r}' is unknown.`);if(this.q(a,c)&&(!await this.o(t,{identifier:c.extension,displayName:c.auth.providerLabel},s.justification,!1)||!this.h.get(a)?.has(c.extension)))throw Ei.NoPermissions(`Language model '${r}' cannot be used by '${a.value}'.`);try{const l=Math.random()*1e6|0,u=new XP;this.i.set(l,{languageModelId:r,res:u});try{await this.b.$tryStartChatRequest(a,r,l,o,s,n)}catch(h){throw this.i.delete(l),h}return u.apiObject}catch(l){throw l.name===Ei.name?l:new Ei(`Language model '${r}' errored: ${rn(l)}`,"Unknown",l)}}n(t,r){const i=[];for(const s of r)s.role===Hr.System&&R(t,"languageModelSystem"),i.push(na.from(s));return i}async $acceptResponsePart(t,r){const i=this.i.get(t);i&&i.res.handleFragment(r)}async $acceptResponseDone(t,r){const i=this.i.get(t);i&&(this.i.delete(t),r?i.res.reject(Ei.tryDeserialize(r)??lw(r)):i.res.resolve())}async o(t,r,i,s){const n=d9+r.identifier.value;if(await this.l.getSession(t,n,[],{silent:!0}))return this.$updateModelAccesslist([{from:t.identifier,to:r.identifier,enabled:!0}]),!0;if(s)return!1;try{const a=i?d(2801,null,r.displayName,i):void 0;return await this.l.getSession(t,n,[],{forceNewSession:{detail:a}}),this.$updateModelAccesslist([{from:t.identifier,to:r.identifier,enabled:!0}]),!0}catch{return!1}}q(t,r){return!!r.auth&&!Ue.equals(r.extension,t)}async r(t){if(t.auth)for(const r of this.t)try{await this.o(r,{identifier:t.extension,displayName:""},void 0,!0)}catch(i){this.k.error("Fake Auth request failed"),this.k.error(i)}}async s(t,r,i){if(!this.g.get(t))throw Ei.NotFound(`Language model '${t}' is unknown.`);const n=mr.find(this.f.values(),o=>o.languageModelId===t);return n?n.provider.provideTokenCount(r,i):this.b.$countTokens(t,typeof r=="string"?r:na.from(r),i)}$updateModelAccesslist(t){const r=new Array;for(const{from:i,to:s,enabled:n}of t){const o=this.h.get(i)??new tn;if(o.has(s)!==n){n?o.add(s):o.delete(s),this.h.set(i,o);const c={from:i,to:s};r.push(c),this.c.fire(c)}}}createLanguageModelAccessInformation(t){this.t.add(t);const r=this,i=ht.signal(ht.filter(this.c.event,n=>Ue.equals(n.from,t.identifier))),s=ht.signal(this.d.event);return{get onDidChange(){return ht.any(i,s)},canSendRequest(n){let o;e:for(const[c,l]of r.g)for(const u of l.apiObjects.values())if(u===n){o=l.metadata;break e}if(!o)return;if(!r.q(t.identifier,o))return!0;const a=r.h.get(t.identifier);if(a)return a.has(o.extension)}}}fileIsIgnored(t,r,i){return R(t,"chatParticipantAdditions"),this.b.$fileIsIgnored(r,i)}async $isFileIgnored(t,r,i){const s=this.j.get(t);if(!s)throw new Error("Unknown LanguageModelIgnoredFileProvider");return await s.provideFileIgnored(y.revive(r),i)??!1}registerIgnoredFileProvider(t,r){R(t,"chatParticipantPrivate");const i=nf.a++;return this.b.$registerFileIgnoreProvider(i),this.j.set(i,r),ce(()=>{this.b.$unregisterFileIgnoreProvider(i),this.j.delete(i)})}};lv=nf=__decorate([__param(0,Me),__param(1,He),__param(2,ov)],lv);function El(e,t=tr){return K$(e,t)?e.charAt(0).toUpperCase()+e.slice(1):e}function YP(e,t){return e.replace(/^~($|\/|\\)/,`${t}$1`)}var p9;(function(e){e[e.TEXT=0]="TEXT",e[e.VARIABLE=1]="VARIABLE",e[e.SEPARATOR=2]="SEPARATOR"})(p9||(p9={}));var ZP=60,KP=ZP*60,uv=KP*24,Sj=uv*7,Ij=uv*30,Cj=uv*365;function eA(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}var tA={DateTimeFormat(e,t){try{return new Intl.DateTimeFormat(e,t)}catch{return new Intl.DateTimeFormat(void 0,t)}},Collator(e,t){try{return new Intl.Collator(e,t)}catch{return new Intl.Collator(void 0,t)}},Segmenter(e,t){try{return new Intl.Segmenter(e,t)}catch{return new Intl.Segmenter(void 0,t)}},Locale(e,t){try{return new Intl.Locale(e,t)}catch{return new Intl.Locale(hs,t)}}},g9;(function(e){e[e.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",e[e.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",e[e.MAX_UINT_8=255]="MAX_UINT_8",e[e.MAX_UINT_16=65535]="MAX_UINT_16",e[e.MAX_UINT_32=4294967295]="MAX_UINT_32",e[e.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(g9||(g9={}));function m9(e){return e<0?0:e>255?255:e|0}function pa(e){return e<0?0:e>4294967295?4294967295:e|0}var v9=class s3{constructor(t){const r=m9(t);this.c=r,this.a=s3.d(r),this.b=new Map}static d(t){const r=new Uint8Array(256);return r.fill(t),r}set(t,r){const i=m9(r);t>=0&&t<256?this.a[t]=i:this.b.set(t,i)}get(t){return t>=0&&t<256?this.a[t]:this.b.get(t)||this.c}clear(){this.a.fill(this.c),this.b.clear()}},w9;(function(e){e[e.False=0]="False",e[e.True=1]="True"})(w9||(w9={}));var b9;(function(e){e[e.Regular=0]="Regular",e[e.Whitespace=1]="Whitespace",e[e.WordSeparator=2]="WordSeparator"})(b9||(b9={}));var rA=class extends v9{constructor(e,t){super(0),this.e=null,this.f=null,this.g=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this.e=tA.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this.e=null;for(let r=0,i=e.length;r<i;r++)this.set(e.charCodeAt(r),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let r=null;for(const i of this.h(e)){if(i.index>t)break;r=i}return r}findNextIntlWordAtOrAfterOffset(e,t){for(const r of this.h(e))if(!(r.index<t))return r;return null}h(e){return this.e?this.f===e?this.g:(this.f=e,this.g=this.j(this.e.segment(e)),this.g):[]}j(e){const t=[];for(const r of e)this.k(r)&&t.push(r);return t}k(e){return!!e.isWordLike}},y9=new fp(10);function iA(e,t){const r=`${e}/${t.join(",")}`;let i=y9.get(r);return i||(i=new rA(e,t),y9.set(r,i)),i}var hv;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"})(hv||(hv={}));var E9;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"})(E9||(E9={}));var x9;(function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"})(x9||(x9={}));var k9;(function(e){e[e.Normal=1]="Normal",e[e.Underlined=2]="Underlined"})(k9||(k9={}));var $9;(function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"})($9||($9={}));var S9;(function(e){e[e.TextDefined=0]="TextDefined",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(S9||(S9={}));var I9;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(I9||(I9={}));var C9;(function(e){e[e.LF=0]="LF",e[e.CRLF=1]="CRLF"})(C9||(C9={}));var dv=class{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}},D9;(function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",e[e.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",e[e.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",e[e.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(D9||(D9={}));var P9;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.None=2]="None",e[e.LeftOfInjectedText=3]="LeftOfInjectedText",e[e.RightOfInjectedText=4]="RightOfInjectedText"})(P9||(P9={}));var A9;(function(e){e[e.FIRST_LINE_DETECTION_LENGTH_LIMIT=1e3]="FIRST_LINE_DETECTION_LENGTH_LIMIT"})(A9||(A9={}));var sA=class{constructor(e,t,r){this.regex=e,this.wordSeparators=t,this.simpleSearch=r}},nA=class{constructor(e,t,r){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=r}},T9=class{constructor(e,t,r,i){this.searchString=e,this.isRegex=t,this.matchCase=r,this.wordSeparators=i}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=R9(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=L$(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let r=!this.isRegex&&!e;return r&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(r=this.matchCase),new sA(t,this.wordSeparators?iA(this.wordSeparators,[]):null,r?this.searchString:null)}};function R9(e){if(!e||e.length===0)return!1;for(let t=0,r=e.length;t<r;t++){const i=e.charCodeAt(t);if(i===10)return!0;if(i===92){if(t++,t>=r)break;const s=e.charCodeAt(t);if(s===110||s===114||s===87)return!0}}return!1}function L9(e,t,r){if(!r)return new dv(e,null);const i=[];for(let s=0,n=t.length;s<n;s++)i[s]=t[s];return new dv(e,i)}function oA(e,t,r,i,s){if(i===0)return!0;const n=t.charCodeAt(i-1);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(i);if(e.get(o)!==0)return!0}return!1}function aA(e,t,r,i,s){if(i+s===r)return!0;const n=t.charCodeAt(i+s);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(i+s-1);if(e.get(o)!==0)return!0}return!1}function N9(e,t,r,i,s){return oA(e,t,r,i,s)&&aA(e,t,r,i,s)}var cA=class{constructor(e,t){this._wordSeparators=e,this.a=t,this.b=-1,this.c=0}reset(e){this.a.lastIndex=e,this.b=-1,this.c=0}next(e){const t=e.length;let r;do{if(this.b+this.c===t||(r=this.a.exec(e),!r))return null;const i=r.index,s=r[0].length;if(i===this.b&&s===this.c){if(s===0){Eb(e,t,this.a.lastIndex)>65535?this.a.lastIndex+=2:this.a.lastIndex+=1;continue}return null}if(this.b=i,this.c=s,!this._wordSeparators||N9(this._wordSeparators,e,t,i,s))return r}while(r);return null}};function F9(e){return e.scheme!==q.file&&e.scheme!==q.vscodeRemote}function lA(e){if(e.folders.length)return e.folders.every(t=>F9(t.uri))?e.folders[0].uri:void 0;if(e.configuration&&F9(e.configuration))return e.configuration}function uA(e){return lA(e)?.scheme}var hA=Mg,M9=_("remoteAgentService"),Dj=new class{constructor(){this.maxSampleCount=5,this.sampleDelay=2e3,this.initial=[],this.maxInitialCount=3,this.average=[],this.maxAverageCount=100,this.highLatencyMultiple=2,this.highLatencyMinThreshold=500,this.highLatencyMaxThreshold=1500,this.lastMeasurement=void 0}get latency(){return this.lastMeasurement}async measure(e){let t=1/0;for(let i=0;i<this.maxSampleCount;i++){const s=await e.getRoundTripTime();if(s===void 0)return;t=Math.min(t,s/2),await gi(this.sampleDelay)}this.average.push(t),this.average.length>this.maxAverageCount&&this.average.shift();let r;return this.initial.length<this.maxInitialCount?this.initial.push(t):r=this.initial.reduce((i,s)=>i+s,0)/this.initial.length,this.lastMeasurement={initial:r,current:t,average:this.average.reduce((i,s)=>i+s,0)/this.average.length,high:typeof r>"u"?!1:t>this.highLatencyMaxThreshold||t>this.highLatencyMinThreshold&&t>r*this.highLatencyMultiple},this.lastMeasurement}},fv,dA=_("pathService"),O9=fv=class{constructor(t,r,i,s){this.d=t,this.e=r,this.f=i,this.g=s,this.a=(async()=>(await this.e.getEnvironment())?.os||a$)(),this.b=(async()=>{const n=await this.e.getEnvironment();return this.c=n?.userHome??t})()}hasValidBasename(t,r,i){return typeof r=="string"||typeof r>"u"?this.a.then(s=>this.h(t,s,r)):this.h(t,r,i)}h(t,r,i){return t.scheme===q.file||t.scheme===q.vscodeRemote?Z$(i??Mi(t),r===1):!0}get defaultUriScheme(){return fv.findDefaultUriScheme(this.f,this.g)}static findDefaultUriScheme(t,r){if(t.remoteAuthority)return q.vscodeRemote;const i=uA(r.getWorkspace());if(i)return i;const s=r.getWorkspace().folders[0];if(s)return s.uri.scheme;const n=r.getWorkspace().configuration;return n?n.scheme:q.file}userHome(t){return t?.preferLocal?this.d:this.b}get resolvedUserHome(){return this.c}get path(){return this.a.then(t=>t===1?xt:Te)}async fileURI(t){let r="";if(await this.a===1&&(t=t.replace(/\\/g,"/")),t[0]==="/"&&t[1]==="/"){const s=t.indexOf("/",2);s===-1?(r=t.substring(2),t="/"):(r=t.substring(2,s),t=t.substring(s)||"/")}return y.from({scheme:q.file,authority:r,path:t,query:"",fragment:""})}};O9=fv=__decorate([__param(1,M9),__param(2,hA),__param(3,Du)],O9);function fA(e){return typeof e=="object"&&"uri"in e&&"pattern"in e}var U9=class{constructor(t,r,i,s,n,o){this.a=t,this.b=r,this.c=i,this.d=s,this.f=n,this.g=o}aiText(t,r,i={}){return{...this.j(r?.map(ng),i),type:3,contentPattern:t}}text(t,r,i={}){t=this.h(t,i);const s=this.a.getValue(),n=r&&r.some(a=>!this.a.getValue({resource:a}).search.useRipgrep);return{...this.j(r?.map(ng),i),type:2,contentPattern:t,previewOptions:i.previewOptions,maxFileSize:i.maxFileSize,usePCRE2:s.search.usePCRE2||n||!1,surroundingContext:i.surroundingContext,userDisabledExcludesAndIgnoreFiles:i.disregardExcludeSettings&&i.disregardIgnoreFiles}}h(t,r){const i=this.a.getValue();t.isRegExp&&(t.pattern=t.pattern.replace(/\r?\n/g,"\\n"));const s={...t,wordSeparators:i.editor.wordSeparators};return this.l(t,r)&&(s.isCaseSensitive=!0),this.m(t)&&(s.isMultiline=!0),r.notebookSearchConfig?.includeMarkupInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownInput=r.notebookSearchConfig.includeMarkupInput),r.notebookSearchConfig?.includeMarkupPreview&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownPreview=r.notebookSearchConfig.includeMarkupPreview),r.notebookSearchConfig?.includeCodeInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellInput=r.notebookSearchConfig.includeCodeInput),r.notebookSearchConfig?.includeOutput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellOutput=r.notebookSearchConfig.includeOutput),s}file(t,r={}){return{...this.j(t,r),type:1,filePattern:r.filePattern?r.filePattern.trim():r.filePattern,exists:r.exists,sortByScore:r.sortByScore,cacheKey:r.cacheKey,shouldGlobMatchFilePattern:r.shouldGlobSearch}}i(t,r){if(!t)return{};if(Array.isArray(t)){if(t=t.filter(i=>i.length>0).map(of),!t.length)return{}}else t=of(t);return r?this.parseSearchPaths(t):{pattern:pv(...Array.isArray(t)?t:[t])}}j(t=[],r={}){let i=Array.isArray(r.excludePattern)?r.excludePattern.map(u=>u.pattern).flat():r.excludePattern;i=i?.length===1?i[0]:i;const s=this.i(r.includePattern,r.expandPatterns),n=this.i(i,r.expandPatterns),o=t.length>1,a=(s.searchPaths&&s.searchPaths.length?s.searchPaths.map(u=>this.t(u,r,n)):t.map(u=>this.u(u,r,n,o))).filter(u=>!!u),c={_reason:r._reason,folderQueries:a,usingSearchPaths:!!(s.searchPaths&&s.searchPaths.length),extraFileResources:r.extraFileResources,excludePattern:n.pattern,includePattern:s.pattern,onlyOpenEditors:r.onlyOpenEditors,maxResults:r.maxResults,onlyFileScheme:r.onlyFileScheme};if(r.onlyOpenEditors){const u=Rt(this.c.groups.flatMap(f=>f.editors.map(m=>m.resource)));this.d.trace("QueryBuilder#commonQuery - openEditor URIs",JSON.stringify(u));const h=u.filter(f=>b7(c,f.fsPath)),p=this.k(h);return this.d.trace("QueryBuilder#commonQuery - openEditor Query",JSON.stringify(p)),{...c,...p}}const l=r.extraFileResources&&r.extraFileResources.filter(u=>b7(c,u.fsPath));return c.extraFileResources=l&&l.length?l:void 0,c}k(t){const r=[],i=new Nt,s={};let n=!1;return t.forEach(o=>{if(o.scheme===q.walkThrough)return;if(hS(o)){const c=this.b.getWorkspaceFolder(o)?.uri??this.g.extUri.dirname(o);let l=i.get(c);l||(n=!0,l={folder:c,includePattern:{}},r.push(l),i.set(c,l));const u=_a(c.fsPath,o.fsPath);Kn(l.includePattern)[u.replace(/\\/g,"/")]=!0}else o.fsPath&&(n=!0,s[o.fsPath]=!0)}),{folderQueries:r,includePattern:s,usingSearchPaths:!0,excludePattern:n?void 0:{"**/*":!0}}}l(t,r){if(r.isSmartCase){if(t.isRegExp){if(Sb(t.pattern,!0))return!0}else if(Sb(t.pattern))return!0}return!!t.isCaseSensitive}m(t){return t.isMultiline||t.isRegExp&&R9(t.pattern)||t.pattern.indexOf(`
`)>=0?!0:!!t.isMultiline}parseSearchPaths(t){const r=h=>fu(h)||/^\.\.?([\/\\]|$)/.test(h),s=(Array.isArray(t)?t:gA(t)).map(h=>{const p=this.f.resolvedUserHome;return p?YP(h,p.scheme===q.file?p.fsPath:p.path):h}),n=pw(s,h=>r(h)?"searchPaths":"exprSegments"),o=(n.exprSegments||[]).map(h=>Rp(h,"/")).map(h=>Rp(h,"\\")).map(h=>(h[0]==="."&&(h="*"+h),mA(h))),a={},c=this.o(n.searchPaths||[]);c&&c.length&&(a.searchPaths=c);const l=o.flat(),u=pv(...l);return u&&(a.pattern=u),a}n(t,r){return r.disregardExcludeSettings?void 0:iP(t,!r.disregardSearchExcludeSettings)}o(t){if(!t||!t.length)return[];const r=t.flatMap(s=>{let{pathPortion:n,globPortion:o}=pA(s);return o&&(o=gv(o)),this.q(n).flatMap(c=>this.r(c,o))}),i=new Map;return r.forEach(s=>{const n=s.searchPath.toString(),o=i.get(n);o?s.pattern&&(o.pattern=o.pattern||{},o.pattern[s.pattern]=!0):i.set(n,{searchPath:s.searchPath,pattern:s.pattern?pv(s.pattern):void 0})}),Array.from(i.values())}q(t){if(fu(t)){const r=this.b.getWorkspace().folders;return r[0]&&r[0].uri.scheme!==q.file?[{searchPath:r[0].uri.with({path:t})}]:[{searchPath:y.file(so(t))}]}if(this.b.getWorkbenchState()===2){const r=this.b.getWorkspace().folders[0].uri;if(t=of(t),t.startsWith("../")||t===".."){const s=Te.resolve(r.path,t);return[{searchPath:r.with({path:s})}]}const i=gv(t);return[{searchPath:r,pattern:i}]}else{if(t==="./"||t===".\\")return[];{const r=t.replace(/^\.[\/\\]/,""),s=this.b.getWorkspace().folders.map(n=>{const o=r.match(new RegExp(`^${Ks(n.name)}(?:/(.*)|$)`));return o?{match:o,folder:n}:null}).filter(Js);if(s.length)return s.map(n=>{const o=n.match[1];return{searchPath:n.folder.uri,pattern:o&&gv(o)}});{const n=t.match(/\.[\/\\](.+)[\/\\]?/),o=n?n[1]:t,a=d(13327,null,o);throw new Error(a)}}}}r(t,r){const i=t.pattern&&r?`${t.pattern}/${r}`:t.pattern||r,s=[{searchPath:t.searchPath,pattern:i}];return i&&!i.endsWith("**")&&s.push({searchPath:t.searchPath,pattern:i+"/**"}),s}t(t,r,i){const s=this.u(ng(t.searchPath),r,i,!1);return s?{...s,includePattern:t.pattern}:null}u(t,r,i,s){let n;const o=y.isUri(t)?t:t.uri;let a=r.excludePattern?.map(f=>{const m=r.excludePattern&&fA(f)?f.uri:void 0;return!m||!(y.isUri(t)&&this.g.extUri.isEqual(t,m))?m:void 0});if(a?.length||(a=[void 0]),i.searchPaths){const f=i.searchPaths.filter(m=>Va(m.searchPath,o))[0];if(f&&!f.pattern)return null;f&&(n=f.pattern)}const c=this.a.getValue({resource:o}),u={...this.n(c,r)||{},...n||{}},h=y.isUri(t)?Mi(t):t.name,p=a.map(f=>Object.keys(u).length>0?{folder:f,pattern:u}:void 0).filter(f=>f);return{folder:o,folderName:s?h:void 0,excludePattern:p,fileEncoding:c.files&&c.files.encoding,disregardIgnoreFiles:typeof r.disregardIgnoreFiles=="boolean"?r.disregardIgnoreFiles:!c.search.useIgnoreFiles,disregardGlobalIgnoreFiles:typeof r.disregardGlobalIgnoreFiles=="boolean"?r.disregardGlobalIgnoreFiles:!c.search.useGlobalIgnoreFiles,disregardParentIgnoreFiles:typeof r.disregardParentIgnoreFiles=="boolean"?r.disregardParentIgnoreFiles:!c.search.useParentIgnoreFiles,ignoreSymlinks:typeof r.ignoreSymlinks=="boolean"?r.ignoreSymlinks:!c.search.followSymlinks}}};U9=__decorate([__param(0,Wu),__param(1,Du),__param(2,fD),__param(3,He),__param(4,dA),__param(5,I5)],U9);function pA(e){const t=e.match(/[\*\{\}\(\)\[\]\?]/);if(t){const r=t.index,i=e.substr(0,r).match(/[/|\\][^/\\]*$/);if(i){let s=e.substr(0,i.index);return s.match(/[/\\]/)||(s+="/"),{pathPortion:s,globPortion:e.substr((i.index||0)+1)}}}return{pathPortion:e}}function pv(...e){return e.length?e.reduce((t,r)=>(t[r]=!0,t),Object.create(null)):void 0}function gA(e){return Hg(e,",").map(t=>t.trim()).filter(t=>!!t.length)}function mA(e){return[`**/${e}/**`,`**/${e}`].map(r=>r.replace(/\*\*\/\*\*/g,"**"))}function of(e){return e.replace(/\\/g,"/")}function gv(e){return of(e).replace(/^\.\//,"").replace(/\/+$/g,"")}var vA=7e3;function wA(e,t){const r=t.activationEvents;if(!r)return Promise.resolve(void 0);const i=[],s=[];for(const u of r)if(/^workspaceContains:/.test(u)){const h=u.substr(18);h.indexOf("*")>=0||h.indexOf("?")>=0||e.forceUsingSearch?s.push(h):i.push(h)}if(i.length===0&&s.length===0)return Promise.resolve(void 0);const{promise:n,resolve:o}=gS(),a=u=>o({activationEvent:u}),c=Promise.all(i.map(u=>bA(e,u,a))).then(()=>{}),l=yA(e,t.identifier,s,a);return Promise.all([c,l]).then(()=>{o(void 0)}),n}async function bA(e,t,r){for(const i of e.folders)if(await e.exists(Qt(y.revive(i),t))){r(`workspaceContains:${t}`);return}}async function yA(e,t,r,i){if(r.length===0)return Promise.resolve(void 0);const s=new dt,n=e.checkExists(e.folders,r,s.token),o=setTimeout(async()=>{s.cancel(),e.logService.info(`Not activating extension '${t.value}': Timed out while searching for 'workspaceContains' pattern ${r.join(",")}`)},vA);let a=!1;try{a=await n}catch(c){Vs(c)||gr(c)}s.dispose(),clearTimeout(o),a&&i(`workspaceContains:${r.join(",")}`)}var H9=class{constructor(e){this.b=new D,this.onDidChangePassword=this.b.event,this.a=e.getProxy(z.MainThreadSecretState)}async $onDidChangePassword(e){this.b.fire(e)}get(e,t){return this.a.$getPassword(e,t)}store(e,t,r){return this.a.$setPassword(e,t,r)}delete(e,t){return this.a.$deletePassword(e,t)}},mv=_("IExtHostSecretState"),EA=class{#e;constructor(e,t){this.disposables=new me,this.a=Ue.toKey(e.identifier),this.#e=t,this.onDidChange=ht.map(ht.filter(this.#e.onDidChangePassword,r=>r.extensionId===this.a),r=>({key:r.key}),this.disposables)}dispose(){this.disposables.dispose()}get(e){return this.#e.get(this.a,e)}store(e,t){return this.#e.store(this.a,e,t)}delete(e){return this.#e.delete(this.a,e)}},vv=class{constructor(t,r,i){this.f=i,this.d=new Map,this.a=r.getProxy(z.MainThreadLocalization),this.b=t.environment.appLanguage,this.c=this.b===hs}getMessage(t,r){const{message:i,args:s,comment:n}=r;if(this.c)return mb(i,s??{});let o=i;n&&n.length>0&&(o+=`/${Array.isArray(n)?n.join(""):n}`);const a=this.d.get(t)?.contents[o];return a||this.f.warn(`Using default string since no string found in i18n bundle that has the key: ${o}`),mb(a??i,s??{})}getBundle(t){return this.d.get(t)?.contents}getBundleUri(t){return this.d.get(t)?.uri}async initializeLocalizedMessages(t){if(this.c||!t.l10n&&!t.isBuiltin||this.d.has(t.identifier.value))return;let r;const i=await this.g(t);if(!i){this.f.error(`No bundle location found for extension ${t.identifier.value}`);return}try{const s=await this.a.$fetchBundleContents(i),n=JSON.parse(s);r=t.isBuiltin?n.contents?.bundle:n}catch(s){this.f.error(`Failed to load translations for ${t.identifier.value} from ${i}: ${s.message}`);return}r&&this.d.set(t.identifier.value,{contents:r,uri:i})}async g(t){if(t.isBuiltin){const r=await this.a.$fetchBuiltInBundleUri(t.identifier.value,this.b);return y.revive(r)}return t.l10n?y.joinPath(t.extensionLocation,t.l10n,`bundle.l10n.${this.b}.json`):void 0}};vv=__decorate([__param(0,jt),__param(1,Me),__param(2,He)],vv);var wv=_("IExtHostLocalizationService"),bv=_("IExtHostManagedSockets"),yv=class{constructor(t){this.b=0,this.c=null,this.d=new Map,this.a=t.getProxy(z.MainThreadManagedSockets)}setFactory(t,r){for(const i of this.d.values())i.dispose();this.c&&this.a.$unregisterSocketFactory(this.c.socketFactoryId),this.c=new xA(t,r),this.a.$registerSocketFactory(this.c.socketFactoryId)}async $openRemoteSocket(t){if(!this.c||this.c.socketFactoryId!==t)throw new Error(`No socket factory with id ${t}`);const r=++this.b,i=await this.c.makeConnection(),s=new me;return this.d.set(r,new kA(r,i,s)),s.add(ce(()=>this.d.delete(r))),s.add(i.onDidEnd(()=>{this.a.$onDidManagedSocketEnd(r),s.dispose()})),s.add(i.onDidClose(n=>{this.a.$onDidManagedSocketClose(r,n?.stack??n?.message),s.dispose()})),s.add(i.onDidReceiveMessage(n=>this.a.$onDidManagedSocketHaveData(r,ke.wrap(n)))),r}$remoteSocketWrite(t,r){this.d.get(t)?.actual.send(r.buffer)}$remoteSocketEnd(t){const r=this.d.get(t);r&&(r.actual.end(),r.dispose())}async $remoteSocketDrain(t){await this.d.get(t)?.actual.drain?.()}};yv=__decorate([__param(0,Me)],yv);var xA=class{constructor(e,t){this.socketFactoryId=e,this.makeConnection=t}},kA=class extends he{constructor(e,t,r){super(),this.socketId=e,this.actual=t,this.B(r)}},Ev,j9=_("IHostUtils"),xv=Ev=class extends he{constructor(t,r,i,s,n,o,a,c,l,u,h,p,f){super(),this.Y=p,this.Z=f,this.a=this.B(new D),this.onDidChangeRemoteConnectionData=this.a.event,this.R=new Map,this.W=!1,this.c=r,this.g=i,this.f=a,this.j=s,this.m=n,this.s=o,this.t=l,this.u=u,this.w=h,this.y=this.g.getProxy(z.MainThreadWorkspace),this.z=this.g.getProxy(z.MainThreadTelemetry),this.C=this.g.getProxy(z.MainThreadExtensionService),this.D=new pi,this.F=new pi,this.G=new pi,this.H=new pi,this.I=new SA(this.f.extensions.activationEvents),this.L=new bl(this.I,this.f.extensions.allExtensions);const m=new tn(this.f.extensions.myExtensions);this.J=new bl(this.I,z9(this.L,m)),Ys&&(this.s.info(`Creating extension host with the following global extensions: ${ga(this.L)}`),this.s.info(`Creating extension host with the following local extensions: ${ga(this.J)}`)),this.M=new J7(this.g,this.s),this.N=new H9(this.g),this.O=c,this.h=this.q.add(t.createChild(new rg([V1,this.M],[mv,this.N]))),this.P=this.B(new z1(this.J,this.L,{onExtensionActivationError:(w,E,$)=>{this.C.$onExtensionActivationError(w,Yn(E),$)},actualActivateExtension:async(w,E)=>{if(bl.isHostExtension(w,this.J,this.L))return await this.C.$activateExtension(w,E),new LP;const $=this.J.getExtensionDescription(w);return this.fb($,E)}},this.s)),this.Q=null,this.S=Object.create(null),this.U=!1,this.X=this.f.remote.connectionData}getRemoteConnectionData(){return this.X}async initialize(){try{await this.vb(),this.D.open(),await this.j.waitForInitializeCall(),er("code/extHost/ready"),this.F.open(),this.f.autoStart&&this.tb()}catch(t){gr(t)}}async $(){this.O.onWillDeactivateAll();let t=[];try{t=this.J.getAllExtensionDescriptions().map(n=>n.identifier).filter(n=>this.isActivated(n)).map(n=>this.eb(n))}catch{}await Promise.all(t)}terminate(t,r=0){if(this.W)return;this.W=!0,this.s.info(`Extension host terminating: ${t}`),this.s.flush(),this.u.dispose(),this.P.dispose(),op(s=>{this.s.error(s)}),this.g.dispose();const i=this.$();Promise.race([gi(5e3),i]).finally(()=>{this.c.pid?this.s.info(`Extension host with pid ${this.c.pid} exiting with code ${r}`):this.s.info(`Extension host exiting with code ${r}`),this.s.flush(),this.s.dispose(),this.c.exit(r)})}isActivated(t){return this.G.isOpen()?this.P.isActivated(t):!1}async getExtension(t){const r=await this.C.$getExtension(t);return r&&{...r,identifier:new Ue(r.identifier.value),extensionLocation:y.revive(r.extensionLocation)}}ab(t,r){return this.P.activateByEvent(t,r)}bb(t,r){return this.P.activateById(t,r)}activateByIdWithErrors(t,r){return this.bb(t,r).then(()=>{const i=this.P.getActivatedExtension(t);if(i.activationFailed)return Promise.reject(i.activationFailedError)})}getExtensionRegistry(){return this.G.wait().then(t=>this.J)}getExtensionExports(t){if(this.G.isOpen())return this.P.getActivatedExtension(t).exports;try{return this.P.getActivatedExtension(t).exports}catch{return null}}async cb(t){if(t.scheme===q.file&&this.c.fsRealpath){const r=t.fsPath;this.R.has(r)||this.R.set(r,this.c.fsRealpath(r));const i=await this.R.get(r);return y.file(i)}return t}async getExtensionPathIndex(){return this.Q||(this.Q=this.db(this.J.getAllExtensionDescriptions()).then(t=>new $A(t))),this.Q}async db(t){const r=bs.forUris(i=>cS.ignorePathCasing(i));return await Promise.all(t.map(async i=>{if(this.wb(i)){const s=await this.cb(i.extensionLocation);r.set(s,i)}})),r}eb(t){let r=Promise.resolve(void 0);if(!this.G.isOpen()||!this.P.isActivated(t))return r;const i=this.P.getActivatedExtension(t);if(!i)return r;try{typeof i.module.deactivate=="function"&&(r=Promise.resolve(i.module.deactivate()).then(void 0,s=>(this.s.error(s),Promise.resolve(void 0))))}catch(s){this.s.error(`An error occurred when deactivating the extension '${t.value}':`),this.s.error(s)}try{i.disposable.dispose()}catch(s){this.s.error(`An error occurred when disposing the subscriptions for extension '${t.value}':`),this.s.error(s)}return r}async fb(t,r){return this.f.remote.isRemote?this.C.$onWillActivateExtension(t.identifier):await this.C.$onWillActivateExtension(t.identifier),this.hb(t,r).then(i=>{const s=i.activationTimes;return this.C.$onDidActivateExtension(t.identifier,s.codeLoadingTime,s.activateCallTime,s.activateResolvedTime,r),this.gb(t,r,"success",s),i},i=>{throw this.gb(t,r,"failure"),i})}gb(t,r,i,s){const n=_9(t,r);this.z.$publicLog2("extensionActivationTimes",{...n,...s||{},outcome:i})}hb(t,r){const i=_9(t,r);this.z.$publicLog2("activatePlugin",i);const s=this.wb(t);if(!s)return Promise.resolve(new RP(Kd.NONE));this.s.info(`ExtensionService#_doActivateExtension ${t.identifier.value}, startup: ${r.startup}, activationEvent: '${r.activationEvent}'${t.identifier.value!==r.extensionId.value?`, root cause: ${r.extensionId.value}`:""}`),this.s.flush();const n=new me,o=new Q7(r.startup);return Promise.all([this.xb(t,Qt(t.extensionLocation,s),o),this.ib(t,n)]).then(a=>(er(`code/extHost/willActivateExtension/${t.identifier.value}`),Ev.jb(this.s,t.identifier,a[0],a[1],n,o))).then(a=>(er(`code/extHost/didActivateExtension/${t.identifier.value}`),a))}ib(t,r){const i=this.Z.createLanguageModelAccessInformation(t),s=r.add(new NP(t,this.M)),n=r.add(new X7(t.identifier.value,!1,this.M)),o=r.add(new EA(t,this.N)),a=t.isUnderDevelopment?this.f.environment.extensionTestsLocationURI?Vo.Test:Vo.Development:Vo.Production,c=this.f.remote.isRemote?Dn.Workspace:Dn.UI;return this.s.trace(`ExtensionService#loadExtensionContext ${t.identifier.value}`),Promise.all([s.whenReady,n.whenReady,this.O.whenReady]).then(()=>{const l=this;let u,h;const p=ct(t,"ipc")?this.f.messagePorts?.get(Ue.toKey(t.identifier)):void 0;return Object.freeze({globalState:s,workspaceState:n,secrets:o,subscriptions:[],get languageModelAccessInformation(){return i},get extensionUri(){return t.extensionLocation},get extensionPath(){return t.extensionLocation.fsPath},asAbsolutePath(f){return Dp(t.extensionLocation.fsPath,f)},get storagePath(){return l.O.workspaceValue(t)?.fsPath},get globalStoragePath(){return l.O.globalValue(t).fsPath},get logPath(){return Dp(l.f.logsLocation.fsPath,t.identifier.value)},get logUri(){return y.joinPath(l.f.logsLocation,t.identifier.value)},get storageUri(){return l.O.workspaceValue(t)},get globalStorageUri(){return l.O.globalValue(t)},get extensionMode(){return a},get extension(){return u===void 0&&(u=new xl(l,t.identifier,t,c,!1)),u},get extensionRuntime(){return R(t,"extensionRuntime"),l.extensionRuntime},get environmentVariableCollection(){return l.u.getEnvironmentVariableCollection(t)},get messagePassingProtocol(){if(!h){if(!p)return;const f=ht.buffer(ht.fromDOMEventEmitter(p,"message",m=>m.data));p.start(),h={onDidReceiveMessage:f,postMessage:p.postMessage.bind(p)}}return h}})})}static jb(t,r,i,s,n,o){return i=i||{activate:void 0,deactivate:void 0},this.kb(t,r,i,s,o).then(a=>new ef(!1,null,o.build(),i,a,ce(()=>{n.dispose(),Li(s.subscriptions)})))}static kb(t,r,i,s,n){if(typeof i.activate=="function")try{n.activateCallStart(),t.trace(`ExtensionService#_callActivateOptional ${r.value}`);const o=typeof global=="object"?global:self,a=i.activate.apply(o,[s]);return n.activateCallStop(),n.activateResolveStart(),Promise.resolve(a).then(c=>(n.activateResolveStop(),c))}catch(o){return Promise.reject(o)}else return Promise.resolve(i)}lb(t,r){this.bb(t.identifier,{startup:!1,extensionId:t.identifier,activationEvent:r}).then(void 0,i=>{this.s.error(i)})}mb(t,r=0){const s=Date.now();zw(()=>{for(let n=r;n<t.length;n+=1){const o=t[n];for(const a of o.activationEvents??[])if(a==="onStartupFinished")if(Date.now()-s>50){this.mb(t,n);break}else this.lb(o,a)}})}nb(){this.C.$setPerformanceMarks(Qk()),this.m.getConfigProvider().then(t=>{const r=t.getConfiguration("extensions.experimental").get("deferredStartupFinishedActivation"),i=this.J.getAllExtensionDescriptions();if(r)this.mb(i);else for(const s of i)if(s.activationEvents)for(const n of s.activationEvents)n==="onStartupFinished"&&this.lb(s,n)})}ob(){const t=this.ab("*",!0).then(void 0,o=>{this.s.error(o)});this.B(this.j.onDidChangeWorkspace(o=>this.pb(o.added)));const r=this.j.workspace?this.j.workspace.folders:[],i=this.pb(r),s=this.rb(),n=Promise.all([s,t,i]).then(()=>{});return Promise.race([n,gi(1e4)]).then(()=>{this.nb()}),n}pb(t){return t.length===0?Promise.resolve(void 0):Promise.all(this.J.getAllExtensionDescriptions().map(r=>this.qb(t,r))).then(()=>{})}async qb(t,r){if(this.isActivated(r.identifier))return;const i=!this.f.remote.isRemote&&!!this.f.remote.authority,s={logService:this.s,folders:t.map(o=>o.uri),forceUsingSearch:i||!this.c.fsExists,exists:o=>this.c.fsExists(o.fsPath),checkExists:(o,a,c)=>this.y.$checkExists(o,a,c)},n=await wA(s,r);if(n)return this.bb(r.identifier,{startup:!0,extensionId:r.identifier,activationEvent:n.activationEvent}).then(void 0,o=>this.s.error(o))}async rb(){if(this.f.remote.authority)return this.ab(`onResolveRemoteAuthority:${this.f.remote.authority}`,!1)}async $extensionTestsExecute(){await this.H.wait();try{return await this.sb()}catch(t){throw console.error(t),t}}async sb(){const{extensionDevelopmentLocationURI:t,extensionTestsLocationURI:r}=this.f.environment;if(!t||!r)throw new Error(d(2797,null));const i=await this.xb(null,r,new Q7(!1));if(!i||typeof i.run!="function")throw new Error(d(2798,null,r.toString()));return new Promise((s,n)=>{const o=(l,u)=>{l?(Ys&&this.s.error("Test runner called back with error",l),n(l)):(Ys&&(u?this.s.info(`Test runner called back with ${u} failures.`):this.s.info("Test runner called back with successful outcome.")),s(typeof u=="number"&&u>0?1:0))},a=qr(r),c=i.run(a,o);c&&c.then&&c.then(()=>{Ys&&this.s.info("Test runner finished successfully."),s(0)}).catch(l=>{Ys&&this.s.error("Test runner finished with error",l),n(l instanceof Error&&l.stack?l.stack:String(l))})})}tb(){if(this.U)throw new Error("Extension host is already started!");return this.U=!0,this.F.wait().then(()=>this.G.open()).then(()=>Promise.race([this.P.waitForActivatingExtensions(),gi(1e3)])).then(()=>this.ob()).then(()=>{this.H.open(),this.s.info("Eager extensions activated")})}registerRemoteAuthorityResolver(t,r){return this.S[t]=r,ce(()=>{delete this.S[t]})}async getRemoteExecServer(t){const{resolver:r}=await this.ub(t);return r?.resolveExecServer?.(t,{resolveAttempt:0})}async ub(t){const r=t.indexOf("+");if(r===-1)throw new Co("Not an authority that can be resolved!",Bi.InvalidAuthority);const i=t.substr(0,r);return await this.D.wait(),await this.ab(`onResolveRemoteAuthority:${i}`,!1),{authorityPrefix:i,resolver:this.S[i]}}async $resolveAuthority(t,r){const i=Xs.create(!1),s=()=>`[resolveAuthority(${A6(t)},${r})][${i.elapsed()}ms] `,n=S=>this.s.info(`${s()}${S}`),o=S=>this.s.warn(`${s()}${S}`),a=(S,P=void 0)=>this.s.error(`${s()}${S}`,P),c=S=>{if(S instanceof Co)return{type:"error",error:{code:S._code,message:S._message,detail:S._detail}};throw S},l=async S=>{n(`activating resolver for ${S}...`);const{resolver:P,authorityPrefix:O}=await this.ub(S);if(!P)throw a(`no resolver for ${O}`),new Co(`No remote extension installed to resolve ${O}.`,Bi.NoResolverFound);return{resolver:P,authorityPrefix:O,remoteAuthority:S}},u=t.split(/@|%40/g).reverse();n(`activating remote resolvers ${u.join(" -> ")}`);let h;try{h=await Promise.all(u.map(l)).catch(async S=>{if(!(S instanceof Co)||S._code!==Bi.InvalidAuthority)throw S;return o(`resolving nested authorities failed: ${S.message}`),[await l(t)]})}catch(S){return c(S)}const p=new SS;p.cancelAndSet(()=>n("waiting..."),1e3);let f,m;for(const[S,{authorityPrefix:P,resolver:O,remoteAuthority:F}]of h.entries())try{if(S===h.length-1)n("invoking final resolve()..."),er(`code/extHost/willResolveAuthority/${P}`),f=await O.resolve(F,{resolveAttempt:r,execServer:m}),er(`code/extHost/didResolveAuthorityOK/${P}`),n("setting tunnel factory..."),this.B(await this.t.setTunnelFactory(O,yh.isManagedResolvedAuthority(f)?f:void 0));else{if(n(`invoking resolveExecServer() for ${F}`),er(`code/extHost/willResolveExecServer/${P}`),m=await O.resolveExecServer?.(F,{resolveAttempt:r,execServer:m}),!m)throw new Co(`Exec server was not available for ${F}`,Bi.NoResolverFound);er(`code/extHost/didResolveExecServerOK/${P}`)}}catch(W){return er(`code/extHost/didResolveAuthorityError/${P}`),a("returned an error",W),p.dispose(),c(W)}p.dispose();const w={environmentTunnels:f.environmentTunnels,features:f.tunnelFeatures?{elevation:f.tunnelFeatures.elevation,privacyOptions:f.tunnelFeatures.privacyOptions,protocol:f.tunnelFeatures.protocol===void 0?!0:f.tunnelFeatures.protocol}:void 0},E={extensionHostEnv:f.extensionHostEnv,isTrusted:f.isTrusted,authenticationSession:f.authenticationSessionForInitializingExtensions?{id:f.authenticationSessionForInitializingExtensions.id,providerId:f.authenticationSessionForInitializingExtensions.providerId}:void 0};n(`returned ${yh.isManagedResolvedAuthority(f)?"managed authority":`${f.host}:${f.port}`}`);let $;if(yh.isManagedResolvedAuthority(f)){const S=r;this.Y.setFactory(S,f.makeConnection),$={authority:t,connectTo:new $D(S),connectionToken:f.connectionToken}}else $={authority:t,connectTo:new SD(f.host,f.port),connectionToken:f.connectionToken};return{type:"ok",value:{authority:$,options:E,tunnelInformation:w}}}async $getCanonicalURI(t,r){this.s.info(`$getCanonicalURI invoked for authority (${A6(t)})`);const{resolver:i}=await this.ub(t);if(!i)return null;const s=y.revive(r);if(typeof i.getCanonicalURI>"u")return s;const n=await Wt(()=>i.getCanonicalURI(s));return n||s}async $startExtensionHost(t){t.toAdd.forEach(o=>o.extensionLocation=y.revive(o.extensionLocation));const{globalRegistry:r,myExtensions:i}=B9(this.I,this.L,this.J,t),s=await this.db(i);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(r.getAllExtensionDescriptions()),this.J.set(i),Ys&&(this.s.info(`$startExtensionHost: global extensions: ${ga(this.L)}`),this.s.info(`$startExtensionHost: local extensions: ${ga(this.J)}`)),this.tb()}$activateByEvent(t,r){return r===1?this.D.wait().then(i=>this.ab(t,!1)):this.G.wait().then(i=>this.ab(t,!1))}async $activate(t,r){return await this.G.wait(),this.J.getExtensionDescription(t)?(await this.bb(t,r),!0):!1}async $deltaExtensions(t){t.toAdd.forEach(o=>o.extensionLocation=y.revive(o.extensionLocation));const{globalRegistry:r,myExtensions:i}=B9(this.I,this.L,this.J,t),s=await this.db(i);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(r.getAllExtensionDescriptions()),this.J.set(i),Ys&&(this.s.info(`$deltaExtensions: global extensions: ${ga(this.L)}`),this.s.info(`$deltaExtensions: local extensions: ${ga(this.J)}`)),Promise.resolve(void 0)}async $test_latency(t){return t}async $test_up(t){return t.byteLength}async $test_down(t){const r=ke.alloc(t),i=Math.random()%256;for(let s=0;s<t;s++)r.writeUInt8(i,s);return r}async $updateRemoteConnectionData(t){this.X=t,this.a.fire()}};xv=Ev=__decorate([__param(0,$u),__param(1,j9),__param(2,Me),__param(3,Xi),__param(4,Yi),__param(5,He),__param(6,jt),__param(7,G1),__param(8,Z1),__param(9,fa),__param(10,wv),__param(11,bv),__param(12,cv)],xv);function B9(e,t,r,i){e.addActivationEvents(i.addActivationEvents);const s=new bl(e,t.getAllExtensionDescriptions());s.deltaExtensions(i.toAdd,i.toRemove);const n=new tn(r.getAllExtensionDescriptions().map(a=>a.identifier));for(const a of i.myToRemove)n.delete(a);for(const a of i.myToAdd)n.add(a);const o=z9(s,n);return{globalRegistry:s,myExtensions:o}}function _9(e,t){return{id:e.identifier.value,name:e.name,extensionVersion:e.version,publisherDisplayName:e.publisher,activationEvents:e.activationEvents?e.activationEvents.join(","):null,isBuiltin:e.isBuiltin,reason:t.activationEvent,reasonId:t.extensionId.value}}function ga(e){return e.getAllExtensionDescriptions().map(t=>t.identifier.value).join(",")}var Hs=_("IExtHostExtensionService"),xl=class{#e;#t;#r;constructor(e,t,r,i,s){this.#e=e,this.#t=t,this.#r=r.identifier,this.id=r.identifier.value,this.extensionUri=r.extensionLocation,this.extensionPath=so(qr(r.extensionLocation)),this.packageJSON=r,this.extensionKind=i,this.isFromDifferentExtensionHost=s}get isActive(){return this.#e.isActivated(this.#r)}get exports(){if(!(this.packageJSON.api==="none"||this.isFromDifferentExtensionHost))return this.#e.getExtensionExports(this.#r)}async activate(){if(this.isFromDifferentExtensionHost)throw new Error("Cannot activate foreign extension");return await this.#e.activateByIdWithErrors(this.#r,{startup:!1,extensionId:this.#t,activationEvent:"api"}),this.exports}};function z9(e,t){return e.getAllExtensionDescriptions().filter(r=>t.has(r.identifier))}var $A=class{constructor(e){this.a=e}setSearchTree(e){this.a=e}findSubstr(e){return this.a.findSubstr(e)}forEach(e){return this.a.forEach(e)}},SA=class{constructor(e){this.a=new Oi,this.addActivationEvents(e)}readActivationEvents(e){return this.a.get(e.identifier)??[]}addActivationEvents(e){for(const t of Object.keys(e))this.a.set(t,e[t])}},W9=class{static async installEarlyHandler(e){Error.stackTraceLimit=100;const t=e.get(He),i=e.get(Me).getProxy(z.MainThreadErrors);op(s=>{t.error(s);const n=Yn(s);i.$onUnexpectedError(n)})}static async installFullHandler(e){const t=e.get(He),r=e.get(Me),i=e.get(Hs),s=e.get(sf),n=r.getProxy(z.MainThreadExtensionService),o=r.getProxy(z.MainThreadErrors),a=await i.getExtensionPathIndex(),c=new WeakMap;function l(p,f){if(c.has(p))return c.get(p).stack;let m="",w,E;for(const S of f)m+=`
	at ${S.toString()}`,E=S.getFileName(),!w&&E&&(w=a.findSubstr(y.file(E)));const $=`${p.name||"Error"}: ${p.message||""}${m}`;return c.set(p,{extensionIdentifier:w?.identifier,stack:$}),$}const u=Symbol("prepareStackTrace wrapped");let h=l;Object.defineProperty(Error,"prepareStackTrace",{configurable:!1,get(){return h},set(p){if(p===l||!p||p[u]){h=p||l;return}h=function(f,m){return l(f,m),p.call(Error,f,m)},Object.assign(h,{[u]:!0})}}),op(p=>{t.error(p);const f=Yn(p);let m;if(p instanceof ty?m=p.extension:m=c.get(p)?.extensionIdentifier,m){n.$onExtensionRuntimeError(m,f);const w=s.onExtensionError(m,p);t.trace("forwarded error to extension?",w,m)}}),Ta.addListener(p=>{o.$onUnexpectedError(p)})}},IA=class n3{constructor(t,r,i,s,n){this.a=i,this.b=new NS(t,null,s),r=n3.e(r,this.b);const o=new rg(...aI());o.set(jt,{_serviceBrand:void 0,...r,messagePorts:n}),o.set(Me,new hI(this.b)),o.set(Iu,new dI(s)),o.set(j9,i);const a=new uI(o,!0);a.invokeFunction(W9.installEarlyHandler),this.d=a.invokeFunction(c=>c.get(He)),er("code/extHost/didCreateServices"),this.a.pid?this.d.info(`Extension host with pid ${this.a.pid} started`):this.d.info("Extension host started"),this.d.trace("initData",r),this.c=a.invokeFunction(c=>c.get(Hs)),this.c.initialize(),a.invokeFunction(W9.installFullHandler)}async asBrowserUri(t){const r=this.b.getProxy(z.MainThreadExtensionService);return y.revive(await r.$asBrowserUri(t))}terminate(t){this.c.terminate(t)}static e(t,r){t.extensions.allExtensions.forEach(s=>{s.extensionLocation=y.revive(r.transformIncomingURIs(s.extensionLocation))}),t.environment.appRoot=y.revive(r.transformIncomingURIs(t.environment.appRoot));const i=t.environment.extensionDevelopmentLocationURI;return i&&(t.environment.extensionDevelopmentLocationURI=i.map(s=>y.revive(r.transformIncomingURIs(s)))),t.environment.extensionTestsLocationURI=y.revive(r.transformIncomingURIs(t.environment.extensionTestsLocationURI)),t.environment.globalStorageHome=y.revive(r.transformIncomingURIs(t.environment.globalStorageHome)),t.environment.workspaceStorageHome=y.revive(r.transformIncomingURIs(t.environment.workspaceStorageHome)),t.environment.extensionTelemetryLogResource=y.revive(r.transformIncomingURIs(t.environment.extensionTelemetryLogResource)),t.nlsBaseUrl=y.revive(r.transformIncomingURIs(t.nlsBaseUrl)),t.logsLocation=y.revive(r.transformIncomingURIs(t.logsLocation)),t.workspace=r.transformIncomingURIs(t.workspace),t}},CA=function(t){const r=i=>{globalThis.removeEventListener("message",r);const s=i.data;Object.defineProperties(globalThis,{postMessage:{value(n,o){s.postMessage(n,o)}},onmessage:{get(){return s.onmessage},set(n){s.onmessage=n}}}),s.addEventListener("message",n=>{globalThis.dispatchEvent(new MessageEvent("message",{data:n.data,ports:n.ports?[...n.ports]:void 0}))}),s.start(),globalThis.Worker=class{constructor(){throw new TypeError("Nested workers from within nested worker are NOT supported.")}},importScripts(t)};globalThis.addEventListener("message",r)}.toString(),DA=class extends EventTarget{constructor(e,t,r){super(),this.onmessage=null,this.onmessageerror=null,this.onerror=null;const i=`((${CA})('${t}'))`,s=new Blob([i],{type:"application/javascript"}),n=URL.createObjectURL(s),o=new MessageChannel,a=n,c={type:"_newWorker",id:a,port:o.port2,url:n,options:r};e(c,[o.port2]),this.postMessage=o.port1.postMessage.bind(o.port1),this.terminate=()=>{e({type:"_terminateWorker",id:a}),URL.revokeObjectURL(n),o.port1.close(),o.port2.close()},Object.defineProperties(this,{onmessage:{get(){return o.port1.onmessage},set(l){o.port1.onmessage=l}},onmessageerror:{get(){return o.port1.onmessageerror},set(l){o.port1.onmessageerror=l}}}),o.port1.addEventListener("messageerror",l=>{const u=new MessageEvent("messageerror",{data:l.data});this.dispatchEvent(u)}),o.port1.addEventListener("message",l=>{const u=new MessageEvent("message",{data:l.data});this.dispatchEvent(u)}),o.port1.start()}},Nj=new C("inOutput",!1),Fj=new C("activeLogOutput",!1),Mj=new C("activeLogOutput.isLog",!1),Oj=new C("activeLogOutput.levelSettable",!1),Uj=new C("activeLogOutput.level",""),Hj=new C("activeLogOutput.levelIsDefault",!1),jj=new C("outputView.scrollLock",!1),Bj=new C("activeOutputChannel",""),_j=new C("output.filter.trace",!0),zj=new C("output.filter.debug",!0),Wj=new C("output.filter.info",!0),Vj=new C("output.filter.warning",!0),qj=new C("output.filter.error",!0),Gj=new C("outputFilterFocus",!1),Qj=new C("output.filter.categories",""),Jj=_("outputService"),kl;(function(e){e[e.Append=1]="Append",e[e.Replace=2]="Replace",e[e.Clear=3]="Clear"})(kl||(kl={}));var PA={OutputChannels:"workbench.contributions.outputChannels"};function AA(e){return Array.isArray(e.source)}var TA=class{constructor(){this.a=new Map,this.b=new D,this.onDidRegisterChannel=this.b.event,this.c=new D,this.onDidRemoveChannel=this.c.event,this.d=new D,this.onDidUpdateChannelSources=this.d.event}registerChannel(e){this.a.has(e.id)||(this.a.set(e.id,e),this.b.fire(e.id))}getChannels(){const e=[];return this.a.forEach(t=>e.push(t)),e}getChannel(e){return this.a.get(e)}updateChannelSources(e,t){const r=this.a.get(e);r&&AA(r)&&(r.source=t,this.d.fire(r))}removeChannel(e){const t=this.a.get(e);t&&(this.a.delete(e),this.c.fire(t))}};Bt.add(PA.OutputChannels,new TA);var V9=class extends wy{constructor(e,t,r,i,s){super(),this.id=e,this.name=t,this.r=r,this.s=i,this.extension=s,this.n=0,this.visible=!1,this.setLevel(r.getLevel()),this.B(r.onDidChangeLogLevel(n=>this.setLevel(n))),this.B(ce(()=>this.s.$dispose(this.id)))}get logLevel(){return this.getLevel()}appendLine(e){this.append(e+`
`)}append(e){this.info(e)}clear(){const e=this.n;this.r.flush(),this.s.$update(this.id,kl.Clear,e)}replace(e){const t=this.n;this.info(e),this.s.$update(this.id,kl.Replace,t),this.visible&&this.r.flush()}show(e,t){this.r.flush(),this.s.$reveal(this.id,!!(typeof e=="boolean"?e:t))}hide(){this.s.$close(this.id)}m(e,t){this.n+=ke.fromString(t).byteLength,rI(this.r,e,t),this.visible&&(this.r.flush(),this.s.$update(this.id,kl.Append))}},RA=class extends V9{appendLine(e){this.append(e)}},kv=class{constructor(t,r,i,s,n,o){this.i=r,this.j=i,this.k=s,this.l=n,this.m=o,this.d=new Map,this.f=1,this.g=new Map,this.h=null,this.a=t.getProxy(z.MainThreadOutputService),this.b=this.k.extUri.joinPath(r.logsLocation,`output_logging_${eA(new Date).replace(/-|:|\.\d+Z$/g,"")}`)}$setVisibleChannel(t){this.h=t;for(const[r,i]of this.g)i.visible=r===this.h}createOutputChannel(t,r,i){if(t=t.trim(),!t)throw new Error("illegal argument `name`. must not be falsy");const s=typeof r=="object"&&r.log,n=Ce(r)?r:void 0;if(Ce(n)&&!n.trim())throw new Error("illegal argument `languageId`. must not be empty");let o;const a=this.i.environment.extensionLogLevel?.find(([u])=>Ue.equals(i.identifier,u))?.[1];a&&(o=oI(a));const c=new me,l=s?this.o(t,o,i,c):this.n(t,n,i,c);return l.then(u=>{this.g.set(u.id,u),u.visible=u.id===this.h,c.add(ce(()=>this.g.delete(u.id)))}),s?this.r(t,o??this.m.getLevel(),l,c):this.q(t,l,c)}async n(t,r,i,s){this.c||(this.c=this.j.value.createDirectory(this.b).then(()=>this.b));const n=await this.c,o=this.k.extUri.joinPath(n,`${this.f++}-${t.replace(/[\\/:\*\?"<>\|]/g,"")}.log`),a=s.add(this.l.createLogger(o,{logLevel:"always",donotRotate:!0,donotUseFormatters:!0,hidden:!0})),c=await this.a.$register(t,o,r,i.identifier.value);return s.add(ce(()=>this.l.deregisterLogger(o))),new V9(c,t,a,this.a,i)}async o(t,r,i,s){const n=await this.p(i),o=t.replace(/[\\/:\*\?"<>\|]/g,""),a=this.k.extUri.joinPath(n,`${o}.log`),c=`${i.identifier.value}.${o}`,l=s.add(this.l.createLogger(a,{id:c,name:t,logLevel:r,extensionId:i.identifier.value}));return s.add(ce(()=>this.l.deregisterLogger(a))),new RA(c,t,l,this.a,i)}p(t){let r=this.d.get(t.identifier.value);if(!r){const i=this.k.extUri.joinPath(this.i.logsLocation,t.identifier.value);this.d.set(t.identifier.value,r=(async()=>{try{await this.j.value.createDirectory(i)}catch(s){if(Bu(s)!==ve.FileExists)throw s}return i})())}return r}q(t,r,i){const s=()=>{if(i.isDisposed)throw new Error("Channel has been closed")};return r.then(n=>i.add(n)),{get name(){return t},append(n){s(),r.then(o=>o.append(n))},appendLine(n){s(),r.then(o=>o.appendLine(n))},clear(){s(),r.then(n=>n.clear())},replace(n){s(),r.then(o=>o.replace(n))},show(n,o){s(),r.then(a=>a.show(n,o))},hide(){s(),r.then(n=>n.hide())},dispose(){i.dispose()}}}r(t,r,i,s){const n=()=>{if(s.isDisposed)throw new Error("Channel has been closed")},o=s.add(new D);function a(c){r=c,o.fire(c)}return i.then(c=>{c.logLevel!==r&&a(c.logLevel),s.add(c.onDidChangeLogLevel(l=>a(l)))}),{...this.q(t,i,s),get logLevel(){return r},onDidChangeLogLevel:o.event,trace(c,...l){n(),i.then(u=>u.trace(c,...l))},debug(c,...l){n(),i.then(u=>u.debug(c,...l))},info(c,...l){n(),i.then(u=>u.info(c,...l))},warn(c,...l){n(),i.then(u=>u.warn(c,...l))},error(c,...l){n(),i.then(u=>u.error(c,...l))}}}};kv=__decorate([__param(0,Me),__param(1,jt),__param(2,rf),__param(3,fo),__param(4,ec),__param(5,He)],kv);var q9=_("IExtHostOutputService"),$l,$v=class{static{$l=this}static{this.c=0}static{this.d=250}constructor(t,r){this.h=r,this.f=new Map,this.g=t.getProxy(z.MainThreadDecorations)}registerFileDecorationProvider(t,r){const i=$l.c++;this.f.set(i,{provider:t,extensionDescription:r}),this.g.$registerDecorationProvider(i,r.identifier.value);const s=t.onDidChangeFileDecorations&&t.onDidChangeFileDecorations(n=>{if(!n){this.g.$onDidChange(i,null);return}const o=hi(n);if(o.length<=$l.d){this.g.$onDidChange(i,o);return}this.h.warn("[Decorations] CAPPING events from decorations provider",r.identifier.value,o.length);const a=o.map(u=>({uri:u,rank:T$(u.path,"/")})),c=K3(a,(u,h)=>u.rank-h.rank||en(u.uri.path,h.uri.path)),l=[];e:for(const u of c){let h;for(const p of u){const f=no(p.uri.path);if(h!==f&&(h=f,l.push(p.uri)>=$l.d))break e}}this.g.$onDidChange(i,l)});return new Ie(()=>{s?.dispose(),this.g.$unregisterDecorationProvider(i),this.f.delete(i)})}async $provideDecorations(t,r,i){if(!this.f.has(t))return Object.create(null);const s=Object.create(null),{provider:n,extensionDescription:o}=this.f.get(t);return await Promise.all(r.map(async a=>{try{const{uri:c,id:l}=a,u=await Promise.resolve(n.provideFileDecoration(y.revive(c),i));if(!u)return;try{Am.validate(u),u.badge&&typeof u.badge!="string"&&R(o,"codiconDecoration"),s[l]=[u.propagate,u.tooltip,u.badge,u.color]}catch(h){this.h.warn(`INVALID decoration from extension '${o.identifier.value}': ${h}`)}}catch(c){this.h.error(c)}})),s}};$v=$l=__decorate([__param(0,Me),__param(1,He)],$v);var G9=_("IExtHostDecorations"),LA=class{constructor(e){this.a=e,this.b=new Uint32Array(e.length),this.c=new Int32Array(1),this.c[0]=-1}getCount(){return this.a.length}insertValues(e,t){e=pa(e);const r=this.a,i=this.b,s=t.length;return s===0?!1:(this.a=new Uint32Array(r.length+s),this.a.set(r.subarray(0,e),0),this.a.set(r.subarray(e),e+s),this.a.set(t,e),e-1<this.c[0]&&(this.c[0]=e-1),this.b=new Uint32Array(this.a.length),this.c[0]>=0&&this.b.set(i.subarray(0,this.c[0]+1)),!0)}setValue(e,t){return e=pa(e),t=pa(t),this.a[e]===t?!1:(this.a[e]=t,e-1<this.c[0]&&(this.c[0]=e-1),!0)}removeValues(e,t){e=pa(e),t=pa(t);const r=this.a,i=this.b;if(e>=r.length)return!1;const s=r.length-e;return t>=s&&(t=s),t===0?!1:(this.a=new Uint32Array(r.length-t),this.a.set(r.subarray(0,e),0),this.a.set(r.subarray(e+t),e),this.b=new Uint32Array(this.a.length),e-1<this.c[0]&&(this.c[0]=e-1),this.c[0]>=0&&this.b.set(i.subarray(0,this.c[0]+1)),!0)}getTotalSum(){return this.a.length===0?0:this.d(this.a.length-1)}getPrefixSum(e){return e<0?0:(e=pa(e),this.d(e))}d(e){if(e<=this.c[0])return this.b[e];let t=this.c[0]+1;t===0&&(this.b[0]=this.a[0],t++),e>=this.a.length&&(e=this.a.length-1);for(let r=t;r<=e;r++)this.b[r]=this.b[r-1]+this.a[r];return this.c[0]=Math.max(this.c[0],e),this.b[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,r=this.a.length-1,i=0,s=0,n=0;for(;t<=r;)if(i=t+(r-t)/2|0,s=this.b[i],n=s-this.a[i],e<n)r=i-1;else if(e>=s)t=i+1;else break;return new NA(i,e-n)}},NA=class{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}},FA=class{constructor(e,t,r,i){this.a=e,this.b=t,this.c=r,this.d=i,this.f=null,this.g=null}dispose(){this.b.length=0}get version(){return this.d}getText(){return this.g===null&&(this.g=this.b.join(this.c)),this.g}onEvents(e){e.eol&&e.eol!==this.c&&(this.c=e.eol,this.f=null);const t=e.changes;for(const r of t)this.k(r.range),this.l(new Ar(r.range.startLineNumber,r.range.startColumn),r.text);this.d=e.versionId,this.g=null}h(){if(!this.f){const e=this.c.length,t=this.b.length,r=new Uint32Array(t);for(let i=0;i<t;i++)r[i]=this.b[i].length+e;this.f=new LA(r)}}j(e,t){this.b[e]=t,this.f&&this.f.setValue(e,this.b[e].length+this.c.length)}k(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.startLineNumber-1].substring(e.endColumn-1));return}this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.endLineNumber-1].substring(e.endColumn-1)),this.b.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this.f&&this.f.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}l(e,t){if(t.length===0)return;const r=wb(t);if(r.length===1){this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+r[0]+this.b[e.lineNumber-1].substring(e.column-1));return}r[r.length-1]+=this.b[e.lineNumber-1].substring(e.column-1),this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+r[0]);const i=new Uint32Array(r.length-1);for(let s=1;s<r.length;s++)this.b.splice(e.lineNumber+s-1,0,r[s]),i[s-1]=r[s].length+this.c.length;this.f&&this.f.insertValues(e.lineNumber,i)}},Q9="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function MA(e=""){let t="(-?\\d*\\.\\d\\w*)|([^";for(const r of Q9)e.indexOf(r)>=0||(t+="\\"+r);return t+="\\s]+)",new RegExp(t,"g")}var OA=MA();function J9(e){let t=OA;if(e&&e instanceof RegExp)if(e.global)t=e;else{let r="g";e.ignoreCase&&(r+="i"),e.multiline&&(r+="m"),e.unicode&&(r+="u"),t=new RegExp(e.source,r)}return t.lastIndex=0,t}var X9=new Fa;X9.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function Y9(e,t,r,i,s){if(t=J9(t),s||(s=mr.first(X9)),r.length>s.maxLen){let l=e-s.maxLen/2;return l<0?l=0:i+=l,r=r.substring(l,e+s.maxLen/2),Y9(e,t,r,i,s)}const n=Date.now(),o=e-1-i;let a=-1,c=null;for(let l=1;!(Date.now()-n>=s.timeBudget);l++){const u=o-s.windowSize*l;t.lastIndex=Math.max(0,u);const h=UA(t,r,o,a);if(!h&&c||(c=h,u<=0))break;a=u}if(c){const l={word:c[0],startColumn:i+1+c.index,endColumn:i+1+c.index+c[0].length};return t.lastIndex=0,l}return null}function UA(e,t,r,i){let s;for(;s=e.exec(t);){const n=s.index||0;if(n<=r&&e.lastIndex>=r)return s;if(i>0&&n>i)return null}return null}var Sv=new Map;function HA(e,t){t?Sv.set(e,t):Sv.delete(e)}function jA(e){return Sv.get(e)}var BA=class extends FA{constructor(e,t,r,i,s,n,o){super(t,r,i,s),this.o=e,this.p=n,this.q=o,this.n=!1}dispose(){Kt(!this.n),this.n=!0,this.q=!1}equalLines(e){return Ri(this.b,e)}get document(){if(!this.m){const e=this;this.m={get uri(){return e.a},get fileName(){return e.a.fsPath},get isUntitled(){return e.a.scheme===q.untitled},get languageId(){return e.p},get version(){return e.d},get isClosed(){return e.n},get isDirty(){return e.q},save(){return e.r()},getText(t){return t?e.s(t):e.getText()},get eol(){return e.c===`
`?Zr.LF:Zr.CRLF},get lineCount(){return e.b.length},lineAt(t){return e.t(t)},offsetAt(t){return e.u(t)},positionAt(t){return e.v(t)},validateRange(t){return e.w(t)},validatePosition(t){return e.x(t)},getWordRangeAtPosition(t,r){return e.y(t,r)},[Symbol.for("debug.description")](){return`TextDocument(${e.a.toString()})`}}}return Object.freeze(this.m)}_acceptLanguageId(e){Kt(!this.n),this.p=e}_acceptIsDirty(e){Kt(!this.n),this.q=e}r(){return this.n?Promise.reject(new Error("Document has been closed")):this.o.$trySaveDocument(this.a)}s(e){const t=this.w(e);if(t.isEmpty)return"";if(t.isSingleLine)return this.b[t.start.line].substring(t.start.character,t.end.character);const r=this.c,i=t.start.line,s=t.end.line,n=[];n.push(this.b[i].substring(t.start.character));for(let o=i+1;o<s;o++)n.push(this.b[o]);return n.push(this.b[s].substring(0,t.end.character)),n.join(r)}t(e){let t;if(e instanceof xe?t=e.line:typeof e=="number"&&(t=e),typeof t!="number"||t<0||t>=this.b.length||Math.floor(t)!==t)throw new Error("Illegal value for `line`");return new _A(t,this.b[t],t===this.b.length-1)}u(e){return e=this.x(e),this.h(),this.f.getPrefixSum(e.line-1)+e.character}v(e){e=Math.floor(e),e=Math.max(0,e),this.h();const t=this.f.getIndexOf(e),r=this.b[t.index].length;return new xe(t.index,Math.min(t.remainder,r))}w(e){if(!(e instanceof we))throw new Error("Invalid argument");const t=this.x(e.start),r=this.x(e.end);return t===e.start&&r===e.end?e:new we(t.line,t.character,r.line,r.character)}x(e){if(!(e instanceof xe))throw new Error("Invalid argument");if(this.b.length===0)return e.with(0,0);let{line:t,character:r}=e,i=!1;if(t<0)t=0,r=0,i=!0;else if(t>=this.b.length)t=this.b.length-1,r=this.b[t].length,i=!0;else{const s=this.b[t].length;r<0?(r=0,i=!0):r>s&&(r=s,i=!0)}return i?new xe(t,r):e}y(e,t){const r=this.x(e);if(!t)t=jA(this.p);else if(vb(t))throw new Error(`[getWordRangeAtPosition]: ignoring custom regexp '${t.source}' because it matches the empty string.`);const i=Y9(r.character+1,J9(t),this.b[r.line],0);if(i)return new we(r.line,i.startColumn-1,r.line,i.endColumn-1)}},_A=class{constructor(e,t,r){this.a=e,this.b=t,this.c=r}get lineNumber(){return this.a}get text(){return this.b}get range(){return new we(this.a,0,this.a,this.b.length)}get rangeIncludingLineBreak(){return this.c?this.range:new we(this.a,0,this.a+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this.b)[1].length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this.b.length}},af=class{constructor(e){this.a=e,this.b=0}nextId(){return this.a+ ++this.b}},Zj=new af("id#"),zA=class o3{static{this.c=new af("TextEditorDecorationType")}constructor(t,r,i){const s=o3.c.nextId();t.$registerTextEditorDecorationType(r.identifier,s,r1.from(i)),this.value=Object.freeze({key:s,dispose(){t.$removeTextEditorDecorationType(s)}})}},WA=class{constructor(e,t){this.g=[],this.h=void 0,this.j=!1,this.c=e,this.d=e.version,this.e=t.undoStopBefore,this.f=t.undoStopAfter}finalize(){return this.j=!0,{documentVersionId:this.d,edits:this.g,setEndOfLine:this.h,undoStopBefore:this.e,undoStopAfter:this.f}}k(){if(this.j)throw new Error("Edit is only valid while callback runs")}replace(e,t){this.k();let r=null;if(e instanceof xe)r=new we(e,e);else if(e instanceof we)r=e;else throw new Error("Unrecognized location");this.l(r,t,!1)}insert(e,t){this.k(),this.l(new we(e,e),t,!0)}delete(e){this.k();let t=null;if(e instanceof we)t=e;else throw new Error("Unrecognized location");this.l(t,null,!0)}l(e,t,r){const i=this.c.validateRange(e);this.g.push({range:i,text:t,forceMoveMarkers:r})}setEndOfLine(e){if(this.k(),e!==Zr.LF&&e!==Zr.CRLF)throw Ee("endOfLine");this.h=e}},VA=class{constructor(e,t,r,i){this.c=e,this.d=t,this._accept(r),this.e=i;const s=this;this.value={get tabSize(){return s.f},set tabSize(n){s.n(n)},get indentSize(){return s.g},set indentSize(n){s.p(n)},get insertSpaces(){return s.j},set insertSpaces(n){s.s(n)},get cursorStyle(){return s.k},set cursorStyle(n){s.t(n)},get lineNumbers(){return s.l},set lineNumbers(n){s.u(n)}}}_accept(e){this.f=e.tabSize,this.g=e.indentSize,this.h=e.originalIndentSize,this.j=e.insertSpaces,this.k=e.cursorStyle,this.l=Ko.to(e.lineNumbers)}m(e){if(e==="auto")return"auto";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}n(e){const t=this.m(e);if(t!==null){if(typeof t=="number"){if(this.f===t)return;this.f=t}this.v("setTabSize",this.c.$trySetOptions(this.d,{tabSize:t}))}}o(e){if(e==="tabSize")return"tabSize";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}p(e){const t=this.o(e);if(t!==null){if(typeof t=="number"){if(this.h===t)return;this.g=t,this.h=t}this.v("setIndentSize",this.c.$trySetOptions(this.d,{indentSize:t}))}}q(e){return e==="auto"?"auto":e==="false"?!1:!!e}s(e){const t=this.q(e);if(typeof t=="boolean"){if(this.j===t)return;this.j=t}this.v("setInsertSpaces",this.c.$trySetOptions(this.d,{insertSpaces:t}))}t(e){this.k!==e&&(this.k=e,this.v("setCursorStyle",this.c.$trySetOptions(this.d,{cursorStyle:e})))}u(e){this.l!==e&&(this.l=e,this.v("setLineNumbers",this.c.$trySetOptions(this.d,{lineNumbers:Ko.from(e)})))}assign(e){const t={};let r=!1;if(typeof e.tabSize<"u"){const i=this.m(e.tabSize);i==="auto"?(r=!0,t.tabSize=i):typeof i=="number"&&this.f!==i&&(this.f=i,r=!0,t.tabSize=i)}if(typeof e.indentSize<"u"){const i=this.o(e.indentSize);i==="tabSize"?(r=!0,t.indentSize=i):typeof i=="number"&&this.h!==i&&(this.g=i,this.h=i,r=!0,t.indentSize=i)}if(typeof e.insertSpaces<"u"){const i=this.q(e.insertSpaces);i==="auto"?(r=!0,t.insertSpaces=i):this.j!==i&&(this.j=i,r=!0,t.insertSpaces=i)}typeof e.cursorStyle<"u"&&this.k!==e.cursorStyle&&(this.k=e.cursorStyle,r=!0,t.cursorStyle=e.cursorStyle),typeof e.lineNumbers<"u"&&this.l!==e.lineNumbers&&(this.l=e.lineNumbers,r=!0,t.lineNumbers=Ko.from(e.lineNumbers)),r&&this.v("setOptions",this.c.$trySetOptions(this.d,t))}v(e,t){t.catch(r=>{this.e.warn(`ExtHostTextEditorOptions '${e}' failed:'`),this.e.warn(r)})}},qA=class{constructor(e,t,r,i,s,n,o,a){this.id=e,this.k=t,this.l=r,this.g=!1,this.h=new Set,this.c=s,this.d=new VA(this.k,this.id,n,r),this.e=o,this.f=a;const c=this;this.value=Object.freeze({get document(){return i.value},set document(l){throw new qs("document")},get selection(){return c.c&&c.c[0]},set selection(l){if(!(l instanceof zi))throw Ee("selection");c.c=[l],c.m()},get selections(){return c.c},set selections(l){if(!Array.isArray(l)||l.some(u=>!(u instanceof zi)))throw Ee("selections");c.c=l,c.m()},get visibleRanges(){return c.e},set visibleRanges(l){throw new qs("visibleRanges")},get diffInformation(){return c.j},get options(){return c.d.value},set options(l){c.g||c.d.assign(l)},get viewColumn(){return c.f},set viewColumn(l){throw new qs("viewColumn")},edit(l,u={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#edit not possible on closed editors"));const h=new WA(i.value,u);return l(h),c.n(h)},insertSnippet(l,u,h={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#insertSnippet not possible on closed editors"));let p;if(!u||Array.isArray(u)&&u.length===0)p=c.c.map(f=>M.from(f));else if(u instanceof xe){const{lineNumber:f,column:m}=Fe.from(u);p=[{startLineNumber:f,startColumn:m,endLineNumber:f,endColumn:m}]}else if(u instanceof we)p=[M.from(u)];else{p=[];for(const f of u)if(f instanceof we)p.push(M.from(f));else{const{lineNumber:m,column:w}=Fe.from(f);p.push({startLineNumber:m,startColumn:w,endLineNumber:m,endColumn:w})}}return t.$tryInsertSnippet(e,i.value.version,l.value,p,h)},setDecorations(l,u){const h=u.length===0;h&&!c.h.has(l.key)||(h?c.h.delete(l.key):c.h.add(l.key),c.o(()=>{if(c7(u))return t.$trySetDecorations(e,l.key,ZD(u));{const p=new Array(4*u.length);for(let f=0,m=u.length;f<m;f++){const w=u[f];p[4*f]=w.start.line+1,p[4*f+1]=w.start.character+1,p[4*f+2]=w.end.line+1,p[4*f+3]=w.end.character+1}return t.$trySetDecorationsFast(e,l.key,p)}}))},revealRange(l,u){c.o(()=>t.$tryRevealRange(e,M.from(l),u||Th.Default))},show(l){t.$tryShowEditor(e,Ct.from(l))},hide(){t.$tryHideEditor(e)},[Symbol.for("debug.description")](){return`TextEditor(${this.document.uri.toString()})`}})}dispose(){Kt(!this.g),this.g=!0}_acceptOptions(e){Kt(!this.g),this.d._accept(e)}_acceptVisibleRanges(e){Kt(!this.g),this.e=e}_acceptViewColumn(e){Kt(!this.g),this.f=e}_acceptSelections(e){Kt(!this.g),this.c=e}_acceptDiffInformation(e){Kt(!this.g),this.j=e}async m(){const e=this.c.map(ei.from);return await this.o(()=>this.k.$trySetSelections(this.id,e)),this.value}n(e){const t=e.finalize();if(t.edits.length===0&&!t.setEndOfLine)return Promise.resolve(!0);const r=t.edits.map(s=>s.range);r.sort((s,n)=>s.end.line===n.end.line?s.end.character===n.end.character?s.start.line===n.start.line?s.start.character-n.start.character:s.start.line-n.start.line:s.end.character-n.end.character:s.end.line-n.end.line);for(let s=0,n=r.length-1;s<n;s++){const o=r[s].end;if(r[s+1].start.isBefore(o))return Promise.reject(new Error("Overlapping ranges are not allowed!"))}const i=t.edits.map(s=>({range:M.from(s.range),text:s.text,forceMoveMarkers:s.forceMoveMarkers}));return this.k.$tryApplyEdits(this.id,t.documentVersionId,i,{setEndOfLine:typeof t.setEndOfLine=="number"?ea.from(t.setEndOfLine):void 0,undoStopBefore:t.undoStopBefore,undoStopAfter:t.undoStopAfter})}o(e){return this.g?(this.l.warn("TextEditor is closed/disposed"),Promise.resolve(void 0)):e().then(()=>this,t=>(t instanceof Error&&t.name==="DISPOSED"||this.l.warn(t),null))}},GA=class{constructor(e){this.value=e,this.a=0}ref(){this.a++}unref(){return--this.a===0}},Iv=class{constructor(t,r){this.h=t,this.i=r,this.a=null,this.b=new Map,this.c=new Nt,this.d=new D,this.e=new D,this.f=new D,this.g=new D,this.onDidAddDocuments=this.d.event,this.onDidRemoveDocuments=this.e.event,this.onDidChangeVisibleTextEditors=this.f.event,this.onDidChangeActiveTextEditor=this.g.event}$acceptDocumentsAndEditorsDelta(t){this.acceptDocumentsAndEditorsDelta(t)}acceptDocumentsAndEditorsDelta(t){const r=[],i=[],s=[];if(t.removedDocuments)for(const n of t.removedDocuments){const o=y.revive(n),a=this.c.get(o);a?.unref()&&(this.c.delete(o),r.push(a.value))}if(t.addedDocuments)for(const n of t.addedDocuments){const o=y.revive(n.uri);let a=this.c.get(o);if(a&&o.scheme!==q.vscodeNotebookCell&&o.scheme!==q.vscodeInteractiveInput)throw new Error(`document '${o} already exists!'`);a||(a=new GA(new BA(this.h.getProxy(z.MainThreadDocuments),o,n.lines,n.EOL,n.versionId,n.languageId,n.isDirty)),this.c.set(o,a),i.push(a.value)),a.ref()}if(t.removedEditors)for(const n of t.removedEditors){const o=this.b.get(n);this.b.delete(n),o&&s.push(o)}if(t.addedEditors)for(const n of t.addedEditors){const o=y.revive(n.documentUri);Kt(this.c.has(o),`document '${o}' does not exist`),Kt(!this.b.has(n.id),`editor '${n.id}' already exists!`);const a=this.c.get(o).value,c=new qA(n.id,this.h.getProxy(z.MainThreadTextEditors),this.i,new pr(()=>a.document),n.selections.map(ei.to),n.options,n.visibleRanges.map(l=>M.to(l)),typeof n.editorPosition=="number"?Ct.to(n.editorPosition):void 0);this.b.set(n.id,c)}t.newActiveEditor!==void 0&&(Kt(t.newActiveEditor===null||this.b.has(t.newActiveEditor),`active editor '${t.newActiveEditor}' does not exist`),this.a=t.newActiveEditor),Li(r),Li(s),t.removedDocuments&&this.e.fire(r),t.addedDocuments&&this.d.fire(i),(t.removedEditors||t.addedEditors)&&this.f.fire(this.allEditors().map(n=>n.value)),t.newActiveEditor!==void 0&&this.g.fire(this.activeEditor())}getDocument(t){return this.c.get(t)?.value}allDocuments(){return mr.map(this.c.values(),t=>t.value)}getEditor(t){return this.b.get(t)}activeEditor(t){if(!this.a)return;const r=this.b.get(this.a);return t?r:r?.value}allEditors(){return[...this.b.values()]}};Iv=__decorate([__param(0,Me),__param(1,He)],Iv);var ma=_("IExtHostDocumentsAndEditors"),cf=_("IExtHostApiDeprecationService"),Cv=class{constructor(t,r){this.c=r,this.a=new Set,this.b=t.getProxy(z.MainThreadTelemetry)}report(t,r,i){const s=this.d(t,r);this.a.has(s)||(this.a.add(s),r.isUnderDevelopment&&this.c.warn(`[Deprecation Warning] '${t}' is deprecated. ${i}`),this.b.$publicLog2("extHostDeprecatedApiUsage",{extensionId:r.identifier.value,apiId:t}))}d(t,r){return`${t}-${r.identifier.value}`}};Cv=__decorate([__param(0,Me),__param(1,He)],Cv);var tB=Object.freeze(new class{report(e,t,r){}}),QA={activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts",version:2},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatEditing:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatEditing.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:2},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts"},chatReadonlyPromptReference:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReadonlyPromptReference.d.ts"},chatReferenceBinaryData:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceBinaryData.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},chatVariableResolver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatVariableResolver.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDebugCreateConfiguration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlHistoryTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},createFileSystemWatcher:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.createFileSystemWatcher.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts",version:2},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProvider2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider2.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts",version:2},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles2.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},idToken:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},inlineEdit:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineEdit.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},nativeWindowHandle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.nativeWindowHandle.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookCellExecutionState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecutionState.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},statusBarItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.statusBarItemTooltip.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalCompletionProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalCompletionProvider.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},terminalShellEnv:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalShellEnv.d.ts"},terminalShellType:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalShellType.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textEditorDiffInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textEditorDiffInformation.d.ts"},textSearchComplete2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchComplete2.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProvider2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider2.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},valueSelectionInQuickPick:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.valueSelectionInQuickPick.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}},lf=Object.freeze(QA),Dv=Bt.as(qu.JSONContribution),JA=class Yf{static a(t){const r=new tn;for(let i=0,s=t.length;i<s;i++)r.add(t[i].description.identifier);return r}static compute(t,r){if(!t||!t.length)return new Yf(r,[]);if(!r||!r.length)return new Yf([],t);const i=this.a(t),s=this.a(r),n=r.filter(a=>!i.has(a.description.identifier)),o=t.filter(a=>!s.has(a.description.identifier));return new Yf(n,o)}constructor(t,r){this.added=t,this.removed=r}},XA=class{constructor(e,t,r){this.name=e,this.defaultExtensionKind=t,this.canHandleResolver=r,this.a=null,this.b=null,this.c=null}setHandler(e){if(this.a!==null)throw new Error("Handler already set!");return this.a=e,this.d(),{dispose:()=>{this.a=null}}}acceptUsers(e){this.c=JA.compute(this.b,e),this.b=e,this.d()}d(){if(!(this.a===null||this.b===null||this.c===null))try{this.a(this.b,this.c)}catch(e){gr(e)}}},YA={type:"string",enum:["ui","workspace"],enumDescriptions:[d(13029,null),d(13030,null)]},Z9="vscode://schemas/vscode-extensions",Pv={properties:{engines:{type:"object",description:d(13031,null),properties:{vscode:{type:"string",description:d(13032,null),default:"^1.22.0"}}},publisher:{description:d(13033,null),type:"string"},displayName:{description:d(13034,null),type:"string"},categories:{description:d(13035,null),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:OS},{type:"string",const:"Languages",deprecationMessage:d(13036,null)}]}},galleryBanner:{type:"object",description:d(13037,null),properties:{color:{description:d(13038,null),type:"string"},theme:{description:d(13039,null),type:"string",enum:["dark","light"]}}},contributes:{description:d(13040,null),type:"object",properties:{},default:{}},preview:{type:"boolean",description:d(13041,null)},enableProposedApi:{type:"boolean",deprecationMessage:d(13042,null)},enabledApiProposals:{markdownDescription:d(13043,null),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(lf).map(e=>e),markdownEnumDescriptions:Object.values(lf).map(e=>e.proposal)}},api:{markdownDescription:d(13044,null),type:"string",enum:["none"],enumDescriptions:[d(13045,null)]},activationEvents:{description:d(13046,null),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:d(13047,null),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:d(13048,null),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:d(13049,null),body:"onCommand:${2:commandId}"},{label:"onDebug",description:d(13050,null),body:"onDebug"},{label:"onDebugInitialConfigurations",description:d(13051,null),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:d(13052,null),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:d(13053,null),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:d(13054,null),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:d(13055,null),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:d(13056,null),body:"onStartupFinished"},{label:"onTaskType",description:d(13057,null),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:d(13058,null),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:d(13059,null),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:d(13060,null),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:d(13061,null)},{label:"onUri",body:"onUri",description:d(13062,null)},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:d(13063,null)},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:d(13064,null)},{label:"onNotebook",body:"onNotebook:${1:type}",description:d(13065,null)},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:d(13066,null)},{label:"onRenderer",description:d(13067,null),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:d(13068,null)},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:d(13069,null)},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:d(13070,null)},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:d(13071,null)},{label:"onChatParticipant",body:"onChatParticipant:${1:participantId}",description:d(13072,null)},{label:"onLanguageModelTool",body:"onLanguageModelTool:${1:toolId}",description:d(13073,null)},{label:"onTerminalCompletionsRequested",body:"onTerminalCompletionsRequested",description:d(13074,null)},{label:"*",description:d(13075,null),body:"*"}]}},badges:{type:"array",description:d(13076,null),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:d(13077,null)},href:{type:"string",description:d(13078,null)},description:{type:"string",description:d(13079,null)}}}},markdown:{type:"string",description:d(13080,null),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:d(13081,null),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:d(13082,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:B1}},extensionPack:{description:d(13083,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:B1}},extensionKind:{description:d(13084,null),type:"array",items:YA,default:["workspace"],defaultSnippets:[{body:["ui"],description:d(13085,null)},{body:["workspace"],description:d(13086,null)},{body:["ui","workspace"],description:d(13087,null)},{body:["workspace","ui"],description:d(13088,null)},{body:[],description:d(13089,null)}]},capabilities:{description:d(13090,null),type:"object",properties:{virtualWorkspaces:{description:d(13091,null),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:d(13092,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[d(13093,null),d(13094,null),d(13095,null)]},description:{type:"string",markdownDescription:d(13096,null)}}},untrustedWorkspaces:{description:d(13097,null),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:d(13098,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[d(13099,null),d(13100,null),d(13101,null)]},restrictedConfigurations:{description:d(13102,null),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:d(13103,null)}}}}},sponsor:{description:d(13104,null),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:d(13105,null),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:d(13106,null),type:"string"},"vscode:uninstall":{description:d(13107,null),type:"string"}}},icon:{type:"string",description:d(13108,null)},l10n:{type:"string",description:d(13109,null)},pricing:{type:"string",markdownDescription:d(13110,null),enum:["Free","Trial"],default:"Free"}}},ZA=class{constructor(){this.a=new Map}registerExtensionPoint(e){if(this.a.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);const t=new XA(e.extensionPoint,e.defaultExtensionKind,e.canHandleResolver);return this.a.set(e.extensionPoint,t),e.activationEventsGenerator&&AP.register(e.extensionPoint,e.activationEventsGenerator),Pv.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,Dv.registerSchema(Z9,Pv),t}getExtensionPoints(){return Array.from(this.a.values())}},K9={ExtensionsRegistry:"ExtensionsRegistry"};Bt.add(K9.ExtensionsRegistry,new ZA);var KA=Bt.as(K9.ExtensionsRegistry);Dv.registerSchema(Z9,Pv),Dv.registerSchema(a2,{properties:{extensionEnabledApiProposals:{description:d(13111,null),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(lf),markdownEnumDescriptions:Object.values(lf).map(e=>e.proposal)}}]}}}});var eT={type:"object",additionalProperties:!1,properties:{type:{type:"string",description:d(10548,null)},required:{type:"array",items:{type:"string"}},properties:{type:"object",description:d(10549,null),additionalProperties:{$ref:"http://json-schema.org/draft-07/schema#"}},when:{type:"string",markdownDescription:d(10550,null),default:""}}},Av;(function(e){function t(r,i,s){if(!r)return;const n=Ce(r.type)?r.type:void 0;if(!n||n.length===0){s.error(d(10551,null));return}const o=[];if(Array.isArray(r.required))for(const a of r.required)Ce(a)&&o.push(a);return{extensionId:i.value,taskType:n,required:o,properties:r.properties?Qe(r.properties):{},when:r.when?at.deserialize(r.when):void 0}}e.from=t})(Av||(Av={}));var tT=KA.registerExtensionPoint({extensionPoint:"taskDefinitions",activationEventsGenerator:(e,t)=>{for(const r of e)r.type&&t.push(`onTaskType:${r.type}`)},jsonSchema:{description:d(10552,null),type:"array",items:eT}}),rT=class{constructor(){this.d=new D,this.onDefinitionsChanged=this.d.event,this.a=Object.create(null),this.b=new Promise((e,t)=>{tT.setHandler((r,i)=>{this.c=void 0;try{for(const s of i.removed){const n=s.value;for(const o of n)this.a&&o.type&&this.a[o.type]&&delete this.a[o.type]}for(const s of i.added){const n=s.value;for(const o of n){const a=Av.from(o,s.description.identifier,s.collector);a&&(this.a[a.taskType]=a)}}(i.removed.length>0||i.added.length>0)&&this.d.fire()}catch{}e(void 0)})})}onReady(){return this.b}get(e){return this.a[e]}all(){return Object.keys(this.a).map(e=>this.a[e])}getJsonSchema(){if(this.c===void 0){const e=[];for(const t of this.all()){const r={type:"object",additionalProperties:!1};t.required.length>0&&(r.required=t.required.slice(0)),t.properties!==void 0?r.properties=Qe(t.properties):r.properties=Object.create(null),r.properties.type={type:"string",enum:[t.taskType]},e.push(r)}this.c={oneOf:e}}return this.c}},iT=new rT,sT="settings",rB=new C("taskRunning",!1,d(10553,null)),iB=Ep(10555,"Tasks"),uf;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(uf||(uf={})),function(e){function t(r){if(!r)return e.Strong;switch(r.toLowerCase()){case"escape":return e.Escape;case"strong":return e.Strong;case"weak":return e.Weak;default:return e.Strong}}e.from=t}(uf||(uf={}));var e8;(function(e){e.defaults={cwd:"${workspaceFolder}"}})(e8||(e8={}));var Sl;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(Sl||(Sl={})),function(e){function t(r){switch(r.toLowerCase()){case"always":return e.Always;case"silent":return e.Silent;case"never":return e.Never;default:return e.Always}}e.fromString=t}(Sl||(Sl={}));var Il;(function(e){e[e.Never=1]="Never",e[e.OnProblem=2]="OnProblem",e[e.Always=3]="Always"})(Il||(Il={})),function(e){function t(r){switch(r.toLowerCase()){case"always":return e.Always;case"never":return e.Never;case"onproblem":return e.OnProblem;default:return e.OnProblem}}e.fromString=t}(Il||(Il={}));var Cl;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(Cl||(Cl={})),function(e){function t(r){switch(r.toLowerCase()){case"shared":return e.Shared;case"dedicated":return e.Dedicated;case"new":return e.New;default:return e.Shared}}e.fromString=t}(Cl||(Cl={}));var t8;(function(e){e.defaults={echo:!0,reveal:Sl.Always,revealProblems:Il.Never,focus:!1,panel:Cl.Shared,showReuseMessage:!0,clear:!1}})(t8||(t8={}));var hf;(function(e){e[e.Shell=1]="Shell",e[e.Process=2]="Process",e[e.CustomExecution=3]="CustomExecution"})(hf||(hf={})),function(e){function t(i){switch(i.toLowerCase()){case"shell":return e.Shell;case"process":return e.Process;case"customExecution":return e.CustomExecution;default:return e.Process}}e.fromString=t;function r(i){switch(i){case e.Shell:return"shell";case e.Process:return"process";case e.CustomExecution:return"customExecution";default:return"process"}}e.toString=r}(hf||(hf={}));var r8;(function(e){function t(r){return Ce(r)?r:r.value}e.value=t})(r8||(r8={}));var i8;(function(e){e.Clean={_id:"clean",isDefault:!1},e.Build={_id:"build",isDefault:!1},e.Rebuild={_id:"rebuild",isDefault:!1},e.Test={_id:"test",isDefault:!1};function t(i){return i===e.Clean._id||i===e.Build._id||i===e.Rebuild._id||i===e.Test._id}e.is=t;function r(i){if(i!==void 0)return Ce(i)?t(i)?{_id:i,isDefault:!1}:void 0:i}e.from=r})(i8||(i8={}));var s8;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.Folder=3]="Folder"})(s8||(s8={}));var n8;(function(e){e.Workspace="workspace",e.Extension="extension",e.InMemory="inMemory",e.WorkspaceFile="workspaceFile",e.User="user";function t(r){switch(r){case e.User:return 2;case e.WorkspaceFile:return 5;default:return 6}}e.toConfigurationTarget=t})(n8||(n8={}));var o8;(function(e){e.parallel="parallel",e.sequence="sequence"})(o8||(o8={}));var Tv;(function(e){e[e.default=1]="default",e[e.folderOpen=2]="folderOpen"})(Tv||(Tv={}));var a8;(function(e){e.defaults={reevaluateOnRerun:!0,runOn:Tv.default,instanceLimit:1}})(a8||(a8={}));var df;(function(e){e[e.Process=1]="Process",e[e.Terminal=2]="Terminal"})(df||(df={})),function(e){e._default=e.Terminal}(df||(df={}));var c8;(function(e){e[e.V0_1_0=1]="V0_1_0",e[e.V2_0_0=2]="V2_0_0"})(c8||(c8={}));var l8;(function(e){e.DependsOnStarted="dependsOnStarted",e.AcquiredInput="acquiredInput",e.Start="start",e.ProcessStarted="processStarted",e.Active="active",e.Inactive="inactive",e.Changed="changed",e.Terminated="terminated",e.ProcessEnded="processEnded",e.End="end"})(l8||(l8={}));var u8;(function(e){e.SingleRun="singleRun",e.Background="background"})(u8||(u8={}));var h8;(function(e){e[e.System=0]="System",e[e.User=1]="User",e[e.FolderOpen=2]="FolderOpen",e[e.ConfigurationChange=3]="ConfigurationChange",e[e.Reconnect=4]="Reconnect"})(h8||(h8={}));var d8;(function(e){function t(c){return{taskId:c._id,taskName:c.configurationProperties.name,runType:c.configurationProperties.isBackground?"background":"singleRun",group:c.configurationProperties.group,__task:c}}function r(c,l,u){return{...t(c),kind:"start",terminalId:l,resolvedVariables:u}}e.start=r;function i(c,l,u){return{...t(c),kind:"processStarted",terminalId:l,processId:u}}e.processStarted=i;function s(c,l,u){return{...t(c),kind:"processEnded",terminalId:l,exitCode:u}}e.processEnded=s;function n(c,l,u){return{...t(c),kind:"terminated",exitReason:u,terminalId:l}}e.terminated=n;function o(c,l,u){return{...t(l),kind:c,terminalId:u}}e.general=o;function a(){return{kind:"changed"}}e.changed=a})(d8||(d8={}));var ff;(function(e){function t(i){const s=Object.keys(i).sort();let n="";for(const o of s){let a=i[o];a instanceof Object?a=t(a):typeof a=="string"&&(a=a.replace(/,/g,",,")),n+=o+","+a+","}return n}function r(i){const n={_key:t(i),type:i.taskType};return Object.assign(n,i),n}e.create=r})(ff||(ff={}));var f8;(function(e){e.AutoDetect="task.autoDetect",e.SaveBeforeRun="task.saveBeforeRun",e.ShowDecorations="task.showDecorations",e.ProblemMatchersNeverPrompt="task.problemMatchers.neverPrompt",e.SlowProviderWarning="task.slowProviderWarning",e.QuickOpenHistory="task.quickOpen.history",e.QuickOpenDetail="task.quickOpen.detail",e.QuickOpenSkip="task.quickOpen.skip",e.QuickOpenShowAll="task.quickOpen.showAll",e.AllowAutomaticTasks="task.allowAutomaticTasks",e.Reconnection="task.reconnection",e.VerboseLogging="task.verboseLogging"})(f8||(f8={}));var p8;(function(e){e.Tasks="tasks",e.SuppressTaskName="tasks.suppressTaskName",e.Windows="tasks.windows",e.Osx="tasks.osx",e.Linux="tasks.linux",e.ShowOutput="tasks.showOutput",e.IsShellCommand="tasks.isShellCommand",e.ServiceTestSetting="tasks.service.testSetting"})(p8||(p8={}));var g8;(function(e){function t(r,i){const s=iT.get(r.type);if(s===void 0){const c=Qe(r);return delete c._key,ff.create(c)}const n=Object.create(null);n.type=s.taskType;const o=new Set;s.required.forEach(c=>o.add(c));const a=s.properties;for(const c of Object.keys(a)){const l=r[c];if(l!=null)n[c]=l;else if(o.has(c)){const u=a[c];if(u.default!==void 0)n[c]=Qe(u.default);else switch(u.type){case"boolean":n[c]=!1;break;case"number":case"integer":n[c]=0;break;case"string":n[c]="";break;default:i.error(d(10554,null,JSON.stringify(r,void 0,0),c));return}}}return ff.create(n)}e.createTaskIdentifier=t})(g8||(g8={}));var pf;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(pf||(pf={}));var gf;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(gf||(gf={}));var Rv;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(Rv||(Rv={}));var Dl;(function(e){function t(s){if(s){const n=s;return n&&!!n.process}else return!1}e.is=t;function r(s){if(s==null)return;const n={process:s.process,args:s.args};return s.options&&(n.options=Rv.from(s.options)),n}e.from=r;function i(s){if(s!=null)return new Oo(s.process,s.args,s.options)}e.to=i})(Dl||(Dl={}));var Lv;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(Lv||(Lv={}));var Pl;(function(e){function t(s){if(s){const n=s;return n&&(!!n.commandLine||!!n.command)}else return!1}e.is=t;function r(s){if(s==null)return;const n={};return s.commandLine!==void 0?n.commandLine=s.commandLine:(n.command=s.command,n.args=s.args),s.options&&(n.options=Lv.from(s.options)),n}e.from=r;function i(s){if(!(s==null||s.command===void 0&&s.commandLine===void 0))return s.commandLine?new kn(s.commandLine,s.options):new kn(s.command,s.args?s.args:[],s.options)}e.to=i})(Pl||(Pl={}));var Zi;(function(e){function t(s){if(s){const n=s;return n&&n.customExecution==="customExecution"}else return!1}e.is=t;function r(s){return{customExecution:"customExecution"}}e.from=r;function i(s,n){return n.get(s)}e.to=i})(Zi||(Zi={}));var m8;(function(e){function t(r,i){let s;return r.scope!==void 0&&typeof r.scope!="number"?s=r.scope.uri:r.scope!==void 0&&typeof r.scope=="number"&&(r.scope===Cs.Workspace&&i&&i.workspaceFile?s=i.workspaceFile:s=sT),{id:r._id,workspaceFolder:s}}e.from=t})(m8||(m8={}));var Nv;(function(e){function t(r){if(r!=null)return{_id:r.id,isDefault:r.isDefault}}e.from=t})(Nv||(Nv={}));var js;(function(e){function t(s,n){if(s==null)return[];const o=[];for(const a of s){const c=r(a,n);c&&o.push(c)}return o}e.fromMany=t;function r(s,n){if(s==null)return;let o;s.execution instanceof Oo?o=Dl.from(s.execution):s.execution instanceof kn?o=Pl.from(s.execution):s.execution&&s.execution instanceof bm&&(o=Zi.from(s.execution));const a=pf.from(s.definition);let c;return s.scope?typeof s.scope=="number"?c=s.scope:c=s.scope.uri:c=Cs.Workspace,!a||!c?void 0:{_id:s._id,definition:a,name:s.name,source:{extensionId:n.identifier.value,label:s.source,scope:c},execution:o,isBackground:s.isBackground,group:Nv.from(s.group),presentationOptions:gf.from(s.presentationOptions),problemMatchers:hi(s.problemMatchers),hasDefinedMatchers:s.hasDefinedMatchers,runOptions:s.runOptions?s.runOptions:{reevaluateOnRerun:!0},detail:s.detail}}e.from=r;async function i(s,n,o){if(s==null)return;let a;Dl.is(s.execution)?a=Dl.to(s.execution):Pl.is(s.execution)?a=Pl.to(s.execution):Zi.is(s.execution)&&(a=Zi.to(s._id,o));const c=pf.to(s.definition);let l;if(s.source&&(s.source.scope!==void 0?typeof s.source.scope=="number"?l=s.source.scope:l=await n.resolveWorkspaceFolder(y.revive(s.source.scope)):l=Cs.Workspace),!c||!l)return;const u=new Mh(c,l,s.name,s.source.label,a,s.problemMatchers);return s.isBackground!==void 0&&(u.isBackground=s.isBackground),s.group!==void 0&&(u.group=Lc.from(s.group._id),u.group&&s.group.isDefault&&(u.group=new Lc(u.group.id,u.group.label),s.group.isDefault===!0&&(u.group.isDefault=s.group.isDefault))),s.presentationOptions&&(u.presentationOptions=gf.to(s.presentationOptions)),s._id&&(u._id=s._id),s.detail&&(u.detail=s.detail),u}e.to=i})(js||(js={}));var Fv;(function(e){function t(i){return i}e.from=t;function r(i){if(i)return Object.assign(Object.create(null),i)}e.to=r})(Fv||(Fv={}));var Mv=class{#e;constructor(e,t,r){this._id=t,this.a=r,this.#e=e}get task(){return this.a}terminate(){this.#e.terminateTask(this)}fireDidStartProcess(e){}fireDidEndProcess(e){}},Ov=class{constructor(t,r,i,s,n,o,a,c){this.q=new D,this.r=new D,this.s=new D,this.u=new D,this.a=t.getProxy(z.MainThreadTask),this.b=i,this.c=s,this.d=n,this.e=o,this.h=0,this.j=new Map,this.k=new Map,this.l=new Map,this.m=new Map,this.n=new Set,this.o=new Map,this.f=a,this.g=c,this.a.$registerSupportedExecutions(!0)}registerTaskProvider(t,r,i){if(!i)return new Ie(()=>{});const s=this.x();return this.j.set(s,{type:r,provider:i,extension:t}),this.a.$registerTaskProvider(s,r),new Ie(()=>{this.j.delete(s),this.a.$unregisterTaskProvider(s)})}registerTaskSystem(t,r){this.a.$registerTaskSystem(t,r)}fetchTasks(t){return this.a.$fetchTasks(Fv.from(t)).then(async r=>{const i=[];for(const s of r){const n=await js.to(s,this.b,this.m);n&&i.push(n)}return i})}get taskExecutions(){const t=[];return this.k.forEach(r=>t.push(r)),t}terminateTask(t){if(!(t instanceof Mv))throw new Error("No valid task execution provided");return this.a.$terminateTask(t._id)}get onDidStartTask(){return this.q.event}async $onDidStartTask(t,r,i){const s=this.m.get(t.id);s&&(this.o.set(t.id,s),this.e.attachPtyToTerminal(r,await s.callback(i))),this.p=t.id,this.q.fire({execution:await this.z(t)})}get onDidEndTask(){return this.r.event}async $OnDidEndTask(t){if(!this.l.has(t.id))return;const r=await this.z(t);this.l.delete(t.id),this.k.delete(t.id),this.B(t),this.r.fire({execution:r})}get onDidStartTaskProcess(){return this.s.event}async $onDidStartTaskProcess(t){const r=await this.z(t.id);this.s.fire({execution:r,processId:t.processId})}get onDidEndTaskProcess(){return this.u.event}async $onDidEndTaskProcess(t){const r=await this.z(t.id);this.u.fire({execution:r,exitCode:t.exitCode})}$provideTasks(t,r){const i=this.j.get(t);if(!i)return Promise.reject(new Error("no handler found"));const s=[],n=Wt(()=>i.provider.provideTasks(st.None)).then(o=>this.v(r,s,i,o));return new Promise(o=>{n.then(a=>{Promise.all(s).then(()=>{o(a)})})})}async $resolveTask(t,r){const i=this.j.get(t);if(!i)return Promise.reject(new Error("no handler found"));if(r.definition.type!==i.type)throw new Error(`Unexpected: Task of type [${r.definition.type}] cannot be resolved by provider of type [${i.type}].`);const s=await js.to(r,this.b,this.m);if(!s)throw new Error("Unexpected: Task cannot be resolved.");const n=await i.provider.resolveTask(s,st.None);if(!n)return;this.A(n,i);const o=js.from(n,i.extension);if(!o)throw new Error("Unexpected: Task cannot be resolved.");if(n.definition!==s.definition)throw new Error("Unexpected: The resolved task definition must be the same object as the original task definition. The task definition cannot be changed.");return Zi.is(o.execution)&&await this.y(o,n,!0),await this.w(o)}x(){return this.h++}async y(t,r,i){const s=await this.a.$createTaskId(t);!i&&!this.m.has(s)&&(this.n.add(s),this.o.set(s,r.execution)),this.m.set(s,r.execution)}async z(t,r){if(typeof t=="string"){const n=this.l.get(t);if(!n)throw new Gs("Unexpected: The specified task is missing an execution");return n}const i=this.l.get(t.id);if(i)return i;let s;return r?s=Promise.resolve(new Mv(this,t.id,r)):s=js.to(t.task,this.b,this.m).then(n=>{if(!n)throw new Gs("Unexpected: Task does not exist.");return new Mv(this,t.id,n)}),this.l.set(t.id,s),s.then(n=>(this.k.set(t.id,n),n))}A(t,r){t._deprecated&&this.g.report("Task.constructor",r.extension,"Use the Task constructor that takes a `scope` instead.")}B(t){this.o.get(t.id)&&this.o.delete(t.id),this.n.has(t.id)&&this.p!==t.id&&(this.m.delete(t.id),this.n.delete(t.id));const i=this.n.values();let s=i.next();for(;!s.done;)!this.o.has(s.value)&&this.p!==s.value&&(this.m.delete(s.value),this.n.delete(s.value)),s=i.next()}};Ov=__decorate([__param(0,Me),__param(1,jt),__param(2,Xi),__param(3,ma),__param(4,Yi),__param(5,fa),__param(6,He),__param(7,cf)],Ov);var Uv=class extends Ov{constructor(t,r,i,s,n,o,a,c){super(t,r,i,s,n,o,a,c),this.registerTaskSystem(q.vscodeRemote,{scheme:q.vscodeRemote,authority:"",platform:t$(0)})}async executeTask(t,r){if(!r.execution)throw new Error("Tasks to execute must include an execution");const i=js.from(r,t);if(i===void 0)throw new Error("Task is not valid");if(Zi.is(i.execution))await this.y(i,r,!1);else throw new lp;const s=await this.z(await this.a.$getTaskExecution(i),r);return this.a.$executeTask(i).catch(n=>{throw new Error(n)}),s}v(t,r,i,s){const n=[];if(s)for(const o of s){if(this.A(o,i),!o.definition||!t[o.definition.type]){const c=o.source?o.source:"No task source";this.f.warn(`The task [${c}, ${o.name}] uses an undefined task type. The task will be ignored in the future.`)}const a=js.from(o,i.extension);a&&Zi.is(a.execution)?(n.push(a),r.push(this.y(a,o,!0))):this.f.warn("Only custom execution tasks supported.")}return{tasks:n,extension:i.extension}}async w(t){if(Zi.is(t.execution))return t;this.f.warn("Only custom execution tasks supported.")}async $resolveVariables(t,r){return{process:void 0,variables:Object.create(null)}}async $jsonTasksSupported(){return!1}async $findExecutable(t,r,i){}};Uv=__decorate([__param(0,Me),__param(1,jt),__param(2,Xi),__param(3,ma),__param(4,Yi),__param(5,fa),__param(6,He),__param(7,cf)],Uv);var v8=_("IExtHostTask"),nT=class{constructor(){this.f=new Map,this.m=[],this.n=new D,this.o=new D,this.d=1}get onError(){return this.n.event}get onExit(){return this.o.event}onMessage(e){this.k&&this.n.fire(new Error("attempt to set more than one 'Message' callback")),this.k=e}onEvent(e){this.j&&this.n.fire(new Error("attempt to set more than one 'Event' callback")),this.j=e}onRequest(e){this.g&&this.n.fire(new Error("attempt to set more than one 'Request' callback")),this.g=e}sendResponse(e){e.seq>0?this.n.fire(new Error(`attempt to send more than one response for command ${e.command}`)):this.u("response",e)}sendRequest(e,t,r,i){const s={command:e};if(t&&Object.keys(t).length>0&&(s.arguments=t),this.u("request",s),typeof i=="number"){const n=setTimeout(()=>{clearTimeout(n);const o=this.f.get(s.seq);if(o){this.f.delete(s.seq);const a={type:"response",seq:0,request_seq:s.seq,success:!1,command:e,message:d(6250,null,i,e)};o(a)}},i)}return r&&this.f.set(s.seq,r),s.seq}acceptMessage(e){this.k?this.k(e):(this.m.push(e),this.m.length===1&&this.s())}q(e,t){return e.type!=="event"||t.type!=="event"}async s(){let e;for(;this.m.length;){if((!e||this.q(this.m[0],e))&&await gi(0),e=this.m.shift(),!e)return;switch(e.type){case"event":this.j?.(e);break;case"request":this.g?.(e);break;case"response":{const t=e,r=this.f.get(t.request_seq);r&&(this.f.delete(t.request_seq),r(t));break}}}}u(e,t){t.type=e,t.seq=this.d++,this.sendMessage(t)}async w(){if(this.f.size===0)return Promise.resolve();const e=new Map;this.f.forEach((t,r)=>e.set(r,t)),await gi(500),e.forEach((t,r)=>{t({type:"response",seq:0,request_seq:r,success:!1,command:"canceled",message:"canceled"}),this.f.delete(r)})}getPendingRequestIds(){return Array.from(this.f.keys())}dispose(){this.m=[]}};function oT(e){return e.type&&(e.label||e.program||e.runtime)}var aT=/^[a-zA-Z][a-zA-Z0-9\+\-\.]+:/;function cT(e){return!!(e&&e.match(aT))}function w8(e){if(typeof e.path=="string"&&!(typeof e.sourceReference=="number"&&e.sourceReference>0)){if(cT(e.path))return y.parse(e.path);if(fu(e.path))return y.file(e.path)}return e.path}function b8(e){if(typeof e.path=="object"){const t=y.revive(e.path);if(t)return t.scheme===q.file?t.fsPath:t.toString()}return e.path}function lT(e,t){const r=t?w8:b8,i=Qe(e);return y8(i,(s,n)=>{s&&n&&(n.path=r(n))}),i}function uT(e,t){const r=t?w8:b8,i=Qe(e);return y8(i,(s,n)=>{!s&&n&&(n.path=r(n))}),i}function y8(e,t){switch(e.type){case"event":{const r=e;switch(r.event){case"output":t(!1,r.body.source);break;case"loadedSource":t(!1,r.body.source);break;case"breakpoint":t(!1,r.body.breakpoint.source);break;default:break}break}case"request":{const r=e;switch(r.command){case"setBreakpoints":t(!0,r.arguments.source);break;case"breakpointLocations":t(!0,r.arguments.source);break;case"source":t(!0,r.arguments.source);break;case"gotoTargets":t(!0,r.arguments.source);break;case"launchVSCode":r.arguments.args.forEach(i=>t(!1,i));break;default:break}break}case"response":{const r=e;if(r.success&&r.body)switch(r.command){case"stackTrace":r.body.stackFrames.forEach(i=>t(!1,i.source));break;case"loadedSources":r.body.sources.forEach(i=>t(!1,i));break;case"scopes":r.body.scopes.forEach(i=>t(!1,i.source));break;case"setFunctionBreakpoints":r.body.breakpoints.forEach(i=>t(!1,i.source));break;case"setBreakpoints":r.body.breakpoints.forEach(i=>t(!1,i.source));break;case"disassemble":r.body?.instructions.forEach(s=>t(!1,s.location));break;case"locations":t(!1,r.body?.source);break;default:break}break}}}var Al=_("IExtHostEditorTabs"),E8=class{constructor(e,t,r){this.e=r,this.d=t,this.acceptDtoUpdate(e)}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.id===e.e()},get label(){return e.b.label},get input(){return e.c},get isDirty(){return e.b.isDirty},get isPinned(){return e.b.isPinned},get isPreview(){return e.b.isPreview},get group(){return e.d.apiObject}};this.a=Object.freeze(t)}return this.a}get tabId(){return this.b.id}acceptDtoUpdate(e){this.b=e,this.c=this.f()}f(){switch(this.b.input.kind){case 1:return new Um(y.revive(this.b.input.uri));case 2:return new ad(y.revive(this.b.input.original),y.revive(this.b.input.modified));case 3:return new X6(y.revive(this.b.input.base),y.revive(this.b.input.input1),y.revive(this.b.input.input2),y.revive(this.b.input.result));case 6:return new Hm(y.revive(this.b.input.uri),this.b.input.viewType);case 7:return new Y6(this.b.input.viewType);case 4:return new jm(y.revive(this.b.input.uri),this.b.input.notebookType);case 5:return new Bm(y.revive(this.b.input.original),y.revive(this.b.input.modified),this.b.input.notebookType);case 8:return new Z6;case 9:return new K6(y.revive(this.b.input.uri),y.revive(this.b.input.inputBoxUri));case 10:return new e7;case 11:return new t7(this.b.input.diffEditors.map(e=>new ad(y.revive(e.original),y.revive(e.modified))));default:return}}},hT=class{constructor(e,t){this.c=[],this.d="",this.b=e,this.e=t;for(const r of e.tabs)r.isActive&&(this.d=r.id),this.c.push(new E8(r,this,()=>this.activeTabId()))}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.groupId===e.e()},get viewColumn(){return Ct.to(e.b.viewColumn)},get activeTab(){return e.c.find(r=>r.tabId===e.d)?.apiObject},get tabs(){return Object.freeze(e.c.map(r=>r.apiObject))}};this.a=Object.freeze(t)}return this.a}get groupId(){return this.b.groupId}get tabs(){return this.c}acceptGroupDtoUpdate(e){this.b=e}acceptTabOperation(e){if(e.kind===0){const r=new E8(e.tabDto,this,()=>this.activeTabId());return this.c.splice(e.index,0,r),e.tabDto.isActive&&(this.d=r.tabId),r}else if(e.kind===1){const r=this.c.splice(e.index,1)[0];if(!r)throw new Error(`Tab close updated received for index ${e.index} which does not exist`);return r.tabId===this.d&&(this.d=""),r}else if(e.kind===3){if(e.oldIndex===void 0)throw new Error("Invalid old index on move IPC");const r=this.c.splice(e.oldIndex,1)[0];if(!r)throw new Error(`Tab move updated received for index ${e.oldIndex} which does not exist`);return this.c.splice(e.index,0,r),r}const t=this.c.find(r=>r.tabId===e.tabDto.id);if(!t)throw new Error("INVALID tab");return e.tabDto.isActive?this.d=e.tabDto.id:this.d===e.tabDto.id&&!e.tabDto.isActive&&(this.d=""),t.acceptDtoUpdate(e.tabDto),t}activeTabId(){return this.d}},Hv=class{constructor(t){this.b=new D,this.c=new D,this.e=[],this.a=t.getProxy(z.MainThreadEditorTabs)}get tabGroups(){if(!this.f){const t=this,r={onDidChangeTabGroups:t.c.event,onDidChangeTabs:t.b.event,get all(){return Object.freeze(t.e.map(i=>i.apiObject))},get activeTabGroup(){const i=t.d;return Kn(t.e.find(n=>n.groupId===i)?.apiObject)},close:async(i,s)=>{const n=Array.isArray(i)?i:[i];return n.length?dT(n[0])?this.j(n,s):this.i(n,s):!0}};this.f=Object.freeze(r)}return this.f}$acceptEditorTabModel(t){const r=new Set(this.e.map(l=>l.groupId)),i=new Set(t.map(l=>l.groupId)),s=sk(r,i),n=this.e.filter(l=>s.removed.includes(l.groupId)).map(l=>l.apiObject),o=[],a=[];this.e=t.map(l=>{const u=new hT(l,()=>this.d);return s.added.includes(u.groupId)?o.push(u.apiObject):a.push(u.apiObject),u});const c=Kn(t.find(l=>l.isActive===!0)?.groupId);c!==void 0&&this.d!==c&&(this.d=c),this.c.fire(Object.freeze({opened:o,closed:n,changed:a}))}$acceptTabGroupUpdate(t){const r=this.e.find(i=>i.groupId===t.groupId);if(!r)throw new Error("Update Group IPC call received before group creation.");r.acceptGroupDtoUpdate(t),t.isActive&&(this.d=t.groupId),this.c.fire(Object.freeze({changed:[r.apiObject],opened:[],closed:[]}))}$acceptTabOperation(t){const r=this.e.find(s=>s.groupId===t.groupId);if(!r)throw new Error("Update Tabs IPC call received before group creation.");const i=r.acceptTabOperation(t);switch(t.kind){case 0:this.b.fire(Object.freeze({opened:[i.apiObject],closed:[],changed:[]}));return;case 1:this.b.fire(Object.freeze({opened:[],closed:[i.apiObject],changed:[]}));return;case 3:case 2:this.b.fire(Object.freeze({opened:[],closed:[],changed:[i.apiObject]}));return}}g(t){for(const r of this.e)for(const i of r.tabs)if(i.apiObject===t)return i}h(t){return this.e.find(r=>r.apiObject===t)}async i(t,r){const i=[];for(const s of t){const n=this.g(s);if(!n)throw new Error("Tab close: Invalid tab not found!");i.push(n.tabId)}return this.a.$closeTab(i,r)}async j(t,r){const i=[];for(const s of t){const n=this.h(s);if(!n)throw new Error("Group close: Invalid group not found!");i.push(n.groupId)}return this.a.$closeGroup(i,r)}};Hv=__decorate([__param(0,Me)],Hv);function dT(e){return e.tabs!==void 0}var fT=0,x8=new WeakMap,mf=_("IExtHostTesting"),jv=class extends he{constructor(t,r,i,s){super(),this.C=r,this.D=i,this.F=s,this.f=this.B(new D),this.g=new Map,this.w=this.B(new D),this.y=new Set,this.z=new Map,this.onResultsChanged=this.f.event,this.results=[],this.h=t.getProxy(z.MainThreadTesting),this.m=new bT(this.h),this.j=new mT(this.h,r),i.registerArgumentProcessor({processArgument:n=>{switch(n?.$mid){case 16:{const o=n,a=o.tests[o.tests.length-1].item.extId;return this.g.get(De.root(a))?.collection.tree.get(a)?.actual??r9(n)}case 18:{const{test:o,message:a}=n,c=o.item.extId;return{test:this.g.get(De.root(c))?.collection.tree.get(c)?.actual??r9({$mid:16,tests:[o]}),message:ia.to(a)}}default:return n}}}),i.registerCommand(!1,"testing.getExplorerSelection",async()=>{const n=await i.executeCommand("_testing.getExplorerSelection"),o=a=>{const c=this.g.get(De.root(a));if(c)return De.isRoot(a)?c.controller:c.collection.tree.get(a)?.actual};return{include:n?.include.map(o).filter(Js)||[],exclude:n?.exclude.map(o).filter(Js)||[]}})}createTestController(t,r,i,s){if(this.g.has(r))throw new Error(`Attempt to insert a duplicate controller with ID "${r}"`);const n=new me,o=n.add(new zP(r,i,this.F));o.root.label=i;const a=new Map,c=new Set,l=this.h,u=()=>{let f=0;s&&(f|=2);const m=p.relatedCodeProvider;return m&&(m?.provideRelatedTests&&(f|=8),m?.provideRelatedCode&&(f|=4)),f},h={items:o.root.children,get label(){return i},set label(f){i=f,o.root.label=f,l.$updateController(r,{label:i})},get refreshHandler(){return s},set refreshHandler(f){s=f,l.$updateController(r,{capabilities:u()})},get id(){return r},get relatedCodeProvider(){return p.relatedCodeProvider},set relatedCodeProvider(f){R(t,"testRelatedCode"),p.relatedCodeProvider=f,l.$updateController(r,{capabilities:u()})},createRunProfile:(f,m,w,E,$,S)=>{let P=Qa(f);for(;a.has(P);)P++;return new I8(this.h,a,c,this.w.event,r,P,f,m,w,E,$,S)},createTestItem(f,m,w){return new yl(r,f,m,w)},createTestRun:(f,m,w=!0)=>this.j.createTestRun(t,r,o,f,m,w),invalidateTestResults:f=>{if(f===void 0)this.h.$markTestRetired(void 0);else{const m=f instanceof Array?f:[f];this.h.$markTestRetired(m.map(w=>De.fromExtHostTestItem(w,r).toString()))}},set resolveHandler(f){o.resolveHandler=f},get resolveHandler(){return o.resolveHandler},dispose:()=>{n.dispose()}},p={controller:h,collection:o,profiles:a,extension:t,activeProfiles:c};return l.$registerTestController(r,i,u()),n.add(ce(()=>l.$unregisterTestController(r))),this.g.set(r,p),n.add(ce(()=>this.g.delete(r))),n.add(o.onDidGenerateDiff(f=>l.$publishDiff(r,f.map(mh.serialize)))),h}createTestObserver(){return this.m.checkout()}async runTests(t,r=st.None){const i=$8(t);if(!i)throw new Error("The request passed to `vscode.test.runTests` must include a profile");const s=this.g.get(i.controllerId);if(!s)throw new Error("Controller not found");await this.h.$runTests({preserveFocus:t.preserveFocus??!0,group:sa.from(i.kind),targets:[{testIds:t.include?.map(n=>De.fromExtHostTestItem(n,s.collection.root.id).toString())??[s.collection.root.id],profileId:i.profileId,controllerId:i.controllerId}],exclude:t.exclude?.map(n=>n.id)},r)}registerTestFollowupProvider(t){return this.y.add(t),{dispose:()=>{this.y.delete(t)}}}async $getTestsRelatedToCode(t,r,i){const s=this.F.getDocument(y.revive(t));if(!s)return[];const n=Fe.to(r),o=[];return await Promise.all([...this.g.values()].map(async a=>{let c;try{c=await a.relatedCodeProvider?.provideRelatedTests?.(s.document,n,i)}catch(l){i.isCancellationRequested||this.C.warn(`Error thrown while providing related tests for ${a.controller.label}`,l)}if(c){for(const l of c)o.push(De.fromExtHostTestItem(l,a.controller.id).toString());a.collection.flushDiff()}})),o}async $getCodeRelatedToTest(t,r){const i=this.g.get(De.root(t));if(!i)return[];const s=i.collection.tree.get(t);return s?(await i.relatedCodeProvider?.provideRelatedCode?.(s.actual,r))?.map(cr.from)??[]:[]}$syncTests(){for(const{collection:t}of this.g.values())t.flushDiff();return Promise.resolve()}async $getCoverageDetails(t,r,i){return(await this.j.getCoverageDetails(t,r,i))?.map(ll.fromDetails)}async $disposeRun(t){this.j.disposeTestRun(t)}$configureRunProfile(t,r){this.g.get(t)?.profiles.get(r)?.configureHandler?.()}$setDefaultRunProfiles(t){const r=new Map;for(const[i,s]of Object.entries(t)){const n=this.g.get(i);if(!n)continue;const o=new Map,a=s.filter(l=>!n.activeProfiles.has(l)),c=[...n.activeProfiles].filter(l=>!s.includes(l));for(const l of a)o.set(l,!0),n.activeProfiles.add(l);for(const l of c)o.set(l,!1),n.activeProfiles.delete(l);o.size&&r.set(i,o)}this.w.fire(r)}async $refreshTests(t,r){await this.g.get(t)?.controller.refreshHandler?.(r)}$publishTestResults(t){this.results=Object.freeze(t.map(r=>{const i=E1.to(r),s=r.tasks.findIndex(n=>n.hasCoverage);return s!==-1&&(i.getDetailedCoverage=(n,o=st.None)=>this.h.$getCoverageDetails(r.id,s,n,o).then(a=>a.map(ll.to))),x8.set(i,r.id),i}).concat(this.results).sort((r,i)=>i.completedAt-r.completedAt).slice(0,32)),this.f.fire()}async $expandTest(t,r){const i=this.g.get(De.fromString(t).controllerId)?.collection;i&&(await i.expand(t,r<0?1/0:r),i.flushDiff())}$acceptDiff(t){this.m.applyDiff(t.map(r=>mh.deserialize({asCanonicalUri:i=>i},r)))}async $runControllerTests(t,r){return Promise.all(t.map(i=>this.G(i,!1,r)))}async $startContinuousRun(t,r){const i=new dt(r),s=await Promise.all(t.map(n=>this.G(n,!0,i.token)));return!r.isCancellationRequested&&!s.some(n=>n.error)&&await new Promise(n=>r.onCancellationRequested(n)),i.dispose(!0),s}async $provideTestFollowups(t,r){const i=this.results.find(o=>x8.get(o)===t.resultId),s=i&&yT(De.fromString(t.extId),i?.results);if(!s)return[];let n=[];return await Promise.all([...this.y].map(async o=>{try{const a=await o.provideFollowup(i,s,t.taskIndex,t.messageIndex,r);a&&(n=n.concat(a))}catch(a){this.C.error("Error thrown while providing followup for test message",a)}})),r.isCancellationRequested?[]:n.map(o=>{const a=fT++;return this.z.set(a,o),{title:o.title,id:a}})}$disposeTestFollowups(t){for(const r of t)this.z.delete(r)}$executeTestFollowup(t){const r=this.z.get(t);return r?this.D.executeCommand(r.command,...r.arguments||[]):Promise.resolve()}$cancelExtensionTestRun(t,r){t===void 0?this.j.cancelAllRuns():this.j.cancelRunById(t,r)}getMetadataForRun(t){for(const r of this.j.trackers){const i=r.getTaskIdForRun(t);if(i)return{taskId:i,runId:r.id}}}async G(t,r,i){const s=this.g.get(t.controllerId);if(!s)return{};const{collection:n,profiles:o,extension:a}=s,c=o.get(t.profileId);if(!c)return{};const l=t.testIds.map(f=>n.tree.get(f)).filter(Js),u=t.excludeExtIds.map(f=>s.collection.tree.get(f)).filter(Js).filter(f=>l.some(m=>m.fullId.compare(f.fullId)===2));if(!l.length)return{};const h=new rd(l.some(f=>f.actual instanceof ev)?void 0:l.map(f=>f.actual),u.map(f=>f.actual),c,r),p=hD(t)&&this.j.prepareForMainThreadTestRun(a,h,S8.fromInternal(t,s.collection),c,i);try{return await c.runHandler(h,i),{}}catch(f){return{error:String(f)}}finally{p&&p.hasRunningTasks&&!i.isCancellationRequested&&await ht.toPromise(p.onEnd)}}};jv=__decorate([__param(0,Me),__param(1,He),__param(2,Un),__param(3,ma)],jv);var pT=1e4,k8;(function(e){e[e.Running=0]="Running",e[e.Cancelling=1]="Cancelling",e[e.Ended=2]="Ended"})(k8||(k8={}));var gT=class extends he{get hasRunningTasks(){return this.g>0}get id(){return this.C.id}constructor(e,t,r,i,s,n){super(),this.C=e,this.D=t,this.F=r,this.G=i,this.H=s,this.f=0,this.g=0,this.h=new Map,this.j=new Set,this.w=this.B(new D),this.z=new Map,this.onEnd=this.w.event,this.m=this.B(new dt(n));const o=this.B(new ao(()=>this.I(),pT));this.B(this.m.token.onCancellationRequested(()=>o.schedule()));const a=new D;this.y=a.event,this.B(ce(()=>{a.fire(),a.dispose()}))}getTaskIdForRun(e){for(const[t,{run:r}]of this.h)if(r===e)return t}cancel(e){e?this.h.get(e)?.cts.cancel():this.f===0?(this.m.cancel(),this.f=1):this.f===1&&this.I()}async getCoverageDetails(e,t,r){const[,i]=De.fromString(e).path,s=this.z.get(e);if(!s)return[];const{report:n,extIds:o}=s,a=this.h.get(i);if(!a)throw new Error("unreachable: run task was not found");let c;if(t&&n instanceof od){const u=o.indexOf(t);if(u===-1)return[];c=n.includesTests[u]}return await(c?this.G?.loadDetailedCoverageForTest?.(a.run,n,c,r):this.G?.loadDetailedCoverage?.(a.run,n,r))??[]}createRun(e){const t=this.C.id,r=this.C.controllerId,i=Dr(),s=l=>(u,...h)=>{if(o){this.F.warn(`Setting the state of test "${u.id}" is a no-op after the run ends.`);return}this.L(u),l(u,...h)},n=(l,u)=>{const h=u instanceof Array?u.map(ia.from):[ia.from(u)];if(l.uri&&l.range){const p={range:M.from(l.range),uri:l.uri};for(const f of h)f.location=f.location||p}this.D.$appendTestMessagesInRun(t,i,De.fromExtHostTestItem(l,r).toString(),h)};let o=!1;const a=this.B(new dt(this.m.token)),c={isPersisted:this.C.isPersisted,token:a.token,name:e,onDidDispose:this.y,addCoverage:l=>{if(o)return;const u=l instanceof od?l.includesTests:[];if(u.length)for(const f of u)this.L(f);const h=l.uri.toString(),p=new De([t,i,h]).toString();this.z.set(p,{report:l,extIds:u.map(f=>De.fromExtHostTestItem(f,r).toString())}),this.D.$appendCoverage(t,i,ll.fromFile(r,p,l))},enqueued:s(l=>{this.D.$updateTestStateInRun(t,i,De.fromExtHostTestItem(l,r).toString(),1)}),skipped:s(l=>{this.D.$updateTestStateInRun(t,i,De.fromExtHostTestItem(l,r).toString(),5)}),started:s(l=>{this.D.$updateTestStateInRun(t,i,De.fromExtHostTestItem(l,r).toString(),2)}),errored:s((l,u,h)=>{n(l,u),this.D.$updateTestStateInRun(t,i,De.fromExtHostTestItem(l,r).toString(),6,h)}),failed:s((l,u,h)=>{n(l,u),this.D.$updateTestStateInRun(t,i,De.fromExtHostTestItem(l,r).toString(),4,h)}),passed:s((l,u)=>{this.D.$updateTestStateInRun(t,i,De.fromExtHostTestItem(l,this.C.controllerId).toString(),3,u)}),appendOutput:(l,u,h)=>{o||(h&&this.L(h),this.D.$appendOutputToRun(t,i,ke.fromString(l),u&&cr.from(u),h&&De.fromExtHostTestItem(h,r).toString()))},end:()=>{o||(o=!0,this.D.$finishedTestRunTask(t,i),--this.g||this.J())}};return this.g++,this.h.set(i,{run:c,cts:a}),this.D.$startedTestRunTask(t,{id:i,ctrlId:this.C.controllerId,name:e||this.H.displayName||this.H.identifier.value,running:!0}),c}I(){for(const{run:e}of this.h.values())e.end()}J(){this.f!==2&&(this.f=2,this.w.fire())}L(e){if(!(e instanceof yl))throw new vh(e.id);if(this.j.has(De.fromExtHostTestItem(e,this.C.controllerId).toString()))return;const t=[],r=this.C.colllection.root;for(;;){const i=Ns.from(e);if(t.unshift(i),this.j.has(i.extId)||(this.j.add(i.extId),e===r))break;e=e.parent||r}this.D.$addTestsToRun(this.C.controllerId,this.C.id,t)}dispose(){this.J(),super.dispose()}},mT=class{get trackers(){return this.f.values()}constructor(e,t){this.h=e,this.j=t,this.f=new Map,this.g=new Map}getCoverageDetails(e,t,r){const i=De.root(e);return this.g.get(i)?.getCoverageDetails(e,t,r)||[]}disposeTestRun(e){this.g.get(e)?.dispose(),this.g.delete(e);for(const[t,{id:r}]of this.f)r===e&&this.f.delete(t)}prepareForMainThreadTestRun(e,t,r,i,s){return this.k(t,r,i,e,s)}cancelRunById(e,t){this.g.get(e)?.cancel(t)}cancelAllRuns(){for(const e of this.f.values())e.cancel()}createTestRun(e,t,r,i,s,n){const o=this.f.get(i);if(o)return o.createRun(s);const a=S8.fromPublic(t,r,i,n),c=$8(i);this.h.$startedExtensionTestRun({controllerId:t,continuous:!!i.continuous,profile:c&&{group:sa.from(c.kind),id:c.profileId},exclude:i.exclude?.map(u=>De.fromExtHostTestItem(u,r.root.id).toString())??[],id:a.id,include:i.include?.map(u=>De.fromExtHostTestItem(u,r.root.id).toString())??[r.root.id],preserveFocus:i.preserveFocus??!0,persist:n});const l=this.k(i,a,i.profile,e);return ht.once(l.onEnd)(()=>{this.h.$finishedExtensionTestRun(a.id)}),l.createRun(s)}k(e,t,r,i,s){const n=new gT(t,this.h,this.j,r,i,s);return this.f.set(e,n),this.g.set(n.id,n),n}},$8=e=>{if(e.profile){if(!(e.profile instanceof I8))throw new Error("TestRunRequest.profile is not an instance created from TestController.createRunProfile");return e.profile}},S8=class tw{static fromPublic(t,r,i,s){return new tw(t,Dr(),s,r)}static fromInternal(t,r){return new tw(t.controllerId,t.runId,!0,r)}constructor(t,r,i,s){this.controllerId=t,this.id=r,this.isPersisted=i,this.colllection=s}},vT=class{get isEmpty(){return this.f.size===0&&this.h.size===0&&this.g.size===0}constructor(e){this.k=e,this.f=new Set,this.g=new Set,this.h=new Set,this.j=new Set}add(e){this.f.add(e)}update(e){Object.assign(e.revived,Ns.toPlain(e.item)),this.f.has(e)||this.g.add(e)}remove(e){if(this.f.has(e)){this.f.delete(e);return}this.g.delete(e);const t=De.parentId(e.item.extId);if(t&&this.j.has(t.toString())){this.j.add(e.item.extId);return}this.h.add(e)}getChangeEvent(){const{f:e,g:t,h:r}=this;return{get added(){return[...e].map(i=>i.revived)},get updated(){return[...t].map(i=>i.revived)},get removed(){return[...r].map(i=>i.revived)}}}complete(){this.isEmpty||this.k.fire(this.getChangeEvent())}},wT=class extends dD{constructor(){super(...arguments),this.z=new D,this.onDidChangeTests=this.z.event}get rootTests(){return this.h}getMirroredTestDataById(e){return this.g.get(e)}getMirroredTestDataByReference(e){return this.g.get(e.id)}y(e,t){return{...e,revived:Ns.toPlain(e.item),depth:t?t.depth+1:0,children:new Set}}x(){return new vT(this.z)}},bT=class{constructor(e){this.g=e}checkout(){this.f||(this.f=this.h());const e=this.f;return e.observers++,{onDidChangeTest:e.tests.onDidChangeTests,get tests(){return[...e.tests.rootTests].map(t=>t.revived)},dispose:pp(()=>{--e.observers===0&&(this.g.$unsubscribeFromDiffs(),this.f=void 0)})}}getMirroredTestDataByReference(e){return this.f?.tests.getMirroredTestDataByReference(e)}applyDiff(e){this.f?.tests.apply(e)}h(){const e=new wT({asCanonicalUri:t=>t});return this.g.$subscribeToDiffs(),{observers:0,tests:e}}},Tl=(e,t,r,i)=>{r?Object.assign(r,i):t.$updateTestRunConfig(e.controllerId,e.profileId,i)},I8=class extends q6{#e;#t;#r;#i;#n;get label(){return this.g}set label(e){e!==this.g&&(this.g=e,Tl(this,this.#e,this.#i,{label:e}))}get supportsContinuousRun(){return this.j}set supportsContinuousRun(e){e!==this.j&&(this.j=e,Tl(this,this.#e,this.#i,{supportsContinuousRun:e}))}get isDefault(){return this.#t.has(this.profileId)}set isDefault(e){e!==this.isDefault&&(e?this.#t.add(this.profileId):this.#t.delete(this.profileId),Tl(this,this.#e,this.#i,{isDefault:e}))}get tag(){return this._tag}set tag(e){e?.id!==this._tag?.id&&(this._tag=e,Tl(this,this.#e,this.#i,{tag:e?ti.namespace(this.controllerId,e.id):null}))}get configureHandler(){return this.f}set configureHandler(e){e!==this.f&&(this.f=e,Tl(this,this.#e,this.#i,{hasConfigurationHandler:!!e}))}get onDidChangeDefault(){return ht.chain(this.#r,e=>e.map(t=>t.get(this.controllerId)?.get(this.profileId)).filter(Js))}constructor(e,t,r,i,s,n,o,a,c,l=!1,u=void 0,h=!1){super(s,n,a),this.g=o,this.runHandler=c,this._tag=u,this.j=h,this.#e=e,this.#n=t,this.#t=r,this.#r=i,t.set(n,this);const p=sa.from(a);l&&r.add(n),this.#i={profileId:n,controllerId:s,tag:u?ti.namespace(this.controllerId,u.id):null,label:o,group:p,isDefault:l,hasConfigurationHandler:!1,supportsContinuousRun:h},queueMicrotask(()=>{this.#i&&(this.#e.$publishTestRunProfile(this.#i),this.#i=void 0)})}dispose(){this.#n?.delete(this.profileId)&&(this.#n=void 0,this.#e.$removeTestProfile(this.controllerId,this.profileId)),this.#i=void 0}};function yT(e,t){for(let r=0;r<e.path.length;r++){const i=t.find(s=>s.id===e.path[r]);if(!i)return;if(r===e.path.length-1)return i;t=i.children}}var cB=_("configurationResolverService"),Ye;(function(e){e.Unknown="unknown",e.Env="env",e.Config="config",e.Command="command",e.Input="input",e.ExtensionInstallFolder="extensionInstallFolder",e.WorkspaceFolder="workspaceFolder",e.Cwd="cwd",e.WorkspaceFolderBasename="workspaceFolderBasename",e.UserHome="userHome",e.LineNumber="lineNumber",e.ColumnNumber="columnNumber",e.SelectedText="selectedText",e.File="file",e.FileWorkspaceFolder="fileWorkspaceFolder",e.FileWorkspaceFolderBasename="fileWorkspaceFolderBasename",e.RelativeFile="relativeFile",e.RelativeFileDirname="relativeFileDirname",e.FileDirname="fileDirname",e.FileExtname="fileExtname",e.FileBasename="fileBasename",e.FileBasenameNoExtension="fileBasenameNoExtension",e.FileDirnameBasename="fileDirnameBasename",e.ExecPath="execPath",e.ExecInstallFolder="execInstallFolder",e.PathSeparator="pathSeparator",e.PathSeparatorAlias="/"})(Ye||(Ye={}));var lr=class extends Gs{constructor(e,t){super(t),this.variable=e}},ET=class Zf{static{this.VARIABLE_LHS="${"}static{this.VARIABLE_REGEXP=/\$\{(.*?)\}/g}constructor(t,r,i,s){this.h=new Map,this.a=t,this.b=r,this.g=i,s&&(this.c=s.then(n=>this.i(n)))}i(t){if(tr){const r=Object.create(null);return Object.keys(t).forEach(i=>{r[i.toLowerCase()]=t[i]}),r}return t}resolveWithEnvironment(t,r,i){return this.l({env:this.i(t),userHome:void 0},r?r.uri:void 0,i)}async resolveAsync(t,r){const i={env:await this.c,userHome:await this.g};return this.l(i,t?t.uri:void 0,r)}async j(t,r,i,s){const n=Qe(r);tr&&n.windows?Object.keys(n.windows).forEach(a=>n[a]=n.windows[a]):Ir&&n.osx?Object.keys(n.osx).forEach(a=>n[a]=n.osx[a]):di&&n.linux&&Object.keys(n.linux).forEach(a=>n[a]=n.linux[a]),delete n.windows,delete n.osx,delete n.linux;const o={env:await this.c,userHome:await this.g};return this.l(o,t?t.uri:void 0,n,i,s)}async resolveAnyAsync(t,r,i){return this.j(t,r,i)}async resolveAnyMap(t,r,i){const s=new Map;return{newConfig:await this.j(t,r,i,s),resolvedVariables:s}}resolveWithInteractionReplace(t,r,i,s){throw new Error("resolveWithInteractionReplace not implemented.")}resolveWithInteraction(t,r,i,s){throw new Error("resolveWithInteraction not implemented.")}contributeVariable(t,r){if(this.h.has(t))throw new Error("Variable "+t+" is contributed twice.");this.h.set(t,r)}async l(t,r,i,s,n){if(Ce(i))return this.m(t,r,i,s,n);if(Array.isArray(i))return Promise.all(i.map(o=>this.l(t,r,o,s,n)));if(gt(i)){const o=Object.create(null),a=await Promise.all(Object.keys(i).map(async c=>[await this.m(t,r,c,s,n),await this.l(t,r,i[c],s,n)]));for(const[c,l]of a)o[c]=l;return o}return i}m(t,r,i,s,n){return F$(i,Zf.VARIABLE_REGEXP,async(o,a)=>{if(a.includes(Zf.VARIABLE_LHS))return o;let c=await this.o(t,o,a,r,s);return n?.set(a,c),c!==o&&Ce(c)&&c.match(Zf.VARIABLE_REGEXP)&&(c=await this.m(t,r,c,s,n)),c})}n(t){return this.b?this.b.getUriLabel(t,{noPrefix:!0}):t.fsPath}async o(t,r,i,s,n){let o;const a=i.split(":");a.length>1&&(i=a[0],o=a[1]);const c=h=>{const p=this.a.getFilePath();if(p)return El(p);throw new lr(h,d(12831,null,r))},l=h=>{const p=c(h);if(this.a.getWorkspaceFolderPathForFile){const f=this.a.getWorkspaceFolderPathForFile();if(f)return El(f)}throw new lr(h,d(12832,null,r,br(p)))},u=h=>{if(o){const p=this.a.getFolderUri(o);if(p)return p;throw new lr(h,d(12833,null,r,o))}if(s)return s;throw this.a.getWorkspaceFolderCount()>1?new lr(h,d(12834,null,r)):new lr(h,d(12835,null,r))};switch(i){case"env":if(o){if(t.env){const h=t.env[tr?o.toLowerCase():o];if(Ce(h))return h}return""}throw new lr(Ye.Env,d(12836,null,r));case"config":if(o){const h=this.a.getConfigurationValue(s,o);if(yt(h))throw new lr(Ye.Config,d(12837,null,r,o));if(gt(h))throw new lr(Ye.Config,d(12838,null,r,o));return h}throw new lr(Ye.Config,d(12839,null,r));case"command":return this.p(Ye.Command,r,o,n,"command");case"input":return this.p(Ye.Input,r,o,n,"input");case"extensionInstallFolder":if(o){const h=await this.a.getExtension(o);if(!h)throw new lr(Ye.ExtensionInstallFolder,d(12840,null,r,o));return this.n(h.extensionLocation)}throw new lr(Ye.ExtensionInstallFolder,d(12841,null,r));default:switch(i){case"workspaceRoot":case"workspaceFolder":return El(this.n(u(Ye.WorkspaceFolder)));case"cwd":return s||o?El(this.n(u(Ye.Cwd))):io();case"workspaceRootFolderName":case"workspaceFolderBasename":return El(br(this.n(u(Ye.WorkspaceFolderBasename))));case"userHome":{if(t.userHome)return t.userHome;throw new lr(Ye.UserHome,d(12842,null,r))}case"lineNumber":{const h=this.a.getLineNumber();if(h)return h;throw new lr(Ye.LineNumber,d(12843,null,r))}case"columnNumber":{const h=this.a.getColumnNumber();if(h)return h;throw new Error(d(12844,null,r))}case"selectedText":{const h=this.a.getSelectedText();if(h)return h;throw new lr(Ye.SelectedText,d(12845,null,r))}case"file":return c(Ye.File);case"fileWorkspaceFolder":return l(Ye.FileWorkspaceFolder);case"fileWorkspaceFolderBasename":return br(l(Ye.FileWorkspaceFolderBasename));case"relativeFile":return s||o?_a(this.n(u(Ye.RelativeFile)),c(Ye.RelativeFile)):c(Ye.RelativeFile);case"relativeFileDirname":{const h=no(c(Ye.RelativeFileDirname));if(s||o){const p=_a(this.n(u(Ye.RelativeFileDirname)),h);return p.length===0?".":p}return h}case"fileDirname":return no(c(Ye.FileDirname));case"fileExtname":return Pp(c(Ye.FileExtname));case"fileBasename":return br(c(Ye.FileBasename));case"fileBasenameNoExtension":{const h=br(c(Ye.FileBasenameNoExtension));return h.slice(0,h.length-Pp(h).length)}case"fileDirnameBasename":return br(no(c(Ye.FileDirnameBasename)));case"execPath":{const h=this.a.getExecPath();return h||r}case"execInstallFolder":{const h=this.a.getAppRoot();return h||r}case"pathSeparator":case"/":return Wr;default:try{const h=o?`${i}:${o}`:i;return this.p(Ye.Unknown,r,h,n,void 0)}catch{return r}}}}p(t,r,i,s,n){if(i&&s){const o=n===void 0?s[i]:s[n+":"+i];if(typeof o=="string")return o;throw new lr(t,d(12846,null,r))}return r}},Bv=_("IExtHostVariableResolverProvider"),xT=class extends ET{constructor(e,t,r,i,s,n,o){function a(){if(r){const c=r.activeEditor();if(c)return c.document.uri;const l=i.tabGroups.all.find(u=>u.isActive)?.activeTab;if(l!==void 0){if(l.input instanceof ad||l.input instanceof Bm)return l.input.modified;if(l.input instanceof Um||l.input instanceof jm||l.input instanceof Hm)return l.input.uri}}}super({getFolderUri:c=>{const l=n.folders.filter(u=>u.name===c);if(l&&l.length>0)return l[0].uri},getWorkspaceFolderCount:()=>n.folders.length,getConfigurationValue:(c,l)=>s.getConfiguration(void 0,c).get(l),getAppRoot:()=>io(),getExecPath:()=>hu.VSCODE_EXEC_PATH,getFilePath:()=>{const c=a();if(c)return so(c.fsPath)},getWorkspaceFolderPathForFile:()=>{if(t){const c=a();if(c){const l=t.getWorkspaceFolder(c);if(l)return so(l.uri.fsPath)}}},getSelectedText:()=>{if(r){const c=r.activeEditor();if(c&&!c.selection.isEmpty)return c.document.getText(c.selection)}},getLineNumber:()=>{if(r){const c=r.activeEditor();if(c)return String(c.selection.end.line+1)}},getColumnNumber:()=>{if(r){const c=r.activeEditor();if(c)return String(c.selection.end.character+1)}},getExtension:c=>e.getExtension(c)},void 0,o?Promise.resolve(o):void 0,Promise.resolve(hu))}},_v=class extends he{constructor(t,r,i,s,n){super(),this.b=t,this.c=r,this.g=i,this.h=s,this.j=n,this.a=new pr(async()=>{const o=await this.h.getConfigProvider(),c={folders:await this.c.getWorkspaceFolders2()||[]};return this.B(this.c.onDidChangeWorkspace(async l=>{c.folders=await this.c.getWorkspaceFolders2()||[]})),new xT(this.b,this.c,this.g,this.j,o,c,this.m())})}getResolver(){return this.a.value}m(){}};_v=__decorate([__param(0,Hs),__param(1,Xi),__param(2,ma),__param(3,Yi),__param(4,Al)],_v);var C8=_("IExtHostDebugService"),zv=class extends he{get onDidStartDebugSession(){return this.y.event}get onDidTerminateDebugSession(){return this.z.event}get onDidChangeActiveDebugSession(){return this.C.event}get activeDebugSession(){return this.D?.api}get onDidReceiveDebugSessionCustomEvent(){return this.F.event}get activeDebugConsole(){return this.G.value}constructor(t,r,i,s,n,o,a,c){super(),this.Z=r,this.$=i,this.ab=s,this.bb=n,this.cb=o,this.db=a,this.eb=c,this.w=new Map,this.O=0,this.P=new Map,this.Q=new Map,this.R=new WeakMap,this.S=new Map,this.W=new Map,this.X=0,this.f=0,this.g=[],this.h=0,this.j=[],this.m=0,this.n=[],this.M=new Map,this.N=new Map,this.y=this.B(new D),this.z=this.B(new D),this.C=this.B(new D),this.F=this.B(new D),this.u=t.getProxy(z.MainThreadDebugService),this.I=this.B(new D),this.L=this.B(new D),this.G=new $T(this.u),this.H=new Map,this.$.getExtensionRegistry().then(l=>{this.B(l.onDidChange(u=>{this.gb(l)})),this.gb(l)}),this.Y=t.getProxy(z.MainThreadTelemetry)}async $getVisualizerTreeItem(t,r){const i=this.hb(r);if(!i)return;const s=await this.Q.get(t)?.getTreeItem?.(i);return s?this.fb(t,s):void 0}registerDebugVisualizationTree(t,r,i){const s=Ue.toKey(t.identifier),n=this.zb(s,r);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${r}' is already registered`);return this.Q.set(n,i),this.u.$registerDebugVisualizerTree(n,!!i.editItem),ce(()=>{this.u.$unregisterDebugVisualizerTree(n),this.Q.delete(r)})}async $getVisualizerTreeItemChildren(t,r){const i=this.S.get(r)?.item;return i?(await this.Q.get(t)?.getChildren?.(i))?.map(n=>this.fb(t,n))||[]:[]}async $editVisualizerTreeItem(t,r){const i=this.S.get(t);if(!i)return;const s=await this.Q.get(i.provider)?.editItem?.(i.item,r);return this.fb(i.provider,s||i.item)}$disposeVisualizedTree(t){const r=this.S.get(t);if(!r)return;const i=[r.children];for(const s of i)if(s)for(const n of s)i.push(this.S.get(n)?.children),this.S.delete(n)}fb(t,r){let i=this.R.get(r);return i||(i=this.O++,this.R.set(r,i),this.S.set(i,{provider:t,item:r})),A1.from(r,i)}asDebugSourceUri(t,r){const i=t;if(typeof i.sourceReference=="number"&&i.sourceReference>0){let s=`debug:${encodeURIComponent(i.path||"")}`,n="?";return r&&(s+=`${n}session=${encodeURIComponent(r.id)}`,n="&"),s+=`${n}ref=${i.sourceReference}`,y.parse(s)}else{if(i.path)return y.file(i.path);throw new Error("cannot create uri from DAP 'source' object; properties 'path' and 'sourceReference' are both missing.")}}gb(t){const r=[];for(const i of t.getAllExtensionDescriptions())if(i.contributes){const s=i.contributes.debuggers;if(s&&s.length>0)for(const n of s)oT(n)&&r.push(n.type)}this.u.$registerDebugTypes(r)}get activeStackItem(){return this.J}get onDidChangeActiveStackItem(){return this.L.event}get onDidChangeBreakpoints(){return this.I.event}get breakpoints(){const t=[];return this.H.forEach(r=>t.push(r)),t}async $resolveDebugVisualizer(t,r){const i=this.W.get(t);if(!i)throw new Error(`No debug visualizer found with id '${t}'`);let{v:s,provider:n,extensionId:o}=i;if(s.visualization||(s=await n.resolveDebugVisualization?.(s,r)||s,i.v=s),!s.visualization)throw new Error(`No visualization returned from resolveDebugVisualization in '${n}'`);return this.Ab(o,s.visualization)}async $executeDebugVisualizerCommand(t){const r=this.W.get(t);if(!r)throw new Error(`No debug visualizer found with id '${t}'`);const i=r.v.visualization;i&&"command"in i&&this.db.executeCommand(i.command,...i.arguments||[])}hb(t){const r=this.w.get(t.sessionId);return r&&{session:r.api,variable:t.variable,containerId:t.containerId,frameId:t.frameId,threadId:t.threadId}}async $provideDebugVisualizers(t,r,i,s){const n=this.hb(i),o=this.zb(t,r),a=this.P.get(o);if(!n||!a)return[];const c=await a.provideDebugVisualization(n,s);return c?c.map(l=>{const u=++this.X;this.W.set(u,{v:l,provider:a,extensionId:t});const h=l.iconPath?this.Bb(l.iconPath):void 0;return{id:u,name:l.name,iconClass:h?.iconClass,iconPath:h?.iconPath,visualization:this.Ab(t,l.visualization)}}):[]}$disposeDebugVisualizers(t){for(const r of t)this.W.delete(r)}registerDebugVisualizationProvider(t,r,i){if(!t.contributes?.debugVisualizers?.some(o=>o.id===r))throw new Error(`Extensions may only call registerDebugVisualizationProvider() for renderers they contribute (got ${r})`);const s=Ue.toKey(t.identifier),n=this.zb(s,r);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${r}' is already registered`);return this.P.set(n,i),this.u.$registerDebugVisualizer(s,r),ce(()=>{this.u.$unregisterDebugVisualizer(s,r),this.P.delete(r)})}addBreakpoints(t){const r=t.filter(n=>{const o=n.id;return this.H.has(o)?!1:(this.H.set(o,n),!0)});this.wb(r,[],[]);const i=[],s=new Map;for(const n of r)if(n instanceof In){let o=s.get(n.location.uri.toString());o||(o={type:"sourceMulti",uri:n.location.uri,lines:[]},s.set(n.location.uri.toString(),o),i.push(o)),o.lines.push({id:n.id,enabled:n.enabled,condition:n.condition,hitCondition:n.hitCondition,logMessage:n.logMessage,line:n.location.range.start.line,character:n.location.range.start.character,mode:n.mode})}else n instanceof Cn&&i.push({type:"function",id:n.id,enabled:n.enabled,hitCondition:n.hitCondition,logMessage:n.logMessage,condition:n.condition,functionName:n.functionName,mode:n.mode});return this.u.$registerBreakpoints(i)}removeBreakpoints(t){const r=t.filter(o=>this.H.delete(o.id));this.wb([],r,[]);const i=r.filter(o=>o instanceof In).map(o=>o.id),s=r.filter(o=>o instanceof Cn).map(o=>o.id),n=r.filter(o=>o instanceof jh).map(o=>o.id);return this.u.$unregisterBreakpoints(i,s,n)}startDebugging(t,r,i){const s=i.testRun&&this.eb.getMetadataForRun(i.testRun);return this.u.$startDebugging(t?t.uri:void 0,r,{parentSessionID:i.parentSession?i.parentSession.id:void 0,lifecycleManagedByParent:i.lifecycleManagedByParent,repl:i.consoleMode===Qh.MergeWithParent?"mergeWithParent":"separate",noDebug:i.noDebug,compact:i.compact,suppressSaveBeforeStart:i.suppressSaveBeforeStart,testRun:s&&{runId:s.runId,taskId:s.taskId},suppressDebugStatusbar:i.suppressDebugStatusbar??i.debugUI?.simple,suppressDebugToolbar:i.suppressDebugToolbar??i.debugUI?.simple,suppressDebugView:i.suppressDebugView??i.debugUI?.simple})}stopDebugging(t){return this.u.$stopDebugging(t?t.id:void 0)}registerDebugConfigurationProvider(t,r,i){if(!r)return new Ie(()=>{});const s=this.f++;return this.g.push({type:t,handle:s,provider:r}),this.u.$registerDebugConfigurationProvider(t,i,!!r.provideDebugConfigurations,!!r.resolveDebugConfiguration,!!r.resolveDebugConfigurationWithSubstitutedVariables,s),new Ie(()=>{this.g=this.g.filter(n=>n.provider!==r),this.u.$unregisterDebugConfigurationProvider(s)})}registerDebugAdapterDescriptorFactory(t,r,i){if(!i)return new Ie(()=>{});if(!this.sb(t,r))throw new Error(`a DebugAdapterDescriptorFactory can only be registered from the extension that defines the '${r}' debugger.`);if(this.pb(r))throw new Error("a DebugAdapterDescriptorFactory can only be registered once per a type.");const s=this.h++;return this.j.push({type:r,handle:s,factory:i}),this.u.$registerDebugAdapterDescriptorFactory(r,s),new Ie(()=>{this.j=this.j.filter(n=>n.factory!==i),this.u.$unregisterDebugAdapterDescriptorFactory(s)})}registerDebugAdapterTrackerFactory(t,r){if(!r)return new Ie(()=>{});const i=this.m++;return this.n.push({type:t,handle:i,factory:r}),new Ie(()=>{this.n=this.n.filter(s=>s.factory!==r)})}async $runInTerminal(t,r){return Promise.resolve(void 0)}async $substituteVariables(t,r){let i;const s=await this.yb(t);return s&&(i={uri:s.uri,name:s.name,index:s.index,toResource:()=>{throw new Error("Not implemented")}}),(await this.cb.getResolver()).resolveAnyAsync(i,r)}ib(t,r){if(t instanceof Oc)return new IT(t.implementation)}jb(){}async $startDASession(t,r){const i=this,s=await this.xb(r);return this.ub(this.pb(s.type),s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}' (extension might have failed to activate)`);const o=this.ib(n,s);if(!o)throw new Error(`Couldn't create a debug adapter for type '${s.type}'.`);const a=o;return this.M.set(t,a),this.tb(s).then(c=>(c&&this.N.set(t,c),a.onMessage(async l=>{if(l.type==="request"&&l.command==="handshake"){const u=l,h={type:"response",seq:0,command:u.command,request_seq:u.seq,success:!0};this.U||(this.U=this.jb());try{if(this.U){const p=await this.U.sign(u.arguments.value);h.body={signature:p},a.sendResponse(h)}else throw new Error("no signer")}catch(p){h.success=!1,h.message=p.message,a.sendResponse(h)}}else{c&&c.onDidSendMessage&&c.onDidSendMessage(l);try{l=uT(l,!0)}catch(u){const h=l.type+"_"+(l.command??l.event??"");throw this.Y.$publicLog2("debugProtocolMessageError",{type:h,from:s.type}),u}i.u.$acceptDAMessage(t,l)}}),a.onError(l=>{c&&c.onError&&c.onError(l),this.u.$acceptDAError(t,l.name,l.message,l.stack)}),a.onExit(l=>{c&&c.onExit&&c.onExit(l??void 0,void 0),this.u.$acceptDAExit(t,l??void 0,void 0)}),c&&c.onWillStartSession&&c.onWillStartSession(),a.startSession()))})}$sendDAMessage(t,r){r=lT(r,!1);const i=this.N.get(t);i&&i.onWillReceiveMessage&&i.onWillReceiveMessage(r),this.M.get(t)?.sendMessage(r)}$stopDASession(t){const r=this.N.get(t);this.N.delete(t),r&&r.onWillStopSession&&r.onWillStopSession();const i=this.M.get(t);return this.M.delete(t),i?i.stopSession():Promise.resolve(void 0)}$acceptBreakpointsDelta(t){const r=[],i=[],s=[];if(t.added)for(const n of t.added){const o=n.id;if(o&&!this.H.has(o)){let a;if(n.type==="function")a=new Cn(n.functionName,n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode);else if(n.type==="data")a=new jh(n.label,n.dataId,n.canPersist,n.enabled,n.hitCondition,n.condition,n.logMessage,n.mode);else{const c=y.revive(n.uri);a=new In(new Rr(c,new xe(n.line,n.character)),n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode)}UD(a,o),this.H.set(o,a),r.push(a)}}if(t.removed)for(const n of t.removed){const o=this.H.get(n);o&&(this.H.delete(n),i.push(o))}if(t.changed){for(const n of t.changed)if(n.id){const o=this.H.get(n.id);if(o){if(o instanceof Cn&&n.type==="function"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.functionName=n.functionName}else if(o instanceof In&&n.type==="source"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.location=new Rr(y.revive(n.uri),new xe(n.line,n.character))}s.push(o)}}}this.wb(r,i,s)}async $acceptStackFrameFocus(t){let r;if(t){const i=await this.xb(t.sessionId);t.kind==="thread"?r=new B6(i.api,t.threadId):r=new j6(i.api,t.threadId,t.frameId)}this.J=r,this.L.fire(this.J)}$provideDebugConfigurations(t,r,i){return Wt(async()=>{const s=this.rb(t);if(!s)throw new Error("no DebugConfigurationProvider found");if(!s.provideDebugConfigurations)throw new Error("DebugConfigurationProvider has no method provideDebugConfigurations");const n=await this.yb(r);return s.provideDebugConfigurations(n,i)}).then(s=>{if(!s)throw new Error("nothing returned from DebugConfigurationProvider.provideDebugConfigurations");return s})}$resolveDebugConfiguration(t,r,i,s){return Wt(async()=>{const n=this.rb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfiguration)throw new Error("DebugConfigurationProvider has no method resolveDebugConfiguration");const o=await this.yb(r);return n.resolveDebugConfiguration(o,i,s)})}$resolveDebugConfigurationWithSubstitutedVariables(t,r,i,s){return Wt(async()=>{const n=this.rb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfigurationWithSubstitutedVariables)throw new Error("DebugConfigurationProvider has no method resolveDebugConfigurationWithSubstitutedVariables");const o=await this.yb(r);return n.resolveDebugConfigurationWithSubstitutedVariables(o,i,s)})}async $provideDebugAdapter(t,r){const i=this.qb(t);if(!i)return Promise.reject(new Error("no adapter descriptor factory found for handle"));const s=await this.xb(r);return this.ub(i,s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}'`);return this.kb(n)})}async $acceptDebugSessionStarted(t){const r=await this.xb(t);this.y.fire(r.api)}async $acceptDebugSessionTerminated(t){const r=await this.xb(t);r&&(this.z.fire(r.api),this.w.delete(r.id))}async $acceptDebugSessionActiveChanged(t){this.D=t?await this.xb(t):void 0,this.C.fire(this.D?.api)}async $acceptDebugSessionNameChanged(t,r){(await this.xb(t))?._acceptNameChanged(r)}async $acceptDebugSessionCustomEvent(t,r){const s={session:(await this.xb(t)).api,event:r.event,body:r.body};this.F.fire(s)}kb(t){if(t instanceof Bh)return this.lb(t);if(t instanceof Mc)return this.mb(t);if(t instanceof _h)return this.nb(t);if(t instanceof Oc)return this.ob(t);throw new Error("convertToDto unexpected type")}lb(t){return{type:"executable",command:t.command,args:t.args,options:t.options}}mb(t){return{type:"server",port:t.port,host:t.host}}nb(t){return{type:"pipeServer",path:t.path}}ob(t){return{type:"implementation"}}pb(t){const r=this.j.filter(i=>i.type===t);if(r.length>0)return r[0].factory}qb(t){const r=this.j.filter(i=>i.handle===t);if(r.length>0)return r[0].factory}rb(t){const r=this.g.filter(i=>i.handle===t);if(r.length>0)return r[0].provider}sb(t,r){if(t.contributes){const i=t.contributes.debuggers;if(i&&i.length>0){for(const s of i)if(s.label&&s.type&&s.type===r)return!0}}return!1}tb(t){const i=t.configuration.type,s=this.n.filter(n=>n.type===i||n.type==="*").map(n=>Wt(()=>n.factory.createDebugAdapterTracker(t.api)).then(o=>o,o=>null));return Promise.race([Promise.all(s).then(n=>{const o=Rt(n);if(o.length>0)return new ST(o)}),new Promise(n=>setTimeout(()=>n(void 0),1e3))]).catch(n=>{})}async ub(t,r){const i=r.configuration.debugServer;if(typeof i=="number")return Promise.resolve(new Mc(i));if(t){const n=await this.$.getExtensionRegistry();return Wt(()=>t.createDebugAdapterDescriptor(r.api,this.vb(r,n))).then(o=>{if(o)return o})}const s=await this.$.getExtensionRegistry();return Promise.resolve(this.vb(r,s))}vb(t,r){}wb(t,r,i){(t.length>0||r.length>0||i.length>0)&&this.I.fire(Object.freeze({added:t,removed:r,changed:i}))}async xb(t){if(t)if(typeof t=="string"){const r=this.w.get(t);if(r)return r}else{let r=this.w.get(t.id);if(!r){const i=await this.yb(t.folderUri),s=t.parent?this.w.get(t.parent):void 0;r=new kT(this.u,t.id,t.type,t.name,i,t.configuration,s?.api),this.w.set(r.id,r),this.u.$sessionCached(r.id)}return r}throw new Error("cannot find session")}yb(t){if(t){const r=y.revive(t);return this.Z.resolveWorkspaceFolder(r)}return Promise.resolve(void 0)}zb(t,r){return`${t}\0${r}`}Ab(t,r){if(r){if("title"in r&&"command"in r)return{type:0};if("treeId"in r)return{type:1,id:`${t}\0${r.treeId}`};throw new Error("Unsupported debug visualization type")}}Bb(t){const r=this.Cb(t);let i,s;return"id"in r?s=Mt.asClassName(r):i=r,{iconPath:i,iconClass:s}}Cb(t){if(t instanceof Xt)return{id:t.id};const r=typeof t=="object"&&"dark"in t?t.dark:t,i=typeof t=="object"&&"light"in t?t.light:t;return{dark:typeof r=="string"?y.file(r):r,light:typeof i=="string"?y.file(i):i}}};zv=__decorate([__param(0,Me),__param(1,Xi),__param(2,Hs),__param(3,Yi),__param(4,Al),__param(5,Bv),__param(6,Un),__param(7,mf)],zv);var kT=class{constructor(e,t,r,i,s,n,o){this.f=e,this.g=t,this.h=r,this.j=i,this.k=s,this.l=n,this.m=o}get api(){const e=this;return this.d??=Object.freeze({id:e.g,type:e.h,get name(){return e.j},set name(t){e.j=t,e.f.$setDebugSessionName(e.g,t)},parentSession:e.m,workspaceFolder:e.k,configuration:e.l,customRequest(t,r){return e.f.$customDebugAdapterRequest(e.g,t,r)},getDebugProtocolBreakpoint(t){return e.f.$getDebugProtocolBreakpoint(e.g,t.id)}})}get id(){return this.g}get type(){return this.h}_acceptNameChanged(e){this.j=e}get configuration(){return this.l}},$T=class{constructor(e){this.value=Object.freeze({append(t){e.$appendDebugConsole(t)},appendLine(t){this.append(t+`
`)}})}},ST=class{constructor(e){this.d=e}onWillStartSession(){this.d.forEach(e=>e.onWillStartSession?e.onWillStartSession():void 0)}onWillReceiveMessage(e){this.d.forEach(t=>t.onWillReceiveMessage?t.onWillReceiveMessage(e):void 0)}onDidSendMessage(e){this.d.forEach(t=>t.onDidSendMessage?t.onDidSendMessage(e):void 0)}onWillStopSession(){this.d.forEach(e=>e.onWillStopSession?e.onWillStopSession():void 0)}onError(e){this.d.forEach(t=>t.onError?t.onError(e):void 0)}onExit(e,t){this.d.forEach(r=>r.onExit?r.onExit(e,t):void 0)}},IT=class extends nT{constructor(e){super(),this.h=e,e.onDidSendMessage(t=>{this.acceptMessage(t)})}startSession(){return Promise.resolve(void 0)}sendMessage(e){this.h.handleMessage(e)}stopSession(){return this.h.dispose(),Promise.resolve(void 0)}},Wv=class extends zv{constructor(t,r,i,s,n,o,a,c){super(t,r,i,s,n,o,a,c)}};Wv=__decorate([__param(0,Me),__param(1,Xi),__param(2,Hs),__param(3,Yi),__param(4,Al),__param(5,Bv),__param(6,Un),__param(7,mf)],Wv);function CT(e){return"uri"in e&&"ranges"in e&&"preview"in e}function DT(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(r=>typeof r=="string"?r:r.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,session:e.session}))}var D8=class{constructor(e){this.a=e}provideFileSearchResults(e,t,r){return(async()=>{const s=DT(t);return Promise.all(s.map(n=>this.a.provideFileSearchResults({pattern:e},n,r)))})().then(s=>Rt(s).flat())}};function PT(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(r=>typeof r=="string"?r:r.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,previewOptions:AT(e.previewOptions),maxFileSize:e.maxFileSize,encoding:t.encoding,afterContext:e.surroundingContext,beforeContext:e.surroundingContext}))}function AT(e){return{matchLines:e?.matchLines??L1.matchLines,charsPerLine:e?.charsPerLine??L1.charsPerLine}}function TT(e){if(CT(e)){const t=hi(e.ranges).map((r,i)=>{const n=hi(e.preview.matches)[i];return{sourceRange:r,previewRange:n}});return new Ms(e.uri,t,e.preview.text)}else return new R1(e.uri,e.text,e.lineNumber)}var RT=class{constructor(e){this.a=e}provideTextSearchResults(e,t,r,i){const s=a=>{LT(a)&&r.report(TT(a))};return(async()=>Rt(await Promise.all(PT(t).map(a=>this.a.provideTextSearchResults(e,a,{report:c=>s(c)},i)))).reduce((a,c)=>({limitHit:a.limitHit||c.limitHit}),{limitHit:!1}))().then(a=>({limitHit:a.limitHit,message:Rt(hi(a.message))}))}};function LT(e){if(NT(e)){if(Array.isArray(e.ranges)){if(!Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same type."),!1;if(e.preview.matches.length!==e.ranges.length)return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}else if(Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}return!0}function NT(e){return!!e.preview}var P8=class extends bs{constructor(e,t,r=()=>!1){const i=new Iy(r,()=>!1);super(i);const s=new Nt;e.forEach((n,o)=>{const a=n.folder.with({query:"",fragment:""});s.has(a)?s.get(a).push({fq:n,i:o}):s.set(a,[{fq:n,i:o}])}),s.forEach((n,o)=>{const a=new Map;for(const c of n){const l=t(c.fq,c.i);a.set(this.l(c.fq.folder),l)}super.set(o,a)})}findQueryFragmentAwareSubstr(e){const t=super.findSubstr(e.with({query:"",fragment:""}));if(!t)return;const r=this.l(e);return t.get(r)}forEachFolderQueryInfo(e){return this.forEach(t=>t.forEach(r=>e(r)))}l(e){let t="";return e.query&&(t+=e.query),e.fragment&&(t+="#"+e.fragment),t}},FT=class{constructor(e,t,r){this.l=e,this.o=t,this.p=r,this.f=!1,this.g=0,this.h=!1,this.a=e.filePattern,this.b=e.includePattern&&$o(e.includePattern),this.c=e.maxResults||void 0,this.d=e.exists,this.j=new Set,this.k=e.excludePattern&&$o(e.excludePattern)}cancel(){this.h=!0,this.j.forEach(e=>e.cancel()),this.j=new Set}search(e){const t=this.l.folderQueries||[];return new Promise((r,i)=>{const s=n=>{this.g++,e(n)};if(this.h)return r({limitHit:this.f});this.l.extraFileResources&&this.l.extraFileResources.forEach(n=>{const o=n.toString(),a=br(o);this.k&&this.k(o,a)||this.w(s,{base:n,basename:a})}),this.q(t,s).then(n=>{r({limitHit:this.f,stats:n||void 0})},n=>{i(new Error(rn(n)))})})}async q(e,t){const r=new dt,i=e.map(l=>this.r(l)),s=this.o instanceof D8?this.p?.tokenSource.token:this.p?.obj,n={folderOptions:i,maxResults:this.l.maxResults??l7,session:s},o=l=>{const u=new E7(this.l,l),h=!u.hasSiblingExcludeClauses();return{queryTester:u,noSiblingsClauses:h,folder:l.folder,tree:this.s()}},a=new P8(e,o);let c;try{this.j.add(r),c=Xs.create();const l=await this.o.provideFileSearchResults(this.l.filePattern||"",n,r.token),u=c.elapsed(),h=Xs.create();return this.h&&!this.f||(l&&l.forEach(p=>{const f=a.findQueryFragmentAwareSubstr(p),m=Te.relative(f.folder.path,p.path);if(f.noSiblingsClauses){const w=br(p.path);this.w(t,{base:f.folder,relativePath:m,basename:w});return}this.u(f.tree,f.folder,m,t)}),this.h&&!this.f)?null:(a.forEachFolderQueryInfo(p=>{this.v(p.tree,p.queryTester,t)}),{providerTime:u,postProcessTime:h.elapsed()})}finally{r.dispose(),this.j.delete(r)}}r(e){const t=ca(this.l.includePattern,e.includePattern);let r=e.excludePattern?.map(s=>({folder:s.folder,patterns:ca(this.l.excludePattern,s.pattern)}));r?.length||(r=[{folder:void 0,patterns:ca(this.l.excludePattern,void 0)}]);const i=k7(r);return{folder:e.folder,excludes:i,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks}}s(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}u({pathToEntries:e},t,r,i){if(r===this.a){const n=br(this.a);this.w(i,{base:t,relativePath:this.a,basename:n})}function s(n){const o=br(n),a=no(n);let c=e[a];c||(c=e[a]=[],s(a)),c.push({base:t,relativePath:n,basename:o})}s(r)}v({rootEntries:e,pathToEntries:t},r,i){const s=this,n=this.a;function o(a){const c=oP(()=>a.map(l=>l.basename));for(let l=0,u=a.length;l<u;l++){const h=a[l],{relativePath:p,basename:f}=h;if(r.matchesExcludesSync(p,f,n!==f?c:void 0))continue;const m=t[p];if(m)o(m);else{if(p===n)continue;s.w(i,h)}if(s.f)break}}o(e)}w(e,t){(!this.b||t.relativePath&&this.b(t.relativePath,t.basename))&&((this.d||this.c&&this.g>=this.c)&&(this.f=!0,this.cancel()),this.f||e(t))}},MT=class{constructor(){this.a=new Object,this.tokenSource=new dt}get obj(){if(this.a)return this.a;throw new Error("Session object has been dereferenced.")}cancel(){this.tokenSource.cancel(),this.a=void 0}},OT=class a3{constructor(){this.b=new Map}static{this.a=512}fileSearch(t,r,i,s){const n=this.c(t.cacheKey),o=new FT(t,r,n);let a=0;const c=l=>{a+=l.length,i(l.map(u=>this.d(u)))};return this.f(o,a3.a,c,s).then(l=>({limitHit:l.limitHit,stats:l.stats?{fromCache:!1,type:"fileSearchProvider",resultCount:a,detailStats:l.stats}:void 0,messages:[]}))}clearCache(t){this.b.get(t)?.cancel(),this.b.delete(t)}c(t){if(t)return this.b.has(t)||this.b.set(t,new MT),this.b.get(t)}d(t){return t.relativePath?{resource:Qt(t.base,t.relativePath)}:{resource:t.base}}f(t,r,i,s){const n=s.onCancellationRequested(()=>{t.cancel()}),o=c=>{c&&(a.push(c),r>0&&a.length>=r&&(i(a),a=[]))};let a=[];return t.search(o).then(c=>(a.length&&i(a),n.dispose(),c),c=>(a.length&&i(a),n.dispose(),Promise.reject(c)))}},A8=class{constructor(e,t,r){this.f=e,this.g=t,this.h=r,this.b=null,this.c=!1,this.d=0}get j(){return this.f.query}search(e,t){const r=this.j.folderQueries||[],i=new dt(t);return new Promise((s,n)=>{this.b=new HT(e);let o=!1;const a=(c,l)=>{if(!o&&!this.c){const u=this.l(c);c instanceof Ms&&typeof this.j.maxResults=="number"&&this.d+u>this.j.maxResults&&(this.c=!0,o=!0,i.cancel(),c=this.m(c,this.j.maxResults-this.d));const h=this.l(c);this.d+=h;const p=c instanceof Ms;(h>0||!p)&&this.b.add(c,l)}};this.n(r,a,i.token).then(c=>{i.dispose(),this.b.flush(),s({limitHit:this.c||c?.limitHit,messages:this.k(c),stats:{type:this.h}})},c=>{i.dispose();const l=rn(c);n(new Error(l))})})}k(e){return e?.message?Array.isArray(e.message)?e.message:[e.message]:[]}l(e){return e instanceof Ms?Array.isArray(e.ranges)?e.ranges.length:1:0}m(e,t){return new Ms(e.uri,e.ranges.slice(0,t),e.previewText)}async n(e,t,r){const i=new P8(e,(l,u)=>({queryTester:new E7(this.j,l),folder:l.folder,folderIdx:u}),()=>!0),s=[],n={report:l=>{if(l.uri===void 0)throw Error("Text search result URI is undefined. Please check provider implementation.");const u=i.findQueryFragmentAwareSubstr(l.uri),h=u.folder.scheme===q.file?nP(()=>this.g.readdir(xu(l.uri))):void 0,p=Nb(u.folder,l.uri);if(p){const f=u.queryTester.includedInQuery(p,br(p),h);ws(f)?s.push(f.then(m=>{m&&t(l,u.folderIdx)})):f&&t(l,u.folderIdx)}}},a={folderOptions:e.map(l=>this.o(l)),maxFileSize:this.j.maxFileSize,maxResults:this.j.maxResults??l7,previewOptions:this.j.previewOptions??L1,surroundingContext:this.j.surroundingContext??0};"usePCRE2"in this.j&&(a.usePCRE2=this.j.usePCRE2);let c;return this.f.query.type===3?c=await this.f.provider.provideAITextSearchResults(this.f.query.contentPattern,a,n,r):c=await this.f.provider.provideTextSearchResults(UT(this.f.query.contentPattern),a,n,r),s.length&&await Promise.all(s),c}o(e){const t=ca(this.j.includePattern,e.includePattern);let r=e.excludePattern?.map(n=>({folder:n.folder,patterns:ca(this.j.excludePattern,n.pattern)}));(!r||r.length===0)&&(r=[{folder:void 0,patterns:ca(this.j.excludePattern,void 0)}]);const i=k7(r);return{folder:y.from(e.folder),excludes:i,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks,encoding:(e.fileEncoding&&this.g.toCanonicalName(e.fileEncoding))??""}}};function UT(e){return{isCaseSensitive:e.isCaseSensitive||!1,isRegExp:e.isRegExp||!1,isWordMatch:e.isWordMatch||!1,isMultiline:e.isMultiline||!1,pattern:e.pattern}}var HT=class{constructor(e){this.g=e,this.c=-1,this.f=null,this.b=new BT(512,t=>this.j(t))}add(e,t){this.f&&(this.c!==t||!Va(this.d,e.uri))&&(this.h(),this.f=null),this.f||(this.c=t,this.f={resource:e.uri,results:[]}),this.f.results.push(jT(e))}h(){const e=this.f&&this.f.results?this.f.results.length:0;this.b.addItem(this.f,e)}flush(){this.h(),this.b.flush()}j(e){this.g(e)}};function jT(e){return e instanceof Ms?{previewText:e.previewText,rangeLocations:e.ranges.map(t=>({preview:{startLineNumber:t.previewRange.start.line,startColumn:t.previewRange.start.character,endLineNumber:t.previewRange.end.line,endColumn:t.previewRange.end.character},source:{startLineNumber:t.sourceRange.start.line,startColumn:t.sourceRange.start.character,endLineNumber:t.sourceRange.end.line,endColumn:t.sourceRange.end.character}}))}:{text:e.text,lineNumber:e.lineNumber}}var BT=class rw{static{this.b=4e3}static{this.c=50}constructor(t,r){this.j=t,this.k=r,this.d=0,this.f=[],this.g=0}addItem(t,r){t&&this.l(t,r)}addItems(t,r){t&&this.m(t,r)}l(t,r){this.f.push(t),this.g+=r,this.n()}m(t,r){this.f=this.f.concat(t),this.g+=r,this.n()}n(){this.d<rw.c?this.flush():this.g>=this.j?this.flush():this.h||(this.h=setTimeout(()=>{this.flush()},rw.b))}flush(){this.g&&(this.d+=this.g,this.k(this.f),this.f=[],this.g=0,this.h&&(clearTimeout(this.h),this.h=0))}},T8=_("IExtHostSearch"),Vv=class{constructor(t,r,i){this.o=t,this.q=r,this.s=i,this.c=this.o.getProxy(z.MainThreadSearch),this.e=0,this.g=new Map,this.h=new Set,this.i=new Map,this.j=new Set,this.k=new Map,this.l=new Set,this.n=new OT}t(t){return this.q.transformOutgoingScheme(t)}registerTextSearchProviderOld(t,r){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const i=this.e++;return this.g.set(i,new RT(r)),this.c.$registerTextSearchProvider(i,this.t(t)),ce(()=>{this.h.delete(t),this.g.delete(i),this.c.$unregisterProvider(i)})}registerTextSearchProvider(t,r){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const i=this.e++;return this.g.set(i,r),this.c.$registerTextSearchProvider(i,this.t(t)),ce(()=>{this.h.delete(t),this.g.delete(i),this.c.$unregisterProvider(i)})}registerAITextSearchProvider(t,r){if(this.j.has(t))throw new Error(`an AI text search provider for the scheme '${t}'is already registered`);this.j.add(t);const i=this.e++;return this.i.set(i,r),this.c.$registerAITextSearchProvider(i,this.t(t)),ce(()=>{this.j.delete(t),this.i.delete(i),this.c.$unregisterProvider(i)})}registerFileSearchProviderOld(t,r){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const i=this.e++;return this.k.set(i,new D8(r)),this.c.$registerFileSearchProvider(i,this.t(t)),ce(()=>{this.l.delete(t),this.k.delete(i),this.c.$unregisterProvider(i)})}registerFileSearchProvider(t,r){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const i=this.e++;return this.k.set(i,r),this.c.$registerFileSearchProvider(i,this.t(t)),ce(()=>{this.l.delete(t),this.k.delete(i),this.c.$unregisterProvider(i)})}$provideFileSearchResults(t,r,i,s){const n=qv(i),o=this.k.get(t);if(o)return this.n.fileSearch(n,o,a=>{this.c.$handleFileMatch(t,r,a.map(c=>c.resource))},s);throw new Error("unknown provider: "+t)}async doInternalFileSearchWithCustomCallback(t,r,i){return{messages:[]}}$clearCache(t){return this.n.clearCache(t),Promise.resolve(void 0)}$provideTextSearchResults(t,r,i,s){const n=this.g.get(t);if(!n||!n.provideTextSearchResults)throw new Error(`Unknown Text Search Provider ${t}`);const o=qv(i);return this.v(o,n).search(c=>this.c.$handleTextMatch(t,r,c),s)}$provideAITextSearchResults(t,r,i,s){const n=this.i.get(t);if(!n||!n.provideAITextSearchResults)throw new Error(`Unknown AI Text Search Provider ${t}`);const o=qv(i);return this.w(o,n).search(c=>this.c.$handleTextMatch(t,r,c),s)}$enableExtensionHostSearch(){}async $getAIName(t){const r=this.i.get(t);if(!(!r||!r.provideAITextSearchResults))return r.name??"AI"}v(t,r){return new A8({query:t,provider:r},{readdir:i=>Promise.resolve([]),toCanonicalName:i=>i},"textSearchProvider")}w(t,r){return new A8({query:t,provider:r},{readdir:i=>Promise.resolve([]),toCanonicalName:i=>i},"aiTextSearchProvider")}};Vv=__decorate([__param(0,Me),__param(1,Iu),__param(2,He)],Vv);function qv(e){return{...e,folderQueries:e.folderQueries&&e.folderQueries.map(_T),extraFileResources:e.extraFileResources&&e.extraFileResources.map(t=>y.revive(t))}}function _T(e){return ir(e)}var Gv,Qv=class{static{Gv=this}static{this.a={focused:!0,active:!0}}getState(){const t=this.f;return{get focused(){return t.focused},get active(){return t.active}}}constructor(t,r){this.c=new D,this.onDidChangeWindowState=this.c.event,this.f=Gv.a,t.handle&&(this.d=nu(t.handle).buffer),this.b=r.getProxy(z.MainThreadWindow),this.b.$getInitialState().then(({isFocused:i,isActive:s})=>{this.onDidChangeWindowProperty("focused",i),this.onDidChangeWindowProperty("active",s)})}get nativeHandle(){return this.d}$onDidChangeActiveNativeWindowHandle(t){this.d=t?nu(t).buffer:void 0}$onDidChangeWindowFocus(t){this.onDidChangeWindowProperty("focused",t)}$onDidChangeWindowActive(t){this.onDidChangeWindowProperty("active",t)}onDidChangeWindowProperty(t,r){r!==this.f[t]&&(this.f={...this.f,[t]:r},this.c.fire(this.f))}openUri(t,r){let i;if(typeof t=="string"){i=t;try{t=y.parse(t)}catch{return Promise.reject(`Invalid uri - '${t}'`)}}return wu(t.scheme)?Promise.reject("Invalid scheme - cannot be empty"):t.scheme===q.command?Promise.reject(`Invalid scheme '${t.scheme}'`):this.b.$openUri(t,i,r)}async asExternalUri(t,r){if(wu(t.scheme))return Promise.reject("Invalid scheme - cannot be empty");const i=await this.b.$asExternalUri(t,r);return y.from(i)}};Qv=Gv=__decorate([__param(0,jt),__param(1,Me)],Qv);var R8=_("IExtHostWindow"),Jv=class extends sI{constructor(t,r){super(r.logLevel,r.logsLocation,r.loggers.map(i=>ir(i))),this.c=t.getProxy(z.MainThreadLogger)}$setLogLevel(t,r){r?this.setLogLevel(y.revive(r),t):this.setLogLevel(t)}setVisibility(t,r){super.setVisibility(t,r),this.c.$setVisibility(t,r)}t(t,r,i){return new zT(this.c,t,r,i)}};Jv=__decorate([__param(0,Me),__param(1,jt)],Jv);var zT=class extends wy{constructor(e,t,r,i){super(i?.logLevel==="always"),this.s=e,this.t=t,this.n=!1,this.r=[],this.setLevel(r),this.s.$createLogger(t,i).then(()=>{this.w(this.r),this.n=!0})}m(e,t){const r=[[e,t]];this.n?this.w(r):this.r.push(...r)}w(e){this.s.$log(this.t,e)}flush(){this.s.$flush(this.t)}},L8=_("IExtHostTerminalShellIntegration"),Xv=class extends he{constructor(t,r){super(),this.h=r,this.b=new Map,this.c=new D,this.onDidChangeTerminalShellIntegration=this.c.event,this.f=new D,this.onDidStartTerminalShellExecution=this.f.event,this.g=new D,this.onDidEndTerminalShellExecution=this.g.event,this.a=t.getProxy(z.MainThreadTerminalShellIntegration),this.B(ce(()=>{for(const[i,s]of this.b)s.dispose();this.b.clear()}))}$shellIntegrationChange(t){const r=this.h.getTerminalById(t);if(!r)return;const i=r.value;let s=this.b.get(t);s||(s=new WT(r.value,this.f),this.b.set(t,s),s.store.add(r.onWillDispose(()=>this.b.get(t)?.dispose())),s.store.add(s.onDidRequestShellExecution(n=>this.a.$executeCommand(t,n))),s.store.add(s.onDidRequestEndExecution(n=>this.g.fire(n))),s.store.add(s.onDidRequestChangeShellIntegration(n=>this.c.fire(n))),r.shellIntegration=s.value),this.c.fire({terminal:i,shellIntegration:s.value})}$shellExecutionStart(t,r,i,s,n){this.b.has(t)||this.$shellIntegrationChange(t);const o={value:r,confidence:i,isTrusted:s};this.b.get(t)?.startShellExecution(o,y.revive(n))}$shellExecutionEnd(t,r,i,s,n){const o={value:r,confidence:i,isTrusted:s};this.b.get(t)?.endShellExecution(o,n)}$shellExecutionData(t,r){this.b.get(t)?.emitData(r)}$shellEnvChange(t,r,i){this.b.get(t)?.setEnv(r,i)}$cwdChange(t,r){this.b.get(t)?.setCwd(y.revive(r))}$closeTerminal(t){this.b.get(t)?.dispose(),this.b.delete(t)}};Xv=__decorate([__param(0,Me),__param(1,fa)],Xv);var WT=class extends he{get currentExecution(){return this.a}constructor(e,t){super(),this.m=e,this.n=t,this.b=!1,this.store=this.B(new me),this.g=this.B(new D),this.onDidRequestChangeShellIntegration=this.g.event,this.h=this.B(new D),this.onDidRequestShellExecution=this.h.event,this.j=this.B(new D),this.onDidRequestEndExecution=this.j.event;const r=this;this.value={get cwd(){return r.f},get env(){return r.c},executeCommand(i,s){let n=i;if(s)for(const c of s)!c.match(/["'`]/)&&c.match(/\s/)?n+=` "${c}"`:n+=` ${c}`;r.h.fire(n);const o={value:n,confidence:Fh.High,isTrusted:!0},a=r.startShellExecution(o,r.f,!0).value;return r.b=!0,a}}}startShellExecution(e,t,r){if(this.b&&this.a)this.b=!1;else{this.a&&(this.a.endExecution(void 0),this.j.fire({terminal:this.m,shellIntegration:this.value,execution:this.a.value,exitCode:void 0}));const i=this.a=new VT(e,t??this.f);r?queueMicrotask(()=>this.n.fire({terminal:this.m,shellIntegration:this.value,execution:i.value})):this.n.fire({terminal:this.m,shellIntegration:this.value,execution:this.a.value})}return this.a}emitData(e){this.currentExecution?.emitData(e)}endShellExecution(e,t){this.a&&(this.a.endExecution(e),this.j.fire({terminal:this.m,shellIntegration:this.value,execution:this.a.value,exitCode:t}),this.a=void 0)}setEnv(e,t){const r={};for(let i=0;i<e.length;i++)r[e[i]]=t[i];this.c=r,this.r()}setCwd(e){let t=!1;y.isUri(this.f)?t=!y.isUri(e)||this.f.toString()!==e.toString():this.f!==e&&(t=!0),t&&(this.f=e,this.r())}r(){this.g.fire({terminal:this.m,shellIntegration:this.value})}},VT=class{constructor(e,t){this.c=e,this.cwd=t,this.b=!1;const r=this;this.value={get commandLine(){return r.c},get cwd(){return r.cwd},read(){return r.d()}}}d(){if(!this.a){if(this.b)return qa.EMPTY;this.a=new qT}return this.a.createIterable()}emitData(e){this.a?.emitData(e)}endExecution(e){e&&(this.c=e),this.a?.endExecution(),this.a=void 0,this.b=!0}},qT=class extends he{constructor(){super(...arguments),this.b=[]}createIterable(){this.a||(this.a=new pi);const e=this.a;return new qa(async r=>{this.b.push(r),await e.wait()})}emitData(e){for(const t of this.b)t.emitOne(e)}endExecution(){this.a?.open(),this.a=void 0}};Ge(wv,vv,1),Ge(ec,Jv,1),Ge(cf,Cv,1),Ge(Un,rv,0),Ge(ov,av,0),Ge(cv,lv,0),Ge(Yi,j1,0),Ge(rf,q1,0),Ge(mf,jv,0),Ge(C8,Wv,0),Ge(G9,$v,0),Ge(ma,Iv,0),Ge(bv,yv,0),Ge(fo,EI,0),Ge(q9,kv,1),Ge(T8,Vv,0),Ge(V1,J7,0),Ge(v8,Uv,0),Ge(fa,nv,0),Ge(L8,Xv,0),Ge(Z1,K1,0),Ge(R8,Qv,0),Ge(Xi,M1,0),Ge(mv,H9,0),Ge(sf,tv,0),Ge(Al,Hv,0),Ge(Bv,_v,0);var GT=class extends he{constructor(e,t=[]){super(),this.a=new iI([e,...t]),this.B(e.onDidChangeLogLevel(r=>this.setLevel(r)))}get onDidChangeLogLevel(){return this.a.onDidChangeLogLevel}setLevel(e){this.a.setLevel(e)}getLevel(){return this.a.getLevel()}trace(e,...t){this.a.trace(e,...t)}debug(e,...t){this.a.debug(e,...t)}info(e,...t){this.a.info(e,...t)}warn(e,...t){this.a.warn(e,...t)}error(e,...t){this.a.error(e,...t)}flush(){this.a.flush()}},Yv=class extends GT{constructor(t,r,i){const s=i.remote.isRemote?"remoteexthost":t?"workerexthost":"exthost",n=i.remote.isRemote?d(2802,null):d(t?2803:2804,null);super(r.createLogger(s,{name:n}))}};Yv=__decorate([__param(1,ec),__param(2,jt)],Yv);var N8={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},F8;(function(e){e[e.None=0]="None",e[e.Keep=1]="Keep",e[e.Brackets=2]="Brackets",e[e.Advanced=3]="Advanced",e[e.Full=4]="Full"})(F8||(F8={}));var QT=8,JT=class{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},je=class{constructor(e,t,r,i){this.id=e,this.name=t,this.defaultValue=r,this.schema=i}applyUpdate(e,t){return wf(e,t)}compute(e,t,r){return r}},vf=class{constructor(e,t){this.newValue=e,this.didChange=t}};function wf(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return new vf(t,e!==t);if(Array.isArray(e)||Array.isArray(t)){const i=Array.isArray(e)&&Array.isArray(t)&&Ri(e,t);return new vf(t,!i)}let r=!1;for(const i in t)if(t.hasOwnProperty(i)){const s=wf(e[i],t[i]);s.didChange&&(e[i]=s.newValue,r=!0)}return new vf(e,r)}var va=class{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return wf(e,t)}validate(e){return this.defaultValue}},wa=class{constructor(e,t,r,i){this.id=e,this.name=t,this.defaultValue=r,this.schema=i}applyUpdate(e,t){return wf(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,r){return r}};function V(e,t){return typeof e>"u"?t:e==="false"?!1:!!e}var ge=class extends wa{constructor(e,t,r,i=void 0){typeof i<"u"&&(i.type="boolean",i.default=r),super(e,t,r,i)}validate(e){return V(e,this.defaultValue)}};function XT(e,t,r,i){if(typeof e>"u")return t;let s=parseInt(e,10);return isNaN(s)?t:(s=Math.max(r,s),s=Math.min(i,s),s|0)}var Le=class c3 extends wa{static clampedInt(t,r,i,s){return XT(t,r,i,s)}constructor(t,r,i,s,n,o=void 0){typeof o<"u"&&(o.type="integer",o.default=i,o.minimum=s,o.maximum=n),super(t,r,i,o),this.minimum=s,this.maximum=n}validate(t){return c3.clampedInt(t,this.defaultValue,this.minimum,this.maximum)}},$i=class l3 extends wa{static clamp(t,r,i){return t<r?r:t>i?i:t}static float(t,r){if(typeof t=="number")return t;if(typeof t>"u")return r;const i=parseFloat(t);return isNaN(i)?r:i}constructor(t,r,i,s,n){typeof n<"u"&&(n.type="number",n.default=i),super(t,r,i,n),this.validationFn=s}validate(t){return this.validationFn(l3.float(t,this.defaultValue))}},ur=class u3 extends wa{static string(t,r){return typeof t!="string"?r:t}constructor(t,r,i,s=void 0){typeof s<"u"&&(s.type="string",s.default=i),super(t,r,i,s)}validate(t){return u3.string(t,this.defaultValue)}};function We(e,t,r,i){return typeof e!="string"?t:i&&e in i?i[e]:r.indexOf(e)===-1?t:e}var Ve=class extends wa{constructor(e,t,r,i,s=void 0){typeof s<"u"&&(s.type="string",s.enum=i,s.default=r),super(e,t,r,s),this.c=i}validate(e){return We(e,this.defaultValue,this.c)}},Rl=class extends je{constructor(e,t,r,i,s,n,o=void 0){typeof o<"u"&&(o.type="string",o.enum=s,o.default=i),super(e,t,r,o),this.c=s,this.d=n}validate(e){return typeof e!="string"?this.defaultValue:this.c.indexOf(e)===-1?this.defaultValue:this.d(e)}};function YT(e){switch(e){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}var ZT=class extends je{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[d(314,null),d(315,null),d(316,null)],default:"auto",tags:["accessibility"],description:d(317,null)})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,r){return r===0?e.accessibilitySupport:r}},KT=class extends je{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:d(318,null)},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:d(319,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:V(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:V(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}},M8;(function(e){e[e.Hidden=0]="Hidden",e[e.Blink=1]="Blink",e[e.Smooth=2]="Smooth",e[e.Phase=3]="Phase",e[e.Expand=4]="Expand",e[e.Solid=5]="Solid"})(M8||(M8={}));function eR(e){switch(e){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var ri;(function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"})(ri||(ri={}));function O8(e){switch(e){case"line":return ri.Line;case"block":return ri.Block;case"underline":return ri.Underline;case"line-thin":return ri.LineThin;case"block-outline":return ri.BlockOutline;case"underline-thin":return ri.UnderlineThin}}var tR=class extends va{constructor(){super(148)}compute(e,t,r){const i=["monaco-editor"];return t.get(41)&&i.push(t.get(41)),e.extraEditorClassName&&i.push(e.extraEditorClassName),t.get(75)==="default"?i.push("mouse-default"):t.get(75)==="copy"&&i.push("mouse-copy"),t.get(116)&&i.push("showUnused"),t.get(145)&&i.push("showDeprecated"),i.join(" ")}},rR=class extends ge{constructor(){super(38,"emptySelectionClipboard",!0,{description:d(320,null)})}compute(e,t,r){return r&&e.emptySelectionClipboard}},iR=class extends je{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0,history:"workspace",replaceHistory:"workspace"};super(43,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:d(321,null)},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[d(322,null),d(323,null),d(324,null)],description:d(325,null)},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[d(326,null),d(327,null),d(328,null)],description:d(329,null)},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:d(330,null),included:Ir},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:d(331,null)},"editor.find.loop":{type:"boolean",default:e.loop,description:d(332,null)},"editor.find.history":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[d(333,null),d(334,null)],description:d(335,null)},"editor.find.replaceHistory":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[d(336,null),d(337,null)],description:d(338,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:V(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":We(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":We(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:V(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:V(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:V(t.loop,this.defaultValue.loop),history:We(t.history,this.defaultValue.history,["never","workspace"]),replaceHistory:We(t.replaceHistory,this.defaultValue.replaceHistory,["never","workspace"])}}},sR=class Sa extends je{static{this.OFF='"liga" off, "calt" off'}static{this.ON='"liga" on, "calt" on'}constructor(){super(53,"fontLigatures",Sa.OFF,{anyOf:[{type:"boolean",description:d(339,null)},{type:"string",description:d(340,null)}],description:d(341,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"||t.length===0?Sa.OFF:t==="true"?Sa.ON:t:t?Sa.ON:Sa.OFF}},nR=class Ia extends je{static{this.OFF="normal"}static{this.TRANSLATE="translate"}constructor(){super(56,"fontVariations",Ia.OFF,{anyOf:[{type:"boolean",description:d(342,null)},{type:"string",description:d(343,null)}],description:d(344,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"?Ia.OFF:t==="true"?Ia.TRANSLATE:t:t?Ia.TRANSLATE:Ia.OFF}compute(t,r,i){return t.fontInfo.fontVariationSettings}},oR=class extends va{constructor(){super(52)}compute(e,t,r){return e.fontInfo}},aR=class extends va{constructor(){super(147)}compute(e,t,r){return e.inputMode==="overtype"?t.get(84):t.get(28)}},cR=class extends wa{constructor(){super(54,"fontSize",es.fontSize,{type:"number",minimum:6,maximum:100,default:es.fontSize,description:d(345,null)})}validate(e){const t=$i.float(e,this.defaultValue);return t===0?es.fontSize:$i.clamp(t,6,100)}compute(e,t,r){return e.fontInfo.fontSize}},lR=class Ca extends je{static{this.c=["normal","bold","100","200","300","400","500","600","700","800","900"]}static{this.d=1}static{this.e=1e3}constructor(){super(55,"fontWeight",es.fontWeight,{anyOf:[{type:"number",minimum:Ca.d,maximum:Ca.e,errorMessage:d(346,null)},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Ca.c}],default:es.fontWeight,description:d(347,null)})}validate(t){return t==="normal"||t==="bold"?t:String(Le.clampedInt(t,es.fontWeight,Ca.d,Ca.e))}},uR=class extends je{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[d(348,null),d(349,null),d(350,null)]},r=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(60,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:d(351,null)},"editor.gotoLocation.multipleDefinitions":{description:d(352,null),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:d(353,null),...t},"editor.gotoLocation.multipleDeclarations":{description:d(354,null),...t},"editor.gotoLocation.multipleImplementations":{description:d(355,null),...t},"editor.gotoLocation.multipleReferences":{description:d(356,null),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:r,description:d(357,null)},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:r,description:d(358,null)},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:r,description:d(359,null)},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:r,description:d(360,null)},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:r,description:d(361,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:We(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??We(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??We(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??We(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??We(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??We(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??We(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:ur.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:ur.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:ur.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:ur.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:ur.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:ur.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}},hR=class extends je{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(62,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:d(362,null)},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:d(363,null)},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:d(364,null)},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:d(365,null)},"editor.hover.above":{type:"boolean",default:e.above,description:d(366,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:V(t.enabled,this.defaultValue.enabled),delay:Le.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:V(t.sticky,this.defaultValue.sticky),hidingDelay:Le.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:V(t.above,this.defaultValue.above)}}},U8;(function(e){e[e.None=0]="None",e[e.Text=1]="Text",e[e.Blocks=2]="Blocks"})(U8||(U8={}));var dR=class Kf extends va{constructor(){super(151)}compute(t,r,i){return Kf.computeLayout(r,{memory:t.memory,outerWidth:t.outerWidth,outerHeight:t.outerHeight,isDominatedByLongLines:t.isDominatedByLongLines,lineHeight:t.fontInfo.lineHeight,viewLineCount:t.viewLineCount,lineNumbersDigitCount:t.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:t.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:t.fontInfo.maxDigitWidth,pixelRatio:t.pixelRatio,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(t){const r=t.height/t.lineHeight,i=Math.floor(t.paddingTop/t.lineHeight);let s=Math.floor(t.paddingBottom/t.lineHeight);t.scrollBeyondLastLine&&(s=Math.max(s,r-1));const n=(i+t.viewLineCount+s)/(t.pixelRatio*t.height),o=Math.floor(t.viewLineCount/n);return{typicalViewportLineCount:r,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:s,desiredRatio:n,minimapLineCount:o}}static c(t,r){const i=t.outerWidth,s=t.outerHeight,n=t.pixelRatio;if(!t.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(n*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const o=r.stableMinimapLayoutInput,a=o&&t.outerHeight===o.outerHeight&&t.lineHeight===o.lineHeight&&t.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&t.pixelRatio===o.pixelRatio&&t.scrollBeyondLastLine===o.scrollBeyondLastLine&&t.paddingTop===o.paddingTop&&t.paddingBottom===o.paddingBottom&&t.minimap.enabled===o.minimap.enabled&&t.minimap.side===o.minimap.side&&t.minimap.size===o.minimap.size&&t.minimap.showSlider===o.minimap.showSlider&&t.minimap.renderCharacters===o.minimap.renderCharacters&&t.minimap.maxColumn===o.minimap.maxColumn&&t.minimap.scale===o.minimap.scale&&t.verticalScrollbarWidth===o.verticalScrollbarWidth&&t.isViewportWrapping===o.isViewportWrapping,c=t.lineHeight,l=t.typicalHalfwidthCharacterWidth,u=t.scrollBeyondLastLine,h=t.minimap.renderCharacters;let p=n>=2?Math.round(t.minimap.scale*2):t.minimap.scale;const f=t.minimap.maxColumn,m=t.minimap.size,w=t.minimap.side,E=t.verticalScrollbarWidth,$=t.viewLineCount,S=t.remainingWidth,P=t.isViewportWrapping,O=h?2:3;let F=Math.floor(n*s);const W=F/n;let Z=!1,J=!1,X=O*p,Se=p/n,de=1;if(m==="fill"||m==="fit"){const{typicalViewportLineCount:re,extraLinesBeforeFirstLine:pe,extraLinesBeyondLastLine:ne,desiredRatio:qe,minimapLineCount:Be}=Kf.computeContainedMinimapLineCount({viewLineCount:$,scrollBeyondLastLine:u,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,height:s,lineHeight:c,pixelRatio:n});if($/Be>1)Z=!0,J=!0,p=1,X=1,Se=p/n;else{let bt=!1,Ot=p+1;if(m==="fit"){const Ze=Math.ceil((pe+$+ne)*X);P&&a&&S<=r.stableFitRemainingWidth?(bt=!0,Ot=r.stableFitMaxMinimapScale):bt=Ze>F}if(m==="fill"||bt){Z=!0;const Ze=p;X=Math.min(c*n,Math.max(1,Math.floor(1/qe))),P&&a&&S<=r.stableFitRemainingWidth&&(Ot=r.stableFitMaxMinimapScale),p=Math.min(Ot,Math.max(1,Math.floor(X/O))),p>Ze&&(de=Math.min(2,p/Ze)),Se=p/n/de,F=Math.ceil(Math.max(re,pe+$+ne)*X),P?(r.stableMinimapLayoutInput=t,r.stableFitRemainingWidth=S,r.stableFitMaxMinimapScale=p):(r.stableMinimapLayoutInput=null,r.stableFitRemainingWidth=0)}}}const et=Math.floor(f*Se),rt=Math.min(et,Math.max(0,Math.floor((S-E-2)*Se/(l+Se)))+QT);let G=Math.floor(n*rt);const j=G/n;G=Math.floor(G*de);const Q=h?1:2,B=w==="left"?0:i-rt-E;return{renderMinimap:Q,minimapLeft:B,minimapWidth:rt,minimapHeightIsEditorHeight:Z,minimapIsSampling:J,minimapScale:p,minimapLineHeight:X,minimapCanvasInnerWidth:G,minimapCanvasInnerHeight:F,minimapCanvasOuterWidth:j,minimapCanvasOuterHeight:W}}static computeLayout(t,r){const i=r.outerWidth|0,s=r.outerHeight|0,n=r.lineHeight|0,o=r.lineNumbersDigitCount|0,a=r.typicalHalfwidthCharacterWidth,c=r.maxDigitWidth,l=r.pixelRatio,u=r.viewLineCount,h=t.get(142),p=h==="inherit"?t.get(141):h,f=p==="inherit"?t.get(137):p,m=t.get(140),w=r.isDominatedByLongLines,E=t.get(59),$=t.get(69).renderType!==0,S=t.get(70),P=t.get(110),O=t.get(88),F=t.get(74),W=t.get(108),Z=W.verticalScrollbarSize,J=W.verticalHasArrows,X=W.arrowSize,Se=W.horizontalScrollbarSize,de=t.get(45),et=t.get(115)!=="never";let rt=t.get(67);de&&et&&(rt+=16);let G=0;if($){const as=Math.max(o,S);G=Math.round(as*c)}let j=0;E&&(j=n*r.glyphMarginDecorationLaneCount);let Q=0,B=Q+j,re=B+G,pe=re+rt;const ne=i-j-G-rt;let qe=!1,Be=!1,kt=-1;p==="inherit"&&w?(qe=!0,Be=!0):f==="on"||f==="bounded"?Be=!0:f==="wordWrapColumn"&&(kt=m);const bt=Kf.c({outerWidth:i,outerHeight:s,lineHeight:n,typicalHalfwidthCharacterWidth:a,pixelRatio:l,scrollBeyondLastLine:P,paddingTop:O.top,paddingBottom:O.bottom,minimap:F,verticalScrollbarWidth:Z,viewLineCount:u,remainingWidth:ne,isViewportWrapping:Be},r.memory||new JT);bt.renderMinimap!==0&&bt.minimapLeft===0&&(Q+=bt.minimapWidth,B+=bt.minimapWidth,re+=bt.minimapWidth,pe+=bt.minimapWidth);const Ot=ne-bt.minimapWidth,Ze=Math.max(1,Math.floor((Ot-Z-2)/a)),Vt=J?X:0;return Be&&(kt=Math.max(1,Ze),f==="bounded"&&(kt=Math.min(kt,m))),{width:i,height:s,glyphMarginLeft:Q,glyphMarginWidth:j,glyphMarginDecorationLaneCount:r.glyphMarginDecorationLaneCount,lineNumbersLeft:B,lineNumbersWidth:G,decorationsLeft:re,decorationsWidth:rt,contentLeft:pe,contentWidth:Ot,minimap:bt,viewportColumn:Ze,isWordWrapMinified:qe,isViewportWrapping:Be,wrappingColumn:kt,verticalScrollbarWidth:Z,horizontalScrollbarHeight:Se,overviewRuler:{top:Vt,width:Z,height:s-2*Vt,right:0}}}},fR=class extends je{constructor(){super(144,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[d(367,null),d(368,null)],type:"string",enum:["simple","advanced"],default:"simple",description:d(369,null)}})}validate(e){return We(e,"simple",["simple","advanced"])}compute(e,t,r){return t.get(2)===2?"advanced":r}},Ki;(function(e){e.Off="off",e.OnCode="onCode",e.On="on"})(Ki||(Ki={}));var pR=class extends je{constructor(){const e={enabled:Ki.OnCode};super(66,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",enum:[Ki.Off,Ki.OnCode,Ki.On],default:e.enabled,enumDescriptions:[d(370,null),d(371,null),d(372,null)],description:d(373,null)}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:We(e.enabled,this.defaultValue.enabled,[Ki.Off,Ki.OnCode,Ki.On])}}},gR=class extends je{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(120,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:d(374,null)},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:d(375,null)},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:d(376,null)},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:d(377,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:V(t.enabled,this.defaultValue.enabled),maxLineCount:Le.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:We(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:V(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}},mR=class extends je{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1,maximumLength:43};super(146,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:d(378,null),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[d(379,null),d(380,null,Ir?"Ctrl+Option":"Ctrl+Alt"),d(381,null,Ir?"Ctrl+Option":"Ctrl+Alt"),d(382,null)]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:d(383,null,"`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:d(384,null,"`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:d(385,null)},"editor.inlayHints.maximumLength":{type:"number",default:e.maximumLength,markdownDescription:d(386,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:We(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Le.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:ur.string(t.fontFamily,this.defaultValue.fontFamily),padding:V(t.padding,this.defaultValue.padding),maximumLength:Le.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,Number.MAX_SAFE_INTEGER)}}},vR=class extends je{constructor(){super(67,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Le.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,r){return r<0?Le.clampedInt(-r*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):r}},wR=class extends $i{constructor(){super(68,"lineHeight",es.lineHeight,e=>$i.clamp(e,0,150),{markdownDescription:d(387,null)})}compute(e,t,r){return e.fontInfo.lineHeight}},bR=class extends je{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(74,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:d(388,null)},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:d(389,null)},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[d(390,null),d(391,null),d(392,null)],default:e.size,description:d(393,null)},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:d(394,null)},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:d(395,null)},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:d(396,null)},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:d(397,null)},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:d(398,null)},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:d(399,null)},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:d(400,null)},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:d(401,null)},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:d(402,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:V(t.enabled,this.defaultValue.enabled),autohide:V(t.autohide,this.defaultValue.autohide),size:We(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:We(t.side,this.defaultValue.side,["right","left"]),showSlider:We(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:V(t.renderCharacters,this.defaultValue.renderCharacters),scale:Le.clampedInt(t.scale,1,1,3),maxColumn:Le.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:V(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:V(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:$i.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:$i.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}};function yR(e){return e==="ctrlCmd"?Ir?"metaKey":"ctrlKey":"altKey"}var ER=class extends je{constructor(){super(88,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:d(403,null)},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:d(404,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Le.clampedInt(t.top,0,0,1e3),bottom:Le.clampedInt(t.bottom,0,0,1e3)}}},xR=class extends je{constructor(){const e={enabled:!0,cycle:!0};super(90,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:d(405,null)},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:d(406,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:V(t.enabled,this.defaultValue.enabled),cycle:V(t.cycle,this.defaultValue.cycle)}}},kR=class extends va{constructor(){super(149)}compute(e,t,r){return e.pixelRatio}},$R=class extends je{constructor(){super(92,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}},SR=class extends je{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[d(407,null),d(408,null),d(409,null)]}];super(94,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:d(410,null)},comments:{anyOf:t,default:e.comments,description:d(411,null)},other:{anyOf:t,default:e.other,description:d(412,null)}},default:e,markdownDescription:d(413,null,"`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:r,strings:i}=e,s=["on","inline","off"];let n,o,a;return typeof t=="boolean"?n=t?"on":"off":n=We(t,this.defaultValue.other,s),typeof r=="boolean"?o=r?"on":"off":o=We(r,this.defaultValue.comments,s),typeof i=="boolean"?a=i?"on":"off":a=We(i,this.defaultValue.strings,s),{other:n,comments:o,strings:a}}},H8;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval",e[e.Custom=4]="Custom"})(H8||(H8={}));var IR=class extends je{constructor(){super(69,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[d(414,null),d(415,null),d(416,null),d(417,null)],default:"on",description:d(418,null)})}validate(e){let t=this.defaultValue.renderType,r=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,r=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:r}}},CR=class extends je{constructor(){const e=[],t={type:"number",description:d(419,null)};super(107,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:d(420,null),format:"color-hex"}}}]},default:e,description:d(421,null)})}validate(e){if(Array.isArray(e)){const t=[];for(const r of e)if(typeof r=="number")t.push({column:Le.clampedInt(r,0,0,1e4),color:null});else if(r&&typeof r=="object"){const i=r;t.push({column:Le.clampedInt(i.column,0,0,1e4),color:i.color})}return t.sort((r,i)=>r.column-i.column),t}return this.defaultValue}},DR=class extends je{constructor(){super(97,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}};function j8(e,t){if(typeof e!="string")return t;switch(e){case"hidden":return 2;case"visible":return 3;default:return 1}}var PR=class extends je{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(108,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[d(422,null),d(423,null),d(424,null)],default:"auto",description:d(425,null)},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[d(426,null),d(427,null),d(428,null)],default:"auto",description:d(429,null)},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:d(430,null)},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:d(431,null)},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:d(432,null)},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:d(433,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,r=Le.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),i=Le.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Le.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:j8(t.vertical,this.defaultValue.vertical),horizontal:j8(t.horizontal,this.defaultValue.horizontal),useShadows:V(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:V(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:V(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:V(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:V(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:r,horizontalSliderSize:Le.clampedInt(t.horizontalSliderSize,r,0,1e3),verticalScrollbarSize:i,verticalSliderSize:Le.clampedInt(t.verticalSliderSize,i,0,1e3),scrollByPage:V(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:V(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}},ii="inUntrustedWorkspace",Hn={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"},AR=class extends je{constructor(){const e={nonBasicASCII:ii,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:ii,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(130,"unicodeHighlight",e,{[Hn.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,ii],default:e.nonBasicASCII,description:d(434,null)},[Hn.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:d(435,null)},[Hn.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:d(436,null)},[Hn.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,ii],default:e.includeComments,description:d(437,null)},[Hn.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,ii],default:e.includeStrings,description:d(438,null)},[Hn.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:d(439,null),additionalProperties:{type:"boolean"}},[Hn.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:d(440,null)}})}applyUpdate(e,t){let r=!1;t.allowedCharacters&&e&&(Qr(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},r=!0)),t.allowedLocales&&e&&(Qr(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},r=!0));const i=super.applyUpdate(e,t);return r?new vf(i.newValue,!0):i}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:ba(t.nonBasicASCII,ii,[!0,!1,ii]),invisibleCharacters:V(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:V(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:ba(t.includeComments,ii,[!0,!1,ii]),includeStrings:ba(t.includeStrings,ii,[!0,!1,ii]),allowedCharacters:this.c(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.c(e.allowedLocales,this.defaultValue.allowedLocales)}}c(e,t){if(typeof e!="object"||!e)return t;const r={};for(const[i,s]of Object.entries(e))s===!0&&(r[i]=!0);return r}},TR=class extends je{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default",syntaxHighlightingEnabled:!1,edits:{enabled:!0,useMixedLinesDiff:"forStableInsertions",useInterleavedLinesDiff:"never",renderSideBySide:"auto",useGutterIndicator:!0,codeShifting:!0,useMultiLineGhostText:!0}};super(64,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:d(441,null)},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[d(442,null),d(443,null),d(444,null)],description:d(445,null)},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:"boolean",default:e.syntaxHighlightingEnabled,description:d(446,null)},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:d(447,null)},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:d(448,null)},"editor.inlineSuggest.edits.codeShifting":{type:"boolean",default:e.edits.codeShifting,description:d(449,null),tags:["nextEditSuggestions"]},"editor.inlineSuggest.edits.renderSideBySide":{type:"string",default:e.edits.renderSideBySide,description:d(450,null),enum:["auto","never"],enumDescriptions:[d(451,null),d(452,null)],tags:["nextEditSuggestions"]}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:V(t.enabled,this.defaultValue.enabled),mode:We(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:We(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:V(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:V(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:ur.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:V(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled),edits:{enabled:V(t.edits?.enabled,this.defaultValue.edits.enabled),useMixedLinesDiff:We(t.edits?.useMixedLinesDiff,this.defaultValue.edits.useMixedLinesDiff,["never","whenPossible","forStableInsertions","afterJumpWhenPossible"]),codeShifting:V(t.edits?.codeShifting,this.defaultValue.edits.codeShifting),renderSideBySide:We(t.edits?.renderSideBySide,this.defaultValue.edits.renderSideBySide,["never","auto"]),useInterleavedLinesDiff:We(t.edits?.useInterleavedLinesDiff,this.defaultValue.edits.useInterleavedLinesDiff,["never","always","afterJump"]),useGutterIndicator:V(t.edits?.useGutterIndicator,this.defaultValue.edits.useGutterIndicator),useMultiLineGhostText:V(t.edits?.useMultiLineGhostText,this.defaultValue.edits.useMultiLineGhostText)}}}},RR=class extends je{constructor(){const e={enabled:N8.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:N8.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(453,null,"`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:d(454,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:V(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:V(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}},LR=class extends je{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[d(455,null),d(456,null),d(457,null)],default:e.bracketPairs,description:d(458,null)},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[d(459,null),d(460,null),d(461,null)],default:e.bracketPairsHorizontal,description:d(462,null)},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:d(463,null)},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:d(464,null)},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[d(465,null),d(466,null),d(467,null)],default:e.highlightActiveIndentation,description:d(468,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:ba(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:ba(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:V(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:V(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:ba(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}};function ba(e,t,r){const i=r.indexOf(e);return i===-1?t:r[i]}var NR=class extends je{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(123,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[d(469,null),d(470,null)],default:e.insertMode,description:d(471,null)},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:d(472,null)},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:d(473,null)},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:d(474,null)},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[d(475,null),d(476,null),d(477,null),d(478,null)],default:e.selectionMode,markdownDescription:d(479,null,"`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:d(480,null)},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:d(481,null)},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:d(482,null)},"editor.suggest.preview":{type:"boolean",default:e.preview,description:d(483,null)},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:d(484,null)},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:d(485,null)},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:d(486,null)},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:d(487,null)},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:d(488,null)},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:d(489,null)},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:d(490,null)},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:d(491,null)},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:d(492,null)},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:d(493,null)},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:d(494,null)},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:d(495,null)},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:d(496,null)},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:d(497,null)},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:d(498,null)},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:d(499,null)},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:d(500,null)},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:d(501,null)},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:d(502,null)},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:d(503,null)},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:d(504,null)},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:d(505,null)},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:d(506,null)},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:d(507,null)},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:d(508,null)},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:d(509,null)},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:d(510,null)},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:d(511,null)},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:d(512,null)},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:d(513,null)},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:d(514,null)},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:d(515,null)},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:d(516,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:We(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:V(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:V(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:V(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:V(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:We(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:V(t.showIcons,this.defaultValue.showIcons),showStatusBar:V(t.showStatusBar,this.defaultValue.showStatusBar),preview:V(t.preview,this.defaultValue.preview),previewMode:We(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:V(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:V(t.showMethods,this.defaultValue.showMethods),showFunctions:V(t.showFunctions,this.defaultValue.showFunctions),showConstructors:V(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:V(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:V(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:V(t.showFields,this.defaultValue.showFields),showVariables:V(t.showVariables,this.defaultValue.showVariables),showClasses:V(t.showClasses,this.defaultValue.showClasses),showStructs:V(t.showStructs,this.defaultValue.showStructs),showInterfaces:V(t.showInterfaces,this.defaultValue.showInterfaces),showModules:V(t.showModules,this.defaultValue.showModules),showProperties:V(t.showProperties,this.defaultValue.showProperties),showEvents:V(t.showEvents,this.defaultValue.showEvents),showOperators:V(t.showOperators,this.defaultValue.showOperators),showUnits:V(t.showUnits,this.defaultValue.showUnits),showValues:V(t.showValues,this.defaultValue.showValues),showConstants:V(t.showConstants,this.defaultValue.showConstants),showEnums:V(t.showEnums,this.defaultValue.showEnums),showEnumMembers:V(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:V(t.showKeywords,this.defaultValue.showKeywords),showWords:V(t.showWords,this.defaultValue.showWords),showColors:V(t.showColors,this.defaultValue.showColors),showFiles:V(t.showFiles,this.defaultValue.showFiles),showReferences:V(t.showReferences,this.defaultValue.showReferences),showFolders:V(t.showFolders,this.defaultValue.showFolders),showTypeParameters:V(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:V(t.showSnippets,this.defaultValue.showSnippets),showUsers:V(t.showUsers,this.defaultValue.showUsers),showIssues:V(t.showIssues,this.defaultValue.showIssues)}}},FR=class extends je{constructor(){super(118,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:d(517,null),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:d(518,null),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:V(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:V(e.selectSubwords,this.defaultValue.selectSubwords)}}},MR=class extends je{constructor(){const e=[];super(135,"wordSegmenterLocales",e,{anyOf:[{description:d(519,null),type:"string"},{description:d(520,null),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const r of e)if(typeof r=="string")try{Intl.Segmenter.supportedLocalesOf(r).length>0&&t.push(r)}catch{}return t}return this.defaultValue}},B8;(function(e){e[e.None=0]="None",e[e.Same=1]="Same",e[e.Indent=2]="Indent",e[e.DeepIndent=3]="DeepIndent"})(B8||(B8={}));var OR=class extends je{constructor(){super(143,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[d(521,null),d(522,null),d(523,null),d(524,null)],description:d(525,null),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,r){return t.get(2)===2?0:r}},UR=class extends va{constructor(){super(152)}compute(e,t,r){const i=t.get(151);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:i.isWordWrapMinified,isViewportWrapping:i.isViewportWrapping,wrappingColumn:i.wrappingColumn}}},HR=class extends je{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(526,null)},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:d(527,null),enum:["afterDrop","never"],enumDescriptions:[d(528,null),d(529,null)],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:V(t.enabled,this.defaultValue.enabled),showDropSelector:We(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}},jR=class extends je{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(89,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(530,null)},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:d(531,null),enum:["afterPaste","never"],enumDescriptions:[d(532,null),d(533,null)],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:V(t.enabled,this.defaultValue.enabled),showPasteSelector:We(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}},BR="Consolas, 'Courier New', monospace",_R="Menlo, Monaco, 'Courier New', monospace",zR="'Droid Sans Mono', 'monospace', monospace",es={fontFamily:Ir?_R:di?zR:BR,fontWeight:"normal",fontSize:Ir?12:14,lineHeight:0,letterSpacing:0},WR=[];function A(e){return WR[e.id]=e,e}var _8;(function(e){e[e.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",e[e.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",e[e.accessibilitySupport=2]="accessibilitySupport",e[e.accessibilityPageSize=3]="accessibilityPageSize",e[e.ariaLabel=4]="ariaLabel",e[e.ariaRequired=5]="ariaRequired",e[e.autoClosingBrackets=6]="autoClosingBrackets",e[e.autoClosingComments=7]="autoClosingComments",e[e.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",e[e.autoClosingDelete=9]="autoClosingDelete",e[e.autoClosingOvertype=10]="autoClosingOvertype",e[e.autoClosingQuotes=11]="autoClosingQuotes",e[e.autoIndent=12]="autoIndent",e[e.automaticLayout=13]="automaticLayout",e[e.autoSurround=14]="autoSurround",e[e.bracketPairColorization=15]="bracketPairColorization",e[e.guides=16]="guides",e[e.codeLens=17]="codeLens",e[e.codeLensFontFamily=18]="codeLensFontFamily",e[e.codeLensFontSize=19]="codeLensFontSize",e[e.colorDecorators=20]="colorDecorators",e[e.colorDecoratorsLimit=21]="colorDecoratorsLimit",e[e.columnSelection=22]="columnSelection",e[e.comments=23]="comments",e[e.contextmenu=24]="contextmenu",e[e.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",e[e.cursorBlinking=26]="cursorBlinking",e[e.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",e[e.cursorStyle=28]="cursorStyle",e[e.cursorSurroundingLines=29]="cursorSurroundingLines",e[e.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",e[e.cursorWidth=31]="cursorWidth",e[e.disableLayerHinting=32]="disableLayerHinting",e[e.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",e[e.domReadOnly=34]="domReadOnly",e[e.dragAndDrop=35]="dragAndDrop",e[e.dropIntoEditor=36]="dropIntoEditor",e[e.experimentalEditContextEnabled=37]="experimentalEditContextEnabled",e[e.emptySelectionClipboard=38]="emptySelectionClipboard",e[e.experimentalGpuAcceleration=39]="experimentalGpuAcceleration",e[e.experimentalWhitespaceRendering=40]="experimentalWhitespaceRendering",e[e.extraEditorClassName=41]="extraEditorClassName",e[e.fastScrollSensitivity=42]="fastScrollSensitivity",e[e.find=43]="find",e[e.fixedOverflowWidgets=44]="fixedOverflowWidgets",e[e.folding=45]="folding",e[e.foldingStrategy=46]="foldingStrategy",e[e.foldingHighlight=47]="foldingHighlight",e[e.foldingImportsByDefault=48]="foldingImportsByDefault",e[e.foldingMaximumRegions=49]="foldingMaximumRegions",e[e.unfoldOnClickAfterEndOfLine=50]="unfoldOnClickAfterEndOfLine",e[e.fontFamily=51]="fontFamily",e[e.fontInfo=52]="fontInfo",e[e.fontLigatures=53]="fontLigatures",e[e.fontSize=54]="fontSize",e[e.fontWeight=55]="fontWeight",e[e.fontVariations=56]="fontVariations",e[e.formatOnPaste=57]="formatOnPaste",e[e.formatOnType=58]="formatOnType",e[e.glyphMargin=59]="glyphMargin",e[e.gotoLocation=60]="gotoLocation",e[e.hideCursorInOverviewRuler=61]="hideCursorInOverviewRuler",e[e.hover=62]="hover",e[e.inDiffEditor=63]="inDiffEditor",e[e.inlineSuggest=64]="inlineSuggest",e[e.letterSpacing=65]="letterSpacing",e[e.lightbulb=66]="lightbulb",e[e.lineDecorationsWidth=67]="lineDecorationsWidth",e[e.lineHeight=68]="lineHeight",e[e.lineNumbers=69]="lineNumbers",e[e.lineNumbersMinChars=70]="lineNumbersMinChars",e[e.linkedEditing=71]="linkedEditing",e[e.links=72]="links",e[e.matchBrackets=73]="matchBrackets",e[e.minimap=74]="minimap",e[e.mouseStyle=75]="mouseStyle",e[e.mouseWheelScrollSensitivity=76]="mouseWheelScrollSensitivity",e[e.mouseWheelZoom=77]="mouseWheelZoom",e[e.multiCursorMergeOverlapping=78]="multiCursorMergeOverlapping",e[e.multiCursorModifier=79]="multiCursorModifier",e[e.multiCursorPaste=80]="multiCursorPaste",e[e.multiCursorLimit=81]="multiCursorLimit",e[e.occurrencesHighlight=82]="occurrencesHighlight",e[e.occurrencesHighlightDelay=83]="occurrencesHighlightDelay",e[e.overtypeCursorStyle=84]="overtypeCursorStyle",e[e.overtypeOnPaste=85]="overtypeOnPaste",e[e.overviewRulerBorder=86]="overviewRulerBorder",e[e.overviewRulerLanes=87]="overviewRulerLanes",e[e.padding=88]="padding",e[e.pasteAs=89]="pasteAs",e[e.parameterHints=90]="parameterHints",e[e.peekWidgetDefaultFocus=91]="peekWidgetDefaultFocus",e[e.placeholder=92]="placeholder",e[e.definitionLinkOpensInPeek=93]="definitionLinkOpensInPeek",e[e.quickSuggestions=94]="quickSuggestions",e[e.quickSuggestionsDelay=95]="quickSuggestionsDelay",e[e.readOnly=96]="readOnly",e[e.readOnlyMessage=97]="readOnlyMessage",e[e.renameOnType=98]="renameOnType",e[e.renderControlCharacters=99]="renderControlCharacters",e[e.renderFinalNewline=100]="renderFinalNewline",e[e.renderLineHighlight=101]="renderLineHighlight",e[e.renderLineHighlightOnlyWhenFocus=102]="renderLineHighlightOnlyWhenFocus",e[e.renderValidationDecorations=103]="renderValidationDecorations",e[e.renderWhitespace=104]="renderWhitespace",e[e.revealHorizontalRightPadding=105]="revealHorizontalRightPadding",e[e.roundedSelection=106]="roundedSelection",e[e.rulers=107]="rulers",e[e.scrollbar=108]="scrollbar",e[e.scrollBeyondLastColumn=109]="scrollBeyondLastColumn",e[e.scrollBeyondLastLine=110]="scrollBeyondLastLine",e[e.scrollPredominantAxis=111]="scrollPredominantAxis",e[e.selectionClipboard=112]="selectionClipboard",e[e.selectionHighlight=113]="selectionHighlight",e[e.selectOnLineNumbers=114]="selectOnLineNumbers",e[e.showFoldingControls=115]="showFoldingControls",e[e.showUnused=116]="showUnused",e[e.snippetSuggestions=117]="snippetSuggestions",e[e.smartSelect=118]="smartSelect",e[e.smoothScrolling=119]="smoothScrolling",e[e.stickyScroll=120]="stickyScroll",e[e.stickyTabStops=121]="stickyTabStops",e[e.stopRenderingLineAfter=122]="stopRenderingLineAfter",e[e.suggest=123]="suggest",e[e.suggestFontSize=124]="suggestFontSize",e[e.suggestLineHeight=125]="suggestLineHeight",e[e.suggestOnTriggerCharacters=126]="suggestOnTriggerCharacters",e[e.suggestSelection=127]="suggestSelection",e[e.tabCompletion=128]="tabCompletion",e[e.tabIndex=129]="tabIndex",e[e.unicodeHighlighting=130]="unicodeHighlighting",e[e.unusualLineTerminators=131]="unusualLineTerminators",e[e.useShadowDOM=132]="useShadowDOM",e[e.useTabStops=133]="useTabStops",e[e.wordBreak=134]="wordBreak",e[e.wordSegmenterLocales=135]="wordSegmenterLocales",e[e.wordSeparators=136]="wordSeparators",e[e.wordWrap=137]="wordWrap",e[e.wordWrapBreakAfterCharacters=138]="wordWrapBreakAfterCharacters",e[e.wordWrapBreakBeforeCharacters=139]="wordWrapBreakBeforeCharacters",e[e.wordWrapColumn=140]="wordWrapColumn",e[e.wordWrapOverride1=141]="wordWrapOverride1",e[e.wordWrapOverride2=142]="wordWrapOverride2",e[e.wrappingIndent=143]="wrappingIndent",e[e.wrappingStrategy=144]="wrappingStrategy",e[e.showDeprecated=145]="showDeprecated",e[e.inlayHints=146]="inlayHints",e[e.effectiveCursorStyle=147]="effectiveCursorStyle",e[e.editorClassName=148]="editorClassName",e[e.pixelRatio=149]="pixelRatio",e[e.tabFocusMode=150]="tabFocusMode",e[e.layoutInfo=151]="layoutInfo",e[e.wrappingInfo=152]="wrappingInfo",e[e.defaultColorDecorators=153]="defaultColorDecorators",e[e.colorDecoratorsActivatedOn=154]="colorDecoratorsActivatedOn",e[e.inlineCompletionsAccessibilityVerbose=155]="inlineCompletionsAccessibilityVerbose"})(_8||(_8={}));var vB={acceptSuggestionOnCommitCharacter:A(new ge(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:d(534,null)})),acceptSuggestionOnEnter:A(new Ve(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",d(535,null),""],markdownDescription:d(536,null)})),accessibilitySupport:A(new ZT),accessibilityPageSize:A(new Le(3,"accessibilityPageSize",500,1,1073741824,{description:d(537,null),tags:["accessibility"]})),ariaLabel:A(new ur(4,"ariaLabel",d(538,null))),ariaRequired:A(new ge(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:A(new ge(8,"screenReaderAnnounceInlineSuggestion",!0,{description:d(539,null),tags:["accessibility"]})),autoClosingBrackets:A(new Ve(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(540,null),d(541,null),""],description:d(542,null)})),autoClosingComments:A(new Ve(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(543,null),d(544,null),""],description:d(545,null)})),autoClosingDelete:A(new Ve(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",d(546,null),""],description:d(547,null)})),autoClosingOvertype:A(new Ve(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",d(548,null),""],description:d(549,null)})),autoClosingQuotes:A(new Ve(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(550,null),d(551,null),""],description:d(552,null)})),autoIndent:A(new Rl(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],YT,{enumDescriptions:[d(553,null),d(554,null),d(555,null),d(556,null),d(557,null)],description:d(558,null)})),automaticLayout:A(new ge(13,"automaticLayout",!1)),autoSurround:A(new Ve(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[d(559,null),d(560,null),d(561,null),""],description:d(562,null)})),bracketPairColorization:A(new RR),bracketPairGuides:A(new LR),stickyTabStops:A(new ge(121,"stickyTabStops",!1,{description:d(563,null)})),codeLens:A(new ge(17,"codeLens",!0,{description:d(564,null)})),codeLensFontFamily:A(new ur(18,"codeLensFontFamily","",{description:d(565,null)})),codeLensFontSize:A(new Le(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:d(566,null)})),colorDecorators:A(new ge(20,"colorDecorators",!0,{description:d(567,null)})),colorDecoratorActivatedOn:A(new Ve(154,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[d(568,null),d(569,null),d(570,null)],description:d(571,null)})),colorDecoratorsLimit:A(new Le(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:d(572,null)})),columnSelection:A(new ge(22,"columnSelection",!1,{description:d(573,null)})),comments:A(new KT),contextmenu:A(new ge(24,"contextmenu",!0)),copyWithSyntaxHighlighting:A(new ge(25,"copyWithSyntaxHighlighting",!0,{description:d(574,null)})),cursorBlinking:A(new Rl(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],eR,{description:d(575,null)})),cursorSmoothCaretAnimation:A(new Ve(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[d(576,null),d(577,null),d(578,null)],description:d(579,null)})),cursorStyle:A(new Rl(28,"cursorStyle",ri.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],O8,{description:d(580,null)})),overtypeCursorStyle:A(new Rl(84,"overtypeCursorStyle",ri.Block,"block",["line","block","underline","line-thin","block-outline","underline-thin"],O8,{description:d(581,null)})),cursorSurroundingLines:A(new Le(29,"cursorSurroundingLines",0,0,1073741824,{description:d(582,null)})),cursorSurroundingLinesStyle:A(new Ve(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[d(583,null),d(584,null)],markdownDescription:d(585,null)})),cursorWidth:A(new Le(31,"cursorWidth",0,0,1073741824,{markdownDescription:d(586,null)})),disableLayerHinting:A(new ge(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:A(new ge(33,"disableMonospaceOptimizations",!1)),domReadOnly:A(new ge(34,"domReadOnly",!1)),dragAndDrop:A(new ge(35,"dragAndDrop",!0,{description:d(587,null)})),emptySelectionClipboard:A(new rR),dropIntoEditor:A(new HR),experimentalEditContextEnabled:A(new ge(37,"experimentalEditContextEnabled",L5.quality!=="stable",{description:d(588,null),included:Sp||Qw||Bw})),stickyScroll:A(new gR),experimentalGpuAcceleration:A(new Ve(39,"experimentalGpuAcceleration","off",["off","on"],{tags:["experimental"],enumDescriptions:[d(589,null),d(590,null)],description:d(591,null)})),experimentalWhitespaceRendering:A(new Ve(40,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[d(592,null),d(593,null),d(594,null)],description:d(595,null)})),extraEditorClassName:A(new ur(41,"extraEditorClassName","")),fastScrollSensitivity:A(new $i(42,"fastScrollSensitivity",5,e=>e<=0?5:e,{markdownDescription:d(596,null)})),find:A(new iR),fixedOverflowWidgets:A(new ge(44,"fixedOverflowWidgets",!1)),folding:A(new ge(45,"folding",!0,{description:d(597,null)})),foldingStrategy:A(new Ve(46,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[d(598,null),d(599,null)],description:d(600,null)})),foldingHighlight:A(new ge(47,"foldingHighlight",!0,{description:d(601,null)})),foldingImportsByDefault:A(new ge(48,"foldingImportsByDefault",!1,{description:d(602,null)})),foldingMaximumRegions:A(new Le(49,"foldingMaximumRegions",5e3,10,65e3,{description:d(603,null)})),unfoldOnClickAfterEndOfLine:A(new ge(50,"unfoldOnClickAfterEndOfLine",!1,{description:d(604,null)})),fontFamily:A(new ur(51,"fontFamily",es.fontFamily,{description:d(605,null)})),fontInfo:A(new oR),fontLigatures2:A(new sR),fontSize:A(new cR),fontWeight:A(new lR),fontVariations:A(new nR),formatOnPaste:A(new ge(57,"formatOnPaste",!1,{description:d(606,null)})),formatOnType:A(new ge(58,"formatOnType",!1,{description:d(607,null)})),glyphMargin:A(new ge(59,"glyphMargin",!0,{description:d(608,null)})),gotoLocation:A(new uR),hideCursorInOverviewRuler:A(new ge(61,"hideCursorInOverviewRuler",!1,{description:d(609,null)})),hover:A(new hR),inDiffEditor:A(new ge(63,"inDiffEditor",!1)),letterSpacing:A(new $i(65,"letterSpacing",es.letterSpacing,e=>$i.clamp(e,-5,20),{description:d(610,null)})),lightbulb:A(new pR),lineDecorationsWidth:A(new vR),lineHeight:A(new wR),lineNumbers:A(new IR),lineNumbersMinChars:A(new Le(70,"lineNumbersMinChars",5,1,300)),linkedEditing:A(new ge(71,"linkedEditing",!1,{description:d(611,null)})),links:A(new ge(72,"links",!0,{description:d(612,null)})),matchBrackets:A(new Ve(73,"matchBrackets","always",["always","near","never"],{description:d(613,null)})),minimap:A(new bR),mouseStyle:A(new Ve(75,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:A(new $i(76,"mouseWheelScrollSensitivity",1,e=>e===0?1:e,{markdownDescription:d(614,null)})),mouseWheelZoom:A(new ge(77,"mouseWheelZoom",!1,{markdownDescription:d(Ir?615:616,null)})),multiCursorMergeOverlapping:A(new ge(78,"multiCursorMergeOverlapping",!0,{description:d(617,null)})),multiCursorModifier:A(new Rl(79,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],yR,{markdownEnumDescriptions:[d(618,null),d(619,null)],markdownDescription:d(620,null)})),multiCursorPaste:A(new Ve(80,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[d(621,null),d(622,null)],markdownDescription:d(623,null)})),multiCursorLimit:A(new Le(81,"multiCursorLimit",1e4,1,1e5,{markdownDescription:d(624,null)})),occurrencesHighlight:A(new Ve(82,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[d(625,null),d(626,null),d(627,null)],markdownDescription:d(628,null)})),occurrencesHighlightDelay:A(new Le(83,"occurrencesHighlightDelay",250,0,2e3,{description:d(629,null),tags:["preview"]})),overtypeOnPaste:A(new ge(85,"overtypeOnPaste",!0,{description:d(630,null)})),overviewRulerBorder:A(new ge(86,"overviewRulerBorder",!0,{description:d(631,null)})),overviewRulerLanes:A(new Le(87,"overviewRulerLanes",3,0,3)),padding:A(new ER),pasteAs:A(new jR),parameterHints:A(new xR),peekWidgetDefaultFocus:A(new Ve(91,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[d(632,null),d(633,null)],description:d(634,null)})),placeholder:A(new $R),definitionLinkOpensInPeek:A(new ge(93,"definitionLinkOpensInPeek",!1,{description:d(635,null)})),quickSuggestions:A(new SR),quickSuggestionsDelay:A(new Le(95,"quickSuggestionsDelay",10,0,1073741824,{description:d(636,null)})),readOnly:A(new ge(96,"readOnly",!1)),readOnlyMessage:A(new DR),renameOnType:A(new ge(98,"renameOnType",!1,{description:d(637,null),markdownDeprecationMessage:d(638,null)})),renderControlCharacters:A(new ge(99,"renderControlCharacters",!0,{description:d(639,null),restricted:!0})),renderFinalNewline:A(new Ve(100,"renderFinalNewline",di?"dimmed":"on",["off","on","dimmed"],{description:d(640,null)})),renderLineHighlight:A(new Ve(101,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",d(641,null)],description:d(642,null)})),renderLineHighlightOnlyWhenFocus:A(new ge(102,"renderLineHighlightOnlyWhenFocus",!1,{description:d(643,null)})),renderValidationDecorations:A(new Ve(103,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:A(new Ve(104,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",d(644,null),d(645,null),d(646,null),""],description:d(647,null)})),revealHorizontalRightPadding:A(new Le(105,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:A(new ge(106,"roundedSelection",!0,{description:d(648,null)})),rulers:A(new CR),scrollbar:A(new PR),scrollBeyondLastColumn:A(new Le(109,"scrollBeyondLastColumn",4,0,1073741824,{description:d(649,null)})),scrollBeyondLastLine:A(new ge(110,"scrollBeyondLastLine",!0,{description:d(650,null)})),scrollPredominantAxis:A(new ge(111,"scrollPredominantAxis",!0,{description:d(651,null)})),selectionClipboard:A(new ge(112,"selectionClipboard",!0,{description:d(652,null),included:di})),selectionHighlight:A(new ge(113,"selectionHighlight",!0,{description:d(653,null)})),selectOnLineNumbers:A(new ge(114,"selectOnLineNumbers",!0)),showFoldingControls:A(new Ve(115,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[d(654,null),d(655,null),d(656,null)],description:d(657,null)})),showUnused:A(new ge(116,"showUnused",!0,{description:d(658,null)})),showDeprecated:A(new ge(145,"showDeprecated",!0,{description:d(659,null)})),inlayHints:A(new mR),snippetSuggestions:A(new Ve(117,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[d(660,null),d(661,null),d(662,null),d(663,null)],description:d(664,null)})),smartSelect:A(new FR),smoothScrolling:A(new ge(119,"smoothScrolling",!1,{description:d(665,null)})),stopRenderingLineAfter:A(new Le(122,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:A(new NR),inlineSuggest:A(new TR),inlineCompletionsAccessibilityVerbose:A(new ge(155,"inlineCompletionsAccessibilityVerbose",!1,{description:d(666,null)})),suggestFontSize:A(new Le(124,"suggestFontSize",0,0,1e3,{markdownDescription:d(667,null,"`0`","`#editor.fontSize#`")})),suggestLineHeight:A(new Le(125,"suggestLineHeight",0,0,1e3,{markdownDescription:d(668,null,"`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:A(new ge(126,"suggestOnTriggerCharacters",!0,{description:d(669,null)})),suggestSelection:A(new Ve(127,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[d(670,null),d(671,null),d(672,null)],description:d(673,null)})),tabCompletion:A(new Ve(128,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[d(674,null),d(675,null),d(676,null)],description:d(677,null)})),tabIndex:A(new Le(129,"tabIndex",0,-1,1073741824)),unicodeHighlight:A(new AR),unusualLineTerminators:A(new Ve(131,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[d(678,null),d(679,null),d(680,null)],description:d(681,null)})),useShadowDOM:A(new ge(132,"useShadowDOM",!0)),useTabStops:A(new ge(133,"useTabStops",!0,{description:d(682,null)})),wordBreak:A(new Ve(134,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[d(683,null),d(684,null)],description:d(685,null)})),wordSegmenterLocales:A(new MR),wordSeparators:A(new ur(136,"wordSeparators",Q9,{description:d(686,null)})),wordWrap:A(new Ve(137,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[d(687,null),d(688,null),d(689,null),d(690,null)],description:d(691,null)})),wordWrapBreakAfterCharacters:A(new ur(138,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:A(new ur(139,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:A(new Le(140,"wordWrapColumn",80,1,1073741824,{markdownDescription:d(692,null)})),wordWrapOverride1:A(new Ve(141,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:A(new Ve(142,"wordWrapOverride2","inherit",["off","on","inherit"])),effectiveCursorStyle:A(new aR),editorClassName:A(new tR),defaultColorDecorators:A(new Ve(153,"defaultColorDecorators","auto",["auto","always","never"],{enumDescriptions:[d(693,null),d(694,null),d(695,null)],description:d(696,null)})),pixelRatio:A(new kR),tabFocusMode:A(new ge(150,"tabFocusMode",!1,{markdownDescription:d(697,null)})),layoutInfo:A(new dR),wrappingInfo:A(new UR),wrappingIndent:A(new OR),wrappingStrategy:A(new fR)};function z8(e,t,r,i,s,n){if(Array.isArray(e)){let o=0;for(const a of e){const c=z8(a,t,r,i,s,n);if(c===10)return c;c>o&&(o=c)}return o}else{if(typeof e=="string")return i?e==="*"?5:e===r?10:0:0;if(e){const{language:o,pattern:a,scheme:c,hasAccessToAllModels:l,notebookType:u}=e;if(!i&&!l)return 0;u&&s&&(t=s);let h=0;if(c)if(c===t.scheme)h=10;else if(c==="*")h=5;else return 0;if(o)if(o===r)h=10;else if(o==="*")h=Math.max(h,5);else return 0;if(u)if(u===n)h=10;else if(u==="*"&&n!==void 0)h=Math.max(h,5);else return 0;if(a){let p;if(typeof a=="string"?p=a:p={...a,base:so(a.base)},p===t.fsPath||mc(p,t.fsPath))h=10;else return 0}return h}else return 0}}function W8(e){return typeof e=="string"?!1:Array.isArray(e)?e.some(W8):!!e.notebookType}var Zv;(function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"})(Zv||(Zv={}));var wB=_("editSessionIdentityService"),Kv;(function(e){e[e.Complete=100]="Complete",e[e.Partial=50]="Partial",e[e.None=0]="None"})(Kv||(Kv={}));var VR=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(z.MainThreadAiRelatedInformation)}async $provideAiRelatedInformation(e,t,r){if(this.a.size===0)throw new Error("No related information providers registered");const i=this.a.get(e);if(!i)throw new Error("related information provider not found");return await i.provideRelatedInformation(t,r)??[]}getRelatedInformation(e,t,r){return this.c.$getAiRelatedInformation(t,r)}registerRelatedInformationProvider(e,t,r){const i=this.b;return this.b++,this.a.set(i,r),this.c.$registerAiRelatedInformationProvider(i,t),new Ie(()=>{this.c.$unregisterAiRelatedInformationProvider(i),this.a.delete(i)})}},V8;(function(e){e[e.Full=1]="Full",e[e.Delta=2]="Delta"})(V8||(V8={}));function q8(e){for(let t=0,r=e.length;t<r;t+=4){const i=e[t+0],s=e[t+1],n=e[t+2],o=e[t+3];e[t+0]=o,e[t+1]=n,e[t+2]=s,e[t+3]=i}}function qR(e){const t=new Uint8Array(e.buffer,e.byteOffset,e.length*4);return Gw()||q8(t),ke.wrap(t)}function GR(e){const t=e.buffer;if(Gw()||q8(t),t.byteOffset%4===0)return new Uint32Array(t.buffer,t.byteOffset,t.length/4);{const r=new Uint8Array(t.byteLength);return r.set(t),new Uint32Array(r.buffer,r.byteOffset,r.length/4)}}function e0(e){const t=new Uint32Array(QR(e));let r=0;if(t[r++]=e.id,e.type==="full")t[r++]=1,t[r++]=e.data.length,t.set(e.data,r),r+=e.data.length;else{t[r++]=2,t[r++]=e.deltas.length;for(const i of e.deltas)t[r++]=i.start,t[r++]=i.deleteCount,i.data?(t[r++]=i.data.length,t.set(i.data,r),r+=i.data.length):t[r++]=0}return qR(t)}function QR(e){let t=0;if(t+=2,e.type==="full")t+=1+e.data.length;else{t+=1,t+=3*e.deltas.length;for(const r of e.deltas)r.data&&(t+=r.data.length)}return t}function G8(e){const t=GR(e);let r=0;const i=t[r++];if(t[r++]===1){const a=t[r++],c=t.subarray(r,r+a);return r+=a,{id:i,type:"full",data:c}}const n=t[r++],o=[];for(let a=0;a<n;a++){const c=t[r++],l=t[r++],u=t[r++];let h;u>0&&(h=t.subarray(r,r+u),r+=u),o[a]={start:c,deleteCount:l,data:h}}return{id:i,type:"delta",deltas:o}}var JR=[new le("vscode.executeDocumentHighlights","_executeDocumentHighlights","Execute document highlight provider.",[U.Uri,U.Position],new ae("A promise that resolves to an array of DocumentHighlight-instances.",si(Yo.to))),new le("vscode.executeDocumentSymbolProvider","_executeDocumentSymbolProvider","Execute document symbol provider.",[U.Uri],new ae("A promise that resolves to an array of SymbolInformation and DocumentSymbol instances.",(e,t)=>{if(up(e))return;class r extends Sc{static to(s){const n=new r(s.name,jr.to(s.kind),s.containerName||"",new Rr(t[0],M.to(s.range)));return n.detail=s.detail,n.range=n.location.range,n.selectionRange=M.to(s.selectionRange),n.children=s.children?s.children.map(r.to):[],n}}return e.map(r.to)})),new le("vscode.executeFormatDocumentProvider","_executeFormatDocumentProvider","Execute document format provider.",[U.Uri,new U("options","Formatting options",e=>!0,e=>e)],new ae("A promise that resolves to an array of TextEdits.",si(Dt.to))),new le("vscode.executeFormatRangeProvider","_executeFormatRangeProvider","Execute range format provider.",[U.Uri,U.Range,new U("options","Formatting options",e=>!0,e=>e)],new ae("A promise that resolves to an array of TextEdits.",si(Dt.to))),new le("vscode.executeFormatOnTypeProvider","_executeFormatOnTypeProvider","Execute format on type provider.",[U.Uri,U.Position,new U("ch","Trigger character",e=>typeof e=="string",e=>e),new U("options","Formatting options",e=>!0,e=>e)],new ae("A promise that resolves to an array of TextEdits.",si(Dt.to))),new le("vscode.executeDefinitionProvider","_executeDefinitionProvider","Execute all definition providers.",[U.Uri,U.Position],new ae("A promise that resolves to an array of Location or LocationLink instances.",Bs)),new le("vscode.experimental.executeDefinitionProvider_recursive","_executeDefinitionProvider_recursive","Execute all definition providers.",[U.Uri,U.Position],new ae("A promise that resolves to an array of Location or LocationLink instances.",Bs)),new le("vscode.executeTypeDefinitionProvider","_executeTypeDefinitionProvider","Execute all type definition providers.",[U.Uri,U.Position],new ae("A promise that resolves to an array of Location or LocationLink instances.",Bs)),new le("vscode.experimental.executeTypeDefinitionProvider_recursive","_executeTypeDefinitionProvider_recursive","Execute all type definition providers.",[U.Uri,U.Position],new ae("A promise that resolves to an array of Location or LocationLink instances.",Bs)),new le("vscode.executeDeclarationProvider","_executeDeclarationProvider","Execute all declaration providers.",[U.Uri,U.Position],new ae("A promise that resolves to an array of Location or LocationLink instances.",Bs)),new le("vscode.experimental.executeDeclarationProvider_recursive","_executeDeclarationProvider_recursive","Execute all declaration providers.",[U.Uri,U.Position],new ae("A promise that resolves to an array of Location or LocationLink instances.",Bs)),new le("vscode.executeImplementationProvider","_executeImplementationProvider","Execute all implementation providers.",[U.Uri,U.Position],new ae("A promise that resolves to an array of Location or LocationLink instances.",Bs)),new le("vscode.experimental.executeImplementationProvider_recursive","_executeImplementationProvider_recursive","Execute all implementation providers.",[U.Uri,U.Position],new ae("A promise that resolves to an array of Location or LocationLink instances.",Bs)),new le("vscode.executeReferenceProvider","_executeReferenceProvider","Execute all reference providers.",[U.Uri,U.Position],new ae("A promise that resolves to an array of Location-instances.",si(cr.to))),new le("vscode.experimental.executeReferenceProvider","_executeReferenceProvider_recursive","Execute all reference providers.",[U.Uri,U.Position],new ae("A promise that resolves to an array of Location-instances.",si(cr.to))),new le("vscode.executeHoverProvider","_executeHoverProvider","Execute all hover providers.",[U.Uri,U.Position],new ae("A promise that resolves to an array of Hover-instances.",si(sl.to))),new le("vscode.experimental.executeHoverProvider_recursive","_executeHoverProvider_recursive","Execute all hover providers.",[U.Uri,U.Position],new ae("A promise that resolves to an array of Hover-instances.",si(sl.to))),new le("vscode.executeSelectionRangeProvider","_executeSelectionRangeProvider","Execute selection range provider.",[U.Uri,new U("position","A position in a text document",e=>Array.isArray(e)&&e.every(t=>xe.isPosition(t)),e=>e.map(Fe.from))],new ae("A promise that resolves to an array of ranges.",e=>e.map(t=>{let r;for(const i of t.reverse())r=new Pc(M.to(i),r);return r}))),new le("vscode.executeWorkspaceSymbolProvider","_executeWorkspaceSymbolProvider","Execute all workspace symbol providers.",[U.String.with("query","Search string")],new ae("A promise that resolves to an array of SymbolInformation-instances.",e=>e.map(Tn.to))),new le("vscode.prepareCallHierarchy","_executePrepareCallHierarchy","Prepare call hierarchy at a position inside a document",[U.Uri,U.Position],new ae("A promise that resolves to an array of CallHierarchyItem-instances",e=>e.map(Rn.to))),new le("vscode.provideIncomingCalls","_executeProvideIncomingCalls","Compute incoming calls for an item",[U.CallHierarchyItem],new ae("A promise that resolves to an array of CallHierarchyIncomingCall-instances",e=>e.map(s1.to))),new le("vscode.provideOutgoingCalls","_executeProvideOutgoingCalls","Compute outgoing calls for an item",[U.CallHierarchyItem],new ae("A promise that resolves to an array of CallHierarchyOutgoingCall-instances",e=>e.map(n1.to))),new le("vscode.prepareRename","_executePrepareRename","Execute the prepareRename of rename provider.",[U.Uri,U.Position],new ae("A promise that resolves to a range and placeholder text.",e=>{if(e)return{range:M.to(e.range),placeholder:e.text}})),new le("vscode.executeDocumentRenameProvider","_executeDocumentRenameProvider","Execute rename provider.",[U.Uri,U.Position,U.String.with("newName","The new symbol name")],new ae("A promise that resolves to a WorkspaceEdit.",e=>{if(e){if(e.rejectReason)throw new Error(e.rejectReason);return kr.to(e)}})),new le("vscode.executeLinkProvider","_executeLinkProvider","Execute document link provider.",[U.Uri,U.Number.with("linkResolveCount","Number of links that should be resolved, only when links are unresolved.").optional()],new ae("A promise that resolves to an array of DocumentLink-instances.",e=>e.map(Ln.to))),new le("vscode.provideDocumentSemanticTokensLegend","_provideDocumentSemanticTokensLegend","Provide semantic tokens legend for a document",[U.Uri],new ae("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new Dm(e.tokenTypes,e.tokenModifiers)})),new le("vscode.provideDocumentSemanticTokens","_provideDocumentSemanticTokens","Provide semantic tokens for a document",[U.Uri],new ae("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=G8(e);if(t.type==="full")return new _o(t.data,void 0)})),new le("vscode.provideDocumentRangeSemanticTokensLegend","_provideDocumentRangeSemanticTokensLegend","Provide semantic tokens legend for a document range",[U.Uri,U.Range.optional()],new ae("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new Dm(e.tokenTypes,e.tokenModifiers)})),new le("vscode.provideDocumentRangeSemanticTokens","_provideDocumentRangeSemanticTokens","Provide semantic tokens for a document range",[U.Uri,U.Range],new ae("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=G8(e);if(t.type==="full")return new _o(t.data,void 0)})),new le("vscode.executeCompletionItemProvider","_executeCompletionItemProvider","Execute completion item provider.",[U.Uri,U.Position,U.String.with("triggerCharacter","Trigger completion when the user types the character, like `,` or `(`").optional(),U.Number.with("itemResolveCount","Number of completions to resolve (too large numbers slow down completions)").optional()],new ae("A promise that resolves to a CompletionList-instance.",(e,t,r)=>{if(!e)return new To([]);const i=e.suggestions.map(s=>u1.to(s,r));return new To(i,e.incomplete)})),new le("vscode.executeSignatureHelpProvider","_executeSignatureHelpProvider","Execute signature help provider.",[U.Uri,U.Position,U.String.with("triggerCharacter","Trigger signature help when the user types the character, like `,` or `(`").optional()],new ae("A promise that resolves to SignatureHelp.",e=>{if(e)return nl.to(e)})),new le("vscode.executeCodeLensProvider","_executeCodeLensProvider","Execute code lens provider.",[U.Uri,U.Number.with("itemResolveCount","Number of lenses that should be resolved and returned. Will only return resolved lenses, will impact performance)").optional()],new ae("A promise that resolves to an array of CodeLens-instances.",(e,t,r)=>si(i=>new Ch(M.to(i.range),i.command&&r.fromInternal(i.command)))(e))),new le("vscode.executeCodeActionProvider","_executeCodeActionProvider","Execute code action provider.",[U.Uri,new U("rangeOrSelection","Range in a text document. Some refactoring provider requires Selection object.",e=>we.isRange(e),e=>zi.isSelection(e)?ei.from(e):M.from(e)),U.String.with("kind","Code action kind to return code actions for").optional(),U.Number.with("itemResolveCount","Number of code actions to resolve (too large numbers slow down code actions)").optional()],new ae("A promise that resolves to an array of Command-instances.",(e,t,r)=>si(i=>{if(i._isSynthetic){if(!i.command)throw new Error("Synthetic code actions must have a command");return r.fromInternal(i.command)}else{const s=new Dc(i.title,i.kind?new nt(i.kind):void 0);return i.edit&&(s.edit=kr.to(i.edit)),i.command&&(s.command=r.fromInternal(i.command)),s.isPreferred=i.isPreferred,s}})(e))),new le("vscode.executeDocumentColorProvider","_executeDocumentColorProvider","Execute document color provider.",[U.Uri],new ae("A promise that resolves to an array of ColorInformation objects.",e=>e?e.map(t=>new Lh(M.to(t.range),Zo.to(t.color))):[])),new le("vscode.executeColorPresentationProvider","_executeColorPresentationProvider","Execute color presentation provider.",[new U("color","The color to show and insert",e=>e instanceof Mo,Zo.from),new U("context","Context object with uri and range",e=>!0,e=>({uri:e.uri,range:M.from(e.range)}))],new ae("A promise that resolves to an array of ColorPresentation objects.",e=>e?e.map(Dd.to):[])),new le("vscode.executeInlayHintProvider","_executeInlayHintProvider","Execute inlay hints provider",[U.Uri,U.Range],new ae("A promise that resolves to an array of Inlay objects",(e,t,r)=>e.map(h1.to.bind(void 0,r)))),new le("vscode.executeFoldingRangeProvider","_executeFoldingRangeProvider","Execute folding range provider",[U.Uri],new ae("A promise that resolves to an array of FoldingRange objects",(e,t)=>{if(e)return e.map(Ad.to)})),new le("vscode.resolveNotebookContentProviders","_resolveNotebookContentProvider","Resolve Notebook Content Providers",[],new ae("A promise that resolves to an array of NotebookContentProvider static info objects.",si(e=>({viewType:e.viewType,displayName:e.displayName,options:{transientOutputs:e.options.transientOutputs,transientCellMetadata:e.options.transientCellMetadata,transientDocumentMetadata:e.options.transientDocumentMetadata},filenamePattern:e.filenamePattern.map(t=>Rd.to(t))})))),new le("vscode.executeInlineValueProvider","_executeInlineValueProvider","Execute inline value provider",[U.Uri,U.Range,new U("context","An InlineValueContext",e=>e&&typeof e.frameId=="number"&&e.stoppedLocation instanceof we,e=>xd.from(e))],new ae("A promise that resolves to an array of InlineValue objects",e=>e.map(Ed.to))),new le("vscode.open","_workbench.open","Opens the provided resource in the editor. Can be a text or binary file, or an http(s) URL. If you need more control over the options for opening a text file, use vscode.window.showTextDocument instead.",[new U("uriOrString","Uri-instance or string (only http/https)",e=>y.isUri(e)||typeof e=="string"&&eS(e,q.http,q.https),e=>e),new U("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[Ct.from(e),void 0]:[Ct.from(e.viewColumn),ol.from(e)])).optional(),U.String.with("label","").optional()],ae.Void),new le("vscode.openWith","_workbench.openWith","Opens the provided resource with a specific editor.",[U.Uri.with("resource","Resource to open"),U.String.with("viewId","Custom editor view id. This should be the viewType string for custom editors or the notebookType string for notebooks. Use 'default' to use VS Code's default text editor"),new U("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[Ct.from(e),void 0]:[Ct.from(e.viewColumn),ol.from(e)])).optional()],ae.Void),new le("vscode.diff","_workbench.diff","Opens the provided resources in the diff editor to compare their contents.",[U.Uri.with("left","Left-hand side resource of the diff editor"),U.Uri.with("right","Right-hand side resource of the diff editor"),U.String.with("title","Human readable title for the diff editor").optional(),new U("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="object",e=>e&&[Ct.from(e.viewColumn),ol.from(e)]).optional()],ae.Void),new le("vscode.changes","_workbench.changes","Opens a list of resources in the changes editor to compare their contents.",[U.String.with("title","Human readable title for the changes editor"),new U("resourceList","List of resources to compare",e=>{for(const t of e){if(t.length!==3)return!1;const[r,i,s]=t;if(!y.isUri(r)||!y.isUri(i)&&i!==void 0&&i!==null||!y.isUri(s)&&s!==void 0&&s!==null)return!1}return!0},e=>e)],ae.Void),new le("vscode.prepareTypeHierarchy","_executePrepareTypeHierarchy","Prepare type hierarchy at a position inside a document",[U.Uri,U.Position],new ae("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Nn.to))),new le("vscode.provideSupertypes","_executeProvideSupertypes","Compute supertypes for an item",[U.TypeHierarchyItem],new ae("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Nn.to))),new le("vscode.provideSubtypes","_executeProvideSubtypes","Compute subtypes for an item",[U.TypeHierarchyItem],new ae("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Nn.to))),new le("vscode.revealTestInExplorer","_revealTestInExplorer","Reveals a test instance in the explorer",[U.TestItem],ae.Void),new le("vscode.startContinuousTestRun","testing.startContinuousRunFromExtension","Starts running the given tests with continuous run mode.",[U.TestProfile,U.Arr(U.TestItem)],ae.Void),new le("vscode.stopContinuousTestRun","testing.stopContinuousRunFromExtension","Stops running the given tests with continuous run mode.",[U.Arr(U.TestItem)],ae.Void),new le("vscode.experimental.editSession.continue","_workbench.editSessions.actions.continueEditSession","Continue the current edit session in a different workspace",[U.Uri.with("workspaceUri","The target workspace to continue the current edit session in")],ae.Void),new le("setContext","_setContext","Set a custom context key value that can be used in when clauses.",[U.String.with("name","The context key name"),new U("value","The context key value",()=>!0,e=>e)],ae.Void),new le("vscode.editorChat.start","inlineChat.start","Invoke a new editor chat session",[new U("Run arguments","",e=>!0,e=>{if(e)return{initialRange:e.initialRange?M.from(e.initialRange):void 0,initialSelection:zi.isSelection(e.initialSelection)?ei.from(e.initialSelection):void 0,message:e.message,autoSend:e.autoSend,position:e.position?Fe.from(e.position):void 0}})],ae.Void)],XR=class{static register(e){JR.forEach(e.registerApiCommand,e),this.a(e)}static a(e){e.registerCommand(!1,"_validateWhenClauses",ZS)}};function si(e){return t=>{if(Array.isArray(t))return t.map(e)}}function Bs(e){if(!Array.isArray(e))return;const t=[];for(const r of e)xC(r)?t.push(il.to(r)):t.push(cr.to(r));return t}var t0=class{constructor(t,r){this.a=t.getProxy(z.MainThreadBulkEdits),this.b={getTextDocumentVersion:i=>r.getDocument(i)?.version,getNotebookDocumentVersion:()=>{}}}applyWorkspaceEdit(t,r,i){const s=new Cr(kr.from(t,this.b));return this.a.$tryApplyWorkspaceEdit(s,void 0,i?.isRefactoring??!1)}};t0=__decorate([__param(0,Me)],t0);var Q8;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(Q8||(Q8={}));var bf;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(bf||(bf={}));var J8;(function(e){e.IncorrectCode="incorrectCode",e.DidNotFollowInstructions="didNotFollowInstructions",e.IncompleteCode="incompleteCode",e.MissingContext="missingContext",e.PoorlyWrittenOrFormatted="poorlyWrittenOrFormatted",e.RefusedAValidRequest="refusedAValidRequest",e.OffensiveOrUnsafe="offensiveOrUnsafe",e.Other="other",e.WillReportIssue="willReportIssue"})(J8||(J8={}));var X8;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(X8||(X8={}));var YR=_("IChatService");function ZR(e){return!!e&&typeof e.sessionId=="string"&&e.$mid===19}var KR=class{constructor(e,t,r,i,s){this.j=e,this.k=t,this.l=r,this.m=i,this.n=s,this.b=Xs.create(!1),this.c=!1}close(){this.c=!0}get timings(){return{firstProgress:this.d,totalElapsed:this.b.elapsed()}}get apiObject(){if(!this.g){let t=function(s){if(r.c){const n=new Error("Response stream has been closed");throw Error.captureStackTrace(n,s),n}};var e=t;const r=this;this.b.reset();const i=(s,n)=>{if(typeof this.d>"u"&&(s.kind==="markdownContent"||s.kind==="markdownVuln")&&(this.d=this.b.elapsed()),n){const o=this.l.$handleProgressChunk(this.k.requestId,s),a={report:c=>{o?.then(l=>{l&&(xr.isMarkdownString(c.value)?this.l.$handleProgressChunk(this.k.requestId,fl.from(c),l):this.l.$handleProgressChunk(this.k.requestId,Qi.from(c),l))})}};Promise.all([o,n?.(a)]).then(([c,l])=>{c!==void 0&&this.l.$handleProgressChunk(this.k.requestId,$1.from(l),c)})}else this.l.$handleProgressChunk(this.k.requestId,s)};this.g=Object.freeze({markdown(s){t(this.markdown);const n=new cd(s),o=hl.from(n);return i(o),this},markdownWithVulnerabilities(s,n){t(this.markdown),n&&R(r.j,"chatParticipantAdditions");const o=new Jc(s,n),a=Ud.from(o);return i(a),this},codeblockUri(s){t(this.codeblockUri),R(r.j,"chatParticipantAdditions");const n=new fd(s),o=Od.from(n);return i(o),this},filetree(s,n){t(this.filetree);const o=new ud(s,n),a=dl.from(o);return i(a),this},anchor(s,n){const o=new Yc(s,n);return this.push(o)},button(s){t(this.anchor);const n=new dd(s),o=pl.from(n,r.m,r.n);return i(o),this},progress(s,n){t(this.progress);const o=new hd(s,n),a=n?Bd.from(o):Fn.from(o);return i(a,n),this},warning(s){t(this.progress),R(r.j,"chatParticipantAdditions");const n=new Kc(s),o=fl.from(n);return i(o),this},reference(s,n){return this.reference2(s,n)},reference2(s,n,o){if(t(this.reference),typeof s=="object"&&"variableName"in s&&R(r.j,"chatParticipantAdditions"),typeof s=="object"&&"variableName"in s&&!s.value){const a=r.k.variables.variables.find(c=>c.name===s.variableName);if(a){let c;if(a.references?.length)c=a.references.map(l=>({kind:"reference",reference:{variableName:s.variableName,value:l.reference}}));else{const l=new qi(s,n,o);c=[Qi.from(l)]}return c.forEach(l=>i(l)),this}}else{const a=new qi(s,n,o),c=Qi.from(a);i(c)}return this},codeCitation(s,n,o){t(this.codeCitation),R(r.j,"chatParticipantAdditions");const a=new pd(s,n,o),c=zd.from(a);i(c)},textEdit(s,n){t(this.textEdit),R(r.j,"chatParticipantAdditions");const o=new el(s,Array.isArray(n)?n:[]);o.isDone=n===!0?!0:void 0;const a=_d.from(o);return i(a),this},detectedParticipant(s,n){t(this.detectedParticipant),R(r.j,"chatParticipantAdditions");const o=new Xc(s,n),a=Hd.from(o);return i(a),this},confirmation(s,n,o,a){t(this.confirmation),R(r.j,"chatParticipantAdditions");const c=new ld(s,n,o,a),l=jd.from(c);return i(l),this},push(s){if(t(this.push),(s instanceof el||s instanceof Jc||s instanceof Xc||s instanceof Kc||s instanceof ld||s instanceof pd||s instanceof gd||s instanceof hd)&&R(r.j,"chatParticipantAdditions"),s instanceof qi)this.reference2(s.value,s.iconPath,s.options);else if(s instanceof hd){const n=s.task?Bd.from(s):Fn.from(s);i(n,s.task)}else if(s instanceof Yc){const n=oa.from(s);if(s.resolve){R(r.j,"chatParticipantAdditions"),n.resolveId=Dr();const o=new dt;s.resolve(o.token).then(()=>{const a=oa.from(s);r.l.$handleAnchorResolve(r.k.requestId,n.resolveId,a)}).then(()=>o.dispose(),()=>o.dispose()),r.n.add(ce(()=>o.dispose(!0)))}i(n)}else{const n=Wd.from(s,r.m,r.n);i(n)}return this}})}return this.g}},eL=class Xl extends he{static{this.b=0}static{this.j=0}static{this.n=0}constructor(t,r,i,s,n){super(),this.y=r,this.z=i,this.C=s,this.D=n,this.c=new Map,this.m=new Map,this.s=new Map,this.t=this.B(new gp),this.u=this.B(new gp),this.w=new Set,this.g=t.getProxy(z.MainThreadChatAgents2),i.registerArgumentProcessor({processArgument:o=>ZR(o)?null:o})}transferActiveChat(t){this.g.$transferActiveChatSession(t)}createChatAgent(t,r,i){const s=Xl.b++,n=new Y8(t,r,this.g,s,i);return this.c.set(s,n),this.g.$registerAgent(s,t.identifier,r,{},void 0),n.apiAgent}createDynamicChatAgent(t,r,i,s){const n=Xl.b++,o=new Y8(t,r,this.g,n,s);return this.c.set(n,o),this.g.$registerAgent(n,t.identifier,r,{isSticky:!0},i),o.apiAgent}registerChatParticipantDetectionProvider(t,r){const i=Xl.j++;return this.m.set(i,new tL(t,r)),this.g.$registerChatParticipantDetectionProvider(i),ce(()=>{this.m.delete(i),this.g.$unregisterChatParticipantDetectionProvider(i)})}registerRelatedFilesProvider(t,r,i){const s=Xl.n++;return this.s.set(s,new rL(t,r)),this.g.$registerRelatedFilesProvider(s,i),ce(()=>{this.s.delete(s),this.g.$unregisterRelatedFilesProvider(s)})}async $provideRelatedFiles(t,r,i){const s=this.s.get(t);if(!s)return Promise.resolve([]);const n=S1.to(r);return await s.provider.provideRelatedFiles(n,i)??void 0}async $detectChatParticipant(t,r,i,s,n){const o=this.m.get(t);if(!o)return;const{request:a,location:c,history:l}=await this.F(r,i,o.extension),u=await this.G(a,o.extension),h=Vd.to(a,c,u,ct(o.extension,"chatReadonlyPromptReference"));return o.provider.provideParticipantDetection(h,{history:l},{participants:s.participants,location:gl.to(s.location)},n)}async F(t,r,i){const s=ir(t),n=await this.H(i,s.agentId,r);let o;if(s.locationData?.type===St.Editor){const a=this.C.getDocument(s.locationData.document);o=new s7(a,ei.to(s.locationData.selection),M.to(s.locationData.wholeRange))}else if(s.locationData?.type===St.Notebook){const a=this.C.getDocument(s.locationData.sessionInputUri);o=new n7(a)}else s.locationData?.type,St.Terminal;return{request:s,location:o,history:n}}async G(t,r){let i;if(t.userSelectedModelId&&(i=await this.D.getLanguageModelByIdentifier(r,t.userSelectedModelId)),!i&&(i=await this.D.getDefaultLanguageModel(r),!i))throw new Error("Language model unavailable");return i}async $setRequestPaused(t,r,i){const s=this.c.get(t);if(!s)return;const n=mr.find(this.w,o=>o.requestId===r);n&&s.setChatRequestPauseState({request:n.extRequest,isPaused:i})}async $invokeAgent(t,r,i,s){const n=this.c.get(t);if(!n)throw new Error(`[CHAT](${t}) CANNOT invoke agent because the agent is not registered`);let o,a;try{const{request:c,location:l,history:u}=await this.F(r,i,n.extension);let h=this.t.get(c.sessionId);h||(h=new me,this.t.set(c.sessionId,h)),o=new KR(n.extension,c,this.g,this.z.converter,h);const p=await this.G(c,n.extension),f=Vd.to(c,l,p,ct(n.extension,"chatReadonlyPromptReference"));a={requestId:r.requestId,extRequest:f},this.w.add(a);const m=n.invoke(f,{history:u},o.apiObject,s);return await Ub(Promise.resolve(m).then(w=>{if(w?.metadata)try{JSON.stringify(w.metadata)}catch($){const S=`result.metadata MUST be JSON.stringify-able. Got error: ${$.message}`;return this.y.error(`[${n.extension.identifier.value}] [@${n.id}] ${S}`,n.extension),{errorDetails:{message:S},timings:o?.timings,nextQuestion:w.nextQuestion}}let E;return w?.errorDetails&&(E={...w.errorDetails,responseIsIncomplete:!0}),(E?.responseIsRedacted||E?.isQuotaExceeded)&&R(n.extension,"chatParticipantPrivate"),{errorDetails:E,timings:o?.timings,metadata:w?.metadata,nextQuestion:w?.nextQuestion}}),s)}catch(c){this.y.error(c,n.extension),c instanceof Ei&&c.cause&&(c=c.cause);const l=c instanceof Error&&c.name==="ChatQuotaExceeded";return{errorDetails:{message:rn(c),responseIsIncomplete:!0,isQuotaExceeded:l}}}finally{a&&this.w.delete(a),o?.close()}}async H(t,r,i){const s=[];for(const n of i.history){const o=aa.to(n.result),a=r===n.request.agentId?o:{...o,metadata:void 0},c=ct(t,"chatReadonlyPromptReference"),l=n.request.variables.variables.filter(f=>!f.isTool).map(f=>qd.to(f,c)),u=n.request.variables.variables.filter(f=>f.isTool).map(Gd.to),h=new r7(n.request.message,n.request.command,l,n.request.agentId,u);s.push(h);const p=Rt(n.response.map(f=>Wd.toContent(f,this.z.converter)));s.push(new i7(p,a,n.request.agentId,n.request.command))}return s}$releaseSession(t){this.t.deleteAndDispose(t)}async $provideFollowups(t,r,i,s,n){const o=this.c.get(r);if(!o)return Promise.resolve([]);const a=ir(t),c=await this.H(o.extension,o.id,s),l=aa.to(i);return(await o.provideFollowups(l,{history:c},n)).filter(u=>{const h=!u.participant||mr.some(this.c.values(),p=>p.id===u.participant&&Ue.equals(p.extension.identifier,o.extension.identifier));return h||this.y.warn(`[@${o.id}] ChatFollowup refers to an unknown participant: ${u.participant}`),h}).map(u=>ul.from(u,a))}$acceptFeedback(t,r,i){const s=this.c.get(t);if(!s)return;const n=aa.to(r);let o;switch(i.direction){case bf.Down:o=Qc.Unhelpful;break;case bf.Up:o=Qc.Helpful;break}const a={result:n,kind:o,unhelpfulReason:ct(s.extension,"chatParticipantAdditions")?i.reason:void 0};s.acceptFeedback(Object.freeze(a))}$acceptAction(t,r,i){const s=this.c.get(t);if(!s||i.action.kind==="vote")return;const n=C1.to(r,i,this.z.converter);n&&s.acceptAction(Object.freeze(n))}async $invokeCompletionProvider(t,r,i){const s=this.c.get(t);if(!s)return[];let n=this.u.get(t);return n?n.clear():(n=new me,this.u.set(t,n)),(await s.invokeCompletionProvider(r,i)).map(a=>I1.from(a,this.z.converter,n))}async $provideWelcomeMessage(t,r){const i=this.c.get(t);if(i)return await i.provideWelcomeMessage(r)}async $provideChatTitle(t,r,i){const s=this.c.get(t);if(!s)return;const n=await this.H(s.extension,s.id,{history:r});return await s.provideTitle({history:n},i)}async $provideSampleQuestions(t,r,i){const s=this.c.get(t);if(s)return(await s.provideSampleQuestions(gl.to(r),i)).map(n=>ul.from(n,void 0))}},tL=class{constructor(e,t){this.extension=e,this.provider=t}},rL=class{constructor(e,t){this.extension=e,this.provider=t}},Y8=class{constructor(e,t,r,i,s){this.extension=e,this.id=t,this.x=r,this.y=i,this.z=s,this.l=new D,this.m=new D,this.w=new D}acceptFeedback(e){this.l.fire(e)}acceptAction(e){this.m.fire(e)}setChatRequestPauseState(e){this.w.fire(e)}async invokeCompletionProvider(e,t){return this.o?await this.o.provider.provideCompletionItems(e,t)??[]:[]}async provideFollowups(e,t,r){if(!this.b)return[];const i=await this.b.provideFollowups(e,t,r);return i?i.filter(s=>!(s&&"commandId"in s)).filter(s=>!(s&&"message"in s)):[]}async provideWelcomeMessage(e){if(!this.q?.provideWelcomeMessage)return;const t=await this.q.provideWelcomeMessage(e),r=t?.icon;if(!(!t||!Mt.isThemeIcon(r)))return{...t,icon:r,message:be.from(t.message)}}async provideTitle(e,t){if(this.s)return await this.s.provideChatTitle(e,t)??void 0}async provideSampleQuestions(e,t){if(!this.q||!this.q.provideSampleQuestions)return[];const r=await this.q.provideSampleQuestions(e,t);return r||[]}get apiAgent(){let e=!1,t=!1;const r=()=>{e||t||(t=!0,queueMicrotask(()=>{this.x.$updateAgent(this.y,{icon:this.c?this.c instanceof y?this.c:"light"in this.c?this.c.light:void 0:void 0,iconDark:this.c&&"dark"in this.c?this.c.dark:void 0,themeIcon:this.c instanceof Xt?this.c:void 0,hasFollowups:this.b!==void 0,isSecondary:this.k,helpTextPrefix:!this.d||typeof this.d=="string"?this.d:be.from(this.d),helpTextVariablesPrefix:!this.g||typeof this.g=="string"?this.g:be.from(this.g),helpTextPostfix:!this.j||typeof this.j=="string"?this.j:be.from(this.j),supportIssueReporting:this.n,requester:this.t,supportsSlowVariables:this.u}),t=!1}))},i=this;return{get id(){return i.id},get iconPath(){return i.c},set iconPath(s){i.c=s,r()},get requestHandler(){return i.z},set requestHandler(s){xw(typeof s=="function","Invalid request handler"),i.z=s},get followupProvider(){return i.b},set followupProvider(s){i.b=s,r()},get helpTextPrefix(){return R(i.extension,"defaultChatParticipant"),i.d},set helpTextPrefix(s){R(i.extension,"defaultChatParticipant"),i.d=s,r()},get helpTextVariablesPrefix(){return R(i.extension,"defaultChatParticipant"),i.g},set helpTextVariablesPrefix(s){R(i.extension,"defaultChatParticipant"),i.g=s,r()},get helpTextPostfix(){return R(i.extension,"defaultChatParticipant"),i.j},set helpTextPostfix(s){R(i.extension,"defaultChatParticipant"),i.j=s,r()},get isSecondary(){return R(i.extension,"defaultChatParticipant"),i.k},set isSecondary(s){R(i.extension,"defaultChatParticipant"),i.k=s,r()},get supportIssueReporting(){return R(i.extension,"chatParticipantPrivate"),i.n},set supportIssueReporting(s){R(i.extension,"chatParticipantPrivate"),i.n=s,r()},get onDidReceiveFeedback(){return i.l.event},set participantVariableProvider(s){if(R(i.extension,"chatParticipantAdditions"),i.o=s,s){if(!s.triggerCharacters.length)throw new Error("triggerCharacters are required");i.x.$registerAgentCompletionsProvider(i.y,i.id,s.triggerCharacters)}else i.x.$unregisterAgentCompletionsProvider(i.y,i.id)},get participantVariableProvider(){return R(i.extension,"chatParticipantAdditions"),i.o},set welcomeMessageProvider(s){R(i.extension,"defaultChatParticipant"),i.q=s,r()},get welcomeMessageProvider(){return R(i.extension,"defaultChatParticipant"),i.q},set titleProvider(s){R(i.extension,"defaultChatParticipant"),i.s=s,r()},get titleProvider(){return R(i.extension,"defaultChatParticipant"),i.s},get onDidChangePauseState(){return R(i.extension,"chatParticipantAdditions"),i.w.event},onDidPerformAction:ct(this.extension,"chatParticipantAdditions")?this.m.event:void 0,set requester(s){i.t=s,r()},get requester(){return i.t},set supportsSlowReferences(s){R(i.extension,"chatParticipantPrivate"),i.u=s,r()},get supportsSlowReferences(){return R(i.extension,"chatParticipantPrivate"),i.u},dispose(){e=!0,i.b=void 0,i.l.dispose(),i.x.$unregisterAgent(i.y)}}}invoke(e,t,r,i){return this.z(e,t,r,i)}},iL=class h3{static{this.a=0}constructor(t){this.b=new Map,this.c=t.getProxy(z.MainThreadChatVariables)}async $resolveVariable(t,r,i,s){const n=this.b.get(t);if(n)try{if(n.resolver.resolve2){R(n.extension,"chatParticipantAdditions");const o=new sL(r,this.c),a=await n.resolver.resolve2(n.data.name,{prompt:i},o.apiObject,s);if(a&&a[0])return a[0].value}else{const o=await n.resolver.resolve(n.data.name,{prompt:i},s);if(o&&o[0])return o[0].value}}catch(o){ap(o)}}registerVariableResolver(t,r,i,s,n,o,a,c,l){const u=h3.a++,h=l?Mt.fromId(l):void 0;return this.b.set(u,{extension:t,data:{id:r,name:i,description:s,modelDescription:n,icon:h},resolver:a}),this.c.$registerVariable(u,{id:r,name:i,description:s,modelDescription:n,isSlow:o,fullName:c,icon:h}),ce(()=>{this.b.delete(u),this.c.$unregisterVariable(u)})}},sL=class{constructor(e,t){this.c=e,this.d=t,this.a=!1}close(){this.a=!0}get apiObject(){if(!this.b){let t=function(s){if(r.a){const n=new Error("Response stream has been closed");throw Error.captureStackTrace(n,s),n}};var e=t;const r=this,i=s=>{this.d.$handleProgressChunk(this.c,s)};this.b={progress(s){t(this.progress);const n=new Zc(s),o=Fn.from(n);return i(o),this},reference(s){t(this.reference);const n=new qi(s),o=Qi.from(n);return i(o),this},push(s){return t(this.push),s instanceof qi?i(Qi.from(s)):s instanceof Zc&&i(Fn.from(s)),this}}}return this.b}},nL=class{constructor(e){const t=e.getProxy(z.MainThreadClipboard);this.value=Object.freeze({readText(){return t.$readText()},writeText(r){return t.$writeText(r)}})}},Z8="vscode-cdn.net",oL=`vscode-resource.${Z8}`,r0=`'self' https://*.${Z8}`;function Ll(e,t){return e.scheme===q.http||e.scheme===q.https?e:(t&&t.authority&&t.isRemote&&e.scheme===q.file&&(e=y.from({scheme:q.vscodeRemote,authority:t.authority,path:e.path})),y.from({scheme:q.https,authority:`${e.scheme}+${aL(e.authority)}.${oL}`,path:e.path,fragment:e.fragment,query:e.query}))}function aL(e){return e.replace(/./g,t=>{const r=t.charCodeAt(0);return r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57?t:"-"+r.toString(16).padStart(4,"0")})}var cL=class{constructor(e,t,r){this.d=e,this.e=t,this.f=r,this.a=0,this.b=new me,this.c=new Map,this.b.add(t.onDidChangeVisibleTextEditors(()=>{const i=t.getVisibleTextEditors();for(const s of this.c.values())i.indexOf(s.editor)<0&&s.inset.dispose()}))}dispose(){this.c.forEach(e=>e.inset.dispose()),this.b.dispose()}createWebviewEditorInset(e,t,r,i,s){let n;for(const p of this.e.getVisibleTextEditors(!0))if(p.value===e){n=p;break}if(!n)throw new Error("not a visible editor");const o=this,a=this.a++,c=new D,l=new D,u=new class{constructor(){this.a="",this.b=Object.create(null)}asWebviewUri(p){return Ll(p,o.f)}get cspSource(){return r0}set options(p){this.b=p,o.d.$setOptions(a,p)}get options(){return this.b}set html(p){this.a=p,o.d.$setHtml(a,p)}get html(){return this.a}get onDidReceiveMessage(){return c.event}postMessage(p){return o.d.$postMessage(a,p)}},h=new class{constructor(){this.editor=e,this.line=t,this.height=r,this.webview=u,this.onDidDispose=l.event}dispose(){o.c.has(a)&&(o.c.delete(a),o.d.$disposeEditorInset(a),l.fire(),l.dispose(),c.dispose())}};return this.d.$createEditorInset(a,n.id,n.value.document.uri,t+1,r,i||{},s.identifier,s.extensionLocation),this.c.set(a,{editor:e,inset:h,onDidReceiveMessage:c}),h}$onDidDispose(e){const t=this.c.get(e);t&&t.inset.dispose()}$onDidReceiveMessage(e,t){this.c.get(e)?.onDidReceiveMessage.fire(t)}};function K8(e){return(t,r,i)=>{let s=null,n=null;if(typeof i.value=="function"?(s="value",n=i.value):typeof i.get=="function"&&(s="get",n=i.get),!n||typeof r=="symbol")throw new Error("not supported");i[s]=e(n,r)}}function i0(e,t,r){return K8((i,s)=>{const n=`$debounce$${s}`,o=`$debounce$result$${s}`;return function(...a){this[o]||(this[o]=r?r():void 0),clearTimeout(this[n]),t&&(this[o]=t(this[o],...a),a=[this[o]]),this[n]=setTimeout(()=>{i.apply(this,a),this[o]=r?r():void 0},e)}})}function lL(e,t,r){return K8((i,s)=>{const n=`$throttle$timer$${s}`,o=`$throttle$result$${s}`,a=`$throttle$lastRun$${s}`,c=`$throttle$pending$${s}`;return function(...l){if(this[o]||(this[o]=r?r():void 0),(this[a]===null||this[a]===void 0)&&(this[a]=-Number.MAX_VALUE),t&&(this[o]=t(this[o],...l)),this[c])return;const u=this[a]+e;u<=Date.now()?(this[a]=Date.now(),i.apply(this,[this[o]]),this[o]=r?r():void 0):(this[c]=!0,this[n]=setTimeout(()=>{this[c]=!1,this[a]=Date.now(),i.apply(this,[this[o]]),this[o]=r?r():void 0},u-Date.now()))}})}function uL(e,t,r){const i=e.getProxy(z.MainThreadComments);class s{static{this.a=0}constructor(){this.b=new Map,this.c=new Oi,t.registerArgumentProcessor({processArgument:m=>{if(m&&m.$mid===6){const w=this.b.get(m.handle);return w?w.value:m}else if(m&&m.$mid===7){const w=m,E=this.b.get(w.commentControlHandle);if(!E)return w;const $=E.getCommentThread(w.commentThreadHandle);return $?$.value:w}else if(m&&(m.$mid===9||m.$mid===8)){const w=this.b.get(m.thread.commentControlHandle);if(!w)return m;const E=w.getCommentThread(m.thread.commentThreadHandle);return E?m.$mid===8?E.value:{thread:E.value,text:m.text}:m}else if(m&&m.$mid===10){const w=this.b.get(m.thread.commentControlHandle);if(!w)return m;const E=w.getCommentThread(m.thread.commentThreadHandle);if(!E)return m;const $=m.commentUniqueId,S=E.getCommentByUniqueId($);return S||m}else if(m&&m.$mid===11){const w=this.b.get(m.thread.commentControlHandle);if(!w)return m;const E=w.getCommentThread(m.thread.commentThreadHandle);if(!E)return m;const $=m.text,S=m.commentUniqueId,P=E.getCommentByUniqueId(S);return P?(typeof P.body=="string"?P.body=$:P.body=new xr($),P):m}return m}})}createCommentController(m,w,E){const $=s.a++,S=new o(m,$,w,E);this.b.set(S.handle,S);const P=this.c.get(m.identifier)||[];return P.push(S),this.c.set(m.identifier,P),S.value}async $createCommentThreadTemplate(m,w,E,$){const S=this.b.get(m);S&&S.$createCommentThreadTemplate(w,E,$)}async $setActiveComment(m,w){const E=this.b.get(m);E&&E.$setActiveComment(w??void 0)}async $updateCommentThreadTemplate(m,w,E){const $=this.b.get(m);$&&$.$updateCommentThreadTemplate(w,E)}$deleteCommentThread(m,w){this.b.get(m)?.$deleteCommentThread(w)}async $updateCommentThread(m,w,E){this.b.get(m)?.$updateCommentThread(w,E)}async $provideCommentingRanges(m,w,E){const $=this.b.get(m);if(!$||!$.commentingRangeProvider)return Promise.resolve(void 0);const S=await r.ensureDocumentData(y.revive(w));return Wt(async()=>{const P=await $.commentingRangeProvider?.provideCommentingRanges(S.document,E);let O;return Array.isArray(P)?O={ranges:P,fileComments:!1}:P?O={ranges:P.ranges||[],fileComments:P.enableFileComments||!1}:O=P??void 0,O}).then(P=>{let O;return P&&(O={ranges:P.ranges.map(F=>M.from(F)),fileComments:P.fileComments}),O})}$toggleReaction(m,w,E,$,S){const P=this.b.get(m);return!P||!P.reactionHandler?Promise.resolve(void 0):Wt(()=>{const O=P.getCommentThread(w);if(O){const F=O.getCommentByUniqueId($.uniqueIdInThread);if(P!==void 0&&F&&P.reactionHandler)return P.reactionHandler(F,l(S))}return Promise.resolve(void 0)})}}class n{static{this.a=0}set threadId(m){this.n=m}get threadId(){return this.n}get id(){return this.n}get resource(){return this.o}get uri(){return this.o}set range(m){(m===void 0!=(this.p===void 0)||!m||!this.p||!m.isEqual(this.p))&&(this.p=m,this.b.range=m,this.c.fire())}get range(){return this.p}set canReply(m){this.d!==m&&(this.d=m,this.b.canReply=m,this.c.fire())}get canReply(){return this.d}get label(){return this.e}set label(m){this.e=m,this.b.label=m,this.c.fire()}get contextValue(){return this.f}set contextValue(m){this.f=m,this.b.contextValue=m,this.c.fire()}get comments(){return this.q}set comments(m){this.q=m,this.b.comments=m,this.c.fire()}get collapsibleState(){return this.g}set collapsibleState(m){this.g!==m&&(this.g=m,this.b.collapsibleState=m,this.c.fire())}get state(){return this.h}set state(m){this.h=m,typeof m=="object"?(R(this.extensionDescription,"commentThreadApplicability"),this.b.state=m.resolved,this.b.applicability=m.applicability):this.b.state=m,this.c.fire()}get isDisposed(){return this.j}constructor(m,w,E,$,S,P,O,F,W){this.m=w,this.n=E,this.o=$,this.p=S,this.q=P,this.extensionDescription=O,this.r=F,this.handle=n.a++,this.commentHandle=0,this.b=Object.create(null),this.c=new D,this.onDidUpdateCommentThread=this.c.event,this.d=!0,this.k=new Map,this.l=new us,this.l.value=new me,this.n===void 0&&(this.n=`${m}.${this.handle}`),i.$createCommentThread(w,this.handle,this.n,this.o,M.from(this.p),this.q.map(J=>a(this,J,this.k,this.extensionDescription)),O.identifier,this.r,W),this.i=[],this.j=!1,this.i.push(this.onDidUpdateCommentThread(()=>{this.eventuallyUpdateCommentThread()})),this.i.push({dispose:()=>{i.$deleteCommentThread(w,this.handle)}});const Z=this;this.value={get uri(){return Z.uri},get range(){return Z.range},set range(J){Z.range=J},get comments(){return Z.comments},set comments(J){Z.comments=J},get collapsibleState(){return Z.collapsibleState},set collapsibleState(J){Z.collapsibleState=J},get canReply(){return Z.canReply},set canReply(J){Z.canReply=J},get contextValue(){return Z.contextValue},set contextValue(J){Z.contextValue=J},get label(){return Z.label},set label(J){Z.label=J},get state(){return Z.state},set state(J){Z.state=J},reveal:(J,X)=>Z.reveal(J,X),hide:()=>Z.hide(),dispose:()=>{Z.dispose()}}}s(){this.r&&(this.r=!1,this.b.isTemplate=!1)}eventuallyUpdateCommentThread(){if(this.j)return;this.s(),this.l.value||(this.l.value=new me);const m=E=>Object.prototype.hasOwnProperty.call(this.b,E),w={};m("range")&&(w.range=M.from(this.p)),m("label")&&(w.label=this.label),m("contextValue")&&(w.contextValue=this.contextValue??null),m("comments")&&(w.comments=this.q.map(E=>a(this,E,this.k,this.extensionDescription))),m("collapsibleState")&&(w.collapseState=u(this.g)),m("canReply")&&(w.canReply=this.canReply),m("state")&&(w.state=h(this.h)),m("applicability")&&(w.applicability=p(this.h)),m("isTemplate")&&(w.isTemplate=this.r),this.b={},i.$updateCommentThread(this.m,this.handle,this.n,this.o,w)}getCommentByUniqueId(m){for(const w of this.k){const E=w[0],$=w[1];if(m===$)return E}}async reveal(m,w){R(this.extensionDescription,"commentReveal");let E;m&&m.body!==void 0?E=m:w=w??m;let $=E?this.k.get(E):void 0;$??=this.k.get(this.q[0]);let S=!0,P=!1;return w?.focus===zc.Reply?(P=!0,S=!1):w?.focus===zc.Comment&&(S=!1),i.$revealCommentThread(this.m,this.handle,$,{preserveFocus:S,focusReply:P})}async hide(){return i.$hideCommentThread(this.m,this.handle)}dispose(){this.j=!0,this.l.dispose(),this.i.forEach(m=>m.dispose())}}__decorate([i0(100)],n.prototype,"eventuallyUpdateCommentThread",null);class o{get id(){return this.j}get label(){return this.k}get handle(){return this.i}get commentingRangeProvider(){return this.b}set commentingRangeProvider(m){this.b=m,m?.resourceHints&&R(this.h,"commentingRangeHint"),i.$updateCommentingRanges(this.handle,m?.resourceHints)}get reactionHandler(){return this.c}set reactionHandler(m){this.c=m,i.$updateCommentControllerFeatures(this.handle,{reactionHandler:!!m})}get options(){return this.d}set options(m){this.d=m,i.$updateCommentControllerFeatures(this.handle,{options:this.d})}get activeComment(){return R(this.h,"activeComment"),this.e}get activeCommentThread(){return R(this.h,"activeComment"),this.f?.value}constructor(m,w,E,$){this.h=m,this.i=w,this.j=E,this.k=$,this.a=new Map,i.$registerCommentController(this.handle,E,$,this.h.identifier.value);const S=this;this.value=Object.freeze({id:S.id,label:S.label,get options(){return S.options},set options(P){S.options=P},get commentingRangeProvider(){return S.commentingRangeProvider},set commentingRangeProvider(P){S.commentingRangeProvider=P},get reactionHandler(){return S.reactionHandler},set reactionHandler(P){S.reactionHandler=P},get activeCommentThread(){return S.activeCommentThread},createCommentThread(P,O,F){return S.createCommentThread(P,O,F).value},dispose:()=>{S.dispose()}}),this.g=[],this.g.push({dispose:()=>{i.$unregisterCommentController(this.handle)}})}createCommentThread(m,w,E){const $=new n(this.id,this.handle,void 0,m,w,E,this.h,!1);return this.a.set($.handle,$),$}$setActiveComment(m){if(!m){this.e=void 0,this.f=void 0;return}const w=this.a.get(m.commentThreadHandle);w&&(this.e=m.uniqueIdInThread?w.getCommentByUniqueId(m.uniqueIdInThread):void 0,this.f=w)}$createCommentThreadTemplate(m,w,E){const $=new n(this.id,this.handle,void 0,y.revive(m),M.to(w),[],this.h,!0,E);return $.collapsibleState=mo.Expanded,this.a.set($.handle,$),$}$updateCommentThreadTemplate(m,w){const E=this.a.get(m);E&&(E.range=M.to(w))}$updateCommentThread(m,w){const E=this.a.get(m);if(!E)return;(S=>Object.prototype.hasOwnProperty.call(w,S))("collapseState")&&(E.collapsibleState=u(w.collapseState))}$deleteCommentThread(m){this.a.get(m)?.dispose(),this.a.delete(m)}getCommentThread(m){return this.a.get(m)}dispose(){this.a.forEach(m=>{m.dispose()}),this.g.forEach(m=>m.dispose())}}function a(f,m,w,E){let $=w.get(m);return $||($=++f.commentHandle,w.set(m,$)),m.state!==void 0&&R(E,"commentsDraftState"),m.reactions?.some(S=>S.reactors!==void 0)&&R(E,"commentReactor"),{mode:m.mode,contextValue:m.contextValue,uniqueIdInThread:$,body:typeof m.body=="string"?m.body:be.from(m.body),userName:m.author.name,userIconPath:m.author.iconPath,label:m.label,commentReactions:m.reactions?m.reactions.map(S=>c(S)):void 0,state:m.state,timestamp:m.timestamp?.toJSON()}}function c(f){return{label:f.label,iconPath:f.iconPath?bd(f.iconPath):void 0,count:f.count,hasReacted:f.authorHasReacted,reactors:f.reactors&&f.reactors.length>0&&typeof f.reactors[0]!="string"?f.reactors.map(m=>m.name):f.reactors}}function l(f){return{label:f.label||"",count:f.count||0,iconPath:f.iconPath?y.revive(f.iconPath):"",authorHasReacted:f.hasReacted||!1,reactors:f.reactors?.map(m=>({name:m}))}}function u(f){if(f!==void 0)switch(f){case jc.Expanded:return mo.Expanded;case jc.Collapsed:return mo.Collapsed}return mo.Collapsed}function h(f){let m;if(typeof f=="object"?m=f.resolved:m=f,m!==void 0)switch(m){case Bc.Unresolved:return ac.Unresolved;case Bc.Resolved:return ac.Resolved}return ac.Unresolved}function p(f){let m;if(typeof f=="object"&&(m=f.applicability),m!==void 0)switch(m){case _c.Current:return cc.Current;case _c.Outdated:return cc.Outdated}return cc.Current}return new s}var yf={},Pe={exports:yf};(function(e,t){if(typeof yf=="object"&&typeof Pe=="object")Pe.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var r=t();for(var i in r)(typeof yf=="object"?yf:e)[i]=r[i]}})(typeof self<"u"?self:void 0,function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var s=t[i]={i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(i,s,n){r.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:n})},r.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},r.t=function(i,s){if(1&s&&(i=r(i)),8&s||4&s&&typeof i=="object"&&i&&i.__esModule)return i;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:i}),2&s&&typeof i!="string")for(var o in i)r.d(n,o,function(a){return i[a]}.bind(null,o));return n},r.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return r.d(s,"a",s),s},r.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},r.p="",r(r.s=0)}([function(e,t,r){(function(i){var s;t=e.exports=Oe,s=typeof i=="object"&&i.env&&i.env.NODE_DEBUG&&/\bsemver\b/i.test(i.env.NODE_DEBUG)?function(){var I=Array.prototype.slice.call(arguments,0);I.unshift("SEMVER"),console.log.apply(console,I)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,a=t.re=[],c=t.src=[],l=0,u=l++;c[u]="0|[1-9]\\d*";var h=l++;c[h]="[0-9]+";var p=l++;c[p]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=l++;c[f]="("+c[u]+")\\.("+c[u]+")\\.("+c[u]+")";var m=l++;c[m]="("+c[h]+")\\.("+c[h]+")\\.("+c[h]+")";var w=l++;c[w]="(?:"+c[u]+"|"+c[p]+")";var E=l++;c[E]="(?:"+c[h]+"|"+c[p]+")";var $=l++;c[$]="(?:-("+c[w]+"(?:\\."+c[w]+")*))";var S=l++;c[S]="(?:-?("+c[E]+"(?:\\."+c[E]+")*))";var P=l++;c[P]="[0-9A-Za-z-]+";var O=l++;c[O]="(?:\\+("+c[P]+"(?:\\."+c[P]+")*))";var F=l++,W="v?"+c[f]+c[$]+"?"+c[O]+"?";c[F]="^"+W+"$";var Z="[v=\\s]*"+c[m]+c[S]+"?"+c[O]+"?",J=l++;c[J]="^"+Z+"$";var X=l++;c[X]="((?:<|>)?=?)";var Se=l++;c[Se]=c[h]+"|x|X|\\*";var de=l++;c[de]=c[u]+"|x|X|\\*";var et=l++;c[et]="[v=\\s]*("+c[de]+")(?:\\.("+c[de]+")(?:\\.("+c[de]+")(?:"+c[$]+")?"+c[O]+"?)?)?";var rt=l++;c[rt]="[v=\\s]*("+c[Se]+")(?:\\.("+c[Se]+")(?:\\.("+c[Se]+")(?:"+c[S]+")?"+c[O]+"?)?)?";var G=l++;c[G]="^"+c[X]+"\\s*"+c[et]+"$";var j=l++;c[j]="^"+c[X]+"\\s*"+c[rt]+"$";var Q=l++;c[Q]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var B=l++;c[B]="(?:~>?)";var re=l++;c[re]="(\\s*)"+c[B]+"\\s+",a[re]=new RegExp(c[re],"g");var pe=l++;c[pe]="^"+c[B]+c[et]+"$";var ne=l++;c[ne]="^"+c[B]+c[rt]+"$";var qe=l++;c[qe]="(?:\\^)";var Be=l++;c[Be]="(\\s*)"+c[qe]+"\\s+",a[Be]=new RegExp(c[Be],"g");var kt=l++;c[kt]="^"+c[qe]+c[et]+"$";var bt=l++;c[bt]="^"+c[qe]+c[rt]+"$";var Ot=l++;c[Ot]="^"+c[X]+"\\s*("+Z+")$|^$";var Ze=l++;c[Ze]="^"+c[X]+"\\s*("+W+")$|^$";var Vt=l++;c[Vt]="(\\s*)"+c[X]+"\\s*("+Z+"|"+c[et]+")",a[Vt]=new RegExp(c[Vt],"g");var as=l++;c[as]="^\\s*("+c[et]+")\\s+-\\s+("+c[et]+")\\s*$";var Di=l++;c[Di]="^\\s*("+c[rt]+")\\s+-\\s+("+c[rt]+")\\s*$";var zs=l++;c[zs]="(<|>)?=?\\s*\\*";for(var ye=0;ye<35;ye++)s(ye,c[ye]),a[ye]||(a[ye]=new RegExp(c[ye]));function Pi(I,T){if(I instanceof Oe)return I;if(typeof I!="string"||I.length>n||!(T?a[J]:a[F]).test(I))return null;try{return new Oe(I,T)}catch{return null}}function Oe(I,T){if(I instanceof Oe){if(I.loose===T)return I;I=I.version}else if(typeof I!="string")throw new TypeError("Invalid Version: "+I);if(I.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof Oe))return new Oe(I,T);s("SemVer",I,T),this.loose=T;var N=I.trim().match(T?a[J]:a[F]);if(!N)throw new TypeError("Invalid Version: "+I);if(this.raw=I,this.major=+N[1],this.minor=+N[2],this.patch=+N[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");N[4]?this.prerelease=N[4].split(".").map(function(se){if(/^[0-9]+$/.test(se)){var fe=+se;if(fe>=0&&fe<o)return fe}return se}):this.prerelease=[],this.build=N[5]?N[5].split("."):[],this.format()}t.parse=Pi,t.valid=function(I,T){var N=Pi(I,T);return N?N.version:null},t.clean=function(I,T){var N=Pi(I.trim().replace(/^[=v]+/,""),T);return N?N.version:null},t.SemVer=Oe,Oe.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Oe.prototype.toString=function(){return this.version},Oe.prototype.compare=function(I){return s("SemVer.compare",this.version,this.loose,I),I instanceof Oe||(I=new Oe(I,this.loose)),this.compareMain(I)||this.comparePre(I)},Oe.prototype.compareMain=function(I){return I instanceof Oe||(I=new Oe(I,this.loose)),Fr(this.major,I.major)||Fr(this.minor,I.minor)||Fr(this.patch,I.patch)},Oe.prototype.comparePre=function(I){if(I instanceof Oe||(I=new Oe(I,this.loose)),this.prerelease.length&&!I.prerelease.length)return-1;if(!this.prerelease.length&&I.prerelease.length)return 1;if(!this.prerelease.length&&!I.prerelease.length)return 0;var T=0;do{var N=this.prerelease[T],se=I.prerelease[T];if(s("prerelease compare",T,N,se),N===void 0&&se===void 0)return 0;if(se===void 0)return 1;if(N===void 0)return-1;if(N!==se)return Fr(N,se)}while(++T)},Oe.prototype.inc=function(I,T){switch(I){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",T);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",T);break;case"prepatch":this.prerelease.length=0,this.inc("patch",T),this.inc("pre",T);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",T),this.inc("pre",T);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var N=this.prerelease.length;--N>=0;)typeof this.prerelease[N]=="number"&&(this.prerelease[N]++,N=-2);N===-1&&this.prerelease.push(0)}T&&(this.prerelease[0]===T?isNaN(this.prerelease[1])&&(this.prerelease=[T,0]):this.prerelease=[T,0]);break;default:throw new Error("invalid increment argument: "+I)}return this.format(),this.raw=this.version,this},t.inc=function(I,T,N,se){typeof N=="string"&&(se=N,N=void 0);try{return new Oe(I,N).inc(T,se).version}catch{return null}},t.diff=function(I,T){if(Da(I,T))return null;var N=Pi(I),se=Pi(T);if(N.prerelease.length||se.prerelease.length){for(var fe in N)if((fe==="major"||fe==="minor"||fe==="patch")&&N[fe]!==se[fe])return"pre"+fe;return"prerelease"}for(var fe in N)if((fe==="major"||fe==="minor"||fe==="patch")&&N[fe]!==se[fe])return fe},t.compareIdentifiers=Fr;var ci=/^[0-9]+$/;function Fr(I,T){var N=ci.test(I),se=ci.test(T);return N&&se&&(I=+I,T=+T),N&&!se?-1:se&&!N?1:I<T?-1:I>T?1:0}function Mr(I,T,N){return new Oe(I,N).compare(new Oe(T,N))}function qn(I,T,N){return Mr(I,T,N)>0}function Gn(I,T,N){return Mr(I,T,N)<0}function Da(I,T,N){return Mr(I,T,N)===0}function Pa(I,T,N){return Mr(I,T,N)!==0}function Aa(I,T,N){return Mr(I,T,N)>=0}function Qn(I,T,N){return Mr(I,T,N)<=0}function Jn(I,T,N,se){var fe;switch(T){case"===":typeof I=="object"&&(I=I.version),typeof N=="object"&&(N=N.version),fe=I===N;break;case"!==":typeof I=="object"&&(I=I.version),typeof N=="object"&&(N=N.version),fe=I!==N;break;case"":case"=":case"==":fe=Da(I,N,se);break;case"!=":fe=Pa(I,N,se);break;case">":fe=qn(I,N,se);break;case">=":fe=Aa(I,N,se);break;case"<":fe=Gn(I,N,se);break;case"<=":fe=Qn(I,N,se);break;default:throw new TypeError("Invalid operator: "+T)}return fe}function qt(I,T){if(I instanceof qt){if(I.loose===T)return I;I=I.value}if(!(this instanceof qt))return new qt(I,T);s("comparator",I,T),this.loose=T,this.parse(I),this.semver===Ai?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}t.rcompareIdentifiers=function(I,T){return Fr(T,I)},t.major=function(I,T){return new Oe(I,T).major},t.minor=function(I,T){return new Oe(I,T).minor},t.patch=function(I,T){return new Oe(I,T).patch},t.compare=Mr,t.compareLoose=function(I,T){return Mr(I,T,!0)},t.rcompare=function(I,T,N){return Mr(T,I,N)},t.sort=function(I,T){return I.sort(function(N,se){return t.compare(N,se,T)})},t.rsort=function(I,T){return I.sort(function(N,se){return t.rcompare(N,se,T)})},t.gt=qn,t.lt=Gn,t.eq=Da,t.neq=Pa,t.gte=Aa,t.lte=Qn,t.cmp=Jn,t.Comparator=qt;var Ai={};function lt(I,T){if(I instanceof lt)return I.loose===T?I:new lt(I.raw,T);if(I instanceof qt)return new lt(I.value,T);if(!(this instanceof lt))return new lt(I,T);if(this.loose=T,this.raw=I,this.set=I.split(/\s*\|\|\s*/).map(function(N){return this.parseRange(N.trim())},this).filter(function(N){return N.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+I);this.format()}function zt(I){return!I||I.toLowerCase()==="x"||I==="*"}function cs(I,T,N,se,fe,At,Ae,Gt,ft,Ut,fr,ut,x){return((T=zt(N)?"":zt(se)?">="+N+".0.0":zt(fe)?">="+N+"."+se+".0":">="+T)+" "+(Gt=zt(ft)?"":zt(Ut)?"<"+(+ft+1)+".0.0":zt(fr)?"<"+ft+"."+(+Ut+1)+".0":ut?"<="+ft+"."+Ut+"."+fr+"-"+ut:"<="+Gt)).trim()}function ip(I,T){for(var N=0;N<I.length;N++)if(!I[N].test(T))return!1;if(T.prerelease.length){for(N=0;N<I.length;N++)if(s(I[N].semver),I[N].semver!==Ai&&I[N].semver.prerelease.length>0){var se=I[N].semver;if(se.major===T.major&&se.minor===T.minor&&se.patch===T.patch)return!0}return!1}return!0}function Xn(I,T,N){try{T=new lt(T,N)}catch{return!1}return T.test(I)}function Ti(I,T,N,se){var fe,At,Ae,Gt,ft;switch(I=new Oe(I,se),T=new lt(T,se),N){case">":fe=qn,At=Qn,Ae=Gn,Gt=">",ft=">=";break;case"<":fe=Gn,At=Aa,Ae=qn,Gt="<",ft="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Xn(I,T,se))return!1;for(var Ut=0;Ut<T.set.length;++Ut){var fr=T.set[Ut],ut=null,x=null;if(fr.forEach(function(pt){pt.semver===Ai&&(pt=new qt(">=0.0.0")),ut=ut||pt,x=x||pt,fe(pt.semver,ut.semver,se)?ut=pt:Ae(pt.semver,x.semver,se)&&(x=pt)}),ut.operator===Gt||ut.operator===ft||(!x.operator||x.operator===Gt)&&At(I,x.semver)||x.operator===ft&&Ae(I,x.semver))return!1}return!0}qt.prototype.parse=function(I){var T=this.loose?a[Ot]:a[Ze],N=I.match(T);if(!N)throw new TypeError("Invalid comparator: "+I);this.operator=N[1],this.operator==="="&&(this.operator=""),N[2]?this.semver=new Oe(N[2],this.loose):this.semver=Ai},qt.prototype.toString=function(){return this.value},qt.prototype.test=function(I){return s("Comparator.test",I,this.loose),this.semver===Ai||(typeof I=="string"&&(I=new Oe(I,this.loose)),Jn(I,this.operator,this.semver,this.loose))},qt.prototype.intersects=function(I,T){if(!(I instanceof qt))throw new TypeError("a Comparator is required");var N;if(this.operator==="")return N=new lt(I.value,T),Xn(this.value,N,T);if(I.operator==="")return N=new lt(this.value,T),Xn(I.semver,N,T);var se=!(this.operator!==">="&&this.operator!==">"||I.operator!==">="&&I.operator!==">"),fe=!(this.operator!=="<="&&this.operator!=="<"||I.operator!=="<="&&I.operator!=="<"),At=this.semver.version===I.semver.version,Ae=!(this.operator!==">="&&this.operator!=="<="||I.operator!==">="&&I.operator!=="<="),Gt=Jn(this.semver,"<",I.semver,T)&&(this.operator===">="||this.operator===">")&&(I.operator==="<="||I.operator==="<"),ft=Jn(this.semver,">",I.semver,T)&&(this.operator==="<="||this.operator==="<")&&(I.operator===">="||I.operator===">");return se||fe||At&&Ae||Gt||ft},t.Range=lt,lt.prototype.format=function(){return this.range=this.set.map(function(I){return I.join(" ").trim()}).join("||").trim(),this.range},lt.prototype.toString=function(){return this.range},lt.prototype.parseRange=function(I){var T=this.loose;I=I.trim(),s("range",I,T);var N=T?a[Di]:a[as];I=I.replace(N,cs),s("hyphen replace",I),I=I.replace(a[Vt],"$1$2$3"),s("comparator trim",I,a[Vt]),I=(I=(I=I.replace(a[re],"$1~")).replace(a[Be],"$1^")).split(/\s+/).join(" ");var se=T?a[Ot]:a[Ze],fe=I.split(" ").map(function(At){return function(Ae,Gt){return s("comp",Ae),Ae=function(ft,Ut){return ft.trim().split(/\s+/).map(function(fr){return function(ut,x){s("caret",ut,x);var pt=x?a[bt]:a[kt];return ut.replace(pt,function(Zt,H,Y,Ke,ot){var Tt;return s("caret",ut,Zt,H,Y,Ke,ot),zt(H)?Tt="":zt(Y)?Tt=">="+H+".0.0 <"+(+H+1)+".0.0":zt(Ke)?Tt=H==="0"?">="+H+"."+Y+".0 <"+H+"."+(+Y+1)+".0":">="+H+"."+Y+".0 <"+(+H+1)+".0.0":ot?(s("replaceCaret pr",ot),ot.charAt(0)!=="-"&&(ot="-"+ot),Tt=H==="0"?Y==="0"?">="+H+"."+Y+"."+Ke+ot+" <"+H+"."+Y+"."+(+Ke+1):">="+H+"."+Y+"."+Ke+ot+" <"+H+"."+(+Y+1)+".0":">="+H+"."+Y+"."+Ke+ot+" <"+(+H+1)+".0.0"):(s("no pr"),Tt=H==="0"?Y==="0"?">="+H+"."+Y+"."+Ke+" <"+H+"."+Y+"."+(+Ke+1):">="+H+"."+Y+"."+Ke+" <"+H+"."+(+Y+1)+".0":">="+H+"."+Y+"."+Ke+" <"+(+H+1)+".0.0"),s("caret return",Tt),Tt})}(fr,Ut)}).join(" ")}(Ae,Gt),s("caret",Ae),Ae=function(ft,Ut){return ft.trim().split(/\s+/).map(function(fr){return function(ut,x){var pt=x?a[ne]:a[pe];return ut.replace(pt,function(Zt,H,Y,Ke,ot){var Tt;return s("tilde",ut,Zt,H,Y,Ke,ot),zt(H)?Tt="":zt(Y)?Tt=">="+H+".0.0 <"+(+H+1)+".0.0":zt(Ke)?Tt=">="+H+"."+Y+".0 <"+H+"."+(+Y+1)+".0":ot?(s("replaceTilde pr",ot),ot.charAt(0)!=="-"&&(ot="-"+ot),Tt=">="+H+"."+Y+"."+Ke+ot+" <"+H+"."+(+Y+1)+".0"):Tt=">="+H+"."+Y+"."+Ke+" <"+H+"."+(+Y+1)+".0",s("tilde return",Tt),Tt})}(fr,Ut)}).join(" ")}(Ae,Gt),s("tildes",Ae),Ae=function(ft,Ut){return s("replaceXRanges",ft,Ut),ft.split(/\s+/).map(function(fr){return function(ut,x){ut=ut.trim();var pt=x?a[j]:a[G];return ut.replace(pt,function(Zt,H,Y,Ke,ot,Tt){s("xRange",ut,Zt,H,Y,Ke,ot,Tt);var Kl=zt(Y),li=Kl||zt(Ke),Ws=li||zt(ot);return H==="="&&Ws&&(H=""),Kl?Zt=H===">"||H==="<"?"<0.0.0":"*":H&&Ws?(li&&(Ke=0),Ws&&(ot=0),H===">"?(H=">=",li?(Y=+Y+1,Ke=0,ot=0):Ws&&(Ke=+Ke+1,ot=0)):H==="<="&&(H="<",li?Y=+Y+1:Ke=+Ke+1),Zt=H+Y+"."+Ke+"."+ot):li?Zt=">="+Y+".0.0 <"+(+Y+1)+".0.0":Ws&&(Zt=">="+Y+"."+Ke+".0 <"+Y+"."+(+Ke+1)+".0"),s("xRange return",Zt),Zt})}(fr,Ut)}).join(" ")}(Ae,Gt),s("xrange",Ae),Ae=function(ft,Ut){return s("replaceStars",ft,Ut),ft.trim().replace(a[zs],"")}(Ae,Gt),s("stars",Ae),Ae}(At,T)}).join(" ").split(/\s+/);return this.loose&&(fe=fe.filter(function(At){return!!At.match(se)})),fe=fe.map(function(At){return new qt(At,T)})},lt.prototype.intersects=function(I,T){if(!(I instanceof lt))throw new TypeError("a Range is required");return this.set.some(function(N){return N.every(function(se){return I.set.some(function(fe){return fe.every(function(At){return se.intersects(At,T)})})})})},t.toComparators=function(I,T){return new lt(I,T).set.map(function(N){return N.map(function(se){return se.value}).join(" ").trim().split(" ")})},lt.prototype.test=function(I){if(!I)return!1;typeof I=="string"&&(I=new Oe(I,this.loose));for(var T=0;T<this.set.length;T++)if(ip(this.set[T],I))return!0;return!1},t.satisfies=Xn,t.maxSatisfying=function(I,T,N){var se=null,fe=null;try{var At=new lt(T,N)}catch{return null}return I.forEach(function(Ae){At.test(Ae)&&(se&&fe.compare(Ae)!==-1||(fe=new Oe(se=Ae,N)))}),se},t.minSatisfying=function(I,T,N){var se=null,fe=null;try{var At=new lt(T,N)}catch{return null}return I.forEach(function(Ae){At.test(Ae)&&(se&&fe.compare(Ae)!==1||(fe=new Oe(se=Ae,N)))}),se},t.validRange=function(I,T){try{return new lt(I,T).range||"*"}catch{return null}},t.ltr=function(I,T,N){return Ti(I,T,"<",N)},t.gtr=function(I,T,N){return Ti(I,T,">",N)},t.outside=Ti,t.prerelease=function(I,T){var N=Pi(I,T);return N&&N.prerelease.length?N.prerelease:null},t.intersects=function(I,T,N){return I=new lt(I,N),T=new lt(T,N),I.intersects(T)},t.coerce=function(I){if(I instanceof Oe)return I;if(typeof I!="string")return null;var T=I.match(a[Q]);return T==null?null:Pi((T[1]||"0")+"."+(T[2]||"0")+"."+(T[3]||"0"))}}).call(this,r(1))},function(e,t){var r,i,s=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(E){if(r===setTimeout)return setTimeout(E,0);if((r===n||!r)&&setTimeout)return r=setTimeout,setTimeout(E,0);try{return r(E,0)}catch{try{return r.call(null,E,0)}catch{return r.call(this,E,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:n}catch{r=n}try{i=typeof clearTimeout=="function"?clearTimeout:o}catch{i=o}})();var c,l=[],u=!1,h=-1;function p(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&f())}function f(){if(!u){var E=a(p);u=!0;for(var $=l.length;$;){for(c=l,l=[];++h<$;)c&&c[h].run();h=-1,$=l.length}c=null,u=!1,function(S){if(i===clearTimeout)return clearTimeout(S);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(S);try{i(S)}catch{try{return i.call(null,S)}catch{return i.call(this,S)}}}(E)}}function m(E,$){this.fun=E,this.array=$}function w(){}s.nextTick=function(E){var $=new Array(arguments.length-1);if(arguments.length>1)for(var S=1;S<arguments.length;S++)$[S-1]=arguments[S];l.push(new m(E,$)),l.length!==1||u||a(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=w,s.addListener=w,s.once=w,s.off=w,s.removeListener=w,s.removeAllListeners=w,s.emit=w,s.prependListener=w,s.prependOnceListener=w,s.listeners=function(E){return[]},s.binding=function(E){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(E){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}}])});var yB=Pe.exports.SEMVER_SPEC_VERSION,EB=Pe.exports.parse,xB=Pe.exports.valid,kB=Pe.exports.coerce,$B=Pe.exports.clean,SB=Pe.exports.inc,IB=Pe.exports.major,CB=Pe.exports.minor,DB=Pe.exports.patch,PB=Pe.exports.prerelease,AB=Pe.exports.gt,TB=Pe.exports.gte,RB=Pe.exports.lt,LB=Pe.exports.lte,NB=Pe.exports.eq,FB=Pe.exports.neq,MB=Pe.exports.cmp,OB=Pe.exports.compare,UB=Pe.exports.rcompare,HB=Pe.exports.compareIdentifiers,jB=Pe.exports.rcompareIdentifiers,BB=Pe.exports.compareBuild,_B=Pe.exports.sort,zB=Pe.exports.rsort,WB=Pe.exports.diff,VB=Pe.exports.validRange,qB=Pe.exports.satisfies,GB=Pe.exports.maxSatisfying,QB=Pe.exports.minSatisfying,JB=Pe.exports.minVersion,XB=Pe.exports.gtr,YB=Pe.exports.ltr,ZB=Pe.exports.outside,KB=Pe.exports.intersects,e_=Pe.exports.SemVer,t_=Pe.exports.Comparator,r_=Pe.exports.Range,eE=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/,hL=/^-(\d{4})(\d{2})(\d{2})$/;function dL(e){return e=e.trim(),e==="*"||eE.test(e)}function tE(e){if(!dL(e))return null;if(e=e.trim(),e==="*")return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};const t=e.match(eE);return t?{hasCaret:t[1]==="^",hasGreaterEquals:t[1]===">=",majorBase:t[2]==="x"?0:parseInt(t[2],10),majorMustEqual:t[2]!=="x",minorBase:t[4]==="x"?0:parseInt(t[4],10),minorMustEqual:t[4]!=="x",patchBase:t[6]==="x"?0:parseInt(t[6],10),patchMustEqual:t[6]!=="x",preRelease:t[8]||null}:null}function rE(e){if(!e)return null;const t=e.majorBase,r=e.majorMustEqual,i=e.minorBase;let s=e.minorMustEqual;const n=e.patchBase;let o=e.patchMustEqual;e.hasCaret&&(t===0||(s=!1),o=!1);let a=0;if(e.preRelease){const c=hL.exec(e.preRelease);if(c){const[,l,u,h]=c;a=Date.UTC(Number(l),Number(u)-1,Number(h))}}return{majorBase:t,majorMustEqual:r,minorBase:i,minorMustEqual:s,patchBase:n,patchMustEqual:o,isMinimum:e.hasGreaterEquals,notBefore:a}}var fL=class{constructor(){this.buffers=[]}add(e){let t=this.buffers.indexOf(e);return t<0&&(t=this.buffers.length,this.buffers.push(e)),t}};function pL(e,t){if(t.serializeBuffersForPostMessage){const r=new fL,s=JSON.stringify(e,(o,a)=>{if(a instanceof ArrayBuffer)return{$$vscode_array_buffer_reference$$:!0,index:r.add(a)};if(ArrayBuffer.isView(a)){const c=gL(a);if(c)return{$$vscode_array_buffer_reference$$:!0,index:r.add(a.buffer),view:{type:c,byteLength:a.byteLength,byteOffset:a.byteOffset}}}return a}),n=r.buffers.map(o=>{const a=new Uint8Array(o);return ke.wrap(a)});return{message:s,buffers:n}}else return{message:JSON.stringify(e),buffers:[]}}function gL(e){switch(e.constructor.name){case"Int8Array":return 1;case"Uint8Array":return 2;case"Uint8ClampedArray":return 3;case"Int16Array":return 4;case"Uint16Array":return 5;case"Int32Array":return 6;case"Uint32Array":return 7;case"Float32Array":return 8;case"Float64Array":return 9;case"BigInt64Array":return 10;case"BigUint64Array":return 11}}function mL(e,t){const r=t.map(n=>{const o=new ArrayBuffer(n.byteLength);return new Uint8Array(o).set(n.buffer),o}),i=t.length?(n,o)=>{if(o&&typeof o=="object"&&o.$$vscode_array_buffer_reference$$){const a=o,{index:c}=a,l=r[c];if(a.view)switch(a.view.type){case 1:return new Int8Array(l,a.view.byteOffset,a.view.byteLength/Int8Array.BYTES_PER_ELEMENT);case 2:return new Uint8Array(l,a.view.byteOffset,a.view.byteLength/Uint8Array.BYTES_PER_ELEMENT);case 3:return new Uint8ClampedArray(l,a.view.byteOffset,a.view.byteLength/Uint8ClampedArray.BYTES_PER_ELEMENT);case 4:return new Int16Array(l,a.view.byteOffset,a.view.byteLength/Int16Array.BYTES_PER_ELEMENT);case 5:return new Uint16Array(l,a.view.byteOffset,a.view.byteLength/Uint16Array.BYTES_PER_ELEMENT);case 6:return new Int32Array(l,a.view.byteOffset,a.view.byteLength/Int32Array.BYTES_PER_ELEMENT);case 7:return new Uint32Array(l,a.view.byteOffset,a.view.byteLength/Uint32Array.BYTES_PER_ELEMENT);case 8:return new Float32Array(l,a.view.byteOffset,a.view.byteLength/Float32Array.BYTES_PER_ELEMENT);case 9:return new Float64Array(l,a.view.byteOffset,a.view.byteLength/Float64Array.BYTES_PER_ELEMENT);case 10:return new BigInt64Array(l,a.view.byteOffset,a.view.byteLength/BigInt64Array.BYTES_PER_ELEMENT);case 11:return new BigUint64Array(l,a.view.byteOffset,a.view.byteLength/BigUint64Array.BYTES_PER_ELEMENT);default:throw new Error("Unknown array buffer view type")}return l}return o}:void 0;return{message:JSON.parse(e,i),arrayBuffers:r}}var vL=class{#e;#t;#r;#i;#n;#s;#a;#o;#c;#l;#u;#d;constructor(e,t,r,i,s,n,o){this.#a="",this.#c=!1,this.#l=!1,this._onMessageEmitter=new D,this.onDidReceiveMessage=this._onMessageEmitter.event,this.#h=new D,this._onDidDispose=this.#h.event,this.#e=e,this.#t=t,this.#o=r,this.#i=i,this.#n=s,this.#s=n,this.#u=ya(n),this.#d=wL(n),this.#r=o}#h;dispose(){this.#c=!0,this.#h.fire(),this.#h.dispose(),this._onMessageEmitter.dispose()}asWebviewUri(e){return this.#l=!0,Ll(e,this.#i)}get cspSource(){const e=this.#s.extensionLocation;if(e.scheme===q.https||e.scheme===q.http){let t=e.toString();return t.endsWith("/")||(t+="/"),t+" "+r0}return r0}get html(){return this.a(),this.#a}set html(e){this.a(),this.#a!==e&&(this.#a=e,this.#d&&!this.#l&&/(["'])vscode-resource:([^\s'"]+?)(["'])/i.test(e)&&(this.#l=!0,this.#r.report("Webview vscode-resource: uris",this.#s,"Please migrate to use the 'webview.asWebviewUri' api instead: https://aka.ms/vscode-webview-use-aswebviewuri")),this.#t.$setHtml(this.#e,this.b(e)))}get options(){return this.a(),this.#o}set options(e){this.a(),Qr(this.#o,e)||this.#t.$setOptions(this.#e,iE(this.#s,this.#n,e)),this.#o=e}async postMessage(e){if(this.#c)return!1;const t=pL(e,{serializeBuffersForPostMessage:this.#u});return this.#t.$postMessage(this.#e,t.message,...t.buffers)}a(){if(this.#c)throw new Error("Webview is disposed")}b(e){if(!this.#d)return e;const t=this.#s.extensionLocation?.scheme===q.vscodeRemote,r=this.#s.extensionLocation.scheme===q.vscodeRemote?this.#s.extensionLocation.authority:void 0;return e.replace(/(["'])(?:vscode-resource):(\/\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(i,s,n,o,a,c)=>{const l=y.from({scheme:o||"file",path:decodeURIComponent(a)}),u=Ll(l,{isRemote:t,authority:r}).toString();return`${s}${u}${c}`}).replace(/(["'])(?:vscode-webview-resource):(\/\/[^\s\/'"]+\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(i,s,n,o,a,c)=>{const l=y.from({scheme:o||"file",path:decodeURIComponent(a)}),u=Ll(l,{isRemote:t,authority:r}).toString();return`${s}${u}${c}`})}};function ya(e){try{const t=rE(tE(e.engines.vscode));return!!t&&t.majorBase>=1&&t.minorBase>=57}catch{return!1}}function wL(e){try{const t=rE(tE(e.engines.vscode));return t?t.majorBase<1||t.majorBase===1&&t.minorBase<60:!1}catch{return!1}}var bL=class extends he{constructor(e,t,r,i,s){super(),this.c=t,this.f=r,this.g=i,this.h=s,this.b=new Map,this.a=e.getProxy(z.MainThreadWebviews)}dispose(){super.dispose();for(const e of this.b.values())e.dispose();this.b.clear()}$onMessage(e,t,r){const i=this.j(e);if(i){const{message:s}=mL(t,r.value);i._onMessageEmitter.fire(s)}}$onMissingCsp(e,t){this.g.warn(`${t} created a webview without a content security policy: https://aka.ms/vscode-webview-missing-csp`)}createNewWebview(e,t,r){const i=new vL(e,this.a,yL(t),this.c,this.f,r,this.h);this.b.set(e,i);const s=i._onDidDispose(()=>{s.dispose(),this.deleteWebview(e)});return i}deleteWebview(e){this.b.delete(e)}j(e){return this.b.get(e)}};function Ef(e){return{id:e.identifier,location:e.extensionLocation}}function iE(e,t,r){return{enableCommandUris:r.enableCommandUris,enableScripts:r.enableScripts,enableForms:r.enableForms,portMapping:r.portMapping,localResourceRoots:r.localResourceRoots||EL(e,t)}}function yL(e){return{enableCommandUris:e.enableCommandUris,enableScripts:e.enableScripts,enableForms:e.enableForms,portMapping:e.portMapping,localResourceRoots:e.localResourceRoots?.map(t=>y.from(t))}}function EL(e,t){return[...(t?.getWorkspaceFolders()||[]).map(r=>r.uri),e.extensionLocation]}var ni=class d3{static{this.a=!1}constructor(t){this.d=t,this.b=new Map,this.c=1}add(t){const r=this.c++;return this.b.set(r,t),this.e(),r}get(t,r){return this.b.has(t)?this.b.get(t)[r]:void 0}delete(t){this.b.delete(t),this.e()}e(){d3.a&&console.log(`${this.d} cache size - ${this.b.size}`)}},xL=class{constructor(e,t){this.document=e,this.b=t,this.a=1,this.c=new ni("custom documents")}addEdit(e){return this.c.add([e])}async undo(e,t){await this.f(e).undo(),t||this.disposeBackup()}async redo(e,t){await this.f(e).redo(),t||this.disposeBackup()}disposeEdits(e){for(const t of e)this.c.delete(t)}getNewBackupUri(){if(!this.b)throw new Error("Backup requires a valid storage path");const e=DL(this.document.uri)+this.a++;return Qt(this.b,e)}updateBackup(e){this.d?.delete(),this.d=e}disposeBackup(){this.d?.delete(),this.d=void 0}f(e){const t=this.c.get(e,0);if(!t)throw new Error("No edit found");return t}},kL=class{constructor(){this.a=new Map}get(e,t){return this.a.get(this.b(e,t))}add(e,t,r){const i=this.b(e,t.uri);if(this.a.has(i))throw new Error(`Document already exists for viewType:${e} resource:${t.uri}`);const s=new xL(t,r);return this.a.set(i,s),s}delete(e,t){const r=this.b(e,t.uri);this.a.delete(r)}b(e,t){return`${e}@@@${t}`}},sE;(function(e){e[e.Text=0]="Text",e[e.Custom=1]="Custom"})(sE||(sE={}));var $L=class{constructor(){this.a=new Map}addTextProvider(e,t,r){return this.b(e,{type:0,extension:t,provider:r})}addCustomProvider(e,t,r){return this.b(e,{type:1,extension:t,provider:r})}get(e){return this.a.get(e)}b(e,t){if(this.a.has(e))throw new Error(`Provider for viewType:${e} already registered`);return this.a.set(e,t),new Ie(()=>this.a.delete(e))}},SL=class{constructor(e,t,r,i,s){this.d=t,this.f=r,this.g=i,this.h=s,this.b=new $L,this.c=new kL,this.a=e.getProxy(z.MainThreadCustomEditors)}registerCustomEditorProvider(e,t,r,i){const s=new me;return IL(r)?(s.add(this.b.addTextProvider(t,e,r)),this.a.$registerTextEditorProvider(Ef(e),t,i.webviewOptions||{},{supportsMove:!!r.moveCustomTextEditor},ya(e))):(s.add(this.b.addCustomProvider(t,e,r)),xf(r)&&s.add(r.onDidChangeCustomDocument(n=>{const o=this.i(t,n.document.uri);if(CL(n)){const a=o.addEdit(n);this.a.$onDidEdit(n.document.uri,t,a,n.label)}else this.a.$onContentChange(n.document.uri,t)})),this.a.$registerCustomEditorProvider(Ef(e),t,i.webviewOptions||{},!!i.supportsMultipleEditorsPerDocument,ya(e))),Ie.from(s,new Ie(()=>{this.a.$unregisterEditorProvider(t)}))}async $createCustomDocument(e,t,r,i,s){const n=this.b.get(t);if(!n)throw new Error(`No provider found for '${t}'`);if(n.type!==1)throw new Error(`Invalid provide type for '${t}'`);const o=y.revive(e),a=await n.provider.openCustomDocument(o,{backupId:r,untitledDocumentData:i?.buffer},s);let c;return xf(n.provider)&&this.f&&(c=this.f.workspaceValue(n.extension)??this.f.globalValue(n.extension)),this.c.add(t,a,c),{editable:xf(n.provider)}}async $disposeCustomDocument(e,t){const r=this.b.get(t);if(!r)throw new Error(`No provider found for '${t}'`);if(r.type!==1)throw new Error(`Invalid provider type for '${t}'`);const i=y.revive(e),{document:s}=this.i(t,i);this.c.delete(t,s),s.dispose()}async $resolveCustomEditor(e,t,r,i,s,n){const o=this.b.get(r);if(!o)throw new Error(`No provider found for '${r}'`);const a=Ct.to(s),c=this.g.createNewWebview(t,i.contentOptions,o.extension),l=this.h.createNewWebviewPanel(t,r,i.title,a,i.options,c,i.active),u=y.revive(e);switch(o.type){case 1:{const{document:h}=this.i(r,u);return o.provider.resolveCustomEditor(h,l,n)}case 0:{const h=this.d.getDocument(u);return o.provider.resolveCustomTextEditor(h,l,n)}default:throw new Error("Unknown webview provider type")}}$disposeEdits(e,t,r){this.i(t,e).disposeEdits(r)}async $onMoveCustomEditor(e,t,r){const i=this.b.get(r);if(!i)throw new Error(`No provider found for '${r}'`);if(!i.provider.moveCustomTextEditor)throw new Error(`Provider does not implement move '${r}'`);const s=this.h.getWebviewPanel(e);if(!s)throw new Error("No webview found");const n=y.revive(t),o=this.d.getDocument(n);await i.provider.moveCustomTextEditor(o,s,st.None)}async $undo(e,t,r,i){return this.i(t,e).undo(r,i)}async $redo(e,t,r,i){return this.i(t,e).redo(r,i)}async $revert(e,t,r){const i=this.i(t,e);await this.j(t).revertCustomDocument(i.document,r),i.disposeBackup()}async $onSave(e,t,r){const i=this.i(t,e);await this.j(t).saveCustomDocument(i.document,r),i.disposeBackup()}async $onSaveAs(e,t,r,i){const s=this.i(t,e);return this.j(t).saveCustomDocumentAs(s.document,y.revive(r),i)}async $backup(e,t,r){const i=this.i(t,e),n=await this.j(t).backupCustomDocument(i.document,{destination:i.getNewBackupUri()},r);return i.updateBackup(n),n.id}i(e,t){const r=this.c.get(e,y.revive(t));if(!r)throw new Error("No custom document found");return r}j(e){const r=this.b.get(e)?.provider;if(!r||!xf(r))throw new Error("Custom document is not editable");return r}};function xf(e){return!!e.onDidChangeCustomDocument}function IL(e){return typeof e.resolveCustomTextEditor=="function"}function CL(e){return typeof e.undo=="function"&&typeof e.redo=="function"}function DL(e){const t=e.scheme===q.file||e.scheme===q.untitled?e.fsPath:e.toString();return Qa(t)+""}var jn,nE=class f3{#e;#t;#r;constructor(t,r,i,s,n,o,a,c){this.d=t,this.e=r,this.f=i,this.g=s,this.h=n,this.c=!1,this.f=Math.max(s,i),this.#r=new Nt(l=>o.getComparisonKey(l)),this.#e=a,this.#t=c}dispose(){this.c||(this.#t.fire([...this.#r.keys()]),this.#e?.$clear(this.e),this.#r.clear(),this.c=!0)}get name(){return this.j(),this.d}set(t,r){if(!t){this.clear();return}this.j();let i=[];if(y.isUri(t)){if(!r){this.delete(t);return}this.#r.set(t,r.slice()),i=[t]}else if(Array.isArray(t)){i=[];let o;t=[...t].sort(f3.k);for(const a of t){const[c,l]=a;if((!o||c.toString()!==o.toString())&&(o&&this.#r.get(o).length===0&&this.#r.delete(o),o=c,i.push(c),this.#r.set(c,[])),l)this.#r.get(c)?.push(...l);else{const u=this.#r.get(c);u&&(u.length=0)}}}if(this.#t.fire(i),!this.#e)return;const s=[];let n=0;for(const o of i){let a=[];const c=this.#r.get(o);if(c)if(c.length>this.g){a=[];const l=[_t.Error,_t.Warning,_t.Information,_t.Hint];e:for(let u=0;u<4;u++)for(const h of c)if(h.severity===l[u]&&a.push({...Jo.from(h),modelVersionId:this.h(o)})===this.g)break e;a.push({severity:sr.Info,message:d(2796,null,c.length-this.g),startLineNumber:a[a.length-1].startLineNumber,startColumn:a[a.length-1].startColumn,endLineNumber:a[a.length-1].endLineNumber,endColumn:a[a.length-1].endColumn})}else a=c.map(l=>({...Jo.from(l),modelVersionId:this.h(o)}));if(s.push([o,a]),n+=a.length,n>this.f)break}this.#e.$changeMany(this.e,s)}delete(t){this.j(),this.#t.fire([t]),this.#r.delete(t),this.#e?.$changeMany(this.e,[[t,void 0]])}clear(){this.j(),this.#t.fire([...this.#r.keys()]),this.#r.clear(),this.#e?.$clear(this.e)}forEach(t,r){this.j();for(const[i,s]of this)t.call(r,i,s,this)}*[Symbol.iterator](){this.j();for(const t of this.#r.keys())yield[t,this.get(t)]}get(t){this.j();const r=this.#r.get(t);return Array.isArray(r)?Object.freeze(r.slice(0)):[]}has(t){return this.j(),Array.isArray(this.#r.get(t))}j(){if(this.c)throw new Error("illegal state - object is disposed")}static k(t,r){return t[0].toString()<r[0].toString()?-1:t[0].toString()>r[0].toString()?1:0}},s0=class{static{jn=this}static{this.c=0}static{this.d=1e3}static{this.e=1.1*this.d}static _mapper(t){const r=new Nt;for(const i of t)r.set(i,i);return{uris:Object.freeze(Array.from(r.values()))}}constructor(t,r,i,s){this.j=r,this.k=i,this.l=s,this.g=new Map,this.h=new Wk({merge:n=>n.flat(),delay:50}),this.onDidChangeDiagnostics=ht.map(this.h.event,jn._mapper),this.f=t.getProxy(z.MainThreadDiagnostics)}createDiagnosticCollection(t,r){const{g:i,f:s,h:n,j:o,k:a,l:c}=this,l=new class{$changeMany(p,f){s.$changeMany(p,f),o.trace("[DiagnosticCollection] change many (extension, owner, uris)",t.value,p,f.length===0?"CLEARING":f)}$clear(p){s.$clear(p),o.trace("[DiagnosticCollection] remove all (extension, owner)",t.value,p)}dispose(){s.dispose()}};let u;if(!r)r="_generated_diagnostic_collection_name_#"+jn.c++,u=r;else if(!i.has(r))u=r;else{this.j.warn(`DiagnosticCollection with name '${r}' does already exist.`);do u=r+jn.c++;while(i.has(u))}return new class extends nE{constructor(){super(r,u,jn.e,jn.d,p=>c.getDocument(p)?.version,a.extUri,l,n),i.set(u,this)}dispose(){super.dispose(),i.delete(u)}}}getDiagnostics(t){if(t)return this.m(t);{const r=new Map,i=[];for(const s of this.g.values())s.forEach((n,o)=>{let a=r.get(n.toString());typeof a>"u"&&(a=i.length,r.set(n.toString(),a),i.push([n,[]])),i[a][1]=i[a][1].concat(...o)});return i}}m(t){let r=[];for(const i of this.g.values())i.has(t)&&(r=r.concat(i.get(t)));return r}$acceptMarkersChange(t){if(!this.n){const r="_generated_mirror",i=new nE(r,r,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,s=>{},this.k.extUri,void 0,this.h);this.g.set(r,i),this.n=i}for(const[r,i]of t)this.n.set(y.revive(r),i.map(Jo.to))}};s0=jn=__decorate([__param(1,He),__param(2,fo)],s0);var PL=class{constructor(e){this.a=e.getProxy(z.MainThreadDialogs)}showOpenDialog(e){return this.a.$showOpenDialog(e).then(t=>t?t.map(r=>y.revive(r)):void 0)}showSaveDialog(e){return this.a.$showSaveDialog(e).then(t=>t?y.revive(t):void 0)}},AL=class p3{static{this.a=0}constructor(t,r,i){this.d=r,this.e=i,this.b=new Map,this.c=t.getProxy(z.MainThreadDocumentContentProviders)}registerTextDocumentContentProvider(t,r){if(Object.keys(q).indexOf(t)>=0)throw new Error(`scheme '${t}' already registered`);const i=p3.a++;this.b.set(i,r),this.c.$registerTextContentProvider(i,t);let s;if(typeof r.onDidChange=="function"){let n;s=r.onDidChange(async o=>{if(o.scheme!==t){this.e.warn(`Provider for scheme '${t}' is firing event for schema '${o.scheme}' which will be IGNORED`);return}if(!this.d.getDocument(o))return;n&&await n;const a=this.$provideTextDocumentContent(i,o).then(async c=>{if(!c&&typeof c!="string")return;const l=this.d.getDocument(o);if(!l)return;const u=wb(c);if(!l.equalLines(u))return this.c.$onVirtualDocumentChange(o,c)}).catch(gr).finally(()=>{n===a&&(n=void 0)});n=a})}return new Ie(()=>{this.b.delete(i)&&this.c.$unregisterTextContentProvider(i),s&&(s.dispose(),s=void 0)})}$provideTextDocumentContent(t,r){const i=this.b.get(t);return i?Promise.resolve(i.provideTextDocumentContent(y.revive(r),st.None)):Promise.reject(new Error(`unsupported uri-scheme: ${r.scheme}`))}},TL=class{constructor(e,t,r,i={timeout:1500,errors:3}){this.c=e,this.d=t,this.f=r,this.g=i,this.a=new Fa,this.b=new WeakMap}dispose(){this.a.clear()}getOnWillSaveTextDocumentEvent(e){return(t,r,i)=>{const n={dispose:this.a.push([t,r,e])};return Array.isArray(i)&&i.push(n),n}}async $participateInSave(e,t){const r=y.revive(e);let i=!1;const s=setTimeout(()=>i=!0,this.g.timeout),n=[];try{for(const o of[...this.a]){if(i)break;const a=this.d.getDocument(r),c=await this.h(o,{document:a,reason:Pd.to(t)});n.push(c)}}finally{clearTimeout(s)}return n}h([e,t,r],i){const s=this.b.get(e);return typeof s=="number"&&s>this.g.errors?Promise.resolve(!1):this.i(r,e,t,i).then(()=>!0,n=>{if(this.c.error(`onWillSaveTextDocument-listener from extension '${r.identifier.value}' threw ERROR`),this.c.error(n),!(n instanceof Error)||n.message!=="concurrent_edits"){const o=this.b.get(e);this.b.set(e,o?o+1:1),typeof o=="number"&&o>this.g.errors&&this.c.info(`onWillSaveTextDocument-listener from extension '${r.identifier.value}' will now be IGNORED because of timeouts and/or errors`)}return!1})}i(e,t,r,i){const s=[],n=Date.now(),{document:o,reason:a}=i,{version:c}=o,l=Object.freeze({document:o,reason:a,waitUntil(u){if(Object.isFrozen(s))throw cp("waitUntil can not be called async");s.push(Promise.resolve(u))}});try{t.apply(r,[l])}catch(u){return Promise.reject(u)}return Object.freeze(s),new Promise((u,h)=>{const p=setTimeout(()=>h(new Error("timeout")),this.g.timeout);return Promise.all(s).then(f=>{this.c.debug(`onWillSaveTextDocument-listener from extension '${e.identifier.value}' finished after ${Date.now()-n}ms`),clearTimeout(p),u(f)}).catch(f=>{clearTimeout(p),h(f)})}).then(u=>{const h={edits:[]};for(const p of u)if(Array.isArray(p)&&p.every(f=>f instanceof Ss))for(const{newText:f,newEol:m,range:w}of p)h.edits.push({resource:o.uri,versionId:void 0,textEdit:{range:w&&M.from(w),text:f,eol:m&&ea.from(m)}});if(h.edits.length!==0)return c===o.version?this.f.$tryApplyWorkspaceEdit(new Cr(h)):Promise.reject(new Error("concurrent_edits"))})}},RL=class{constructor(e,t){this.a=new D,this.b=new D,this.c=new D,this.d=new D,this.onDidAddDocument=this.a.event,this.onDidRemoveDocument=this.b.event,this.onDidChangeDocument=this.c.event,this.onDidSaveDocument=this.d.event,this.e=new me,this.h=new Map,this.f=e.getProxy(z.MainThreadDocuments),this.g=t,this.g.onDidRemoveDocuments(r=>{for(const i of r)this.b.fire(i.document)},void 0,this.e),this.g.onDidAddDocuments(r=>{for(const i of r)this.a.fire(i.document)},void 0,this.e)}dispose(){this.e.dispose()}getAllDocumentData(){return[...this.g.allDocuments()]}getDocumentData(e){if(!e)return;const t=this.g.getDocument(e);if(t)return t}getDocument(e){const t=this.getDocumentData(e);if(!t?.document)throw new Error(`Unable to retrieve document from URI '${e}'`);return t.document}ensureDocumentData(e){const t=this.g.getDocument(e);if(t)return Promise.resolve(t);let r=this.h.get(e.toString());return r||(r=this.f.$tryOpenDocument(e).then(i=>{this.h.delete(e.toString());const s=y.revive(i);return Kn(this.g.getDocument(s))},i=>(this.h.delete(e.toString()),Promise.reject(i))),this.h.set(e.toString(),r)),r}createDocumentData(e){return this.f.$tryCreateDocument(e).then(t=>y.revive(t))}$acceptModelLanguageChanged(e,t){const r=y.revive(e),i=this.g.getDocument(r);if(!i)throw new Error("unknown document");this.b.fire(i.document),i._acceptLanguageId(t),this.a.fire(i.document)}$acceptModelSaved(e){const t=y.revive(e),r=this.g.getDocument(t);if(!r)throw new Error("unknown document");this.$acceptDirtyStateChanged(e,!1),this.d.fire(r.document)}$acceptDirtyStateChanged(e,t){const r=y.revive(e),i=this.g.getDocument(r);if(!i)throw new Error("unknown document");i._acceptIsDirty(t),this.c.fire({document:i.document,contentChanges:[],reason:void 0})}$acceptModelChanged(e,t,r){const i=y.revive(e),s=this.g.getDocument(i);if(!s)throw new Error("unknown document");s._acceptIsDirty(r),s.onEvents(t);let n;t.isUndoing?n=Rc.Undo:t.isRedoing&&(n=Rc.Redo),this.c.fire(Dy({document:s.document,contentChanges:t.changes.map(o=>({range:M.to(o.range),rangeOffset:o.rangeOffset,rangeLength:o.rangeLength,text:o.text})),reason:n}))}setWordDefinitionFor(e,t){HA(e,t)}},LL=class{constructor(e){this.b=new Map,this.c=new D,this.onDidChange=this.c.event,this.d=new Set,this.e=0,this.a=e.getProxy(z.MainThreadEmbeddings)}registerEmbeddingsProvider(e,t,r){if(this.d.has(t))throw new Error("An embeddings provider for this model is already registered");const i=this.e++;return this.a.$registerEmbeddingProvider(i,t),this.b.set(i,{id:t,provider:r}),ce(()=>{this.d.delete(t),this.a.$unregisterEmbeddingProvider(i),this.b.delete(i)})}async computeEmbeddings(e,t,r){r??=st.None;let i=!1;typeof t=="string"&&(t=[t],i=!0);const s=await this.a.$computeEmbeddings(e,t,r);if(s.length!==t.length)throw new Error;if(i){if(s.length!==1)throw new Error;return s[0]}return s}async $provideEmbeddings(e,t,r){const i=this.b.get(e);if(!i)return[];const s=await i.provider.provideEmbeddings(t,r);return s||[]}get embeddingsModels(){return Array.from(this.d)}$acceptEmbeddingModels(e){this.d=new Set(e),this.c.fire()}},NL=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(z.MainThreadAiEmbeddingVector)}async $provideAiEmbeddingVector(e,t,r){if(this.a.size===0)throw new Error("No embedding vector providers registered");const i=this.a.get(e);if(!i)throw new Error("Embedding vector provider not found");const s=await i.provideEmbeddingVector(t,r);if(!s)throw new Error("Embedding vector provider returned undefined");return s}registerEmbeddingVectorProvider(e,t,r){const i=this.b;return this.b++,this.a.set(i,r),this.c.$registerAiEmbeddingVectorProvider(t,i),new Ie(()=>{this.c.$unregisterAiEmbeddingVectorProvider(i),this.a.delete(i)})}},oE;(function(e){e[e.Invalid=0]="Invalid",e[e.Start=1]="Start",e[e.H=2]="H",e[e.HT=3]="HT",e[e.HTT=4]="HTT",e[e.HTTP=5]="HTTP",e[e.F=6]="F",e[e.FI=7]="FI",e[e.FIL=8]="FIL",e[e.BeforeColon=9]="BeforeColon",e[e.AfterColon=10]="AfterColon",e[e.AlmostThere=11]="AlmostThere",e[e.End=12]="End",e[e.Accept=13]="Accept",e[e.LastKnownState=14]="LastKnownState"})(oE||(oE={}));var FL=class{constructor(e,t,r){const i=new Uint8Array(e*t);for(let s=0,n=e*t;s<n;s++)i[s]=r;this.a=i,this.rows=e,this.cols=t}get(e,t){return this.a[e*this.cols+t]}set(e,t,r){this.a[e*this.cols+t]=r}},aE=class{constructor(e){let t=0,r=0;for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];a>t&&(t=a),o>r&&(r=o),c>r&&(r=c)}t++,r++;const i=new FL(r,t,0);for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];i.set(o,a,c)}this.a=i,this.b=t}nextState(e,t){return t<0||t>=this.b?0:this.a.get(e,t)}},n0=null;function ML(){return n0===null&&(n0=new aE([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),n0}var cE;(function(e){e[e.None=0]="None",e[e.ForceTermination=1]="ForceTermination",e[e.CannotEndIn=2]="CannotEndIn"})(cE||(cE={}));var Nl=null;function OL(){if(Nl===null){Nl=new v9(0);const e=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let r=0;r<e.length;r++)Nl.set(e.charCodeAt(r),1);const t=".,;:";for(let r=0;r<t.length;r++)Nl.set(t.charCodeAt(r),2)}return Nl}var UL=class iw{static a(t,r,i,s,n){let o=n-1;do{const a=r.charCodeAt(o);if(t.get(a)!==2)break;o--}while(o>s);if(s>0){const a=r.charCodeAt(s-1),c=r.charCodeAt(o);(a===40&&c===41||a===91&&c===93||a===123&&c===125)&&o--}return{range:{startLineNumber:i,startColumn:s+1,endLineNumber:i,endColumn:o+2},url:r.substring(s,o+1)}}static computeLinks(t,r=ML()){const i=OL(),s=[];for(let n=1,o=t.getLineCount();n<=o;n++){const a=t.getLineContent(n),c=a.length;let l=0,u=0,h=0,p=1,f=!1,m=!1,w=!1,E=!1;for(;l<c;){let $=!1;const S=a.charCodeAt(l);if(p===13){let P;switch(S){case 40:f=!0,P=0;break;case 41:P=f?0:1;break;case 91:w=!0,m=!0,P=0;break;case 93:w=!1,P=m?0:1;break;case 123:E=!0,P=0;break;case 125:P=E?0:1;break;case 39:case 34:case 96:h===S?P=1:h===39||h===34||h===96?P=0:P=1;break;case 42:P=h===42?1:0;break;case 124:P=h===124?1:0;break;case 32:P=w?0:1;break;default:P=i.get(S)}P===1&&(s.push(iw.a(i,a,n,u,l)),$=!0)}else if(p===12){let P;S===91?(m=!0,P=0):P=i.get(S),P===1?$=!0:p=13}else p=r.nextState(p,S),p===0&&($=!0);$&&(p=1,f=!1,m=!1,E=!1,u=l+1,h=S),l++}p===13&&s.push(iw.a(i,a,n,u,c))}return s}},HL=class{constructor(){this.a=[]}add(e){this.b=void 0,this.a.push(e)}delete(e){const t=this.a.indexOf(e);t>=0&&(this.a.splice(t,1),this.b=void 0)}c(){if(!this.b){const e=this.a.sort(),t=[];let r,i,s=14,n=14;for(const o of e){let a=r?M$(r,o):0;for(a===0?i=1:i=n;a<o.length;a++)a+1===o.length?(s=n,n=9):n+=1,t.push([i,o.toUpperCase().charCodeAt(a),n]),t.push([i,o.toLowerCase().charCodeAt(a),n]),i=n;r=o,n=s}t.push([9,58,10]),t.push([10,47,12]),this.b=new aE(t)}}provideDocumentLinks(e){this.c();const t=[],r=UL.computeLinks({getLineContent(i){return e.lineAt(i-1).text},getLineCount(){return e.lineCount}},this.b);for(const i of r){const s=Ln.to(i);s.target&&t.push(s)}return t}},jL=class sw{constructor(t,r){this.i=r,this.b=new HL,this.c=new Map,this.d=new Set,this.f=new Map,this.h=0,this.a=t.getProxy(z.MainThreadFileSystem)}dispose(){this.g?.dispose()}registerFileSystemProvider(t,r,i,s={}){if(sw.j(i),this.d.has(r))throw new Error(`a provider for the scheme '${r}' is already registered`);this.g||(this.g=this.i.registerDocumentLinkProvider(t,"*",this.b));const n=this.h++;this.b.add(r),this.d.add(r),this.c.set(n,i);let o=2;s.isCaseSensitive&&(o+=1024),s.isReadonly&&(o+=2048),typeof i.copy=="function"&&(o+=8),typeof i.open=="function"&&typeof i.close=="function"&&typeof i.read=="function"&&typeof i.write=="function"&&(R(t,"fsChunks"),o+=4);let a;s.isReadonly&&on(s.isReadonly)&&s.isReadonly.value!==""&&(a={value:s.isReadonly.value,isTrusted:s.isReadonly.isTrusted,supportThemeIcons:s.isReadonly.supportThemeIcons,supportHtml:s.isReadonly.supportHtml,baseUri:s.isReadonly.baseUri,uris:s.isReadonly.uris}),this.a.$registerFileSystemProvider(n,r,o,a).catch(l=>{console.error(`FAILED to register filesystem provider of ${t.identifier.value}-extension for the scheme ${r}`),console.error(l)});const c=i.onDidChangeFile(l=>{const u=[];for(const h of l){const{uri:p,type:f}=h;if(p.scheme!==r)continue;let m;switch(f){case Bo.Changed:m=0;break;case Bo.Created:m=1;break;case Bo.Deleted:m=2;break;default:throw new Error("Unknown FileChangeType")}u.push({resource:p,type:m})}this.a.$onFileSystemChange(n,u)});return ce(()=>{c.dispose(),this.b.delete(r),this.d.delete(r),this.c.delete(n),this.a.$unregisterProvider(n)})}static j(t){if(!t)throw new Error("MISSING provider");if(typeof t.watch!="function")throw new Error("Provider does NOT implement watch");if(typeof t.stat!="function")throw new Error("Provider does NOT implement stat");if(typeof t.readDirectory!="function")throw new Error("Provider does NOT implement readDirectory");if(typeof t.createDirectory!="function")throw new Error("Provider does NOT implement createDirectory");if(typeof t.readFile!="function")throw new Error("Provider does NOT implement readFile");if(typeof t.writeFile!="function")throw new Error("Provider does NOT implement writeFile");if(typeof t.delete!="function")throw new Error("Provider does NOT implement delete");if(typeof t.rename!="function")throw new Error("Provider does NOT implement rename")}static k(t){const{type:r,ctime:i,mtime:s,size:n,permissions:o}=t;return{type:r,ctime:i,mtime:s,size:n,permissions:o}}$stat(t,r){return Promise.resolve(this.l(t).stat(y.revive(r))).then(i=>sw.k(i))}$readdir(t,r){return Promise.resolve(this.l(t).readDirectory(y.revive(r)))}$readFile(t,r){return Promise.resolve(this.l(t).readFile(y.revive(r))).then(i=>ke.wrap(i))}$writeFile(t,r,i,s){return Promise.resolve(this.l(t).writeFile(y.revive(r),i.buffer,s))}$delete(t,r,i){return Promise.resolve(this.l(t).delete(y.revive(r),i))}$rename(t,r,i,s){return Promise.resolve(this.l(t).rename(y.revive(r),y.revive(i),s))}$copy(t,r,i,s){const n=this.l(t);if(!n.copy)throw new Error('FileSystemProvider does not implement "copy"');return Promise.resolve(n.copy(y.revive(r),y.revive(i),s))}$mkdir(t,r){return Promise.resolve(this.l(t).createDirectory(y.revive(r)))}$watch(t,r,i,s){const n=this.l(t).watch(y.revive(i),s);this.f.set(r,n)}$unwatch(t,r){const i=this.f.get(r);i&&(i.dispose(),this.f.delete(r))}$open(t,r,i){const s=this.l(t);if(!s.open)throw new Error('FileSystemProvider does not implement "open"');return Promise.resolve(s.open(y.revive(r),i))}$close(t,r){const i=this.l(t);if(!i.close)throw new Error('FileSystemProvider does not implement "close"');return Promise.resolve(i.close(r))}$read(t,r,i,s){const n=this.l(t);if(!n.read)throw new Error('FileSystemProvider does not implement "read"');const o=ke.alloc(s);return Promise.resolve(n.read(r,i,o.buffer,0,s)).then(a=>o.slice(0,a))}$write(t,r,i,s){const n=this.l(t);if(!n.write)throw new Error('FileSystemProvider does not implement "write"');return Promise.resolve(n.write(r,i,s.buffer,0,s.byteLength))}l(t){const r=this.c.get(t);if(!r){const i=new Error;throw i.name="ENOPRO",i.message="no provider",i}return r}},s_=class g3 extends he{static{this.a=5}constructor(t,r,i,s){super(),this.h=t,this.j=r,this.m=i,this.n=s,this.c=this.B(new us),this.f=void 0,this.g=0}s(){const t=new me;this.c.value=t,this.b=this.r(t),this.b.setVerboseLogging(this.m),t.add(this.b.onDidChangeFile(r=>this.h(r))),t.add(this.b.onDidLogMessage(r=>this.j(r))),t.add(this.b.onDidError(r=>this.t(r.error,r.request)))}t(t,r){this.u(t,r)?this.g<g3.a&&this.f?(this.y(`restarting watcher after unexpected error: ${t}`),this.w(this.f)):this.y(`gave up attempting to restart watcher after unexpected error: ${t}`):this.y(t)}u(t,r){return!(!this.n.restartOnError||r||t.indexOf("No space left on device")!==-1||t.indexOf("EMFILE")!==-1)}w(t){this.g++,this.s(),this.watch(t)}async watch(t){this.f=t,await this.b?.watch(t)}async setVerboseLogging(t){this.m=t,await this.b?.setVerboseLogging(t)}y(t){this.j({type:"error",message:`[File Watcher (${this.n.type})] ${t}`})}z(t){this.j({type:"trace",message:`[File Watcher (${this.n.type})] ${t}`})}dispose(){return this.b=void 0,super.dispose()}};function BL(e,t){return typeof t=="string"&&!t.startsWith(pn)&&!fu(t)?{base:e,pattern:t}:t}var _L=class{get ignoreCreateEvents(){return!!(this.h&1)}get ignoreChangeEvents(){return!!(this.h&2)}get ignoreDeleteEvents(){return!!(this.h&4)}constructor(e,t,r,i,s,n,o){this.a=Math.random(),this.b=new D,this.c=new D,this.d=new D,this.h=0,o.ignoreCreateEvents&&(this.h+=1),o.ignoreChangeEvents&&(this.h+=2),o.ignoreDeleteEvents&&(this.h+=4);const a=$o(n),c=typeof n=="string",l=o.correlate,u=s(h=>{if(!(typeof h.session=="number"&&h.session!==this.a)&&!(l&&typeof h.session>"u")){if(!o.ignoreCreateEvents)for(const p of h.created){const f=y.revive(p);a(f.fsPath)&&(!c||r.getWorkspaceFolder(f))&&this.b.fire(f)}if(!o.ignoreChangeEvents)for(const p of h.changed){const f=y.revive(p);a(f.fsPath)&&(!c||r.getWorkspaceFolder(f))&&this.c.fire(f)}if(!o.ignoreDeleteEvents)for(const p of h.deleted){const f=y.revive(p);a(f.fsPath)&&(!c||r.getWorkspaceFolder(f))&&this.d.fire(f)}}});this.g=Ie.from(this.i(e,r,t,i,n,o,o.correlate),this.b,this.c,this.d,u)}i(e,t,r,i,s,n,o){const a=Ie.from();if(typeof s=="string"||n.ignoreChangeEvents&&n.ignoreCreateEvents&&n.ignoreDeleteEvents)return a;const c=e.getProxy(z.MainThreadFileSystemEventService);let l=!1;(s.pattern.includes(pn)||s.pattern.includes(Ug))&&(l=!0);const u=n.excludes??[];let h,p;if(o)(n.ignoreChangeEvents||n.ignoreCreateEvents||n.ignoreDeleteEvents)&&(p=14,n.ignoreChangeEvents&&(p&=-3),n.ignoreCreateEvents&&(p&=-5),n.ignoreDeleteEvents&&(p&=-9));else if(l&&u.length===0){const f=t.getWorkspaceFolder(y.revive(s.baseUri)),m=r.getConfiguration("files",f).get("watcherExclude");if(m)for(const w in m)w&&m[w]===!0&&u.push(w)}else if(!l){const f=t.getWorkspaceFolder(y.revive(s.baseUri));if(f){const m=r.getConfiguration("files",f).get("watcherExclude");if(m){for(const w in m)if(w&&m[w]===!0){const E=`${Rp(w,"/")}/${pn}`;h||(h=[]),h.push(BL(f.uri.fsPath,E))}}if(!h||h.length===0)return a}}return c.$watch(i.identifier.value,this.a,s.baseUri,{recursive:l,excludes:u,includes:h,filter:p},!!o),Ie.from({dispose:()=>c.$unwatch(this.a)})}dispose(){this.g.dispose()}get onDidCreate(){return this.b.event}get onDidChange(){return this.c.event}get onDidDelete(){return this.d.event}},zL=class{constructor(e){this.a=e,this.session=this.a.session,this.b=new pr(()=>this.a.created.map(y.revive)),this.c=new pr(()=>this.a.changed.map(y.revive)),this.d=new pr(()=>this.a.deleted.map(y.revive))}get created(){return this.b.value}get changed(){return this.c.value}get deleted(){return this.d.value}},WL=class{constructor(e,t,r){this.j=e,this.k=t,this.l=r,this.a=new D,this.b=new D,this.c=new D,this.d=new D,this.g=new Ma,this.h=new Ma,this.i=new Ma,this.onDidRenameFile=this.b.event,this.onDidCreateFile=this.c.event,this.onDidDeleteFile=this.d.event}createFileSystemWatcher(e,t,r,i,s){return new _L(this.j,t,e,r,this.a.event,$r.from(i),s)}$onFileEvent(e){this.a.fire(new zL(e))}$onDidRunFileOperation(e,t){switch(e){case 2:this.b.fire(Object.freeze({files:t.map(r=>({oldUri:y.revive(r.source),newUri:y.revive(r.target)}))}));break;case 1:this.d.fire(Object.freeze({files:t.map(r=>y.revive(r.target))}));break;case 0:case 3:this.c.fire(Object.freeze({files:t.map(r=>y.revive(r.target))}));break;default:}}getOnWillRenameFileEvent(e){return this.m(e,this.g)}getOnWillCreateFileEvent(e){return this.m(e,this.h)}getOnWillDeleteFileEvent(e){return this.m(e,this.i)}m(e,t){return(r,i,s)=>{const n=function(a){r.call(i,a)};return n.extension=e,t.event(n,void 0,s)}}async $onWillRunFileOperation(e,t,r,i){switch(e){case 2:return await this.n(this.g,{files:t.map(s=>({oldUri:y.revive(s.source),newUri:y.revive(s.target)}))},r,i);case 1:return await this.n(this.i,{files:t.map(s=>y.revive(s.target))},r,i);case 0:case 3:return await this.n(this.h,{files:t.map(s=>y.revive(s.target))},r,i)}}async n(e,t,r,i){const s=new Set,n=[];if(await e.fireAsync(t,i,async(a,c)=>{const l=Date.now(),u=await Promise.resolve(a);u instanceof wn&&(n.push([c.extension,u]),s.add(c.extension.displayName??c.extension.identifier.value)),Date.now()-l>r&&this.k.warn("SLOW file-participant",c.extension.identifier)}),i.isCancellationRequested||n.length===0)return;const o={edits:[]};for(const[,a]of n){const{edits:c}=kr.from(a,{getTextDocumentVersion:l=>this.l.getDocument(l)?.version,getNotebookDocumentVersion:()=>{}});o.edits=o.edits.concat(c)}return{edit:o,extensionNames:Array.from(s)}}},VL=class{constructor(e,t,r,i,s){this.a=t,this.b=r,this.c=i;const n=new le("interactive.open","_interactive.open","Open interactive window and return notebook editor and input URI",[new U("showOptions","Show Options",o=>!0,o=>o),new U("resource","Interactive resource Uri",o=>!0,o=>o),new U("controllerId","Notebook controller Id",o=>!0,o=>o),new U("title","Interactive editor title",o=>!0,o=>o)],new ae("Notebook and input URI",o=>{if(s.debug("[ExtHostInteractive] open iw with notebook editor id",o.notebookEditorId),o.notebookEditorId!==void 0){const a=this.a.getEditorById(o.notebookEditorId);return s.debug("[ExtHostInteractive] notebook editor found",a.id),{notebookUri:y.revive(o.notebookUri),inputUri:y.revive(o.inputUri),notebookEditor:a.apiEditor}}return s.debug("[ExtHostInteractive] notebook editor not found, uris for the interactive document",o.notebookUri,o.inputUri),{notebookUri:y.revive(o.notebookUri),inputUri:y.revive(o.inputUri)}}));this.c.registerApiCommand(n)}$willAddInteractiveDocument(e,t,r,i){this.b.acceptDocumentsAndEditorsDelta({addedDocuments:[{EOL:t,lines:[""],languageId:r,uri:e,isDirty:!1,versionId:1}]})}$willRemoveInteractiveDocument(e,t){this.b.acceptDocumentsAndEditorsDelta({removedDocuments:[e]})}},qL=class{constructor(e){this.b=0,this.a=e.getProxy(z.MainThreadLabelService)}$registerResourceLabelFormatter(e){const t=this.b++;return this.a.$registerResourceLabelFormatter(t,e),ce(()=>{this.a.$unregisterResourceLabelFormatter(t)})}},lE;(function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"})(lE||(lE={}));var GL=class zr extends ze{constructor(t,r,i,s){super(t,r,i,s),this.selectionStartLineNumber=t,this.selectionStartColumn=r,this.positionLineNumber=i,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(t){return zr.selectionsEqual(this,t)}static selectionsEqual(t,r){return t.selectionStartLineNumber===r.selectionStartLineNumber&&t.selectionStartColumn===r.selectionStartColumn&&t.positionLineNumber===r.positionLineNumber&&t.positionColumn===r.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(t,r){return this.getDirection()===0?new zr(this.startLineNumber,this.startColumn,t,r):new zr(t,r,this.startLineNumber,this.startColumn)}getPosition(){return new Ar(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new Ar(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(t,r){return this.getDirection()===0?new zr(t,r,this.endLineNumber,this.endColumn):new zr(this.endLineNumber,this.endColumn,t,r)}static fromPositions(t,r=t){return new zr(t.lineNumber,t.column,r.lineNumber,r.column)}static fromRange(t,r){return r===0?new zr(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new zr(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}static liftSelection(t){return new zr(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn)}static selectionsArrEqual(t,r){if(t&&!r||!t&&r)return!1;if(!t&&!r)return!0;if(t.length!==r.length)return!1;for(let i=0,s=t.length;i<s;i++)if(!this.selectionsEqual(t[i],r[i]))return!1;return!0}static isISelection(t){return t&&typeof t.selectionStartLineNumber=="number"&&typeof t.selectionStartColumn=="number"&&typeof t.positionLineNumber=="number"&&typeof t.positionColumn=="number"}static createWithDirection(t,r,i,s,n){return n===0?new zr(t,r,i,s):new zr(i,s,t,r)}},uE=class m3{constructor(t,r){this.d=t,this.e=r}async provideDocumentSymbols(t,r){const i=this.d.getDocument(t),s=await this.e.provideDocumentSymbols(i,r);if(!up(s))return s[0]instanceof Ic?s.map(i1.from):m3.f(s)}static f(t){t=t.slice(0).sort((s,n)=>{let o=s.location.range.start.compareTo(n.location.range.start);return o===0&&(o=n.location.range.end.compareTo(s.location.range.end)),o});const r=[],i=[];for(const s of t){const n={name:s.name||"!!MISSING: name!!",kind:jr.from(s.kind),tags:s.tags?.map(Gi.from)||[],detail:"",containerName:s.containerName,range:M.from(s.location.range),selectionRange:M.from(s.location.range),children:[]};for(;;){if(i.length===0){i.push(n),r.push(n);break}const o=i[i.length-1];if(ze.containsRange(o.range,n.range)&&!ze.equalsRange(o.range,n.range)){o.children?.push(n),i.push(n);break}i.pop()}}return r}},kf=class{constructor(e,t,r,i,s,n){this.f=e,this.g=t,this.h=r,this.j=i,this.k=s,this.l=n,this.d=new ni("CodeLens"),this.e=new Map}async provideCodeLenses(e,t){const r=this.f.getDocument(e),i=await this.h.provideCodeLenses(r,t);if(!i||t.isCancellationRequested)return;const s=this.d.add(i),n=new me;this.e.set(s,n);const o={cacheId:s,lenses:[]};for(let a=0;a<i.length;a++){if(!we.isRange(i[a].range)){console.warn("INVALID code lens, range is not defined",this.j.identifier.value);continue}o.lenses.push({cacheId:[s,a],range:M.from(i[a].range),command:this.g.toInternal(i[a].command,n)})}return o}async resolveCodeLens(e,t){const r=e.cacheId&&this.d.get(...e.cacheId);if(!r)return;let i;if(typeof this.h.resolveCodeLens!="function"||r.isResolved?i=r:i=await this.h.resolveCodeLens(r,t),i||(i=r),t.isCancellationRequested)return;const s=e.cacheId&&this.e.get(e.cacheId[0]);if(s){if(!i.command){const n=new Error("INVALID code lens resolved, lacks command: "+this.j.identifier.value);this.k.onExtensionError(this.j.identifier,n),this.l.error(n);return}return e.command=this.g.toInternal(i.command,s),e}}releaseCodeLenses(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}};function $f(e){return Array.isArray(e)?e.map(il.from):e?[il.from(e)]:[]}var hE=class{constructor(e,t){this.d=e,this.e=t}async provideDefinition(e,t,r){const i=this.d.getDocument(e),s=Fe.to(t),n=await this.e.provideDefinition(i,s,r);return $f(n)}},dE=class{constructor(e,t){this.d=e,this.e=t}async provideDeclaration(e,t,r){const i=this.d.getDocument(e),s=Fe.to(t),n=await this.e.provideDeclaration(i,s,r);return $f(n)}},fE=class{constructor(e,t){this.d=e,this.e=t}async provideImplementation(e,t,r){const i=this.d.getDocument(e),s=Fe.to(t),n=await this.e.provideImplementation(i,s,r);return $f(n)}},pE=class{constructor(e,t){this.d=e,this.e=t}async provideTypeDefinition(e,t,r){const i=this.d.getDocument(e),s=Fe.to(t),n=await this.e.provideTypeDefinition(i,s,r);return $f(n)}},o0=class v3{static{this.f=10}constructor(t,r){this.g=t,this.h=r,this.d=0,this.e=new Map}async provideHover(t,r,i,s){const n=this.g.getDocument(t),o=Fe.to(r);let a;if(i&&i.verbosityRequest){const h=i.verbosityRequest.previousHover.id,p=this.e.get(h);if(!p)throw new Error(`Hover with id ${h} not found`);const f={verbosityDelta:i.verbosityRequest.verbosityDelta,previousHover:p};a=await this.h.provideHover(n,o,s,f)}else a=await this.h.provideHover(n,o,s);if(!a||up(a.contents))return;a.range||(a.range=n.getWordRangeAtPosition(o)),a.range||(a.range=new we(o,o));const c=sl.from(a),l=this.d;if(this.e.size===v3.f){const h=Math.min(...this.e.keys());this.e.delete(h)}return this.e.set(l,a),this.d+=1,{...c,id:l}}releaseHover(t){this.e.delete(t)}},gE=class{constructor(e,t){this.d=e,this.e=t}async provideEvaluatableExpression(e,t,r){const i=this.d.getDocument(e),s=Fe.to(t),n=await this.e.provideEvaluatableExpression(i,s,r);if(n)return o1.from(n)}},mE=class{constructor(e,t){this.d=e,this.e=t}async provideInlineValues(e,t,r,i){const s=this.d.getDocument(e),n=await this.e.provideInlineValues(s,M.to(t),xd.to(r),i);if(Array.isArray(n))return n.map(o=>Ed.from(o))}},vE=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentHighlights(e,t,r){const i=this.d.getDocument(e),s=Fe.to(t),n=await this.e.provideDocumentHighlights(i,s,r);if(Array.isArray(n))return n.map(Yo.from)}},wE=class{constructor(e,t,r){this.d=e,this.e=t,this.f=r}async provideMultiDocumentHighlights(e,t,r,i){const s=this.d.getDocument(e),n=r.map(c=>{try{return this.d.getDocument(c)}catch(l){this.f.error("Error: Unable to retrieve document from URI: "+c+". Error message: "+l);return}}).filter(c=>c!==void 0),o=Fe.to(t),a=await this.e.provideMultiDocumentHighlights(s,o,n,i);if(Array.isArray(a))return a.map(a1.from)}},bE=class{constructor(e,t){this.d=e,this.e=t}async provideLinkedEditingRanges(e,t,r){const i=this.d.getDocument(e),s=Fe.to(t),n=await this.e.provideLinkedEditingRanges(i,s,r);if(n&&Array.isArray(n.ranges))return{ranges:Rt(n.ranges.map(M.from)),wordPattern:n.wordPattern}}},yE=class{constructor(e,t){this.d=e,this.e=t}async provideReferences(e,t,r,i){const s=this.d.getDocument(e),n=Fe.to(t),o=await this.e.provideReferences(s,n,r,i);if(Array.isArray(o))return o.map(cr.from)}},Sf=class ep{static{this.d=1e3}constructor(t,r,i,s,n,o,a){this.g=t,this.h=r,this.j=i,this.k=s,this.l=n,this.m=o,this.n=a,this.e=new ni("CodeAction"),this.f=new Map}async provideCodeActions(t,r,i,s){const n=this.g.getDocument(t),o=GL.isISelection(r)?ei.to(r):M.to(r),a=[];for(const f of this.j.getDiagnostics(t))if(o.intersection(f.range)&&a.push(f)>ep.d)break;const c={diagnostics:a,only:i.only?new nt(i.only):void 0,triggerKind:x1.to(i.trigger)},l=await this.k.provideCodeActions(n,o,c,s);if(!Ra(l)||s.isCancellationRequested)return;const u=this.e.add(l),h=new me;this.f.set(u,h);const p=[];for(let f=0;f<l.length;f++){const m=l[f];if(m)if(ep.o(m)&&!(m instanceof Dc))this.n.report("CodeActionProvider.provideCodeActions - return commands",this.m,"Return 'CodeAction' instances instead."),p.push({_isSynthetic:!0,title:m.title,command:this.h.toInternal(m,h)});else{const w=m;c.only&&(w.kind?c.only.contains(w.kind)||this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action is of kind '${w.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code actions.`):this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`));const E=w.ranges??[];p.push({cacheId:[u,f],title:w.title,command:w.command&&this.h.toInternal(w.command,h),diagnostics:w.diagnostics&&w.diagnostics.map(Jo.from),edit:w.edit&&kr.from(w.edit,void 0),kind:w.kind&&w.kind.value,isPreferred:w.isPreferred,isAI:ct(this.m,"codeActionAI")?w.isAI:!1,ranges:ct(this.m,"codeActionRanges")?Rt(E.map(M.from)):void 0,disabled:w.disabled?.reason})}}return{cacheId:u,actions:p}}async resolveCodeAction(t,r){const[i,s]=t,n=this.e.get(i,s);if(!n||ep.o(n))return{};if(!this.k.resolveCodeAction)return{};const o=await this.k.resolveCodeAction(n,r)??n;let a;o.edit&&(a=kr.from(o.edit,void 0));let c;if(o.command){const l=this.f.get(i);l&&(c=this.h.toInternal(o.command,l))}return{edit:a,command:c}}releaseCodeActions(t){this.f.get(t)?.dispose(),this.f.delete(t),this.e.delete(t)}static o(t){return typeof t.command=="string"&&typeof t.title=="string"}},Fl=class{constructor(e,t,r,i,s){this.e=e,this.f=t,this.g=r,this.h=i,this.j=s,this.d=new ni("DocumentPasteEdit")}async prepareDocumentPaste(e,t,r,i){if(!this.g.prepareDocumentPaste)return;const s=this.f.getDocument(e),n=t.map(c=>M.to(c)),o=Fs.toDataTransfer(r,()=>{throw new J3});if(await this.g.prepareDocumentPaste(s,n,o,i),i.isCancellationRequested)return;const a=Array.from(o).filter(([,c])=>!(c instanceof Hh));return Fs.from(a)}async providePasteEdits(e,t,r,i,s,n){if(!this.g.provideDocumentPasteEdits)return[];const o=this.f.getDocument(t),a=r.map(h=>M.to(h)),c=Fs.toDataTransfer(i,async h=>(await this.e.$resolvePasteFileData(this.h,e,h)).buffer),l=await this.g.provideDocumentPasteEdits(o,a,c,{only:s.only?new Ds(s.only):void 0,triggerKind:s.triggerKind},n);if(!l||n.isCancellationRequested)return[];const u=this.d.add(l);return l.map((h,p)=>({_cacheId:[u,p],title:h.title??d(2799,null,this.j.displayName||this.j.name),kind:h.kind,yieldTo:h.yieldTo?.map(f=>f.value),insertText:typeof h.insertText=="string"?h.insertText:{snippet:h.insertText.value},additionalEdit:h.additionalEdit?kr.from(h.additionalEdit,void 0):void 0}))}async resolvePasteEdit(e,t){const[r,i]=e,s=this.d.get(r,i);if(!s||!this.g.resolveDocumentPasteEdit)return{};const n=await this.g.resolveDocumentPasteEdit(s,t)??s;return{additionalEdit:n.additionalEdit?kr.from(n.additionalEdit,void 0):void 0}}releasePasteEdits(e){this.d.delete(e)}},EE=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentFormattingEdits(e,t,r){const i=this.d.getDocument(e),s=await this.e.provideDocumentFormattingEdits(i,t,r);if(Array.isArray(s))return s.map(Dt.from)}},a0=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeFormattingEdits(e,t,r,i){const s=this.d.getDocument(e),n=M.to(t),o=await this.e.provideDocumentRangeFormattingEdits(s,n,r,i);if(Array.isArray(o))return o.map(Dt.from)}async provideDocumentRangesFormattingEdits(e,t,r,i){xw(typeof this.e.provideDocumentRangesFormattingEdits=="function","INVALID invocation of `provideDocumentRangesFormattingEdits`");const s=this.d.getDocument(e),n=t.map(M.to),o=await this.e.provideDocumentRangesFormattingEdits(s,n,r,i);if(Array.isArray(o))return o.map(Dt.from)}},xE=class{constructor(e,t){this.d=e,this.e=t,this.autoFormatTriggerCharacters=[]}async provideOnTypeFormattingEdits(e,t,r,i,s){const n=this.d.getDocument(e),o=Fe.to(t),a=await this.e.provideOnTypeFormattingEdits(n,o,r,i,s);if(Array.isArray(a))return a.map(Dt.from)}},If=class{constructor(e,t){this.e=e,this.f=t,this.d=new ni("WorkspaceSymbols")}async provideWorkspaceSymbols(e,t){const r=await this.e.provideWorkspaceSymbols(e,t);if(!Ra(r))return{symbols:[]};const i=this.d.add(r),s={cacheId:i,symbols:[]};for(let n=0;n<r.length;n++){const o=r[n];if(!o||!o.name){this.f.warn("INVALID SymbolInformation",o);continue}s.symbols.push({...Tn.from(o),cacheId:[i,n]})}return s}async resolveWorkspaceSymbol(e,t){if(typeof this.e.resolveWorkspaceSymbol!="function"||!e.cacheId)return e;const r=this.d.get(...e.cacheId);if(r){const i=await this.e.resolveWorkspaceSymbol(r,t);return i&&nn(e,Tn.from(i),!0)}}releaseWorkspaceSymbols(e){this.d.delete(e)}},Cf=class nw{static supportsResolving(t){return typeof t.prepareRename=="function"}constructor(t,r,i){this.d=t,this.e=r,this.f=i}async provideRenameEdits(t,r,i,s){const n=this.d.getDocument(t),o=Fe.to(r);try{const a=await this.e.provideRenameEdits(n,o,i,s);return a?kr.from(a):void 0}catch(a){const c=nw.g(a);return c?{rejectReason:c,edits:void 0}:Promise.reject(a)}}async resolveRenameLocation(t,r,i){if(typeof this.e.prepareRename!="function")return Promise.resolve(void 0);const s=this.d.getDocument(t),n=Fe.to(r);try{const o=await this.e.prepareRename(s,n,i);let a,c;if(we.isRange(o)?(a=o,c=s.getText(o)):gt(o)&&(a=o.range,c=o.placeholder),!a||!c)return;if(a.start.line>n.line||a.end.line<n.line){this.f.warn("INVALID rename location: position line must be within range start/end lines");return}return{range:M.from(a),text:c}}catch(o){const a=nw.g(o);return a?{rejectReason:a,range:void 0,text:void 0}:Promise.reject(o)}}static g(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},c0=class ow{static{this.d={[Hu.Invoke]:Hc.Invoke,[Hu.Automatic]:Hc.Automatic}}constructor(t,r,i){this.e=t,this.f=r,this.g=i}async supportsAutomaticNewSymbolNamesTriggerKind(){return this.f.supportsAutomaticTriggerKind}async provideNewSymbolNames(t,r,i,s){const n=this.e.getDocument(t),o=M.to(r);try{const a=ow.d[i],c=await this.f.provideNewSymbolNames(n,o,a,s);return c?c.map(l=>typeof l=="string"?{newSymbolName:l}:{newSymbolName:l.newSymbolName,tags:l.tags}):void 0}catch(a){this.g.error(ow.h(a)??JSON.stringify(a,null,"	"));return}}static h(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},l0=class{constructor(e,t){this.resultId=e,this.tokens=t}},u0=class ai{constructor(t,r){this.f=t,this.g=r,this.e=1,this.d=new Map}async provideDocumentSemanticTokens(t,r,i){const s=this.f.getDocument(t),n=r!==0?this.d.get(r):null;let o=typeof n?.resultId=="string"&&typeof this.g.provideDocumentSemanticTokensEdits=="function"?await this.g.provideDocumentSemanticTokensEdits(s,n.resultId,i):await this.g.provideDocumentSemanticTokens(s,i);return n&&this.d.delete(r),o?(o=ai.h(o),this.o(ai.n(n,o),o)):null}async releaseDocumentSemanticColoring(t){this.d.delete(t)}static h(t){return ai.j(t)?ai.k(t)?t:new _o(new Uint32Array(t.data),t.resultId):ai.l(t)?ai.m(t)?t:new Gh(t.edits.map(r=>new _6(r.start,r.deleteCount,r.data?new Uint32Array(r.data):r.data)),t.resultId):t}static j(t){return t&&!!t.data}static k(t){return t.data instanceof Uint32Array}static l(t){return t&&Array.isArray(t.edits)}static m(t){for(const r of t.edits)if(!(r.data instanceof Uint32Array))return!1;return!0}static n(t,r){if(!ai.j(r)||!t||!t.tokens)return r;const i=t.tokens,s=i.length,n=r.data,o=n.length;let a=0;const c=Math.min(s,o);for(;a<c&&i[a]===n[a];)a++;if(a===s&&a===o)return new Gh([],r.resultId);let l=0;const u=c-a;for(;l<u&&i[s-l-1]===n[o-l-1];)l++;return new Gh([{start:a,deleteCount:s-a-l,data:n.subarray(a,o-l)}],r.resultId)}o(t,r){if(ai.j(t)){const i=this.e++;return this.d.set(i,new l0(t.resultId,t.data)),e0({id:i,type:"full",data:t.data})}if(ai.l(t)){const i=this.e++;return ai.j(r)?this.d.set(i,new l0(r.resultId,r.data)):this.d.set(i,new l0(t.resultId)),e0({id:i,type:"delta",deltas:(t.edits||[]).map(s=>({start:s.start,deleteCount:s.deleteCount,data:s.data}))})}return null}},kE=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeSemanticTokens(e,t,r){const i=this.d.getDocument(e),s=await this.e.provideDocumentRangeSemanticTokens(i,M.to(t),r);return s?this.f(s):null}f(e){return e0({id:0,type:"full",data:e.data})}},Ml=class w3{static supportsResolving(t){return typeof t.resolveCompletionItem=="function"}constructor(t,r,i,s,n){this.f=t,this.g=r,this.h=i,this.j=s,this.k=n,this.d=new ni("CompletionItem"),this.e=new Map}async provideCompletionItems(t,r,i,s){const n=this.f.getDocument(t),o=Fe.to(r),a=n.getWordRangeAtPosition(o)||new we(o,o),c=a.with({end:o}),l=new Xs,u=await this.h.provideCompletionItems(n,o,s,l1.to(i));if(!u||s.isCancellationRequested)return;const h=Array.isArray(u)?new To(u):u,p=w3.supportsResolving(this.h)?this.d.add(h.items):this.d.add([]),f=new me;this.e.set(p,f);const m=[],w={x:p,b:m,a:{replace:M.from(a),insert:M.from(c)},c:h.isIncomplete||void 0,d:l.elapsed()};for(let E=0;E<h.items.length;E++){const $=h.items[E],S=this.l($,[p,E],c,a);m.push(S)}return w}async resolveCompletionItem(t,r){if(typeof this.h.resolveCompletionItem!="function")return;const i=this.d.get(...t);if(!i)return;const s=this.l(i,t),n=await this.h.resolveCompletionItem(i,r);if(!n)return;const o=this.l(n,t);return(s.h!==o.h||s.i!==o.i)&&this.j.report("CompletionItem.insertText",this.k,"extension MAY NOT change 'insertText' of a CompletionItem during resolve"),(s.n!==o.n||s.o!==o.o||!Qr(s.p,o.p))&&this.j.report("CompletionItem.command",this.k,"extension MAY NOT change 'command' of a CompletionItem during resolve"),{...s,d:o.d,c:o.c,l:o.l,h:o.h,i:o.i,n:o.n,o:o.o,p:o.p}}releaseCompletionItems(t){this.e.get(t)?.dispose(),this.e.delete(t),this.d.delete(t)}l(t,r,i,s){const n=this.e.get(r[0]);if(!n)throw Error("DisposableStore is missing...");const o=this.g.toInternal(t.command,n),a={x:r,a:t.label,b:t.kind!==void 0?$d.from(t.kind):void 0,m:t.tags&&t.tags.map(kd.from),c:t.detail,d:typeof t.documentation>"u"?void 0:be.fromStrict(t.documentation),e:t.sortText!==t.label?t.sortText:void 0,f:t.filterText!==t.label?t.filterText:void 0,g:t.preselect||void 0,i:t.keepWhitespace?1:0,k:t.commitCharacters?.join(""),l:t.additionalTextEdits&&t.additionalTextEdits.map(Dt.from),n:o?.$ident,o:o?.id,p:o?.$ident?void 0:o?.arguments};t.textEdit?(this.j.report("CompletionItem.textEdit",this.k,"Use 'CompletionItem.insertText' and 'CompletionItem.range' instead."),a.h=t.textEdit.newText):typeof t.insertText=="string"?a.h=t.insertText:t.insertText instanceof bn&&(a.h=t.insertText.value,a.i|=4);let c;return t.textEdit?c=t.textEdit.range:t.range&&(c=t.range),we.isRange(c)?a.j=M.from(c):c&&(!i?.isEqual(c.inserting)||!s?.isEqual(c.replacing))&&(a.j={insert:M.from(c.inserting),replace:M.from(c.replacing)}),a}},Ea=class{async provideInlineCompletions(e,t,r,i){}async provideInlineEditsForRange(e,t,r,i){}disposeCompletions(e){}handleDidShowCompletionItem(e,t,r){}handlePartialAccept(e,t,r,i){}},QL=class extends Ea{constructor(e,t,r,i){super(),this.f=e,this.g=t,this.h=r,this.j=i,this.d=new $E,this.e=ct(this.f,"inlineCompletionsAdditions"),this.k={[Uu.Automatic]:Uc.Automatic,[Uu.Explicit]:Uc.Invoke}}get supportsHandleEvents(){return ct(this.f,"inlineCompletionsAdditions")&&(typeof this.h.handleDidShowCompletionItem=="function"||typeof this.h.handleDidPartiallyAcceptCompletionItem=="function")}async provideInlineCompletions(e,t,r,i){const s=this.g.getDocument(e),n=Fe.to(t),o=await this.h.provideInlineCompletionItems(s,n,{selectedCompletionInfo:r.selectedSuggestionInfo?{range:M.to(r.selectedSuggestionInfo.range),text:r.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[r.triggerKind],requestUuid:r.requestUuid},i);if(!o||i.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,c=this.e?Array.isArray(o)?[]:o.commands||[]:[],l=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this.d.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map((p,f)=>{let m;p.command&&(u||(u=new me),m=this.j.toInternal(p.command,u));const w=p.insertText;return{insertText:typeof w=="string"?w:{snippet:w.value},filterText:p.filterText,range:p.range?M.from(p.range):void 0,command:m,idx:f,completeBracketPairs:this.e?p.completeBracketPairs:!1}}),commands:c.map(p=>(u||(u=new me),this.j.toInternal(p,u))),suppressSuggestions:!1,enableForwardStability:l}}async provideInlineEditsForRange(e,t,r,i){if(!this.h.provideInlineEditsForRange)return;R(this.f,"inlineCompletionsAdditions");const s=this.g.getDocument(e),n=M.to(t),o=await this.h.provideInlineEditsForRange(s,n,{selectedCompletionInfo:r.selectedSuggestionInfo?{range:M.to(r.selectedSuggestionInfo.range),text:r.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[r.triggerKind],userPrompt:r.userPrompt,requestUuid:r.requestUuid},i);if(!o||i.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,c=this.e?Array.isArray(o)?[]:o.commands||[]:[],l=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this.d.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map((p,f)=>{let m;p.command&&(u||(u=new me),m=this.j.toInternal(p.command,u));const w=p.insertText;return{insertText:typeof w=="string"?w:{snippet:w.value},filterText:p.filterText,range:p.range?M.from(p.range):void 0,command:m,idx:f,completeBracketPairs:this.e?p.completeBracketPairs:!1}}),commands:c.map(p=>(u||(u=new me),this.j.toInternal(p,u))),suppressSuggestions:!1,enableForwardStability:l}}disposeCompletions(e){this.d.disposeReferenceId(e)?.dispose()}handleDidShowCompletionItem(e,t,r){const i=this.d.get(e)?.items[t];i&&this.h.handleDidShowCompletionItem&&this.e&&this.h.handleDidShowCompletionItem(i,r)}handlePartialAccept(e,t,r,i){const s=this.d.get(e)?.items[t];s&&this.h.handleDidPartiallyAcceptCompletionItem&&this.e&&(this.h.handleDidPartiallyAcceptCompletionItem(s,r),this.h.handleDidPartiallyAcceptCompletionItem(s,D1.to(i)))}},h0=class{async provideInlineEdits(e,t,r){const i=this.f.getDocument(e),s=await this.g.provideInlineEdit(i,{triggerKind:this.e[t.triggerKind],requestUuid:t.requestUuid},r);if(!s||r.isCancellationRequested)return;let n;const o=this.d.createReferenceId({dispose(){n?.dispose()},item:s});let a;s.accepted&&(n||(n=new me),a=this.h.toInternal(s.accepted,n));let c;s.rejected&&(n||(n=new me),c=this.h.toInternal(s.rejected,n));let l;return s.shown&&(n||(n=new me),l=this.h.toInternal(s.shown,n)),n||(n=new me),{pid:o,text:s.text,range:M.from(s.range),showRange:M.from(s.showRange),accepted:a,rejected:c,shown:l,commands:s.commands?.map(h=>this.h.toInternal(h,n))}}disposeEdit(e){this.d.disposeReferenceId(e)?.dispose()}constructor(e,t,r,i){this.f=t,this.g=r,this.h=i,this.d=new $E,this.e={[ju.Automatic]:rl.Automatic,[ju.Invoke]:rl.Invoke}}},$E=class{constructor(){this.d=new Map,this.e=1}createReferenceId(e){const t=this.e++;return this.d.set(t,e),t}disposeReferenceId(e){const t=this.d.get(e);return this.d.delete(e),t}get(e){return this.d.get(e)}},d0=class{constructor(e,t){this.e=e,this.f=t,this.d=new ni("SignatureHelp")}async provideSignatureHelp(e,t,r,i){const s=this.e.getDocument(e),n=Fe.to(t),o=this.g(r),a=await this.f.provideSignatureHelp(s,n,i,o);if(a){const c=this.d.add([a]);return{...nl.from(a),id:c}}}g(e){let t;if(e.activeSignatureHelp){const r=nl.to(e.activeSignatureHelp),i=this.d.get(e.activeSignatureHelp.id,0);i?(t=i,t.activeSignature=r.activeSignature,t.activeParameter=r.activeParameter):t=r}return{...e,activeSignatureHelp:t}}releaseSignatureHelp(e){this.d.delete(e)}},Df=class{constructor(e,t,r,i,s){this.f=e,this.g=t,this.h=r,this.j=i,this.k=s,this.d=new ni("InlayHints"),this.e=new Map}async provideInlayHints(e,t,r){const i=this.f.getDocument(e),s=M.to(t),n=await this.h.provideInlayHints(i,s,r);if(!Array.isArray(n)||n.length===0){this.j.trace(`[InlayHints] NO inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`);return}if(r.isCancellationRequested)return;const o=this.d.add(n);this.e.set(o,new me);const a={hints:[],cacheId:o};for(let c=0;c<n.length;c++)this.l(n[c],s)&&a.hints.push(this.m(n[c],[o,c]));return this.j.trace(`[InlayHints] ${a.hints.length} inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`),a}async resolveInlayHint(e,t){if(typeof this.h.resolveInlayHint!="function")return;const r=this.d.get(...e);if(!r)return;const i=await this.h.resolveInlayHint(r,t);if(i&&this.l(i))return this.m(i,e)}releaseHints(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}l(e,t){return e.label.length===0||Array.isArray(e.label)&&e.label.every(r=>r.value.length===0)?(console.log("INVALID inlay hint, empty label",e),!1):!(t&&!t.contains(e.position))}m(e,t){const r=this.e.get(t[0]);if(!r)throw Error("DisposableStore is missing...");const i={label:"",cacheId:t,tooltip:be.fromStrict(e.tooltip),position:Fe.from(e.position),textEdits:e.textEdits&&e.textEdits.map(Dt.from),kind:e.kind&&Cd.from(e.kind),paddingLeft:e.paddingLeft,paddingRight:e.paddingRight};if(typeof e.label=="string")i.label=e.label;else{const s=[];i.label=s;for(const n of e.label){if(!n.value){console.warn("INVALID inlay hint, empty label part",this.k.identifier.value);continue}const o={label:n.value,tooltip:be.fromStrict(n.tooltip)};Rr.isLocation(n.location)&&(o.location=cr.from(n.location)),n.command&&(o.command=this.g.toInternal(n.command,r)),s.push(o)}}return i}},Pf=class tp{constructor(t,r){this.e=t,this.f=r,this.d=new ni("DocumentLink")}async provideLinks(t,r){const i=this.e.getDocument(t),s=await this.f.provideDocumentLinks(i,r);if(!(!Array.isArray(s)||s.length===0)&&!r.isCancellationRequested){if(typeof this.f.resolveDocumentLink!="function")return{links:s.filter(tp.g).map(Ln.from)};{const n=this.d.add(s),o={links:[],cacheId:n};for(let a=0;a<s.length;a++){if(!tp.g(s[a]))continue;const c=Ln.from(s[a]);c.cacheId=[n,a],o.links.push(c)}return o}}}static g(t){return t.target&&t.target.path.length>5e4?(console.warn("DROPPING link because it is too long"),!1):!0}async resolveLink(t,r){if(typeof this.f.resolveDocumentLink!="function")return;const i=this.d.get(...t);if(!i)return;const s=await this.f.resolveDocumentLink(i,r);if(!(!s||!tp.g(s)))return Ln.from(s)}releaseLinks(t){this.d.delete(t)}},f0=class{constructor(e,t){this.d=e,this.e=t}async provideColors(e,t){const r=this.d.getDocument(e),i=await this.e.provideDocumentColors(r,t);return Array.isArray(i)?i.map(n=>({color:Zo.from(n.color),range:M.from(n.range)})):[]}async provideColorPresentations(e,t,r){const i=this.d.getDocument(e),s=M.to(t.range),n=Zo.to(t.color),o=await this.e.provideColorPresentations(n,{document:i,range:s},r);if(Array.isArray(o))return o.map(Dd.from)}},SE=class{constructor(e,t){this.d=e,this.e=t}async provideFoldingRanges(e,t,r){const i=this.d.getDocument(e),s=await this.e.provideFoldingRanges(i,t,r);if(Array.isArray(s))return s.map(Ad.from)}},IE=class{constructor(e,t,r){this.d=e,this.e=t,this.f=r}async provideSelectionRanges(e,t,r){const i=this.d.getDocument(e),s=t.map(Fe.to),n=await this.e.provideSelectionRanges(i,s,r);if(!Ra(n))return[];if(n.length!==s.length)return this.f.warn("BAD selection ranges, provider must return ranges for each position"),[];const o=[];for(let a=0;a<s.length;a++){const c=[];o.push(c);let l=s[a],u=n[a];for(;;){if(!u.range.contains(l))throw new Error("INVALID selection range, must contain the previous range");if(c.push(f1.from(u)),!u.parent)break;l=u.range,u=u.parent}}return o}},Ol=class{constructor(e,t){this.f=e,this.g=t,this.d=new af(""),this.e=new Map}async prepareSession(e,t,r){const i=this.f.getDocument(e),s=Fe.to(t),n=await this.g.prepareCallHierarchy(i,s,r);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideCallsTo(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyIncomingCalls(i,r);if(s)return s.map(n=>({from:this.h(e,n.from),fromRanges:n.fromRanges.map(o=>M.from(o))}))}async provideCallsFrom(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyOutgoingCalls(i,r);if(s)return s.map(n=>({to:this.h(e,n.to),fromRanges:n.fromRanges.map(o=>M.from(o))}))}releaseSession(e){this.e.delete(e)}h(e,t){const r=this.e.get(e),i=Rn.from(t,e,r.size.toString(36));return r.set(i._itemId,t),i}j(e,t){return this.e.get(e)?.get(t)}},Ul=class{constructor(e,t){this.f=e,this.g=t,this.d=new af(""),this.e=new Map}async prepareSession(e,t,r){const i=this.f.getDocument(e),s=Fe.to(t),n=await this.g.prepareTypeHierarchy(i,s,r);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideSupertypes(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySupertypes(i,r);if(s)return s.map(n=>this.h(e,n))}async provideSubtypes(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySubtypes(i,r);if(s)return s.map(n=>this.h(e,n))}releaseSession(e){this.e.delete(e)}h(e,t){const r=this.e.get(e),i=Nn.from(t,e,r.size.toString(36));return r.set(i._itemId,t),i}j(e,t){return this.e.get(e)?.get(t)}},Af=class{constructor(e,t,r,i,s){this.e=e,this.f=t,this.g=r,this.h=i,this.j=s,this.d=new ni("DocumentDropEdit")}async provideDocumentOnDropEdits(e,t,r,i,s){const n=this.f.getDocument(t),o=Fe.to(r),a=Fs.toDataTransfer(i,async h=>(await this.e.$resolveDocumentOnDropFileData(this.h,e,h)).buffer),c=await this.g.provideDocumentDropEdits(n,o,a,s);if(!c)return;const l=hi(c),u=this.d.add(l);return l.map((h,p)=>({_cacheId:[u,p],title:h.title??d(2800,null,this.j.displayName||this.j.name),kind:h.kind?.value,yieldTo:h.yieldTo?.map(f=>f.value),insertText:typeof h.insertText=="string"?h.insertText:{snippet:h.insertText.value},additionalEdit:h.additionalEdit?kr.from(h.additionalEdit,void 0):void 0}))}async resolveDropEdit(e,t){const[r,i]=e,s=this.d.get(r,i);if(!s||!this.g.resolveDocumentDropEdit)return{};const n=await this.g.resolveDocumentDropEdit(s,t)??s;return{additionalEdit:n.additionalEdit?kr.from(n.additionalEdit,void 0):void 0}}releaseDropEdits(e){this.d.delete(e)}},Hl=class{constructor(e,t){this.adapter=e,this.extension=t}},JL=class Lt{static{this.d=0}constructor(t,r,i,s,n,o,a,c){this.g=r,this.h=i,this.j=s,this.k=n,this.l=o,this.m=a,this.n=c,this.f=new Map,this.e=t.getProxy(z.MainThreadLanguageFeatures)}o(t,r){return Qo.from(t,this.g,r)}p(t){return new Ie(()=>{this.f.delete(t),this.e.$unregister(t)})}q(){return Lt.d++}async s(t,r,i,s,n,o=!1){const a=this.f.get(t);if(!a||!(a.adapter instanceof r))return s;const c=Date.now();o||this.l.trace(`[${a.extension.identifier.value}] INVOKE provider '${i.toString().replace(/[\r\n]/g,"")}'`);const l=i(a.adapter,a.extension);return Promise.resolve(l).catch(u=>{Vs(u)||(this.l.error(`[${a.extension.identifier.value}] provider FAILED`),this.l.error(u),this.n.onExtensionError(a.extension.identifier,u))}).finally(()=>{o||this.l.trace(`[${a.extension.identifier.value}] provider DONE after ${Date.now()-c}ms`)}),st.isCancellationToken(n)?pS(l,n):l}t(t,r){const i=this.q();return this.f.set(i,new Hl(t,r)),i}static u(t){return t.displayName||t.name}static w(t){return t.identifier.value}registerDocumentSymbolProvider(t,r,i,s){const n=this.t(new uE(this.h,i),t),o=s&&s.label||Lt.u(t);return this.e.$registerDocumentSymbolProvider(n,this.o(r,t),o),this.p(n)}$provideDocumentSymbols(t,r,i){return this.s(t,uE,s=>s.provideDocumentSymbols(y.revive(r),i),void 0,i)}registerCodeLensProvider(t,r,i){const s=this.q(),n=typeof i.onDidChangeCodeLenses=="function"?this.q():void 0;this.f.set(s,new Hl(new kf(this.h,this.j.converter,i,t,this.n,this.l),t)),this.e.$registerCodeLensSupport(s,this.o(r,t),n);let o=this.p(s);if(n!==void 0){const a=i.onDidChangeCodeLenses(c=>this.e.$emitCodeLensEvent(n));o=Ie.from(o,a)}return o}$provideCodeLenses(t,r,i){return this.s(t,kf,s=>s.provideCodeLenses(y.revive(r),i),void 0,i,r.scheme==="output")}$resolveCodeLens(t,r,i){return this.s(t,kf,s=>s.resolveCodeLens(r,i),void 0,void 0,!0)}$releaseCodeLenses(t,r){this.s(t,kf,i=>Promise.resolve(i.releaseCodeLenses(r)),void 0,void 0,!0)}registerDefinitionProvider(t,r,i){const s=this.t(new hE(this.h,i),t);return this.e.$registerDefinitionSupport(s,this.o(r,t)),this.p(s)}$provideDefinition(t,r,i,s){return this.s(t,hE,n=>n.provideDefinition(y.revive(r),i,s),[],s)}registerDeclarationProvider(t,r,i){const s=this.t(new dE(this.h,i),t);return this.e.$registerDeclarationSupport(s,this.o(r,t)),this.p(s)}$provideDeclaration(t,r,i,s){return this.s(t,dE,n=>n.provideDeclaration(y.revive(r),i,s),[],s)}registerImplementationProvider(t,r,i){const s=this.t(new fE(this.h,i),t);return this.e.$registerImplementationSupport(s,this.o(r,t)),this.p(s)}$provideImplementation(t,r,i,s){return this.s(t,fE,n=>n.provideImplementation(y.revive(r),i,s),[],s)}registerTypeDefinitionProvider(t,r,i){const s=this.t(new pE(this.h,i),t);return this.e.$registerTypeDefinitionSupport(s,this.o(r,t)),this.p(s)}$provideTypeDefinition(t,r,i,s){return this.s(t,pE,n=>n.provideTypeDefinition(y.revive(r),i,s),[],s)}registerHoverProvider(t,r,i,s){const n=this.t(new o0(this.h,i),t);return this.e.$registerHoverProvider(n,this.o(r,t)),this.p(n)}$provideHover(t,r,i,s,n){return this.s(t,o0,o=>o.provideHover(y.revive(r),i,s,n),void 0,n)}$releaseHover(t,r){this.s(t,o0,i=>Promise.resolve(i.releaseHover(r)),void 0,void 0)}registerEvaluatableExpressionProvider(t,r,i,s){const n=this.t(new gE(this.h,i),t);return this.e.$registerEvaluatableExpressionProvider(n,this.o(r,t)),this.p(n)}$provideEvaluatableExpression(t,r,i,s){return this.s(t,gE,n=>n.provideEvaluatableExpression(y.revive(r),i,s),void 0,s)}registerInlineValuesProvider(t,r,i,s){const n=typeof i.onDidChangeInlineValues=="function"?this.q():void 0,o=this.t(new mE(this.h,i),t);this.e.$registerInlineValuesProvider(o,this.o(r,t),n);let a=this.p(o);if(n!==void 0){const c=i.onDidChangeInlineValues(l=>this.e.$emitInlineValuesEvent(n));a=Ie.from(a,c)}return a}$provideInlineValues(t,r,i,s,n){return this.s(t,mE,o=>o.provideInlineValues(y.revive(r),i,s,n),void 0,n)}registerDocumentHighlightProvider(t,r,i){const s=this.t(new vE(this.h,i),t);return this.e.$registerDocumentHighlightProvider(s,this.o(r,t)),this.p(s)}registerMultiDocumentHighlightProvider(t,r,i){const s=this.t(new wE(this.h,i,this.l),t);return this.e.$registerMultiDocumentHighlightProvider(s,this.o(r,t)),this.p(s)}$provideDocumentHighlights(t,r,i,s){return this.s(t,vE,n=>n.provideDocumentHighlights(y.revive(r),i,s),void 0,s)}$provideMultiDocumentHighlights(t,r,i,s,n){return this.s(t,wE,o=>o.provideMultiDocumentHighlights(y.revive(r),i,s.map(a=>y.revive(a)),n),void 0,n)}registerLinkedEditingRangeProvider(t,r,i){const s=this.t(new bE(this.h,i),t);return this.e.$registerLinkedEditingRangeProvider(s,this.o(r,t)),this.p(s)}$provideLinkedEditingRanges(t,r,i,s){return this.s(t,bE,async n=>{const o=await n.provideLinkedEditingRanges(y.revive(r),i,s);if(o)return{ranges:o.ranges,wordPattern:o.wordPattern?Lt.y(o.wordPattern):void 0}},void 0,s)}registerReferenceProvider(t,r,i){const s=this.t(new yE(this.h,i),t);return this.e.$registerReferenceSupport(s,this.o(r,t)),this.p(s)}$provideReferences(t,r,i,s,n){return this.s(t,yE,o=>o.provideReferences(y.revive(r),i,s,n),void 0,n)}registerCodeActionProvider(t,r,i,s){const n=new me,o=this.t(new Sf(this.h,this.j.converter,this.k,i,this.l,t,this.m),t);return this.e.$registerCodeActionSupport(o,this.o(r,t),{providedKinds:s?.providedCodeActionKinds?.map(a=>a.value),documentation:s?.documentation?.map(a=>({kind:a.kind.value,command:this.j.converter.toInternal(a.command,n)}))},Lt.u(t),Lt.w(t),!!i.resolveCodeAction),n.add(this.p(o)),n}$provideCodeActions(t,r,i,s,n){return this.s(t,Sf,o=>o.provideCodeActions(y.revive(r),i,s,n),void 0,n)}$resolveCodeAction(t,r,i){return this.s(t,Sf,s=>s.resolveCodeAction(r,i),{},void 0)}$releaseCodeActions(t,r){this.s(t,Sf,i=>Promise.resolve(i.releaseCodeActions(r)),void 0,void 0)}registerDocumentFormattingEditProvider(t,r,i){const s=this.t(new EE(this.h,i),t);return this.e.$registerDocumentFormattingSupport(s,this.o(r,t),t.identifier,t.displayName||t.name),this.p(s)}$provideDocumentFormattingEdits(t,r,i,s){return this.s(t,EE,n=>n.provideDocumentFormattingEdits(y.revive(r),i,s),void 0,s)}registerDocumentRangeFormattingEditProvider(t,r,i){const s=typeof i.provideDocumentRangesFormattingEdits=="function",n=this.t(new a0(this.h,i),t);return this.e.$registerRangeFormattingSupport(n,this.o(r,t),t.identifier,t.displayName||t.name,s),this.p(n)}$provideDocumentRangeFormattingEdits(t,r,i,s,n){return this.s(t,a0,o=>o.provideDocumentRangeFormattingEdits(y.revive(r),i,s,n),void 0,n)}$provideDocumentRangesFormattingEdits(t,r,i,s,n){return this.s(t,a0,o=>o.provideDocumentRangesFormattingEdits(y.revive(r),i,s,n),void 0,n)}registerOnTypeFormattingEditProvider(t,r,i,s){const n=this.t(new xE(this.h,i),t);return this.e.$registerOnTypeFormattingSupport(n,this.o(r,t),s,t.identifier),this.p(n)}$provideOnTypeFormattingEdits(t,r,i,s,n,o){return this.s(t,xE,a=>a.provideOnTypeFormattingEdits(y.revive(r),i,s,n,o),void 0,o)}registerWorkspaceSymbolProvider(t,r){const i=this.t(new If(r,this.l),t);return this.e.$registerNavigateTypeSupport(i,typeof r.resolveWorkspaceSymbol=="function"),this.p(i)}$provideWorkspaceSymbols(t,r,i){return this.s(t,If,s=>s.provideWorkspaceSymbols(r,i),{symbols:[]},i)}$resolveWorkspaceSymbol(t,r,i){return this.s(t,If,s=>s.resolveWorkspaceSymbol(r,i),void 0,void 0)}$releaseWorkspaceSymbols(t,r){this.s(t,If,i=>i.releaseWorkspaceSymbols(r),void 0,void 0)}registerRenameProvider(t,r,i){const s=this.t(new Cf(this.h,i,this.l),t);return this.e.$registerRenameSupport(s,this.o(r,t),Cf.supportsResolving(i)),this.p(s)}$provideRenameEdits(t,r,i,s,n){return this.s(t,Cf,o=>o.provideRenameEdits(y.revive(r),i,s,n),void 0,n)}$resolveRenameLocation(t,r,i,s){return this.s(t,Cf,n=>n.resolveRenameLocation(y.revive(r),i,s),void 0,s)}registerNewSymbolNamesProvider(t,r,i){const s=this.t(new c0(this.h,i,this.l),t);return this.e.$registerNewSymbolNamesProvider(s,this.o(r,t)),this.p(s)}$supportsAutomaticNewSymbolNamesTriggerKind(t){return this.s(t,c0,r=>r.supportsAutomaticNewSymbolNamesTriggerKind(),!1,void 0)}$provideNewSymbolNames(t,r,i,s,n){return this.s(t,c0,o=>o.provideNewSymbolNames(y.revive(r),i,s,n),void 0,n)}registerDocumentSemanticTokensProvider(t,r,i,s){const n=this.t(new u0(this.h,i),t),o=typeof i.onDidChangeSemanticTokens=="function"?this.q():void 0;this.e.$registerDocumentSemanticTokensProvider(n,this.o(r,t),s,o);let a=this.p(n);if(o){const c=i.onDidChangeSemanticTokens(l=>this.e.$emitDocumentSemanticTokensEvent(o));a=Ie.from(a,c)}return a}$provideDocumentSemanticTokens(t,r,i,s){return this.s(t,u0,n=>n.provideDocumentSemanticTokens(y.revive(r),i,s),null,s)}$releaseDocumentSemanticTokens(t,r){this.s(t,u0,i=>i.releaseDocumentSemanticColoring(r),void 0,void 0)}registerDocumentRangeSemanticTokensProvider(t,r,i,s){const n=this.t(new kE(this.h,i),t);return this.e.$registerDocumentRangeSemanticTokensProvider(n,this.o(r,t),s),this.p(n)}$provideDocumentRangeSemanticTokens(t,r,i,s){return this.s(t,kE,n=>n.provideDocumentRangeSemanticTokens(y.revive(r),i,s),null,s)}registerCompletionItemProvider(t,r,i,s){const n=this.t(new Ml(this.h,this.j.converter,i,this.m,t),t);return this.e.$registerCompletionsProvider(n,this.o(r,t),s,Ml.supportsResolving(i),t.identifier),this.p(n)}$provideCompletionItems(t,r,i,s,n){return this.s(t,Ml,o=>o.provideCompletionItems(y.revive(r),i,s,n),void 0,n)}$resolveCompletionItem(t,r,i){return this.s(t,Ml,s=>s.resolveCompletionItem(r,i),void 0,i)}$releaseCompletionItems(t,r){this.s(t,Ml,i=>i.releaseCompletionItems(r),void 0,void 0)}registerInlineCompletionsProvider(t,r,i,s){const n=new QL(t,this.h,i,this.j.converter),o=this.t(n,t);return this.e.$registerInlineCompletionsSupport(o,this.o(r,t),n.supportsHandleEvents,Ue.toKey(t.identifier.value),s?.yieldTo?.map(a=>Ue.toKey(a))||[]),this.p(o)}$provideInlineCompletions(t,r,i,s,n){return this.s(t,Ea,o=>o.provideInlineCompletions(y.revive(r),i,s,n),void 0,n)}$provideInlineEditsForRange(t,r,i,s,n){return this.s(t,Ea,o=>o.provideInlineEditsForRange(y.revive(r),i,s,n),void 0,n)}$handleInlineCompletionDidShow(t,r,i,s){this.s(t,Ea,async n=>{n.handleDidShowCompletionItem(r,i,s)},void 0,void 0)}$handleInlineCompletionPartialAccept(t,r,i,s,n){this.s(t,Ea,async o=>{o.handlePartialAccept(r,i,s,n)},void 0,void 0)}$freeInlineCompletionsList(t,r){this.s(t,Ea,async i=>{i.disposeCompletions(r)},void 0,void 0)}registerInlineEditProvider(t,r,i){const s=new h0(t,this.h,i,this.j.converter),n=this.t(s,t);return this.e.$registerInlineEditProvider(n,this.o(r,t),t.identifier,i.displayName||t.name),this.p(n)}$provideInlineEdit(t,r,i,s){return this.s(t,h0,n=>n.provideInlineEdits(y.revive(r),i,s),void 0,s)}$freeInlineEdit(t,r){this.s(t,h0,async i=>{i.disposeEdit(r)},void 0,void 0)}registerSignatureHelpProvider(t,r,i,s){const n=Array.isArray(s)?{triggerCharacters:s,retriggerCharacters:[]}:s,o=this.t(new d0(this.h,i),t);return this.e.$registerSignatureHelpProvider(o,this.o(r,t),n),this.p(o)}$provideSignatureHelp(t,r,i,s,n){return this.s(t,d0,o=>o.provideSignatureHelp(y.revive(r),i,s,n),void 0,n)}$releaseSignatureHelp(t,r){this.s(t,d0,i=>i.releaseSignatureHelp(r),void 0,void 0)}registerInlayHintsProvider(t,r,i){const s=typeof i.onDidChangeInlayHints=="function"?this.q():void 0,n=this.t(new Df(this.h,this.j.converter,i,this.l,t),t);this.e.$registerInlayHintsProvider(n,this.o(r,t),typeof i.resolveInlayHint=="function",s,Lt.u(t));let o=this.p(n);if(s!==void 0){const a=i.onDidChangeInlayHints(c=>this.e.$emitInlayHintsEvent(s));o=Ie.from(o,a)}return o}$provideInlayHints(t,r,i,s){return this.s(t,Df,n=>n.provideInlayHints(y.revive(r),i,s),void 0,s)}$resolveInlayHint(t,r,i){return this.s(t,Df,s=>s.resolveInlayHint(r,i),void 0,i)}$releaseInlayHints(t,r){this.s(t,Df,i=>i.releaseHints(r),void 0,void 0)}registerDocumentLinkProvider(t,r,i){const s=this.t(new Pf(this.h,i),t);return this.e.$registerDocumentLinkProvider(s,this.o(r,t),typeof i.resolveDocumentLink=="function"),this.p(s)}$provideDocumentLinks(t,r,i){return this.s(t,Pf,s=>s.provideLinks(y.revive(r),i),void 0,i,r.scheme==="output")}$resolveDocumentLink(t,r,i){return this.s(t,Pf,s=>s.resolveLink(r,i),void 0,void 0,!0)}$releaseDocumentLinks(t,r){this.s(t,Pf,i=>i.releaseLinks(r),void 0,void 0,!0)}registerColorProvider(t,r,i){const s=this.t(new f0(this.h,i),t);return this.e.$registerDocumentColorProvider(s,this.o(r,t)),this.p(s)}$provideDocumentColors(t,r,i){return this.s(t,f0,s=>s.provideColors(y.revive(r),i),[],i)}$provideColorPresentations(t,r,i,s){return this.s(t,f0,n=>n.provideColorPresentations(y.revive(r),i,s),void 0,s)}registerFoldingRangeProvider(t,r,i){const s=this.q(),n=typeof i.onDidChangeFoldingRanges=="function"?this.q():void 0;this.f.set(s,new Hl(new SE(this.h,i),t)),this.e.$registerFoldingRangeProvider(s,this.o(r,t),t.identifier,n);let o=this.p(s);if(n!==void 0){const a=i.onDidChangeFoldingRanges(()=>this.e.$emitFoldingRangeEvent(n));o=Ie.from(o,a)}return o}$provideFoldingRanges(t,r,i,s){return this.s(t,SE,n=>n.provideFoldingRanges(y.revive(r),i,s),void 0,s)}registerSelectionRangeProvider(t,r,i){const s=this.t(new IE(this.h,i,this.l),t);return this.e.$registerSelectionRangeProvider(s,this.o(r,t)),this.p(s)}$provideSelectionRanges(t,r,i,s){return this.s(t,IE,n=>n.provideSelectionRanges(y.revive(r),i,s),[],s)}registerCallHierarchyProvider(t,r,i){const s=this.t(new Ol(this.h,i),t);return this.e.$registerCallHierarchyProvider(s,this.o(r,t)),this.p(s)}$prepareCallHierarchy(t,r,i,s){return this.s(t,Ol,n=>Promise.resolve(n.prepareSession(y.revive(r),i,s)),void 0,s)}$provideCallHierarchyIncomingCalls(t,r,i,s){return this.s(t,Ol,n=>n.provideCallsTo(r,i,s),void 0,s)}$provideCallHierarchyOutgoingCalls(t,r,i,s){return this.s(t,Ol,n=>n.provideCallsFrom(r,i,s),void 0,s)}$releaseCallHierarchy(t,r){this.s(t,Ol,i=>Promise.resolve(i.releaseSession(r)),void 0,void 0)}registerTypeHierarchyProvider(t,r,i){const s=this.t(new Ul(this.h,i),t);return this.e.$registerTypeHierarchyProvider(s,this.o(r,t)),this.p(s)}$prepareTypeHierarchy(t,r,i,s){return this.s(t,Ul,n=>Promise.resolve(n.prepareSession(y.revive(r),i,s)),void 0,s)}$provideTypeHierarchySupertypes(t,r,i,s){return this.s(t,Ul,n=>n.provideSupertypes(r,i,s),void 0,s)}$provideTypeHierarchySubtypes(t,r,i,s){return this.s(t,Ul,n=>n.provideSubtypes(r,i,s),void 0,s)}$releaseTypeHierarchy(t,r){this.s(t,Ul,i=>Promise.resolve(i.releaseSession(r)),void 0,void 0)}registerDocumentOnDropEditProvider(t,r,i,s){const n=this.q();return this.f.set(n,new Hl(new Af(this.e,this.h,i,n,t),t)),this.e.$registerDocumentOnDropEditProvider(n,this.o(r,t),s?{supportsResolve:!!i.resolveDocumentDropEdit,dropMimeTypes:s.dropMimeTypes,providedDropKinds:s.providedDropEditKinds?.map(o=>o.value)}:void 0),this.p(n)}$provideDocumentOnDropEdits(t,r,i,s,n,o){return this.s(t,Af,a=>Promise.resolve(a.provideDocumentOnDropEdits(r,y.revive(i),s,n,o)),void 0,void 0)}$resolveDropEdit(t,r,i){return this.s(t,Af,s=>s.resolveDropEdit(r,i),{},void 0)}$releaseDocumentOnDropEdits(t,r){this.s(t,Af,i=>Promise.resolve(i.releaseDropEdits(r)),void 0,void 0)}registerDocumentPasteEditProvider(t,r,i,s){const n=this.q();return this.f.set(n,new Hl(new Fl(this.e,this.h,i,n,t),t)),this.e.$registerPasteEditProvider(n,this.o(r,t),{supportsCopy:!!i.prepareDocumentPaste,supportsPaste:!!i.provideDocumentPasteEdits,supportsResolve:!!i.resolveDocumentPasteEdit,providedPasteEditKinds:s.providedPasteEditKinds?.map(o=>o.value),copyMimeTypes:s.copyMimeTypes,pasteMimeTypes:s.pasteMimeTypes}),this.p(n)}$prepareDocumentPaste(t,r,i,s,n){return this.s(t,Fl,o=>o.prepareDocumentPaste(y.revive(r),i,s,n),void 0,n)}$providePasteEdits(t,r,i,s,n,o,a){return this.s(t,Fl,c=>c.providePasteEdits(r,y.revive(i),s,n,o,a),void 0,a)}$resolvePasteEdit(t,r,i){return this.s(t,Fl,s=>s.resolvePasteEdit(r,i),{},void 0)}$releasePasteEdits(t,r){this.s(t,Fl,i=>Promise.resolve(i.releasePasteEdits(r)),void 0,void 0)}static y(t){return{pattern:t.source,flags:t.flags}}static z(t){return{decreaseIndentPattern:Lt.y(t.decreaseIndentPattern),increaseIndentPattern:Lt.y(t.increaseIndentPattern),indentNextLinePattern:t.indentNextLinePattern?Lt.y(t.indentNextLinePattern):void 0,unIndentedLinePattern:t.unIndentedLinePattern?Lt.y(t.unIndentedLinePattern):void 0}}static B(t){return{beforeText:Lt.y(t.beforeText),afterText:t.afterText?Lt.y(t.afterText):void 0,previousLineText:t.previousLineText?Lt.y(t.previousLineText):void 0,action:t.action}}static C(t){return t.map(Lt.B)}static D(t){return{open:t.open,close:t.close,notIn:t.notIn?t.notIn.map(r=>Fo.toString(r)):void 0}}static E(t){return t.map(Lt.D)}setLanguageConfiguration(t,r,i){const{wordPattern:s}=i;if(s&&vb(s))throw new Error(`Invalid language configuration: wordPattern '${s}' is not allowed to match the empty string.`);s?this.h.setWordDefinitionFor(r,s):this.h.setWordDefinitionFor(r,void 0),i.__electricCharacterSupport&&this.m.report("LanguageConfiguration.__electricCharacterSupport",t,"Do not use."),i.__characterPairSupport&&this.m.report("LanguageConfiguration.__characterPairSupport",t,"Do not use.");const n=this.q(),o={comments:i.comments,brackets:i.brackets,wordPattern:i.wordPattern?Lt.y(i.wordPattern):void 0,indentationRules:i.indentationRules?Lt.z(i.indentationRules):void 0,onEnterRules:i.onEnterRules?Lt.C(i.onEnterRules):void 0,__electricCharacterSupport:i.__electricCharacterSupport,__characterPairSupport:i.__characterPairSupport,autoClosingPairs:i.autoClosingPairs?Lt.E(i.autoClosingPairs):void 0};return this.e.$setLanguageConfiguration(n,r,o),this.p(n)}$setWordDefinitions(t){for(const r of t)this.h.setWordDefinitionFor(r.languageId,new RegExp(r.regexSource,r.regexFlags))}};function XL(e){return typeof e=="object"&&typeof e.sessionId=="string"}var n_=_("ILanguageModelToolsService"),YL=_("textFileService"),CE;(function(e){e[e.FILE_IS_BINARY=0]="FILE_IS_BINARY"})(CE||(CE={}));var DE;(function(e){e[e.SAVED=0]="SAVED",e[e.DIRTY=1]="DIRTY",e[e.PENDING_SAVE=2]="PENDING_SAVE",e[e.CONFLICT=3]="CONFLICT",e[e.ORPHAN=4]="ORPHAN",e[e.ERROR=5]="ERROR"})(DE||(DE={}));var PE;(function(e){e[e.EDITOR=1]="EDITOR",e[e.REFERENCE=2]="REFERENCE",e[e.OTHER=3]="OTHER"})(PE||(PE={}));var AE;(function(e){e[e.Encode=0]="Encode",e[e.Decode=1]="Decode"})(AE||(AE={}));var ZL=_("codeMapperService"),KL=_("chatEditingService"),TE;(function(e){e[e.User=0]="User",e[e.Programmatic=1]="Programmatic"})(TE||(TE={}));var RE;(function(e){e[e.Modified=0]="Modified",e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected",e[e.Transient=3]="Transient",e[e.Attached=4]="Attached",e[e.Sent=5]="Sent",e[e.Suggested=6]="Suggested"})(RE||(RE={}));var LE;(function(e){e[e.WorkingSet=0]="WorkingSet",e[e.Other=1]="Other"})(LE||(LE={}));var NE;(function(e){e[e.Initial=0]="Initial",e[e.StreamingEdits=1]="StreamingEdits",e[e.Idle=2]="Idle",e[e.Disposed=3]="Disposed"})(NE||(NE={}));var o_=new C("chatEditingWidgetFileState",void 0,d(5229,null)),a_=new C("chatEditingWidgetFileReadonly",void 0,d(5230,null)),c_=new C("chatEditingAgentSupportsReadonlyReferences",void 0,d(5231,null)),l_=new C("decidedChatEditingResource",[]),u_=new C("chatEditingResource",void 0),h_=new C("inChatEditingSession",void 0),d_=new C("isApplyingChatEdits",void 0),f_=new C("hasUndecidedChatEditingResource",!1),p_=new C("hasAppliedChatEdits",!1),g_=new C("applyingChatEditsFailed",!1),FE;(function(e){e[e.Created=0]="Created",e[e.Modified=1]="Modified"})(FE||(FE={}));var eN=_("languageModelIgnoredFilesService"),ME=`
The user is very smart and can understand how to apply your edits to their files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. The user prefers that you are as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
		return this.age;
	}
}
`,tN={id:"vscode_editFile",tags:["vscode_editing"],displayName:d(5250,null),modelDescription:`Edit a file in the workspace. Use this tool once per file that needs to be modified, even if there are multiple changes for a file. Generate the "explanation" property first. ${ME}`,inputSchema:{type:"object",properties:{explanation:{type:"string",description:"A short explanation of the edit being made. Can be the same as the explanation you showed to the user."},filePath:{type:"string",description:"An absolute path to the file to edit"},code:{type:"string",description:"The code change to apply to the file. "+ME}},required:["explanation","filePath","code"]}},OE=class{constructor(t,r,i,s,n,o){this.a=t,this.b=r,this.c=i,this.d=s,this.f=n,this.g=o}async invoke(t,r,i){if(!t.context)throw new Error("toolInvocationToken is required for this tool");const s=t.parameters,n=y.revive(s.file);if(!this.d.isInsideWorkspace(n))throw new Error(`File ${n.fsPath} can't be edited because it's not inside the current workspace`);if(await this.f.fileIsIgnored(n,i))throw new Error(`File ${n.fsPath} can't be edited because it is configured to be ignored by Copilot`);const o=this.a.getSession(t.context?.sessionId),a=o.getRequests().at(-1);if(o.acceptResponseProgress(a,{kind:"markdownContent",content:new Tu("\n````\n")}),o.acceptResponseProgress(a,{kind:"codeblockUri",uri:n}),o.acceptResponseProgress(a,{kind:"markdownContent",content:new Tu(s.code+"\n````\n")}),this.b.currentEditingSession?.chatSessionId!==o.sessionId)throw new Error("This tool must be called from within an editing session");const c=await this.c.mapCode({codeBlocks:[{code:s.code,resource:n,markdownBeforeBlock:s.explanation}],location:"tool",chatRequestId:t.chatRequestId},{textEdit:(u,h)=>{o.acceptResponseProgress(a,{kind:"textEdit",uri:u,edits:h})}},i);if(o.acceptResponseProgress(a,{kind:"textEdit",uri:n,edits:[],done:!0}),c?.errorMessage)throw new Error(c.errorMessage);let l;return await new Promise(u=>{let h=!1;l=Lg(p=>{const w=this.b.currentEditingSessionObs.read(p)?.entries.read(p)?.find(E=>E.modifiedURI.toString()===n.toString());w&&(w.isCurrentlyBeingModified.read(p)?h=!0:h&&u(!0))})}).finally(()=>{l.dispose()}),await this.g.save(n,{reason:2,skipSaveParticipants:!0}),{content:[{kind:"text",value:"The file was edited successfully"}]}}};OE=__decorate([__param(0,YR),__param(1,KL),__param(2,ZL),__param(3,Du),__param(4,eN),__param(5,YL)],OE);var rN=class{processInput(e){return e.filePath?{file:y.file(e.filePath),explanation:e.explanation,code:e.code}:e}},iN=class{constructor(e){this.a=new Map,this.c=new Map,this.d=new Map,this.e=new Map,this.b=e.getProxy(z.MainThreadLanguageModelTools),this.b.$getTools().then(t=>{for(const r of t)this.d.set(r.id,ir(r))}),this.e.set(tN.id,new rN)}async $countTokensForInvocation(e,t,r){const i=this.c.get(e);if(!i)throw new Error(`Tool invocation call ${e} not found`);return await i(t,r)}async invokeTool(e,t,r,i){const s=Dr();r.tokenizationOptions&&this.c.set(s,r.tokenizationOptions.countTokens);try{if(r.toolInvocationToken&&!XL(r.toolInvocationToken))throw new Error("Invalid tool invocation token");if(t==="vscode_editFile"&&!ct(e,"chatParticipantPrivate"))throw new Error(`Invalid tool: ${t}`);const n=this.e.get(t)?.processInput(r.input)??r.input,o=await this.b.$invokeTool({toolId:t,callId:s,parameters:n,tokenBudget:r.tokenizationOptions?.tokenBudget,context:r.toolInvocationToken,chatRequestId:ct(e,"chatParticipantPrivate")?r.chatRequestId:void 0},i);return Jd.to(o)}finally{this.c.delete(s)}}$onDidChangeTools(e){this.d.clear();for(const t of e)this.d.set(t.id,t)}getTools(e){return Array.from(this.d.values()).map(t=>T1.to(t)).filter(t=>t.name==="vscode_editFile"?ct(e,"chatParticipantPrivate"):!0)}async $invokeTool(e,t){const r=this.a.get(e.toolId);if(!r)throw new Error(`Unknown tool ${e.toolId}`);const i={input:e.parameters,toolInvocationToken:e.context,chatRequestId:e.chatRequestId};e.tokenBudget!==void 0&&(i.tokenizationOptions={tokenBudget:e.tokenBudget,countTokens:this.c.get(e.callId)||((n,o=st.None)=>this.b.$countTokensForInvocation(e.callId,n,o))});const s=await Ub(Promise.resolve(r.tool.invoke(i,t)),t);if(!s)throw new ui;return Jd.from(s)}async $prepareToolInvocation(e,t,r){const i=this.a.get(e);if(!i)throw new Error(`Unknown tool ${e}`);if(!i.tool.prepareInvocation)return;const s={input:t},n=await i.tool.prepareInvocation(s,r);if(n)return(n.pastTenseMessage||n.tooltip)&&R(i.extension,"chatParticipantPrivate"),{confirmationMessages:n.confirmationMessages?{title:n.confirmationMessages.title,message:typeof n.confirmationMessages.message=="string"?n.confirmationMessages.message:be.from(n.confirmationMessages.message)}:void 0,invocationMessage:be.fromStrict(n.invocationMessage),pastTenseMessage:be.fromStrict(n.pastTenseMessage),tooltip:n.tooltip?be.fromStrict(n.tooltip):void 0}}registerTool(e,t,r){return this.a.set(t,{extension:e,tool:r}),this.b.$registerTool(t),ce(()=>{this.a.delete(t),this.b.$unregisterTool(t)})}},sN=class{constructor(e,t,r,i){this.c=t,this.d=r,this.e=i,this.b=[],this.f=0,this.g=new Set,this.a=e.getProxy(z.MainThreadLanguages)}$acceptLanguageIds(e){this.b=e}async getLanguages(){return this.b.slice(0)}async changeLanguage(e,t){await this.a.$changeLanguage(e,t);const r=this.c.getDocumentData(e);if(!r)throw new Error(`document '${e.toString()}' NOT found`);return r.document}async tokenAtPosition(e,t){const r=e.version,i=Fe.from(t),s=await this.a.$tokensAtPosition(e.uri,i),n={type:As.Other,range:e.getWordRangeAtPosition(t)??new we(t.line,t.character,t.line,t.character)};if(!s)return n;const o={range:M.to(s.range),type:e1.to(s.type)};return!o.range.contains(t)||r!==e.version?n:o}createLanguageStatusItem(e,t,r){const i=this.f++,s=this.a,n=this.g,o=`${e.identifier.value}/${t}`;if(n.has(o))throw new Error(`LanguageStatusItem with id '${t}' ALREADY exists`);n.add(o);const a={selector:r,id:t,name:e.displayName??e.name,severity:Po.Information,command:void 0,text:"",detail:"",busy:!1};let c;const l=new me,u=()=>{if(c?.dispose(),!n.has(o)){console.warn(`LanguageStatusItem (${t}) from ${e.identifier.value} has been disposed and CANNOT be updated anymore`);return}c=ES(()=>{l.clear(),this.a.$setLanguageStatus(i,{id:o,name:a.name??e.displayName??e.name,source:e.displayName??e.name,selector:Qo.from(a.selector,this.e),label:a.text,detail:a.detail??"",severity:a.severity===Po.Error?wt.Error:a.severity===Po.Warning?wt.Warning:wt.Info,command:a.command&&this.d.toInternal(a.command,l),accessibilityInfo:a.accessibilityInformation,busy:a.busy})},0)},h={dispose(){l.dispose(),c?.dispose(),s.$removeLanguageStatus(i),n.delete(o)},get id(){return a.id},get name(){return a.name},set name(p){a.name=p,u()},get selector(){return a.selector},set selector(p){a.selector=p,u()},get text(){return a.text},set text(p){a.text=p,u()},set text2(p){R(e,"languageStatusText"),a.text=p,u()},get text2(){return R(e,"languageStatusText"),a.text},get detail(){return a.detail},set detail(p){a.detail=p,u()},get severity(){return a.severity},set severity(p){a.severity=p,u()},get accessibilityInformation(){return a.accessibilityInformation},set accessibilityInformation(p){a.accessibilityInformation=p,u()},get command(){return a.command},set command(p){a.command=p,u()},get busy(){return a.busy},set busy(p){a.busy=p,u()}};return u(),h}};function nN(e){return e&&e.title}var p0=class{constructor(t,r){this.b=r,this.a=t.getProxy(z.MainThreadMessageService)}showMessage(t,r,i,s,n){const o={source:{identifier:t.identifier,label:t.displayName||t.name}};let a;typeof s=="string"||nN(s)?a=[s,...n]:(o.modal=s?.modal,o.useCustom=s?.useCustom,o.detail=s?.detail,a=n),o.useCustom&&R(t,"resolvers");const c=[];let l=!1;for(let u=0;u<a.length;u++){const h=a[u];if(typeof h=="string")c.push({title:h,handle:u,isCloseAffordance:!1});else if(typeof h=="object"){const{title:p,isCloseAffordance:f}=h;c.push({title:p,isCloseAffordance:!!f,handle:u}),f&&(l?this.b.warn(`[${t.identifier}] Only one message item can have 'isCloseAffordance':`,h):l=!0)}else this.b.warn(`[${t.identifier}] Invalid message item:`,h)}return this.a.$showMessage(r,i,o,c).then(u=>{if(typeof u=="number")return a[u]})}};p0=__decorate([__param(1,He)],p0);var g0=class{constructor(e,t,r,i){this.start=e,this.deletedCount=t,this.deletedItems=r,this.items=i}asApiEvent(){return{range:new Vi(this.start,this.start+this.deletedCount),addedCells:this.items.map(e=>e.apiCell),removedCells:this.deletedItems}}},m0=class{static asModelAddData(e){return{EOL:e.eol,lines:e.source,languageId:e.language,uri:e.uri,isDirty:!1,versionId:1}}constructor(e,t,r){this.notebook=e,this.h=t,this.j=r,this.handle=r.handle,this.uri=y.revive(r.uri),this.cellKind=r.cellKind,this.a=r.outputs.map(Ls.to),this.e=r.internalMetadata??{},this.b=Object.freeze(r.metadata??{}),this.d=Object.freeze(ta.to(r.internalMetadata??{}))}get internalMetadata(){return this.e}get apiCell(){if(!this.f){const e=this,t=this.h.getDocument(this.uri);if(!t)throw new Error(`MISSING extHostDocument for notebook cell: ${this.uri}`);const r={get index(){return e.notebook.getCellIndex(e)},notebook:e.notebook.apiNotebook,kind:al.to(this.j.cellKind),document:t.document,get mime(){return e.g},set mime(i){e.g=i},get outputs(){return e.a.slice(0)},get metadata(){return e.b},get executionSummary(){return e.d}};this.f=Object.freeze(r)}return this.f}setOutputs(e){this.a=e.map(Ls.to)}setOutputItems(e,t,r){const i=r.map(ra.to),s=this.a.find(n=>n.id===e);if(s&&(t||(s.items.length=0),s.items.push(...i),s.items.length>1&&s.items.every(n=>s6(n.mime)))){const n=new Map,o=[];s.items.forEach(a=>{let c;n.has(a.mime)?c=n.get(a.mime):(c=[],n.set(a.mime,c),o.push(a.mime)),c.push(a.data)}),s.items.length=0,o.forEach(a=>{const c=iD(n.get(a));s.items.push({mime:a,data:c.data.buffer})})}}setMetadata(e){this.b=Object.freeze(e)}setInternalMetadata(e){this.e=e,this.d=Object.freeze(ta.to(e))}setMime(e){}},oN=class b3{static{this.a=0}constructor(t,r,i,s,n){this.k=t,this.l=r,this.m=i,this.uri=s,this.handle=b3.a++,this.b=[],this.g=0,this.h=!1,this.j=!1,this.d=n.viewType,this.f=Object.freeze(n.metadata??Object.create(null)),this.r([[0,0,n.cells]],!0,void 0),this.g=n.versionId}dispose(){this.j=!0}get versionId(){return this.g}get apiNotebook(){if(!this.e){const t=this,r={get uri(){return t.uri},get version(){return t.g},get notebookType(){return t.d},get isDirty(){return t.h},get isUntitled(){return t.uri.scheme===q.untitled},get isClosed(){return t.j},get metadata(){return t.f},get cellCount(){return t.b.length},cellAt(i){return i=t.n(i),t.b[i].apiCell},getCells(i){return(i?t.p(i):t.b).map(n=>n.apiCell)},save(){return t.q()},[Symbol.for("debug.description")](){return`NotebookDocument(${this.uri.toString()})`}};this.e=Object.freeze(r)}return this.e}acceptDocumentPropertiesChanged(t){t.metadata&&(this.f=Object.freeze({...this.f,...t.metadata}))}acceptDirty(t){this.h=t}acceptModelChanged(t,r,i){this.g=t.versionId,this.h=r,this.acceptDocumentPropertiesChanged({metadata:i});const s={notebook:this.apiNotebook,metadata:i,cellChanges:[],contentChanges:[]},n=[];for(const a of t.rawEvents)a.kind===Yr.ModelChange?this.r(a.changes,!1,s.contentChanges):a.kind===Yr.Move?this.s(a.index,a.length,a.newIdx,s.contentChanges):a.kind===Yr.Output?(this.t(a.index,a.outputs),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===Yr.OutputItem?(this.u(a.index,a.outputId,a.append,a.outputItems),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===Yr.ChangeCellLanguage?(this.v(a.index,a.language),n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document})):a.kind===Yr.ChangeCellContent?n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document}):a.kind===Yr.ChangeCellMime?this.w(a.index,a.mime):a.kind===Yr.ChangeCellMetadata?(this.x(a.index,a.metadata),n.push({cell:this.b[a.index].apiCell,metadata:this.b[a.index].apiCell.metadata})):a.kind===Yr.ChangeCellInternalMetadata&&(this.y(a.index,a.internalMetadata),n.push({cell:this.b[a.index].apiCell,executionSummary:this.b[a.index].apiCell.executionSummary}));const o=new Map;for(let a=0;a<n.length;a++){const c=n[a],l=o.get(c.cell);if(l===void 0){const u=s.cellChanges.push({document:void 0,executionSummary:void 0,metadata:void 0,outputs:void 0,...c});o.set(c.cell,u-1)}else s.cellChanges[l]={...s.cellChanges[l],...c}}return Object.freeze(s),Object.freeze(s.cellChanges),Object.freeze(s.contentChanges),s}n(t){return t=t|0,t<0?0:t>=this.b.length?this.b.length-1:t}o(t){let r=t.start|0,i=t.end|0;return r<0&&(r=0),i>this.b.length&&(i=this.b.length),t.with({start:r,end:i})}p(t){t=this.o(t);const r=[];for(let i=t.start;i<t.end;i++)r.push(this.b[i]);return r}async q(){return this.j?Promise.reject(new Error("Notebook has been closed")):this.k.$trySaveNotebook(this.uri)}r(t,r,i){if(this.j)return;const s=[],n=[],o=[];if(t.reverse().forEach(a=>{const l=a[2].map(p=>{const f=new m0(this,this.l,p);return r||n.push(m0.asModelAddData(p)),f}),u=new g0(a[0],a[1],[],l),h=this.b.splice(a[0],a[1],...l);for(const p of h)o.push(p.uri),u.deletedItems.push(p.apiCell);s.push(u)}),this.l.acceptDocumentsAndEditorsDelta({addedDocuments:n,removedDocuments:o}),i)for(const a of s)i.push(a.asApiEvent())}s(t,r,i,s){const n=this.b.splice(t,r);this.b.splice(i,0,...n);const o=[new g0(t,r,n.map(a=>a.apiCell),[]),new g0(i,0,[],n)];for(const a of o)s.push(a.asApiEvent())}t(t,r){this.b[t].setOutputs(r)}u(t,r,i,s){this.b[t].setOutputItems(r,i,s)}v(t,r){const i=this.b[t];i.apiCell.document.languageId!==r&&this.m.$acceptModelLanguageChanged(i.uri,r)}w(t,r){const i=this.b[t];i.apiCell.mime=r}x(t,r){this.b[t].setMetadata(r)}y(t,r){this.b[t].setInternalMetadata(r)}getCellFromApiCell(t){return this.b.find(r=>r.apiCell===t)}getCellFromIndex(t){return this.b[t]}getCell(t){return this.b.find(r=>r.handle===t)}getCellIndex(t){return this.b.indexOf(t)}},v0=class y3{static{this.apiEditorsToExtHost=new WeakMap}constructor(t,r,i,s,n,o,a){this.id=t,this.c=r,this.notebookData=i,this.d=s,this.e=n,this.f=o,this.g=a,this.a=!1}get apiEditor(){if(!this.b){const t=this;this.b={get notebook(){return t.notebookData.apiNotebook},get selection(){return t.e[0]},set selection(r){this.selections=[r]},get selections(){return t.e},set selections(r){if(!Array.isArray(r)||!r.every(Vi.isNotebookRange))throw Ee("selections");t.e=r,t.h(r)},get visibleRanges(){return t.d},revealRange(r,i){t.c.$tryRevealRange(t.id,xi.from(r),i??Kh.Default)},get viewColumn(){return t.f},get replOptions(){if(t.g==="repl")return{appendIndex:this.notebook.cellCount-1}},[Symbol.for("debug.description")](){return`NotebookEditor(${this.notebook.uri.toString()})`}},y3.apiEditorsToExtHost.set(this.b,this)}return this.b}get visible(){return this.a}_acceptVisibility(t){this.a=t}_acceptVisibleRanges(t){this.d=t}_acceptSelections(t){this.e=t}h(t){this.c.$trySetSelections(this.id,t.map(xi.from))}_acceptViewColumn(t){this.f=t}},w0=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==ee)return b0(this.right);let e=this;for(;e.parent!==ee&&e.parent.left!==e;)e=e.parent;return e.parent===ee?ee:e.parent}prev(){if(this.left!==ee)return HE(this.left);let e=this;for(;e.parent!==ee&&e.parent.right!==e;)e=e.parent;return e.parent===ee?ee:e.parent}detach(){this.parent=null,this.left=null,this.right=null}},UE;(function(e){e[e.Black=0]="Black",e[e.Red=1]="Red"})(UE||(UE={}));var ee=new w0(null,0);ee.parent=ee,ee.left=ee,ee.right=ee,ee.color=0;function b0(e){for(;e.left!==ee;)e=e.left;return e}function HE(e){for(;e.right!==ee;)e=e.right;return e}function y0(e){return e===ee?0:e.size_left+e.piece.length+y0(e.right)}function E0(e){return e===ee?0:e.lf_left+e.piece.lineFeedCnt+E0(e.right)}function x0(){ee.parent=ee}function jl(e,t){const r=t.right;r.size_left+=t.size_left+(t.piece?t.piece.length:0),r.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=r.left,r.left!==ee&&(r.left.parent=t),r.parent=t.parent,t.parent===ee?e.root=r:t.parent.left===t?t.parent.left=r:t.parent.right=r,r.left=t,t.parent=r}function Bl(e,t){const r=t.left;t.left=r.right,r.right!==ee&&(r.right.parent=t),r.parent=t.parent,t.size_left-=r.size_left+(r.piece?r.piece.length:0),t.lf_left-=r.lf_left+(r.piece?r.piece.lineFeedCnt:0),t.parent===ee?e.root=r:t===t.parent.right?t.parent.right=r:t.parent.left=r,r.right=t,t.parent=r}function Tf(e,t){let r,i;if(t.left===ee?(i=t,r=i.right):t.right===ee?(i=t,r=i.left):(i=b0(t.right),r=i.right),i===e.root){e.root=r,r.color=0,t.detach(),x0(),e.root.parent=ee;return}const s=i.color===1;if(i===i.parent.left?i.parent.left=r:i.parent.right=r,i===t?(r.parent=i.parent,_l(e,r)):(i.parent===t?r.parent=i:r.parent=i.parent,_l(e,r),i.left=t.left,i.right=t.right,i.parent=t.parent,i.color=t.color,t===e.root?e.root=i:t===t.parent.left?t.parent.left=i:t.parent.right=i,i.left!==ee&&(i.left.parent=i),i.right!==ee&&(i.right.parent=i),i.size_left=t.size_left,i.lf_left=t.lf_left,_l(e,i)),t.detach(),r.parent.left===r){const o=y0(r),a=E0(r);if(o!==r.parent.size_left||a!==r.parent.lf_left){const c=o-r.parent.size_left,l=a-r.parent.lf_left;r.parent.size_left=o,r.parent.lf_left=a,ts(e,r.parent,c,l)}}if(_l(e,r.parent),s){x0();return}let n;for(;r!==e.root&&r.color===0;)r===r.parent.left?(n=r.parent.right,n.color===1&&(n.color=0,r.parent.color=1,jl(e,r.parent),n=r.parent.right),n.left.color===0&&n.right.color===0?(n.color=1,r=r.parent):(n.right.color===0&&(n.left.color=0,n.color=1,Bl(e,n),n=r.parent.right),n.color=r.parent.color,r.parent.color=0,n.right.color=0,jl(e,r.parent),r=e.root)):(n=r.parent.left,n.color===1&&(n.color=0,r.parent.color=1,Bl(e,r.parent),n=r.parent.left),n.left.color===0&&n.right.color===0?(n.color=1,r=r.parent):(n.left.color===0&&(n.right.color=0,n.color=1,jl(e,n),n=r.parent.left),n.color=r.parent.color,r.parent.color=0,n.left.color=0,Bl(e,r.parent),r=e.root));r.color=0,x0()}function jE(e,t){for(_l(e,t);t!==e.root&&t.parent.color===1;)if(t.parent===t.parent.parent.left){const r=t.parent.parent.right;r.color===1?(t.parent.color=0,r.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&(t=t.parent,jl(e,t)),t.parent.color=0,t.parent.parent.color=1,Bl(e,t.parent.parent))}else{const r=t.parent.parent.left;r.color===1?(t.parent.color=0,r.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&(t=t.parent,Bl(e,t)),t.parent.color=0,t.parent.parent.color=1,jl(e,t.parent.parent))}e.root.color=0}function ts(e,t,r,i){for(;t!==e.root&&t!==ee;)t.parent.left===t&&(t.parent.size_left+=r,t.parent.lf_left+=i),t=t.parent}function _l(e,t){let r=0,i=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(t=t.parent,r=y0(t.left)-t.size_left,i=E0(t.left)-t.lf_left,t.size_left+=r,t.lf_left+=i;t!==e.root&&(r!==0||i!==0);)t.parent.left===t&&(t.parent.size_left+=r,t.parent.lf_left+=i),t=t.parent}}var rs=65535;function BE(e){let t;return e[e.length-1]<65536?t=new Uint16Array(e.length):t=new Uint32Array(e.length),t.set(e,0),t}var aN=class{constructor(e,t,r,i,s){this.lineStarts=e,this.cr=t,this.lf=r,this.crlf=i,this.isBasicASCII=s}};function is(e,t=!0){const r=[0];let i=1;for(let s=0,n=e.length;s<n;s++){const o=e.charCodeAt(s);o===13?s+1<n&&e.charCodeAt(s+1)===10?(r[i++]=s+2,s++):r[i++]=s+1:o===10&&(r[i++]=s+1)}return t?BE(r):r}function cN(e,t){e.length=0,e[0]=0;let r=1,i=0,s=0,n=0,o=!0;for(let c=0,l=t.length;c<l;c++){const u=t.charCodeAt(c);u===13?c+1<l&&t.charCodeAt(c+1)===10?(n++,e[r++]=c+2,c++):(i++,e[r++]=c+1):u===10?(s++,e[r++]=c+1):o&&u!==9&&(u<32||u>126)&&(o=!1)}const a=new aN(BE(e),i,s,n,o);return e.length=0,a}var hr=class{constructor(e,t,r,i,s){this.bufferIndex=e,this.start=t,this.end=r,this.lineFeedCnt=i,this.length=s}},Bn=class{constructor(e,t){this.buffer=e,this.lineStarts=t}},lN=class{constructor(e,t){this.a=[],this.c=e,this.d=t,this.b=0,e.root!==ee&&e.iterate(e.root,r=>(r!==ee&&this.a.push(r.piece),!0))}read(){return this.a.length===0?this.b===0?(this.b++,this.d):null:this.b>this.a.length-1?null:this.b===0?this.d+this.c.getPieceContent(this.a[this.b++]):this.c.getPieceContent(this.a[this.b++])}},uN=class{constructor(e){this.a=e,this.b=[]}get(e){for(let t=this.b.length-1;t>=0;t--){const r=this.b[t];if(r.nodeStartOffset<=e&&r.nodeStartOffset+r.node.piece.length>=e)return r}return null}get2(e){for(let t=this.b.length-1;t>=0;t--){const r=this.b[t];if(r.nodeStartLineNumber&&r.nodeStartLineNumber<e&&r.nodeStartLineNumber+r.node.piece.lineFeedCnt>=e)return r}return null}set(e){this.b.length>=this.a&&this.b.shift(),this.b.push(e)}validate(e){let t=!1;const r=this.b;for(let i=0;i<r.length;i++){const s=r[i];if(s.node.parent===null||s.nodeStartOffset>=e){r[i]=null,t=!0;continue}}if(t){const i=[];for(const s of r)s!==null&&i.push(s);this.b=i}}},hN=class{constructor(e,t,r){this.create(e,t,r)}create(e,t,r){this.a=[new Bn("",[0])],this.g={line:0,column:0},this.root=ee,this.b=1,this.c=0,this.d=t,this.e=t.length,this.f=r;let i=null;for(let s=0,n=e.length;s<n;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=is(e[s].buffer));const o=new hr(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this.a.push(e[s]),i=this.S(i,o)}this.h=new uN(1),this.j={lineNumber:0,value:""},this.y()}normalizeEOL(e){const t=rs,r=t-Math.floor(t/3),i=r*2;let s="",n=0;const o=[];if(this.iterate(this.root,a=>{const c=this.R(a),l=c.length;if(n<=r||n+l<i)return s+=c,n+=l,!0;const u=s.replace(/\r\n|\r|\n/g,e);return o.push(new Bn(u,is(u))),s=c,n=l,!0}),n>0){const a=s.replace(/\r\n|\r|\n/g,e);o.push(new Bn(a,is(a)))}this.create(o,e,!0)}getEOL(){return this.d}setEOL(e){this.d=e,this.e=this.d.length,this.normalizeEOL(e)}createSnapshot(e){return new lN(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,i=>{if(i===ee)return!0;const s=this.R(i),n=s.length,o=e.G(t),a=e.G(t+n),c=e.getValueInRange2(o,a);return t+=n,s===c})}getOffsetAt(e,t){let r=0,i=this.root;for(;i!==ee;)if(i.left!==ee&&i.lf_left+1>=e)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt+1>=e){r+=i.size_left;const s=this.B(i,e-i.lf_left-2);return r+=s+t-1}else e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right;return r}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,r=0;const i=e;for(;t!==ee;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const s=this.A(t,e-t.size_left);if(r+=t.lf_left+s.index,s.index===0){const n=this.getOffsetAt(r+1,1),o=i-n;return new Ar(r+1,o+1)}return new Ar(r+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,r+=t.lf_left+t.piece.lineFeedCnt,t.right===ee){const s=this.getOffsetAt(r+1,1),n=i-e-s;return new Ar(r+1,n+1)}else t=t.right;return new Ar(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const r=this.H(e.startLineNumber,e.startColumn),i=this.H(e.endLineNumber,e.endColumn),s=this.getValueInRange2(r,i);return t?t!==this.d||!this.f?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this.f?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const o=e.node,a=this.a[o.piece.bufferIndex].buffer,c=this.u(o.piece.bufferIndex,o.piece.start);return a.substring(c+e.remainder,c+t.remainder)}let r=e.node;const i=this.a[r.piece.bufferIndex].buffer,s=this.u(r.piece.bufferIndex,r.piece.start);let n=i.substring(s+e.remainder,s+r.piece.length);for(r=r.next();r!==ee;){const o=this.a[r.piece.bufferIndex].buffer,a=this.u(r.piece.bufferIndex,r.piece.start);if(r===t.node){n+=o.substring(a,a+t.remainder);break}else n+=o.substr(a,r.piece.length);r=r.next()}return n}getLinesContent(){const e=[];let t=0,r="",i=!1;return this.iterate(this.root,s=>{if(s===ee)return!0;const n=s.piece;let o=n.length;if(o===0)return!0;const a=this.a[n.bufferIndex].buffer,c=this.a[n.bufferIndex].lineStarts,l=n.start.line,u=n.end.line;let h=c[l]+n.start.column;if(i&&(a.charCodeAt(h)===10&&(h++,o--),e[t++]=r,r="",i=!1,o===0))return!0;if(l===u)return!this.f&&a.charCodeAt(h+o-1)===13?(i=!0,r+=a.substr(h,o-1)):r+=a.substr(h,o),!0;r+=this.f?a.substring(h,Math.max(h,c[l+1]-this.e)):a.substring(h,c[l+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=r;for(let p=l+1;p<u;p++)r=this.f?a.substring(c[p],c[p+1]-this.e):a.substring(c[p],c[p+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=r;return!this.f&&a.charCodeAt(c[u]+n.end.column-1)===13?(i=!0,n.end.column===0?t--:r=a.substr(c[u],n.end.column-1)):r=a.substr(c[u],n.end.column),!0}),i&&(e[t++]=r,r=""),e[t++]=r,e}getLength(){return this.c}getLineCount(){return this.b}getLineContent(e){return this.j.lineNumber===e?this.j.value:(this.j.lineNumber=e,e===this.b?this.j.value=this.getLineRawContent(e):this.f?this.j.value=this.getLineRawContent(e,this.e):this.j.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this.j.value)}l(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const r=this.a[t.piece.bufferIndex],i=this.u(t.piece.bufferIndex,t.piece.start);return r.buffer.charCodeAt(i)}else{const t=this.a[e.node.piece.bufferIndex],i=this.u(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){const r=this.H(e,t+1);return this.l(r)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this.e}getCharCode(e){const t=this.G(e);return this.l(t)}getNearestChunk(e){const t=this.G(e);if(t.remainder===t.node.piece.length){const r=t.node.next();if(!r||r===ee)return"";const i=this.a[r.piece.bufferIndex],s=this.u(r.piece.bufferIndex,r.piece.start);return i.buffer.substring(s,s+r.piece.length)}else{const r=this.a[t.node.piece.bufferIndex],i=this.u(t.node.piece.bufferIndex,t.node.piece.start),s=i+t.remainder,n=i+t.node.piece.length;return r.buffer.substring(s,n)}}findMatchesInNode(e,t,r,i,s,n,o,a,c,l,u){const h=this.a[e.piece.bufferIndex],p=this.u(e.piece.bufferIndex,e.piece.start),f=this.u(e.piece.bufferIndex,s),m=this.u(e.piece.bufferIndex,n);let w;const E={line:0,column:0};let $,S;t._wordSeparators?($=h.buffer.substring(f,m),S=P=>P+f,t.reset(0)):($=h.buffer,S=P=>P,t.reset(f));do if(w=t.next($),w){if(S(w.index)>=m)return l;this.s(e,S(w.index)-p,E);const P=this.t(e.piece.bufferIndex,s,E),O=E.line===s.line?E.column-s.column+i:E.column+1,F=O+w[0].length;if(u[l++]=L9(new ze(r+P,O,r+P,F),w,a),S(w.index)+w[0].length>=m||l>=c)return l}while(w);return l}findMatchesLineByLine(e,t,r,i){const s=[];let n=0;const o=new cA(t.wordSeparators,t.regex);let a=this.H(e.startLineNumber,e.startColumn);if(a===null)return[];const c=this.H(e.endLineNumber,e.endColumn);if(c===null)return[];let l=this.s(a.node,a.remainder);const u=this.s(c.node,c.remainder);if(a.node===c.node)return this.findMatchesInNode(a.node,o,e.startLineNumber,e.startColumn,l,u,t,r,i,n,s),s;let h=e.startLineNumber,p=a.node;for(;p!==c.node;){const m=this.t(p.piece.bufferIndex,l,p.piece.end);if(m>=1){const E=this.a[p.piece.bufferIndex].lineStarts,$=this.u(p.piece.bufferIndex,p.piece.start),S=E[l.line+m],P=h===e.startLineNumber?e.startColumn:1;if(n=this.findMatchesInNode(p,o,h,P,l,this.s(p,S-$),t,r,i,n,s),n>=i)return s;h+=m}const w=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const E=this.getLineContent(h).substring(w,e.endColumn-1);return n=this.n(t,o,E,e.endLineNumber,w,n,s,r,i),s}if(n=this.n(t,o,this.getLineContent(h).substr(w),h,w,n,s,r,i),n>=i)return s;h++,a=this.H(h,1),p=a.node,l=this.s(a.node,a.remainder)}if(h===e.endLineNumber){const m=h===e.startLineNumber?e.startColumn-1:0,w=this.getLineContent(h).substring(m,e.endColumn-1);return n=this.n(t,o,w,e.endLineNumber,m,n,s,r,i),s}const f=h===e.startLineNumber?e.startColumn:1;return n=this.findMatchesInNode(c.node,o,h,f,l,u,t,r,i,n,s),s}n(e,t,r,i,s,n,o,a,c){const l=e.wordSeparators;if(!a&&e.simpleSearch){const h=e.simpleSearch,p=h.length,f=r.length;let m=-p;for(;(m=r.indexOf(h,m+p))!==-1;)if((!l||N9(l,r,f,m,p))&&(o[n++]=new dv(new ze(i,m+1+s,i,m+1+p+s),null),n>=c))return n;return n}let u;t.reset(0);do if(u=t.next(r),u&&(o[n++]=L9(new ze(i,u.index+1+s,i,u.index+1+u[0].length+s),u,a),n>=c))return n;while(u);return n}insert(e,t,r=!1){if(this.f=this.f&&r,this.j.lineNumber=0,this.j.value="",this.root!==ee){const{node:i,remainder:s,nodeStartOffset:n}=this.G(e),o=i.piece,a=o.bufferIndex,c=this.s(i,s);if(i.piece.bufferIndex===0&&o.end.line===this.g.line&&o.end.column===this.g.column&&n+o.length===e&&t.length<rs){this.F(i,t),this.y();return}if(n===e)this.o(t,i),this.h.validate(e);else if(n+i.piece.length>e){const l=[];let u=new hr(o.bufferIndex,c,o.end,this.t(o.bufferIndex,c,o.end),this.u(a,o.end)-this.u(a,c));if(this.K()&&this.M(t)&&this.I(i,s)===10){const m={line:u.start.line+1,column:0};u=new hr(u.bufferIndex,m,u.end,this.t(u.bufferIndex,m,u.end),u.length-1),t+=`
`}if(this.K()&&this.L(t))if(this.I(i,s-1)===13){const m=this.s(i,s-1);this.C(i,m),t="\r"+t,i.piece.length===0&&l.push(i)}else this.C(i,c);else this.C(i,c);const h=this.w(t);u.length>0&&this.S(i,u);let p=i;for(let f=0;f<h.length;f++)p=this.S(p,h[f]);this.v(l)}else this.q(t,i)}else{const i=this.w(t);let s=this.T(null,i[0]);for(let n=1;n<i.length;n++)s=this.S(s,i[n])}this.y()}delete(e,t){if(this.j.lineNumber=0,this.j.value="",t<=0||this.root===ee)return;const r=this.G(e),i=this.G(e+t),s=r.node,n=i.node;if(s===n){const h=this.s(s,r.remainder),p=this.s(s,i.remainder);if(r.nodeStartOffset===e){if(t===s.piece.length){const f=s.next();Tf(this,s),this.N(f),this.y();return}this.D(s,p),this.h.validate(e),this.N(s),this.y();return}if(r.nodeStartOffset+s.piece.length===e+t){this.C(s,h),this.O(s),this.y();return}this.E(s,h,p),this.y();return}const o=[],a=this.s(s,r.remainder);this.C(s,a),this.h.validate(e),s.piece.length===0&&o.push(s);const c=this.s(n,i.remainder);this.D(n,c),n.piece.length===0&&o.push(n);const l=s.next();for(let h=l;h!==ee&&h!==n;h=h.next())o.push(h);const u=s.piece.length===0?s.prev():s;this.v(o),this.O(u),this.y()}o(e,t){const r=[];if(this.K()&&this.M(e)&&this.L(t)){const n=t.piece,o={line:n.start.line+1,column:0},a=new hr(n.bufferIndex,o,n.end,this.t(n.bufferIndex,o,n.end),n.length-1);t.piece=a,e+=`
`,ts(this,t,-1,-1),t.piece.length===0&&r.push(t)}const i=this.w(e);let s=this.T(t,i[i.length-1]);for(let n=i.length-2;n>=0;n--)s=this.T(s,i[n]);this.N(s),this.v(r)}q(e,t){this.Q(e,t)&&(e+=`
`);const r=this.w(e),i=this.S(t,r[0]);let s=i;for(let n=1;n<r.length;n++)s=this.S(s,r[n]);this.N(i)}s(e,t,r){const i=e.piece,s=e.piece.bufferIndex,n=this.a[s].lineStarts,a=n[i.start.line]+i.start.column+t;let c=i.start.line,l=i.end.line,u=0,h=0,p=0;for(;c<=l&&(u=c+(l-c)/2|0,p=n[u],u!==l);)if(h=n[u+1],a<p)l=u-1;else if(a>=h)c=u+1;else break;return r?(r.line=u,r.column=a-p,null):{line:u,column:a-p}}t(e,t,r){if(r.column===0)return r.line-t.line;const i=this.a[e].lineStarts;if(r.line===i.length-1)return r.line-t.line;const s=i[r.line+1],n=i[r.line]+r.column;if(s>n+1)return r.line-t.line;const o=n-1;return this.a[e].buffer.charCodeAt(o)===13?r.line-t.line+1:r.line-t.line}u(e,t){return this.a[e].lineStarts[t.line]+t.column}v(e){for(let t=0;t<e.length;t++)Tf(this,e[t])}w(e){if(e.length>rs){const l=[];for(;e.length>rs;){const h=e.charCodeAt(rs-1);let p;h===13||h>=55296&&h<=56319?(p=e.substring(0,rs-1),e=e.substring(rs-1)):(p=e.substring(0,rs),e=e.substring(rs));const f=is(p);l.push(new hr(this.a.length,{line:0,column:0},{line:f.length-1,column:p.length-f[f.length-1]},f.length-1,p.length)),this.a.push(new Bn(p,f))}const u=is(e);return l.push(new hr(this.a.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this.a.push(new Bn(e,u)),l}let t=this.a[0].buffer.length;const r=is(e,!1);let i=this.g;if(this.a[0].lineStarts[this.a[0].lineStarts.length-1]===t&&t!==0&&this.L(e)&&this.M(this.a[0].buffer)){this.g={line:this.g.line,column:this.g.column+1},i=this.g;for(let l=0;l<r.length;l++)r[l]+=t+1;this.a[0].lineStarts=this.a[0].lineStarts.concat(r.slice(1)),this.a[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let l=0;l<r.length;l++)r[l]+=t;this.a[0].lineStarts=this.a[0].lineStarts.concat(r.slice(1)),this.a[0].buffer+=e}const s=this.a[0].buffer.length,n=this.a[0].lineStarts.length-1,o=s-this.a[0].lineStarts[n],a={line:n,column:o},c=new hr(0,i,a,this.t(0,i,a),s-t);return this.g=a,[c]}getLinesRawContent(){return this.U(this.root)}getLineRawContent(e,t=0){let r=this.root,i="";const s=this.h.get2(e);if(s){r=s.node;const n=this.B(r,e-s.nodeStartLineNumber-1),o=this.a[r.piece.bufferIndex].buffer,a=this.u(r.piece.bufferIndex,r.piece.start);if(s.nodeStartLineNumber+r.piece.lineFeedCnt===e)i=o.substring(a+n,a+r.piece.length);else{const c=this.B(r,e-s.nodeStartLineNumber);return o.substring(a+n,a+c-t)}}else{let n=0;const o=e;for(;r!==ee;)if(r.left!==ee&&r.lf_left>=e-1)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt>e-1){const a=this.B(r,e-r.lf_left-2),c=this.B(r,e-r.lf_left-1),l=this.a[r.piece.bufferIndex].buffer,u=this.u(r.piece.bufferIndex,r.piece.start);return n+=r.size_left,this.h.set({node:r,nodeStartOffset:n,nodeStartLineNumber:o-(e-1-r.lf_left)}),l.substring(u+a,u+c-t)}else if(r.lf_left+r.piece.lineFeedCnt===e-1){const a=this.B(r,e-r.lf_left-2),c=this.a[r.piece.bufferIndex].buffer,l=this.u(r.piece.bufferIndex,r.piece.start);i=c.substring(l+a,l+r.piece.length);break}else e-=r.lf_left+r.piece.lineFeedCnt,n+=r.size_left+r.piece.length,r=r.right}for(r=r.next();r!==ee;){const n=this.a[r.piece.bufferIndex].buffer;if(r.piece.lineFeedCnt>0){const o=this.B(r,0),a=this.u(r.piece.bufferIndex,r.piece.start);return i+=n.substring(a,a+o-t),i}else{const o=this.u(r.piece.bufferIndex,r.piece.start);i+=n.substr(o,r.piece.length)}r=r.next()}return i}y(){let e=this.root,t=1,r=0;for(;e!==ee;)t+=e.lf_left+e.piece.lineFeedCnt,r+=e.size_left+e.piece.length,e=e.right;this.b=t,this.c=r,this.h.validate(this.c)}A(e,t){const r=e.piece,i=this.s(e,t),s=i.line-r.start.line;if(this.u(r.bufferIndex,r.end)-this.u(r.bufferIndex,r.start)===t){const n=this.t(e.piece.bufferIndex,r.start,i);if(n!==s)return{index:n,remainder:0}}return{index:s,remainder:i.column}}B(e,t){if(t<0)return 0;const r=e.piece,i=this.a[r.bufferIndex].lineStarts,s=r.start.line+t+1;return s>r.end.line?i[r.end.line]+r.end.column-i[r.start.line]-r.start.column:i[s]-i[r.start.line]-r.start.column}C(e,t){const r=e.piece,i=r.lineFeedCnt,s=this.u(r.bufferIndex,r.end),n=t,o=this.u(r.bufferIndex,n),a=this.t(r.bufferIndex,r.start,n),c=a-i,l=o-s,u=r.length+l;e.piece=new hr(r.bufferIndex,r.start,n,a,u),ts(this,e,l,c)}D(e,t){const r=e.piece,i=r.lineFeedCnt,s=this.u(r.bufferIndex,r.start),n=t,o=this.t(r.bufferIndex,n,r.end),a=this.u(r.bufferIndex,n),c=o-i,l=s-a,u=r.length+l;e.piece=new hr(r.bufferIndex,n,r.end,o,u),ts(this,e,l,c)}E(e,t,r){const i=e.piece,s=i.start,n=i.end,o=i.length,a=i.lineFeedCnt,c=t,l=this.t(i.bufferIndex,i.start,c),u=this.u(i.bufferIndex,t)-this.u(i.bufferIndex,s);e.piece=new hr(i.bufferIndex,i.start,c,l,u),ts(this,e,u-o,l-a);const h=new hr(i.bufferIndex,r,n,this.t(i.bufferIndex,r,n),this.u(i.bufferIndex,n)-this.u(i.bufferIndex,r)),p=this.S(e,h);this.N(p)}F(e,t){this.Q(t,e)&&(t+=`
`);const r=this.K()&&this.L(t)&&this.M(e),i=this.a[0].buffer.length;this.a[0].buffer+=t;const s=is(t,!1);for(let p=0;p<s.length;p++)s[p]+=i;if(r){const p=this.a[0].lineStarts[this.a[0].lineStarts.length-2];this.a[0].lineStarts.pop(),this.g={line:this.g.line-1,column:i-p}}this.a[0].lineStarts=this.a[0].lineStarts.concat(s.slice(1));const n=this.a[0].lineStarts.length-1,o=this.a[0].buffer.length-this.a[0].lineStarts[n],a={line:n,column:o},c=e.piece.length+t.length,l=e.piece.lineFeedCnt,u=this.t(0,e.piece.start,a),h=u-l;e.piece=new hr(e.piece.bufferIndex,e.piece.start,a,u,c),this.g=a,ts(this,e,t.length,h)}G(e){let t=this.root;const r=this.h.get(e);if(r)return{node:r.node,nodeStartOffset:r.nodeStartOffset,remainder:e-r.nodeStartOffset};let i=0;for(;t!==ee;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){i+=t.size_left;const s={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this.h.set(s),s}else e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right;return null}H(e,t){let r=this.root,i=0;for(;r!==ee;)if(r.left!==ee&&r.lf_left>=e-1)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt>e-1){const s=this.B(r,e-r.lf_left-2),n=this.B(r,e-r.lf_left-1);return i+=r.size_left,{node:r,remainder:Math.min(s+t-1,n),nodeStartOffset:i}}else if(r.lf_left+r.piece.lineFeedCnt===e-1){const s=this.B(r,e-r.lf_left-2);if(s+t-1<=r.piece.length)return{node:r,remainder:s+t-1,nodeStartOffset:i};t-=r.piece.length-s;break}else e-=r.lf_left+r.piece.lineFeedCnt,i+=r.size_left+r.piece.length,r=r.right;for(r=r.next();r!==ee;){if(r.piece.lineFeedCnt>0){const s=this.B(r,0),n=this.J(r);return{node:r,remainder:Math.min(t-1,s),nodeStartOffset:n}}else if(r.piece.length>=t-1){const s=this.J(r);return{node:r,remainder:t-1,nodeStartOffset:s}}else t-=r.piece.length;r=r.next()}return null}I(e,t){if(e.piece.lineFeedCnt<1)return-1;const r=this.a[e.piece.bufferIndex],i=this.u(e.piece.bufferIndex,e.piece.start)+t;return r.buffer.charCodeAt(i)}J(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}K(){return!(this.f&&this.d===`
`)}L(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===ee||e.piece.lineFeedCnt===0)return!1;const t=e.piece,r=this.a[t.bufferIndex].lineStarts,i=t.start.line,s=r[i]+t.start.column;return i===r.length-1||r[i+1]>s+1?!1:this.a[t.bufferIndex].buffer.charCodeAt(s)===10}M(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===ee||e.piece.lineFeedCnt===0?!1:this.I(e,e.piece.length-1)===13}N(e){if(this.K()&&this.L(e)){const t=e.prev();this.M(t)&&this.P(t,e)}}O(e){if(this.K()&&this.M(e)){const t=e.next();this.L(t)&&this.P(e,t)}}P(e,t){const r=[],i=this.a[e.piece.bufferIndex].lineStarts;let s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const n=e.piece.length-1,o=e.piece.lineFeedCnt-1;e.piece=new hr(e.piece.bufferIndex,e.piece.start,s,o,n),ts(this,e,-1,-1),e.piece.length===0&&r.push(e);const a={line:t.piece.start.line+1,column:0},c=t.piece.length-1,l=this.t(t.piece.bufferIndex,a,t.piece.end);t.piece=new hr(t.piece.bufferIndex,a,t.piece.end,l,c),ts(this,t,-1,-1),t.piece.length===0&&r.push(t);const u=this.w(`\r
`);this.S(e,u[0]);for(let h=0;h<r.length;h++)Tf(this,r[h])}Q(e,t){if(this.K()&&this.M(e)){const r=t.next();if(this.L(r)){if(e+=`
`,r.piece.length===1)Tf(this,r);else{const i=r.piece,s={line:i.start.line+1,column:0},n=i.length-1,o=this.t(i.bufferIndex,s,i.end);r.piece=new hr(i.bufferIndex,s,i.end,o,n),ts(this,r,-1,-1)}return!0}}return!1}iterate(e,t){if(e===ee)return t(ee);const r=this.iterate(e.left,t);return r&&t(e)&&this.iterate(e.right,t)}R(e){if(e===ee)return"";const t=this.a[e.piece.bufferIndex],r=e.piece,i=this.u(r.bufferIndex,r.start),s=this.u(r.bufferIndex,r.end);return t.buffer.substring(i,s)}getPieceContent(e){const t=this.a[e.bufferIndex],r=this.u(e.bufferIndex,e.start),i=this.u(e.bufferIndex,e.end);return t.buffer.substring(r,i)}S(e,t){const r=new w0(t,1);if(r.left=ee,r.right=ee,r.parent=ee,r.size_left=0,r.lf_left=0,this.root===ee)this.root=r,r.color=0;else if(e.right===ee)e.right=r,r.parent=e;else{const s=b0(e.right);s.left=r,r.parent=s}return jE(this,r),r}T(e,t){const r=new w0(t,1);if(r.left=ee,r.right=ee,r.parent=ee,r.size_left=0,r.lf_left=0,this.root===ee)this.root=r,r.color=0;else if(e.left===ee)e.left=r,r.parent=e;else{const i=HE(e.left);i.right=r,r.parent=i}return jE(this,r),r}U(e){let t="";return this.iterate(e,r=>(t+=this.R(r),!0)),t}},_E;(function(e){e[e.Unknown=0]="Unknown",e[e.Invalid=3]="Invalid",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(_E||(_E={}));function k0(e){let t=0,r=0,i=0,s=0;for(let n=0,o=e.length;n<o;n++){const a=e.charCodeAt(n);a===13?(t===0&&(r=n),t++,n+1<o&&e.charCodeAt(n+1)===10?(s|=2,n++):s|=3,i=n+1):a===10&&(s|=1,t===0&&(r=n),t++,i=n+1)}return t===0&&(r=e.length),[t,r,e.length-i,s]}var $0;function dN(){return $0||($0=new TextDecoder("UTF-16LE")),$0}function fN(e,t,r){const i=new Uint16Array(e.buffer,t,r);return r>0&&(i[0]===65279||i[0]===65534)?pN(e,t,r):dN().decode(i)}function pN(e,t,r){const i=[];let s=0;for(let n=0;n<r;n++){const o=Ik(e,t);t+=2,i[s++]=String.fromCharCode(o)}return i.join("")}function Rf(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var gN=class Ci{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(t,r,i,s){this.oldPosition=t,this.oldText=r,this.newPosition=i,this.newText=s}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${Rf(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${Rf(this.oldText)}")`:`(replace@${this.oldPosition} "${Rf(this.oldText)}" with "${Rf(this.newText)}")`}static a(t){return 4+2*t.length}static c(t,r,i){const s=r.length;su(t,s,i),i+=4;for(let n=0;n<s;n++)Ck(t,r.charCodeAt(n),i),i+=2;return i}static d(t,r){const i=iu(t,r);return r+=4,fN(t,r,i)}writeSize(){return 8+Ci.a(this.oldText)+Ci.a(this.newText)}write(t,r){return su(t,this.oldPosition,r),r+=4,su(t,this.newPosition,r),r+=4,r=Ci.c(t,this.oldText,r),r=Ci.c(t,this.newText,r),r}static read(t,r,i){const s=iu(t,r);r+=4;const n=iu(t,r);r+=4;const o=Ci.d(t,r);r+=Ci.a(o);const a=Ci.d(t,r);return r+=Ci.a(a),i.push(new Ci(s,o,n,a)),r}},mN=class Yl extends he{constructor(t,r,i,s,n,o,a){super(),this.m=this.B(new D),this.onDidChangeContent=this.m.event,this.f=r,this.j=!o,this.g=s,this.h=n,this.c=new hN(t,i,a)}equals(t){return!(t instanceof Yl)||this.f!==t.f||this.getEOL()!==t.getEOL()?!1:this.c.equal(t.c)}mightContainRTL(){return this.g}mightContainUnusualLineTerminators(){return this.h}resetMightContainUnusualLineTerminators(){this.h=!1}mightContainNonBasicASCII(){return this.j}getBOM(){return this.f}getEOL(){return this.c.getEOL()}createSnapshot(t){return this.c.createSnapshot(t?this.f:"")}getOffsetAt(t,r){return this.c.getOffsetAt(t,r)}getPositionAt(t){return this.c.getPositionAt(t)}getRangeAt(t,r){const i=t+r,s=this.getPositionAt(t),n=this.getPositionAt(i);return new ze(s.lineNumber,s.column,n.lineNumber,n.column)}getValueInRange(t,r=0){if(t.isEmpty())return"";const i=this.n(r);return this.c.getValueInRange(t,i)}getValueLengthInRange(t,r=0){if(t.isEmpty())return 0;if(t.startLineNumber===t.endLineNumber)return t.endColumn-t.startColumn;const i=this.getOffsetAt(t.startLineNumber,t.startColumn),s=this.getOffsetAt(t.endLineNumber,t.endColumn);let n=0;const o=this.n(r),a=this.getEOL();if(o.length!==a.length){const c=o.length-a.length,l=t.endLineNumber-t.startLineNumber;n=c*l}return s-i+n}getCharacterCountInRange(t,r=0){if(this.j){let i=0;const s=t.startLineNumber,n=t.endLineNumber;for(let o=s;o<=n;o++){const a=this.getLineContent(o),c=o===s?t.startColumn-1:0,l=o===n?t.endColumn-1:a.length;for(let u=c;u<l;u++)bu(a.charCodeAt(u))?(i=i+1,u=u+1):i=i+1}return i+=this.n(r).length*(n-s),i}return this.getValueLengthInRange(t,r)}getNearestChunk(t){return this.c.getNearestChunk(t)}getLength(){return this.c.getLength()}getLineCount(){return this.c.getLineCount()}getLinesContent(){return this.c.getLinesContent()}getLineContent(t){return this.c.getLineContent(t)}getLineCharCode(t,r){return this.c.getLineCharCode(t,r)}getCharCode(t){return this.c.getCharCode(t)}getLineLength(t){return this.c.getLineLength(t)}getLineMinColumn(t){return 1}getLineMaxColumn(t){return this.getLineLength(t)+1}getLineFirstNonWhitespaceColumn(t){const r=Lp(this.getLineContent(t));return r===-1?0:r+1}getLineLastNonWhitespaceColumn(t){const r=N$(this.getLineContent(t));return r===-1?0:r+2}n(t){switch(t){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(t){this.c.setEOL(t)}applyEdits(t,r,i){let s=this.g,n=this.h,o=this.j,a=!0,c=[];for(let w=0;w<t.length;w++){const E=t[w];a&&E._isTracked&&(a=!1);const $=E.range;if(E.text){let W=!0;o||(W=!_$(E.text),o=W),!s&&W&&(s=kb(E.text)),!n&&W&&(n=$b(E.text))}let S="",P=0,O=0,F=0;if(E.text){let W;[P,O,F,W]=k0(E.text);const Z=this.getEOL();W===0||W===(Z===`\r
`?2:1)?S=E.text:S=E.text.replace(/\r\n|\r|\n/g,Z)}c[w]={sortIndex:w,identifier:E.identifier||null,range:$,rangeOffset:this.getOffsetAt($.startLineNumber,$.startColumn),rangeLength:this.getValueLengthInRange($),text:S,eolCount:P,firstLineLength:O,lastLineLength:F,forceMoveMarkers:!!E.forceMoveMarkers,isAutoWhitespaceEdit:E.isAutoWhitespaceEdit||!1}}c.sort(Yl.u);let l=!1;for(let w=0,E=c.length-1;w<E;w++){const $=c[w].range.getEndPosition(),S=c[w+1].range.getStartPosition();if(S.isBeforeOrEqual($)){if(S.isBefore($))throw new Error("Overlapping ranges are not allowed!");l=!0}}a&&(c=this.s(c));const u=i||r?Yl._getInverseEditRanges(c):[],h=[];if(r)for(let w=0;w<c.length;w++){const E=c[w],$=u[w];if(E.isAutoWhitespaceEdit&&E.range.isEmpty())for(let S=$.startLineNumber;S<=$.endLineNumber;S++){let P="";S===$.startLineNumber&&(P=this.getLineContent(E.range.startLineNumber),Lp(P)!==-1)||h.push({lineNumber:S,oldContent:P})}}let p=null;if(i){let w=0;p=[];for(let E=0;E<c.length;E++){const $=c[E],S=u[E],P=this.getValueInRange($.range),O=$.rangeOffset+w;w+=$.text.length-P.length,p[E]={sortIndex:$.sortIndex,identifier:$.identifier,range:S,text:P,textChange:new gN($.rangeOffset,P,O,$.text)}}l||p.sort((E,$)=>E.sortIndex-$.sortIndex)}this.g=s,this.h=n,this.j=o;const f=this.t(c);let m=null;if(r&&h.length>0){h.sort((w,E)=>E.lineNumber-w.lineNumber),m=[];for(let w=0,E=h.length;w<E;w++){const $=h[w].lineNumber;if(w>0&&h[w-1].lineNumber===$)continue;const S=h[w].oldContent,P=this.getLineContent($);P.length===0||P===S||Lp(P)!==-1||m.push($)}}return this.m.fire(),new nA(p,f,m)}s(t){return t.length<1e3?t:[this._toSingleEditOperation(t)]}_toSingleEditOperation(t){let r=!1;const i=t[0].range,s=t[t.length-1].range,n=new ze(i.startLineNumber,i.startColumn,s.endLineNumber,s.endColumn);let o=i.startLineNumber,a=i.startColumn;const c=[];for(let f=0,m=t.length;f<m;f++){const w=t[f],E=w.range;r=r||w.forceMoveMarkers,c.push(this.getValueInRange(new ze(o,a,E.startLineNumber,E.startColumn))),w.text.length>0&&c.push(w.text),o=E.endLineNumber,a=E.endColumn}const l=c.join(""),[u,h,p]=k0(l);return{sortIndex:0,identifier:t[0].identifier,range:n,rangeOffset:this.getOffsetAt(n.startLineNumber,n.startColumn),rangeLength:this.getValueLengthInRange(n,0),text:l,eolCount:u,firstLineLength:h,lastLineLength:p,forceMoveMarkers:r,isAutoWhitespaceEdit:!1}}t(t){t.sort(Yl.w);const r=[];for(let i=0;i<t.length;i++){const s=t[i],n=s.range.startLineNumber,o=s.range.startColumn,a=s.range.endLineNumber,c=s.range.endColumn;if(n===a&&o===c&&s.text.length===0)continue;s.text?(this.c.delete(s.rangeOffset,s.rangeLength),this.c.insert(s.rangeOffset,s.text,!0)):this.c.delete(s.rangeOffset,s.rangeLength);const l=new ze(n,o,a,c);r.push({range:l,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return r}findMatchesLineByLine(t,r,i,s){return this.c.findMatchesLineByLine(t,r,i,s)}getPieceTree(){return this.c}static _getInverseEditRange(t,r){const i=t.startLineNumber,s=t.startColumn,[n,o,a]=k0(r);let c;if(r.length>0){const l=n+1;l===1?c=new ze(i,s,i,s+o):c=new ze(i,s,i+l-1,a+1)}else c=new ze(i,s,i,s);return c}static _getInverseEditRanges(t){const r=[];let i=0,s=0,n=null;for(let o=0,a=t.length;o<a;o++){const c=t[o];let l,u;n?n.range.endLineNumber===c.range.startLineNumber?(l=i,u=s+(c.range.startColumn-n.range.endColumn)):(l=i+(c.range.startLineNumber-n.range.endLineNumber),u=c.range.startColumn):(l=c.range.startLineNumber,u=c.range.startColumn);let h;if(c.text.length>0){const p=c.eolCount+1;p===1?h=new ze(l,u,l,u+c.firstLineLength):h=new ze(l,u,l+p-1,c.lastLineLength+1)}else h=new ze(l,u,l,u);i=h.endLineNumber,s=h.endColumn,r.push(h),n=c}return r}static u(t,r){const i=ze.compareRangesUsingEnds(t.range,r.range);return i===0?t.sortIndex-r.sortIndex:i}static w(t,r){const i=ze.compareRangesUsingEnds(t.range,r.range);return i===0?r.sortIndex-t.sortIndex:-i}},vN=class{constructor(e,t,r,i,s,n,o,a,c){this.a=e,this.b=t,this.c=r,this.d=i,this.e=s,this.f=n,this.g=o,this.h=a,this.j=c}k(e){const t=this.c+this.d+this.e,r=this.c+this.e;return t===0?e===1?`
`:`\r
`:r>t/2?`\r
`:`
`}create(e){const t=this.k(e),r=this.a;if(this.j&&(t===`\r
`&&(this.c>0||this.d>0)||t===`
`&&(this.c>0||this.e>0)))for(let s=0,n=r.length;s<n;s++){const o=r[s].buffer.replace(/\r\n|\r|\n/g,t),a=is(o);r[s]=new Bn(o,a)}const i=new mN(r,this.b,t,this.f,this.g,this.h,this.j);return{textBuffer:i,disposable:i}}getFirstLineText(e){return this.a[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}},zE=class{constructor(){this.a=[],this.b="",this.c=!1,this.d=0,this.e=[],this.f=0,this.g=0,this.h=0,this.j=!1,this.k=!1,this.l=!0}acceptChunk(e){if(e.length===0)return;this.a.length===0&&V$(e)&&(this.b=W$,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this.m(e.substr(0,e.length-1),!1),this.c=!0,this.d=t):(this.m(e,!1),this.c=!1,this.d=t)}m(e,t){!t&&e.length===0||(this.c?this.n(String.fromCharCode(this.d)+e):this.n(e))}n(e){const t=cN(this.e,e);this.a.push(new Bn(e,t.lineStarts)),this.f+=t.cr,this.g+=t.lf,this.h+=t.crlf,t.isBasicASCII||(this.l=!1,this.j||(this.j=kb(e)),this.k||(this.k=$b(e)))}finish(e=!0){return this.o(),new vN(this.a,this.b,this.f,this.g,this.h,this.j,this.k,this.l,e)}o(){if(this.a.length===0&&this.m("",!0),this.c){this.c=!1;const e=this.a[this.a.length-1];e.buffer+=String.fromCharCode(this.d);const t=is(e.buffer);e.lineStarts=t,this.d===13&&this.f++}}},wN=class extends he{constructor(e,t,r){super(),this._source=e,this.b=t,this.c=r,this.a=void 0}f(e){const t=e.getLineCount();return new ze(1,1,t,this.g(e,t))}g(e,t){if(t<1||t>e.getLineCount())throw new Error("Illegal value for lineNumber");return e.getLineLength(t)+1}get inputTextBuffer(){if(!this.b){const e=new zE;e.acceptChunk(this._source);const t=e.finish(!0),{textBuffer:r,disposable:i}=t.create(1);this.b=r,this.B(i)}return this.b}get outputTextBuffers(){return this.a||(this.a=this.c.map(e=>{const t=new zE;t.acceptChunk(e);const r=t.finish(!0),{textBuffer:i,disposable:s}=r.create(1);return this.B(s),i})),this.a}findInInputs(e){const r=new T9(e,!1,!1,null).parseSearchRequest();if(!r)return[];const i=this.f(this.inputTextBuffer);return this.inputTextBuffer.findMatchesLineByLine(i,r,!0,5e3)}findInOutputs(e){const r=new T9(e,!1,!1,null).parseSearchRequest();return r?this.outputTextBuffers.map(i=>{const s=i.findMatchesLineByLine(this.f(i),r,!0,5e3);if(s.length!==0)return{textBuffer:i,matches:s}}).filter(i=>!!i):[]}};function WE(e,t){let r=-1;const i=[];let s=[];return e.forEach(o=>{o.range.startLineNumber!==r&&s.length>0&&(i.push([...s]),s=[]),s.push(o),r=o.range.endLineNumber}),s.length>0&&i.push([...s]),i.map(o=>{const a=[],c=o[0].range.startLineNumber,l=o[o.length-1].range.endLineNumber;for(let u=c;u<=l;u++)a.push(t.getLineContent(u));return new eP(a.join(`
`)+`
`,o.map(u=>new ze(u.range.startLineNumber-1,u.range.startColumn-1,u.range.endLineNumber-1,u.range.endColumn-1)))})}var w_=Object.freeze({id:"application",order:100,title:d(4099,null),type:"object"}),bN=Object.freeze({id:"workbench",order:7,title:d(4100,null),type:"object"}),yN=Object.freeze({id:"security",scope:1,title:d(4101,null),type:"object",order:7}),b_=Object.freeze({id:"problems",title:d(4102,null),type:"object",order:101}),EN=Object.freeze({id:"window",order:8,title:d(4103,null),type:"object"}),xN={ConfigurationMigration:"base.contributions.configuration.migration"},kN=class{constructor(){this.migrations=[],this.a=new D,this.onDidRegisterConfigurationMigration=this.a.event}registerConfigurationMigrations(e){this.migrations.push(...e)}},Lf=new kN;Bt.add(xN.ConfigurationMigration,Lf);var VE=class extends he{static{this.ID="workbench.contrib.configurationMigration"}constructor(t,r){super(),this.a=t,this.b=r,this.B(this.b.onDidChangeWorkspaceFolders(async i=>{for(const s of i.added)await this.f(s,Lf.migrations)})),this.c(Lf.migrations),this.B(Lf.onDidRegisterConfigurationMigration(i=>this.c(i)))}async c(t){await this.f(void 0,t);for(const r of this.b.getWorkspace().folders)await this.f(r,t)}async f(t,r){await Promise.all([r.map(i=>this.g(i,t?.uri))])}async g(t,r){const i=this.a.inspect(t.key,{resource:r}),s=this.b.getWorkbenchState()===3?[["user",2],["userLocal",3],["userRemote",4],["workspace",5],["workspaceFolder",6]]:[["user",2],["userLocal",3],["userRemote",4],["workspace",5]];for(const[n,o]of s){const a=i[n];if(!a)continue;const c=[];if(a.value!==void 0){const l=await this.h(t,n,a.value,r,void 0);for(const u of l??[])c.push([u,[]])}for(const{identifiers:l,value:u}of a.overrides??[])if(u!==void 0){const h=await this.h(t,n,u,r,l);for(const p of h??[])c.push([p,l])}c.length&&await Promise.allSettled(c.map(async([[l,u],h])=>this.a.updateValue(l,u.value,{resource:r,overrideIdentifiers:h},o)))}}async h(t,r,i,s,n){const o=c=>{const u=this.a.inspect(c,{resource:s})[r];if(u)return n?u.overrides?.find(({identifiers:h})=>Qr(h,n))?.value:u.value},a=await t.migrateFn(i,o);return Array.isArray(a)?a:[[t.key,a]]}};VE=__decorate([__param(0,Wu),__param(1,Du)],VE);var qE=class extends he{static{this.ID="workbench.contrib.dynamicWorkbenchSecurityConfiguration"}constructor(t){super(),this.b=t,this.a=new co,this.ready=this.a.p,this.c()}async c(){try{await this.f()}finally{this.a.complete()}}async f(){if(!tr&&(await this.b.getEnvironment())?.os!==1)return;Bt.as(xo.Configuration).registerConfiguration({...yN,properties:{"security.allowedUNCHosts":{type:"array",items:{type:"string",pattern:"^[^\\\\]+$",patternErrorMessage:d(4104,null)},default:[],markdownDescription:d(4105,null),scope:3},"security.restrictUNCAccess":{type:"boolean",default:!0,markdownDescription:d(4106,null),scope:3}}})}};qE=__decorate([__param(0,M9)],qE);var zl="window.newWindowProfile",GE=class extends he{static{this.ID="workbench.contrib.dynamicWindowConfiguration"}constructor(t,r){super(),this.c=t,this.f=r,this.g(),this.B(this.c.onDidChangeProfiles(i=>this.g())),this.h(),this.j(),this.B(r.onDidChangeConfiguration(i=>{i.source!==7&&i.affectsConfiguration(zl)&&this.h()})),this.B(this.c.onDidChangeProfiles(()=>this.j()))}g(){const t=Bt.as(xo.Configuration),r={...EN,properties:{[zl]:{type:["string","null"],default:null,enum:[...this.c.profiles.map(i=>i.name),null],enumItemLabels:[...this.c.profiles.map(i=>""),d(4107,null)],description:d(4108,null),scope:1}}};this.a?t.updateConfigurations({add:[r],remove:[this.a]}):t.registerConfiguration(r),this.a=r}h(){const t=this.f.getValue(zl);this.b=t?this.c.profiles.find(r=>r.name===t):void 0}j(){const t=this.f.getValue(zl);if(!t)return;const r=this.b?this.c.profiles.find(i=>i.id===this.b.id):void 0;t!==r?.name&&this.f.updateValue(zl,r?.name)}};GE=__decorate([__param(0,$2),__param(1,Wu)],GE);var k_=_("editorResolverService"),$N=Bt.as(xo.Configuration),SN={...bN,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:d(12899,null),additionalProperties:{type:"string"}}}};$N.registerConfiguration(SN);var S0;(function(e){e.builtin="builtin",e.option="option",e.exclusive="exclusive",e.default="default"})(S0||(S0={}));var QE;(function(e){e[e.ABORT=1]="ABORT",e[e.NONE=2]="NONE"})(QE||(QE={}));function IN(e,t){if(new Set([q.extension,q.webviewPanel,q.vscodeWorkspaceTrust,q.vscodeSettings]).has(t.scheme))return!1;const s=typeof e=="string"&&e.indexOf(Te.sep)>=0?`${t.scheme}:${t.path}`:Mi(t);return mc(typeof e=="string"?e.toLowerCase():e,s.toLowerCase())}var CN=class Zl{static{this.a=0}get activeNotebookEditor(){return this.k?.apiEditor}get visibleNotebookEditors(){return this.l.map(t=>t.apiEditor)}constructor(t,r,i,s,n,o,a){this.q=i,this.r=s,this.s=n,this.t=o,this.u=a,this.f=new Map,this.g=new Nt,this.h=new Map,this.j=new D,this.onDidChangeActiveNotebookEditor=this.j.event,this.l=[],this.m=new D,this.onDidOpenNotebookDocument=this.m.event,this.n=new D,this.onDidCloseNotebookDocument=this.n.event,this.o=new D,this.onDidChangeVisibleNotebookEditors=this.o.event,this.p=new ni("NotebookCellStatusBarCache"),this.x=0,this.y=new Map,this.b=t.getProxy(z.MainThreadNotebook),this.c=t.getProxy(z.MainThreadNotebookDocuments),this.d=t.getProxy(z.MainThreadNotebookEditors),this.i=r.converter,r.registerArgumentProcessor({processArgument:c=>{if(c&&c.$mid===13){const l=c.notebookEditor?.notebookUri,u=c.cell.handle,p=this.g.get(l)?.getCell(u);if(p)return p.apiCell}if(c&&c.$mid===14){const l=c.uri,u=this.g.get(l);if(u)return u.apiNotebook}return c}}),Zl.C(r)}getEditorById(t){const r=this.h.get(t);if(!r)throw new Error(`unknown text editor: ${t}. known editors: ${[...this.h.keys()]} `);return r}getIdByEditor(t){for(const[r,i]of this.h)if(i.apiEditor===t)return r}get notebookDocuments(){return[...this.g.values()]}getNotebookDocument(t,r){const i=this.g.get(t);if(!i&&!r)throw new Error(`NO notebook document for '${t}'`);return i}static w(t,r){if(!r)return;const i=r.filenamePattern.map(s=>Rd.from(s)).filter(s=>s!==void 0);if(r.filenamePattern&&!i){console.warn(`Notebook content provider view options file name pattern is invalid ${r.filenamePattern}`);return}return{extension:t.identifier,providerDisplayName:t.displayName||t.name,displayName:r.displayName,filenamePattern:i,priority:r.exclusive?S0.exclusive:void 0}}registerNotebookCellStatusBarItemProvider(t,r,i){const s=Zl.a++,n=typeof i.onDidChangeCellStatusBarItems=="function"?Zl.a++:void 0;this.f.set(s,i),this.b.$registerNotebookCellStatusBarItemProvider(s,n,r);let o;return n!==void 0&&(o=i.onDidChangeCellStatusBarItems(a=>this.b.$emitCellStatusBarEvent(n))),new Ie(()=>{this.f.delete(s),this.b.$unregisterNotebookCellStatusBarItemProvider(s,n),o?.dispose()})}async createNotebookDocument(t){const r=await this.c.$tryCreateNotebook({viewType:t.viewType,content:t.content&&Rs.from(t.content)});return y.revive(r)}async openNotebookDocument(t){const r=this.g.get(t);if(r)return r.apiNotebook;const i=await this.c.$tryOpenNotebook(t),s=this.g.get(y.revive(i));return Kn(s?.apiNotebook)}async showNotebookDocument(t,r){let i;typeof r=="object"?i={position:Ct.from(r.viewColumn),preserveFocus:r.preserveFocus,selections:r.selections&&r.selections.map(xi.from),pinned:typeof r.preview=="boolean"?!r.preview:void 0,label:typeof r.asRepl=="string"?r.asRepl:typeof r.asRepl=="object"?r.asRepl.label:void 0}:i={preserveFocus:!1,pinned:!0};const s=r?.asRepl?"repl":t.notebookType,n=await this.d.$tryShowNotebookDocument(t.uri,s,i),o=n&&this.h.get(n)?.apiEditor;if(o)return o;throw n?new Error(`Could NOT open editor for "${t.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${t.uri.toString()}".`)}async $provideNotebookCellStatusBarItems(t,r,i,s){const n=this.f.get(t),o=y.revive(r),a=this.g.get(o);if(!a||!n)return;const c=a.getCellFromIndex(i);if(!c)return;const l=await n.provideCellStatusBarItems(c.apiCell,s);if(!l)return;const u=new me,h=this.p.add([u]),f=(Array.isArray(l)?l:[l]).map(m=>v1.from(m,this.i,u));return{cacheId:h,items:f}}$releaseNotebookCellStatusBarItems(t){this.p.delete(t)}registerNotebookSerializer(t,r,i,s,n){if(wu(r))throw new Error("viewType cannot be empty or just whitespace");const o=this.x++;return this.y.set(o,{viewType:r,serializer:i,options:s}),this.b.$registerNotebookSerializer(o,{id:t.identifier,location:t.extensionLocation},r,b1.from(s),Zl.w(t,n)),ce(()=>{this.b.$unregisterNotebookSerializer(o)})}async $dataToNotebook(t,r,i){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.deserializeNotebook(r.buffer,i);return new Cr(Rs.from(n))}async $notebookToData(t,r,i){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.serializeNotebook(Rs.to(r.value),i);return ke.wrap(n)}async $saveNotebook(t,r,i,s,n){const o=y.revive(r),a=this.y.get(t);if(this.D(`enter saveNotebook(versionId: ${i}, ${o.toString()})`),!a)throw new Error("NO serializer found");const c=this.g.get(o);if(!c)throw new Error("Document NOT found");if(c.versionId!==i)throw new Error("Document version mismatch");if(!this.s.value.isWritableFileSystem(o.scheme))throw new $g(d(2805,null,this.A(o)),6);const l={metadata:Ay(c.apiNotebook.metadata,m=>!(a.options?.transientDocumentMetadata??{})[m]),cells:[]};for(const m of c.apiNotebook.getCells()){const w=new Xh(m.kind,m.document.getText(),m.document.languageId,m.mime,a.options?.transientOutputs?[]:[...m.outputs],m.metadata,m.executionSummary);w.metadata=Ay(m.metadata,E=>!(a.options?.transientCellMetadata??{})[E]),l.cells.push(w)}if(await this.z(o,s),n.isCancellationRequested)throw new Error("canceled");const u=await a.serializer.serializeNotebook(l,n);if(n.isCancellationRequested)throw new Error("canceled");this.D(`serialized versionId: ${i} ${o.toString()}`),await this.s.value.writeFile(o,u),this.D(`Finished write versionId: ${i} ${o.toString()}`);const h=this.s.getFileSystemProviderExtUri(o.scheme),p=await this.s.value.stat(o),f={name:h.basename(o),isFile:(p.type&hn.File)!==0,isDirectory:(p.type&hn.Directory)!==0,isSymbolicLink:(p.type&hn.SymbolicLink)!==0,mtime:p.mtime,ctime:p.ctime,size:p.size,readonly:!!((p.permissions??0)&vo.Readonly)||!this.s.value.isWritableFileSystem(o.scheme),locked:!!((p.permissions??0)&vo.Locked),etag:q4({mtime:p.mtime,size:p.size}),children:void 0};return this.D(`exit saveNotebook(versionId: ${i}, ${o.toString()})`),f}async $searchInNotebooks(t,r,i,s,n){const o=this.y.get(t)?.serializer;if(!o)return{limitHit:!1,results:[]};const a=new ww;await(async(p,f,m)=>{await Promise.all(p.map(async w=>await Promise.all(w.filenamePatterns.map(E=>{const $={_reason:m._reason,folderQueries:m.folderQueries,includePattern:m.includePattern,excludePattern:m.excludePattern,maxResults:m.maxResults,type:1,filePattern:E};return this.t.doInternalFileSearchWithCustomCallback($,f,S=>{S.forEach(P=>{a.has(P)||s.some(F=>w.isFromSettings&&!F.isFromSettings?!1:F.filenamePatterns.some(W=>IN(W,P)))||a.add(P)})}).catch(S=>{if(S.code==="ENOENT")return console.warn("Could not find notebook search results, ignoring notebook results."),{limitHit:!1,messages:[]};throw S})}))))})(i,n,r);const l=new Nt;let u=!1;const h=Array.from(a).map(async p=>{const f=[];try{if(n.isCancellationRequested)return;if(r.maxResults&&[...l.values()].reduce(($,S)=>$+S.cellResults.length,0)>r.maxResults){u=!0;return}const m=[],w=this.g.get(p);if(w)w.apiNotebook.getCells().forEach(S=>m.push({input:S.document.getText(),outputs:S.outputs.flatMap(P=>P.items.map(O=>O.data.toString()))}));else{const $=await this.s.value.readFile(p),S=ke.fromString($.toString()),P=await o.deserializeNotebook(S.buffer,n);if(n.isCancellationRequested)return;Rs.from(P).cells.forEach(F=>m.push({input:F.source,outputs:F.outputs.flatMap(W=>W.items.map(Z=>Z.valueBytes.toString()))}))}if(n.isCancellationRequested)return;m.forEach(($,S)=>{const P=r.contentPattern.pattern,O=new wN($.input,void 0,$.outputs),F=O.findInInputs(P),W=O.findInOutputs(P),Z=W.flatMap(J=>WE(J.matches,J.textBuffer)).map((J,X)=>(J.webviewIndex=X,J));if(F.length>0||W.length>0){const J={index:S,contentResults:WE(F,O.inputTextBuffer),webviewResults:Z};f.push(J)}});const E={resource:p,cellResults:f};l.set(p,E);return}catch{return}});return await Promise.all(h),{limitHit:u,results:[...l.values()]}}async z(t,r){const i=await this.s.value.stat(t);if(typeof r?.mtime=="number"&&typeof r.etag=="string"&&r.etag!==SC&&typeof i.mtime=="number"&&typeof i.size=="number"&&r.mtime<i.mtime&&r.etag!==q4({mtime:r.mtime,size:i.size}))throw new $g(d(2806,null),3,r)}A(t){return t.scheme===q.file?t.fsPath:t.toString()}B(t,r,i){if(this.h.has(r))throw new Error(`editor with id ALREADY EXSIST: ${r}`);const s=new v0(r,this.d,t,i.visibleRanges.map(xi.to),i.selections.map(xi.to),typeof i.viewColumn=="number"?Ct.to(i.viewColumn):void 0,i.viewType);this.h.set(r,s)}$acceptDocumentAndEditorsDelta(t){if(t.value.removedDocuments)for(const i of t.value.removedDocuments){const s=y.revive(i),n=this.g.get(s);n&&(n.dispose(),this.g.delete(s),this.q.$acceptDocumentsAndEditorsDelta({removedDocuments:n.apiNotebook.getCells().map(o=>o.document.uri)}),this.n.fire(n.apiNotebook));for(const o of this.h.values())o.notebookData.uri.toString()===s.toString()&&this.h.delete(o.id)}if(t.value.addedDocuments){const i=[];for(const s of t.value.addedDocuments){const n=y.revive(s.uri);if(this.g.has(n))throw new Error(`adding EXISTING notebook ${n} `);const o=new oN(this.c,this.q,this.r,n,s);i.push(...s.cells.map(a=>m0.asModelAddData(a))),this.g.get(n)?.dispose(),this.g.set(n,o),this.q.$acceptDocumentsAndEditorsDelta({addedDocuments:i}),this.m.fire(o.apiNotebook)}}if(t.value.addedEditors)for(const i of t.value.addedEditors){if(this.h.has(i.id))return;const s=y.revive(i.documentUri),n=this.g.get(s);n&&this.B(n,i.id,i)}const r=[];if(t.value.removedEditors)for(const i of t.value.removedEditors){const s=this.h.get(i);s&&(this.h.delete(i),this.k?.id===s.id&&(this.k=void 0),r.push(s))}if(t.value.visibleEditors){this.l=t.value.visibleEditors.map(s=>this.h.get(s)).filter(s=>!!s);const i=new Set;this.l.forEach(s=>i.add(s.id));for(const s of this.h.values()){const n=i.has(s.id);s._acceptVisibility(n)}this.l=[...this.h.values()].map(s=>s).filter(s=>s.visible),this.o.fire(this.visibleNotebookEditors)}t.value.newActiveEditor===null?this.k=void 0:t.value.newActiveEditor&&(this.h.get(t.value.newActiveEditor)||console.error(`FAILED to find active notebook editor ${t.value.newActiveEditor}`),this.k=this.h.get(t.value.newActiveEditor)),t.value.newActiveEditor!==void 0&&this.j.fire(this.k?.apiEditor)}static C(t){const r=U.String.with("notebookType","A notebook type"),i=new le("vscode.executeDataToNotebook","_executeDataToNotebook","Invoke notebook serializer",[r,new U("data","Bytes to convert to data",n=>n instanceof Uint8Array,n=>ke.wrap(n))],new ae("Notebook Data",n=>Rs.to(n.value))),s=new le("vscode.executeNotebookToData","_executeNotebookToData","Invoke notebook serializer",[r,new U("NotebookData","Notebook data to convert to bytes",n=>!0,n=>new Cr(Rs.from(n)))],new ae("Bytes",n=>n.buffer));t.registerApiCommand(i),t.registerApiCommand(s)}D(t){this.u.trace(`[Extension Host Notebook] ${t}`)}},DN=class{constructor(e,t,r,i={timeout:1500,errors:3}){this.b=e,this.c=t,this.d=r,this.f=i,this.a=new Ma}dispose(){}getOnWillSaveNotebookDocumentEvent(e){return(t,r,i)=>{const s=function(o){t.call(r,o)};return s.extension=e,this.a.event(s,void 0,i)}}async $participateInSave(e,t,r){const i=y.revive(e),s=this.c.getNotebookDocument(i);if(!s)throw new Error("Unable to resolve notebook document");const n=[];if(await this.a.fireAsync({notebook:s.apiNotebook,reason:Pd.to(t)},r,async(a,c)=>{const l=Date.now(),u=await await Promise.resolve(a);Date.now()-l>this.f.timeout&&this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier),!r.isCancellationRequested&&u&&(u instanceof wn?n.push(u):this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier,"ignored due to invalid data"))}),r.isCancellationRequested)return!1;if(n.length===0)return!0;const o={edits:[]};for(const a of n){const{edits:c}=kr.from(a);o.edits=o.edits.concat(c)}return this.d.$tryApplyWorkspaceEdit(new Cr(o))}},PN=class{constructor(e){this.c=e,this.a=new D,this.onDidSaveNotebookDocument=this.a.event,this.b=new D,this.onDidChangeNotebookDocument=this.b.event}$acceptModelChanged(e,t,r,i){const n=this.c.getNotebookDocument(y.revive(e)).acceptModelChanged(t.value,r,i);this.b.fire(n)}$acceptDirtyStateChanged(e,t){this.c.getNotebookDocument(y.revive(e)).acceptDirty(t)}$acceptModelSaved(e){const t=this.c.getNotebookDocument(y.revive(e));this.a.fire(t.apiNotebook)}},I0=class{constructor(t,r){this.c=t,this.d=r,this.a=new D,this.b=new D,this.onDidChangeNotebookEditorSelection=this.a.event,this.onDidChangeNotebookEditorVisibleRanges=this.b.event}$acceptEditorPropertiesChanged(t,r){this.c.debug("ExtHostNotebook#$acceptEditorPropertiesChanged",t,r);const i=this.d.getEditorById(t);r.visibleRanges&&i._acceptVisibleRanges(r.visibleRanges.ranges.map(xi.to)),r.selections&&i._acceptSelections(r.selections.selections.map(xi.to)),r.visibleRanges&&this.b.fire({notebookEditor:i.apiEditor,visibleRanges:i.apiEditor.visibleRanges}),r.selections&&this.a.fire(Object.freeze({notebookEditor:i.apiEditor,selections:i.apiEditor.selections}))}$acceptEditorViewColumns(t){for(const r in t)this.d.getEditorById(r)._acceptViewColumn(Ct.to(t[r]))}};I0=__decorate([__param(0,He)],I0);var xa;(function(e){e[e.Output=1]="Output",e[e.OutputItems=2]="OutputItems",e[e.ExecutionState=3]="ExecutionState"})(xa||(xa={}));var S_=_("INotebookExecutionService"),AN=100,JE;(function(e){e[e.Disconnected=1]="Disconnected",e[e.Connected=2]="Connected",e[e.Initializing=3]="Initializing"})(JE||(JE={}));var I_=_("INotebookKernelService"),C_=_("INotebookKernelHistoryService"),C0=class{constructor(t,r,i,s,n){this.m=r,this.n=i,this.o=s,this.q=n,this.b=new Nt,this.c=new Nt,this.f=new Map,this.g=0,this.h=new Map,this.i=0,this.j=new Map,this.k=0,this.l=new D,this.onDidChangeNotebookCellExecutionState=this.l.event,this.r=0,this.s={},this.a=t.getProxy(z.MainThreadNotebookKernels);const o=new le("notebook.selectKernel","_notebook.selectKernel","Trigger kernel picker for specified notebook editor widget",[new U("options","Select kernel options",c=>!0,c=>{if(c&&"notebookEditor"in c&&"id"in c){const l=this.n.getIdByEditor(c.notebookEditor);return{id:c.id,extension:c.extension,notebookEditorId:l}}else if(c&&"notebookEditor"in c){const l=this.n.getIdByEditor(c.notebookEditor);if(l===void 0)throw new Error(`Cannot invoke 'notebook.selectKernel' for unrecognized notebook editor ${c.notebookEditor.notebook.uri.toString()}`);return{notebookEditorId:l}}return c})],ae.Void),a=new le("vscode.executeNotebookVariableProvider","_executeNotebookVariableProvider","Execute notebook variable provider",[U.Uri],new ae("A promise that resolves to an array of variables",(c,l)=>c.map(u=>({variable:{name:u.name,value:u.value,expression:u.expression,type:u.type,language:u.language},hasNamedChildren:u.hasNamedChildren,indexedChildrenCount:u.indexedChildrenCount}))));this.o.registerApiCommand(o),this.o.registerApiCommand(a)}createNotebookController(t,r,i,s,n,o){for(const F of this.j.values())if(F.controller.id===r&&Ue.equals(t.identifier,F.extensionId))throw new Error(`notebook controller with id '${r}' ALREADY exist`);const a=this.k++,c=this;this.q.trace(`NotebookController[${a}], CREATED by ${t.identifier.value}, ${r}`);const l=()=>console.warn(`NO execute handler from notebook controller '${f.id}' of extension: '${t.identifier}'`);let u=!1;const h=new D,p=new D,f={id:Nf(t.identifier,r),notebookType:i,extensionId:t.identifier,extensionLocation:t.extensionLocation,label:s||t.identifier.value,preloads:o?o.map(Ld.from):[]};let m=n??l,w,E;this.a.$addKernel(a,f).catch(F=>{console.log(F),u=!0});let $=0;const S=()=>{if(u)return;const F=++$;Promise.resolve().then(()=>{F===$&&this.a.$updateKernel(a,f)})},P=new Nt,O={get id(){return r},get notebookType(){return f.notebookType},onDidChangeSelectedNotebooks:h.event,get label(){return f.label},set label(F){f.label=F??t.displayName??t.name,S()},get detail(){return f.detail??""},set detail(F){f.detail=F,S()},get description(){return f.description??""},set description(F){f.description=F,S()},get supportedLanguages(){return f.supportedLanguages},set supportedLanguages(F){f.supportedLanguages=F,S()},get supportsExecutionOrder(){return f.supportsExecutionOrder??!1},set supportsExecutionOrder(F){f.supportsExecutionOrder=F,S()},get rendererScripts(){return f.preloads?f.preloads.map(Ld.to):[]},get executeHandler(){return m},set executeHandler(F){m=F??l},get interruptHandler(){return w},set interruptHandler(F){w=F,f.supportsInterrupt=!!F,S()},set variableProvider(F){R(t,"notebookVariableProvider"),E=F,f.hasVariableProvider=!!F,F?.onDidChangeVariables(W=>c.a.$variablesUpdated(W.uri)),S()},get variableProvider(){return E},createNotebookCellExecution(F){if(u)throw new Error("notebook controller is DISPOSED");if(!P.has(F.notebook.uri))throw c.q.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(P.keys()).map(W=>W.toString())),new Error(`notebook controller is NOT associated to notebook: ${F.notebook.uri.toString()}`);return c._createNotebookCellExecution(F,Nf(t.identifier,this.id))},createNotebookExecution(F){if(R(t,"notebookExecution"),u)throw new Error("notebook controller is DISPOSED");if(!P.has(F.uri))throw c.q.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(P.keys()).map(W=>W.toString())),new Error(`notebook controller is NOT associated to notebook: ${F.uri.toString()}`);return c._createNotebookExecution(F,Nf(t.identifier,this.id))},dispose:()=>{u||(this.q.trace(`NotebookController[${a}], DISPOSED`),u=!0,this.j.delete(a),h.dispose(),p.dispose(),this.a.$removeKernel(a))},updateNotebookAffinity(F,W){W===ed.Hidden&&R(t,"notebookControllerAffinityHidden"),c.a.$updateNotebookPriority(a,F.uri,W)},onDidReceiveMessage:p.event,postMessage(F,W){return R(t,"notebookMessaging"),c.a.$postMessage(a,W&&c.n.getIdByEditor(W),F)},asWebviewUri(F){return R(t,"notebookMessaging"),Ll(F,c.m.remote)}};return this.j.set(a,{extensionId:t.identifier,controller:O,onDidReceiveMessage:p,onDidChangeSelection:h,associatedNotebooks:P}),O}getIdByController(t){for(const[r,i]of this.j)if(i.controller===t)return Nf(i.extensionId,t.id);return null}createNotebookControllerDetectionTask(t,r){const i=this.g++,s=this;this.q.trace(`NotebookControllerDetectionTask[${i}], CREATED by ${t.identifier.value}`),this.a.$addKernelDetectionTask(i,r);const n={dispose:()=>{this.f.delete(i),s.a.$removeKernelDetectionTask(i)}};return this.f.set(i,n),n}registerKernelSourceActionProvider(t,r,i){const s=this.i++,n=typeof i.onDidChangeNotebookKernelSourceActions=="function"?s:void 0,o=this;this.h.set(s,i),this.q.trace(`NotebookKernelSourceActionProvider[${s}], CREATED by ${t.identifier.value}`),this.a.$addKernelSourceActionProvider(s,s,r);let a;return n!==void 0&&(a=i.onDidChangeNotebookKernelSourceActions(c=>this.a.$emitNotebookKernelSourceActionsChangeEvent(n))),{dispose:()=>{this.h.delete(s),o.a.$removeKernelSourceActionProvider(s,s),a?.dispose()}}}async $provideKernelSourceActions(t,r){const i=this.h.get(t);if(i){const s=new me;return(await i.provideNotebookKernelSourceActions(r)??[]).map(o=>w1.from(o,this.o.converter,s))}return[]}$acceptNotebookAssociation(t,r,i){const s=this.j.get(t);if(s){const n=this.n.getNotebookDocument(y.revive(r));i?s.associatedNotebooks.set(n.uri,!0):s.associatedNotebooks.delete(n.uri),this.q.trace(`NotebookController[${t}] ASSOCIATE notebook`,n.uri.toString(),i),s.onDidChangeSelection.fire({selected:i,notebook:n.apiNotebook})}}async $executeCells(t,r,i){const s=this.j.get(t);if(!s)return;const n=this.n.getNotebookDocument(y.revive(r)),o=[];for(const a of i){const c=n.getCell(a);c&&o.push(c.apiCell)}try{this.q.trace(`NotebookController[${t}] EXECUTE cells`,n.uri.toString(),o.length),await s.controller.executeHandler.call(s.controller,o,n.apiNotebook,s.controller)}catch(a){this.q.error(`NotebookController[${t}] execute cells FAILED`,a),console.error(a)}}async $cancelCells(t,r,i){const s=this.j.get(t);if(!s)return;const n=this.n.getNotebookDocument(y.revive(r));if(s.controller.interruptHandler)await s.controller.interruptHandler.call(s.controller,n.apiNotebook);else for(const o of i){const a=n.getCell(o);a&&this.b.get(a.uri)?.cancel()}if(s.controller.interruptHandler){const o=this.c.get(n.uri);this.c.delete(n.uri),i.length&&Array.isArray(o)&&o.length&&o.forEach(a=>a.dispose())}}async $provideVariables(t,r,i,s,n,o,a){const c=this.j.get(t);if(!c)return;const l=this.n.getNotebookDocument(y.revive(i)),u=c.controller.variableProvider;if(!u)return;let h;if(s!==void 0){if(h=this.s[s],!h)return}else this.s={};const p=n==="named"?qc.Named:qc.Indexed,f=u.provideVariables(l.apiNotebook,h,p,o,a);let m=0;for await(const w of f){if(a.isCancellationRequested)return;const E={id:this.r++,name:w.variable.name,value:w.variable.value,type:w.variable.type,interfaces:w.variable.interfaces,language:w.variable.language,expression:w.variable.expression,hasNamedChildren:w.hasNamedChildren,indexedChildrenCount:w.indexedChildrenCount,extensionId:c.extensionId.value};if(this.s[E.id]=w.variable,this.a.$receiveVariable(r,E),m++>=AN)return}}$acceptKernelMessageFromRenderer(t,r,i){const s=this.j.get(t);if(!s)return;const n=this.n.getEditorById(r);s.onDidReceiveMessage.fire(Object.freeze({editor:n.apiEditor,message:i}))}$cellExecutionChanged(t,r,i){const n=this.n.getNotebookDocument(y.revive(t)).getCell(r);if(n){const o=i?m1.to(i):Wo.Idle;o!==void 0&&this.l.fire({cell:n.apiCell,state:o})}}_createNotebookCellExecution(t,r){if(t.index<0)throw new Error("CANNOT execute cell that has been REMOVED from notebook");const s=this.n.getNotebookDocument(t.notebook.uri).getCellFromApiCell(t);if(!s)throw new Error("invalid cell");if(this.b.has(s.uri))throw new Error(`duplicate execution for ${s.uri}`);const n=new TN(r,s,this.a);this.b.set(s.uri,n);const o=n.onDidChangeState(()=>{n.state===oi.Resolved&&(n.dispose(),o.dispose(),this.b.delete(s.uri))});return n.asApiObject()}_createNotebookExecution(t,r){const i=this.n.getNotebookDocument(t.uri),s=t.getCells().find(a=>{const c=i.getCellFromApiCell(a);return c&&this.b.has(c.uri)});if(s)throw new Error(`duplicate cell execution for ${s.document.uri}`);if(this.c.has(i.uri))throw new Error(`duplicate notebook execution for ${i.uri}`);const n=new LN(r,i,this.a),o=n.onDidChangeState(()=>{n.state===ss.Resolved&&(n.dispose(),o.dispose(),this.c.delete(i.uri))});return this.c.set(i.uri,[n,o]),n.asApiObject()}};C0=__decorate([__param(4,He)],C0);var oi;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(oi||(oi={}));var TN=class E3 extends he{static{this.a=0}get state(){return this.f}constructor(t,r,i){super(),this.m=r,this.n=i,this.b=E3.a++,this.c=new D,this.onDidChangeState=this.c.event,this.f=oi.Init,this.g=this.B(new dt),this.h=new NN(10,s=>this.s(s)),this.j=r.internalMetadata.executionOrder,this.n.$createExecution(this.b,t,this.m.notebook.uri,this.m.handle)}cancel(){this.g.cancel()}async r(t){await this.h.addItem(t)}async s(t){const r=Array.isArray(t)?t:[t];return this.n.$updateExecution(this.b,new Cr(r))}t(){if(this.f===oi.Init)throw new Error("Must call start before modifying cell output");if(this.f===oi.Resolved)throw new Error("Cannot modify cell output after calling resolve")}w(t){let r=this.m;if(t&&(r=this.m.notebook.getCellFromApiCell(t)),!r)throw new Error("INVALID cell");return r.handle}y(t){return t.map(r=>{const i=Yh.ensureUniqueMimeTypes(r.items,!0);return i===r.items?Ls.from(r):Ls.from({items:i,id:r.id,metadata:r.metadata})})}async z(t,r,i){const s=this.w(r),n=this.y(hi(t));return this.r({editType:xa.Output,cellHandle:s,append:i,outputs:n})}async C(t,r,i){return t=Yh.ensureUniqueMimeTypes(hi(t),!0),this.r({editType:xa.OutputItems,items:t.map(ra.from),outputId:r.id,append:i})}asApiObject(){const t=this;return Object.freeze({get token(){return t.g.token},get cell(){return t.m.apiCell},get executionOrder(){return t.j},set executionOrder(i){t.j=i,t.s([{editType:xa.ExecutionState,executionOrder:t.j}])},start(i){if(t.f===oi.Resolved||t.f===oi.Started)throw new Error("Cannot call start again");t.f=oi.Started,t.c.fire(),t.s({editType:xa.ExecutionState,runStartTime:i})},end(i,s,n){if(t.f===oi.Resolved)throw new Error("Cannot call resolve twice");t.f=oi.Resolved,t.c.fire(),t.h.flush();const o=RN(n);t.n.$completeExecution(t.b,new Cr({runEndTime:s,lastRunSuccess:i,error:o}))},clearOutput(i){return t.t(),t.z([],i,!1)},appendOutput(i,s){return t.t(),t.z(i,s,!0)},replaceOutput(i,s){return t.t(),t.z(i,s,!1)},appendOutputItems(i,s){return t.t(),t.C(i,s,!0)},replaceOutputItems(i,s){return t.t(),t.C(i,s,!1)}})}};function RN(e){const t=s=>s?{startLineNumber:s.start.line,startColumn:s.start.character,endLineNumber:s.end.line,endColumn:s.end.character}:void 0,r=s=>({uri:s.uri,position:s.position,label:s.label});return e?{name:e.name,message:e.message,stack:e.stack instanceof Array?e.stack.map(s=>r(s)):e.stack,location:t(e.location),uri:e.uri}:void 0}var ss;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(ss||(ss={}));var LN=class x3 extends he{static{this.a=0}get state(){return this.f}constructor(t,r,i){super(),this.h=r,this.j=i,this.b=x3.a++,this.c=new D,this.onDidChangeState=this.c.event,this.f=ss.Init,this.g=this.B(new dt),this.j.$createNotebookExecution(this.b,t,this.h.uri)}cancel(){this.g.cancel()}asApiObject(){return Object.freeze({start:()=>{if(this.f===ss.Resolved||this.f===ss.Started)throw new Error("Cannot call start again");this.f=ss.Started,this.c.fire(),this.j.$beginNotebookExecution(this.b)},end:()=>{if(this.f===ss.Resolved)throw new Error("Cannot call resolve twice");this.f=ss.Resolved,this.c.fire(),this.j.$completeNotebookExecution(this.b)}})}},NN=class{constructor(e,t){this.f=e,this.g=t,this.a=[],this.b=Date.now()}addItem(e){return this.a.push(e),this.c||(this.c=new co,this.b=Date.now(),gi(this.f).then(()=>this.flush())),Date.now()-this.b>this.f?this.flush():this.c.p}flush(){if(this.a.length===0||!this.c)return Promise.resolve();const e=this.c;this.c=void 0;const t=this.a;return this.a=[],this.g(t).finally(()=>e.complete())}};function Nf(e,t){return`${e.value}/${t}`}var FN=class{constructor(e,t){this.c=t,this.a=new Map,this.b=e.getProxy(z.MainThreadNotebookRenderers)}$postRendererMessage(e,t,r){const i=this.c.getEditorById(e);this.a.get(t)?.fire({editor:i.apiEditor,message:r})}createRendererMessaging(e,t){if(!e.contributes?.notebookRenderer?.some(i=>i.id===t))throw new Error(`Extensions may only call createRendererMessaging() for renderers they contribute (got ${t})`);return{onDidReceiveMessage:(i,s,n)=>this.d(t).event(i,s,n),postMessage:(i,s)=>{v0.apiEditorsToExtHost.has(i)&&([i,s]=[s,i]);const n=s&&v0.apiEditorsToExtHost.get(s);return this.b.$postMessage(n?.id,t,i)}}}d(e){let t=this.a.get(e);return t||(t=new D({onDidRemoveLastListener:()=>{t?.dispose(),this.a.delete(e)}}),this.a.set(e,t),t)}},MN=class{constructor(e){this.b=new Map,this.a=e.getProxy(z.MainThreadProfileContentHandlers)}registerProfileContentHandler(e,t,r){if(R(e,"profileContentHandlers"),this.b.has(t))throw new Error(`Handler with id '${t}' already registered`);return this.b.set(t,r),this.a.$registerProfileContentHandler(t,r.name,r.description,e.identifier.value),ce(()=>{this.b.delete(t),this.a.$unregisterProfileContentHandler(t)})}async $saveProfile(e,t,r,i){const s=this.b.get(e);if(!s)throw new Error(`Unknown handler with id: ${e}`);return s.saveProfile(t,r,i)}async $readProfile(e,t,r){const i=this.b.get(e);if(!i)throw new Error(`Unknown handler with id: ${e}`);return i.readProfile(Ce(t)?t:y.revive(t),r)}},ON=class{constructor(e){this.b=0,this.c=new Map,this.a=e}async withProgress(e,t,r){const i=this.b++,{title:s,location:n,cancellable:o}=t,a={label:e.displayName||e.name,id:e.identifier.value};return this.a.$startProgress(i,{location:p1.from(n),title:s,source:a,cancellable:o},e.isUnderDevelopment?void 0:e.identifier.value).catch(ap),this.d(i,r,!!o)}d(e,t,r){let i;r&&(i=new dt,this.c.set(e,i));const s=o=>{this.a.$progressEnd(o),this.c.delete(o),i?.dispose()};let n;try{n=t(new XE(this.a,e),r&&i?i.token:st.None)}catch(o){throw s(e),o}return n.then(o=>s(e),o=>s(e)),n}$acceptProgressCanceled(e){const t=this.c.get(e);t&&(t.cancel(),this.c.delete(e))}};function UN(e,t){return e.message=t.message,typeof t.increment=="number"&&(typeof e.increment=="number"?e.increment+=t.increment:e.increment=t.increment),e}var XE=class extends u9{constructor(e,t){super(r=>this.throttledReport(r)),this.c=e,this.d=t}throttledReport(e){this.c.$progressReport(this.d,e)}};__decorate([lL(100,(e,t)=>UN(e,t),()=>Object.create(null))],XE.prototype,"throttledReport",null);var HN=class k3{static{this.a=0}constructor(t,r){this.d=r,this.c=new Map,this.b=t.getProxy(z.MainThreadQuickDiff)}$provideOriginalResource(t,r,i){const s=y.revive(r),n=this.c.get(t);return n?Wt(()=>n.provideOriginalResource(s,i)).then(o=>o||null):Promise.resolve(null)}registerQuickDiffProvider(t,r,i,s){const n=k3.a++;return this.c.set(n,r),this.b.$registerQuickDiffProvider(n,Qo.from(t,this.d),i,s,r.visible??!0),{dispose:()=>{this.b.$unregisterQuickDiffProvider(n),this.c.delete(n)}}}};function jN(e,t,r){const i=e.getProxy(z.MainThreadQuickOpen);class s{constructor(f,m){this.e=new Map,this.f=0,this.a=f,this.b=m}showQuickPick(f,m,w,E=st.None){this.c=void 0;const $=Promise.resolve(m),S=++this.f,P=i.$show(S,{title:w?.title,placeHolder:w?.placeHolder,matchOnDescription:w?.matchOnDescription,matchOnDetail:w?.matchOnDetail,ignoreFocusLost:w?.ignoreFocusOut,canPickMany:w?.canPickMany},E),O={},F=P.then(()=>O);return Promise.race([F,$]).then(W=>{if(W===O)return;const Z=ct(f,"quickPickItemTooltip");return $.then(J=>{const X=[];for(let Se=0;Se<J.length;Se++){const de=J[Se];if(typeof de=="string")X.push({label:de,handle:Se});else if(de.kind===Vc.Separator)X.push({type:"separator",label:de.label});else{de.tooltip&&!Z&&console.warn(`Extension '${f.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${f.identifier.value}`);const et=de.iconPath?l(de.iconPath):void 0;X.push({label:de.label,iconPath:et?.iconPath,iconClass:et?.iconClass,description:de.description,detail:de.detail,picked:de.picked,alwaysShow:de.alwaysShow,tooltip:Z?be.fromStrict(de.tooltip):void 0,handle:Se})}}return w&&typeof w.onDidSelectItem=="function"&&(this.c=Se=>{w.onDidSelectItem(J[Se])}),i.$setItems(S,X),P.then(Se=>{if(typeof Se=="number")return J[Se];if(Array.isArray(Se))return Se.map(de=>J[de])})})}).then(void 0,W=>{if(!Vs(W))return i.$setError(S,W),Promise.reject(W)})}$onItemSelected(f){this.c?.(f)}showInput(f,m=st.None){return this.d=f?.validateInput,i.$input(f,typeof this.d=="function",m).then(void 0,w=>{if(!Vs(w))return Promise.reject(w)})}async $validateInput(f){if(!this.d)return;const m=await this.d(f);if(!m||typeof m=="string")return m;let w;switch(m.severity){case zo.Info:w=wt.Info;break;case zo.Warning:w=wt.Warning;break;case zo.Error:w=wt.Error;break;default:w=m.message?wt.Error:wt.Ignore;break}return{content:m.message,severity:w}}async showWorkspaceFolderPick(f,m=st.None){const w=await this.b.executeCommand("_workbench.pickWorkspaceFolder",[f]);if(!w)return;const E=await this.a.getWorkspaceFolders2();if(E)return E.find($=>$.uri.toString()===w.uri.toString())}createQuickPick(f){const m=new u(f,()=>this.e.delete(m._id));return this.e.set(m._id,m),m}createInputBox(f){const m=new h(f,()=>this.e.delete(m._id));return this.e.set(m._id,m),m}$onDidChangeValue(f,m){this.e.get(f)?._fireDidChangeValue(m)}$onDidAccept(f){this.e.get(f)?._fireDidAccept()}$onDidChangeActive(f,m){const w=this.e.get(f);w instanceof u&&w._fireDidChangeActive(m)}$onDidChangeSelection(f,m){const w=this.e.get(f);w instanceof u&&w._fireDidChangeSelection(m)}$onDidTriggerButton(f,m){this.e.get(f)?._fireDidTriggerButton(m)}$onDidTriggerItemButton(f,m,w){const E=this.e.get(f);E instanceof u&&E._fireDidTriggerItemButton(m,w)}$onDidHide(f){this.e.get(f)?._fireDidHide()}}class n{static{this.a=1}constructor(f,m){this.y=f,this.z=m,this._id=u.a++,this.e=!1,this.f=!1,this.g=!0,this.j=!1,this.k=!0,this.l="",this.m=void 0,this.o=[],this.p=new Map,this.q=new D,this.r=new D,this.s=new D,this.t=new D,this.v={id:this._id},this.w=!1,this.x=[this.s,this.t,this.q,this.r],this.onDidChangeValue=this.r.event,this.onDidAccept=this.q.event,this.onDidTriggerButton=this.s.event,this.onDidHide=this.t.event}get title(){return this.b}set title(f){this.b=f,this.A({title:f})}get step(){return this.c}set step(f){this.c=f,this.A({step:f})}get totalSteps(){return this.d}set totalSteps(f){this.d=f,this.A({totalSteps:f})}get enabled(){return this.g}set enabled(f){this.g=f,this.A({enabled:f})}get busy(){return this.j}set busy(f){this.j=f,this.A({busy:f})}get ignoreFocusOut(){return this.k}set ignoreFocusOut(f){this.k=f,this.A({ignoreFocusOut:f})}get value(){return this.l}set value(f){this.l=f,this.A({value:f})}get valueSelection(){return this.m}set valueSelection(f){this.m=f,this.A({valueSelection:f})}get placeholder(){return this.n}set placeholder(f){this.n=f,this.A({placeholder:f})}get buttons(){return this.o}set buttons(f){const m=ct(this.y,"quickInputButtonLocation");!m&&f.some(w=>w.location)&&console.warn(`Extension '${this.y.identifier.value}' uses a button location which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.y.identifier.value}`),this.o=f.slice(),this.p.clear(),f.forEach((w,E)=>{const $=w===Wc.Back?-1:E;this.p.set($,w)}),this.A({buttons:f.map((w,E)=>({...l(w.iconPath),tooltip:w.tooltip,handle:w===Wc.Back?-1:E,location:m?w.location:void 0}))})}show(){this.e=!0,this.f=!0,this.A({visible:!0})}hide(){this.e=!1,this.A({visible:!1})}_fireDidAccept(){this.q.fire()}_fireDidChangeValue(f){this.l=f,this.r.fire(f)}_fireDidTriggerButton(f){const m=this.p.get(f);m&&this.s.fire(m)}_fireDidHide(){this.f&&(this.f=this.e,this.t.fire())}dispose(){this.w||(this.w=!0,this._fireDidHide(),this.x=Li(this.x),this.u&&(clearTimeout(this.u),this.u=void 0),this.z(),i.$dispose(this._id))}A(f){if(!this.w){for(const m of Object.keys(f)){const w=f[m];this.v[m]=w===void 0?null:w}"visible"in this.v?(this.u&&(clearTimeout(this.u),this.u=void 0),this.B()):this.e&&!this.u&&(this.u=setTimeout(()=>{this.u=void 0,this.B()},0))}}B(){i.$createOrUpdate(this.v),this.v={id:this._id}}}function o(p){if(p instanceof Xt)return{id:p.id};const f=c(p),m=a(p);return{dark:typeof f=="string"?y.file(f):f,light:typeof m=="string"?y.file(m):m}}function a(p){return typeof p=="object"&&"light"in p?p.light:p}function c(p){return typeof p=="object"&&"dark"in p?p.dark:p}function l(p){const f=o(p);let m,w;return"id"in f?w=Mt.asClassName(f):m=f,{iconPath:m,iconClass:w}}class u extends n{constructor(f,m){super(f,m),this.C=[],this.D=new Map,this.E=new Map,this.F=!1,this.G=!0,this.H=!0,this.I=!0,this.J=!1,this.K=[],this.L=new D,this.M=[],this.N=new D,this.O=new D,this.onDidChangeActive=this.L.event,this.onDidChangeSelection=this.N.event,this.onDidTriggerItemButton=this.O.event,this.x.push(this.L,this.N,this.O),this.A({type:"quickPick"})}get items(){return this.C}set items(f){this.C=f.slice(),this.D.clear(),this.E.clear(),f.forEach((E,$)=>{this.D.set($,E),this.E.set(E,$)});const m=ct(this.y,"quickPickItemTooltip"),w=[];for(let E=0;E<f.length;E++){const $=f[E];if($.kind===Vc.Separator)w.push({type:"separator",label:$.label});else{$.tooltip&&!m&&console.warn(`Extension '${this.y.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.y.identifier.value}`);const S=$.iconPath?l($.iconPath):void 0;w.push({handle:E,label:$.label,iconPath:S?.iconPath,iconClass:S?.iconClass,description:$.description,detail:$.detail,picked:$.picked,alwaysShow:$.alwaysShow,tooltip:m?be.fromStrict($.tooltip):void 0,buttons:$.buttons?.map((P,O)=>({...l(P.iconPath),tooltip:P.tooltip,handle:O}))})}}this.A({items:w})}get canSelectMany(){return this.F}set canSelectMany(f){this.F=f,this.A({canSelectMany:f})}get matchOnDescription(){return this.G}set matchOnDescription(f){this.G=f,this.A({matchOnDescription:f})}get matchOnDetail(){return this.H}set matchOnDetail(f){this.H=f,this.A({matchOnDetail:f})}get sortByLabel(){return this.I}set sortByLabel(f){this.I=f,this.A({sortByLabel:f})}get keepScrollPosition(){return this.J}set keepScrollPosition(f){this.J=f,this.A({keepScrollPosition:f})}get activeItems(){return this.K}set activeItems(f){this.K=f.filter(m=>this.E.has(m)),this.A({activeItems:this.K.map(m=>this.E.get(m))})}get selectedItems(){return this.M}set selectedItems(f){this.M=f.filter(m=>this.E.has(m)),this.A({selectedItems:this.M.map(m=>this.E.get(m))})}_fireDidChangeActive(f){const m=Rt(f.map(w=>this.D.get(w)));this.K=m,this.L.fire(m)}_fireDidChangeSelection(f){const m=Rt(f.map(w=>this.D.get(w)));this.M=m,this.N.fire(m)}_fireDidTriggerItemButton(f,m){const w=this.D.get(f);if(!w||!w.buttons||!w.buttons.length)return;const E=w.buttons[m];E&&this.O.fire({button:E,item:w})}}class h extends n{constructor(f,m){super(f,m),this.C=!1,this.A({type:"inputBox"})}get password(){return this.C}set password(f){this.C=f,this.A({password:f})}get prompt(){return this.D}set prompt(f){this.D=f,this.A({prompt:f})}get validationMessage(){return this.E}set validationMessage(f){this.E=f,f?typeof f=="string"?this.A({validationMessage:f,severity:wt.Error}):this.A({validationMessage:f.message,severity:f.severity??wt.Error}):this.A({validationMessage:void 0,severity:wt.Ignore})}}return new s(t,r)}var YE=new pr(()=>{const e=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}}),P_=new pr(()=>({collator:new Intl.Collator(void 0,{numeric:!0})})),A_=new pr(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));function BN(e,t,r=!1){const i=e||"",s=t||"",n=YE.value.collator.compare(i,s);return YE.value.collatorIsNumeric&&n===0&&i!==s?i<s?-1:1:n}function _N(e,t,r=!1){return r||(e=e&&e.toLowerCase(),t=t&&t.toLowerCase()),e===t?0:e<t?-1:1}function Ff(e,t,r=!1){const i=e.split(Wr),s=t.split(Wr),n=i.length-1,o=s.length-1;let a,c;for(let l=0;;l++){if(a=n===l,c=o===l,a&&c)return BN(i[l],s[l],r);if(a)return-1;if(c)return 1;const u=_N(i[l],s[l],r);if(u!==0)return u}}var D0;function ZE(e){return e instanceof y}function zN(e,t){return e.scheme===q.file&&t.scheme===q.file&&di?e.toString()===t.toString():e.toString().toLowerCase()===t.toString().toLowerCase()}function P0(e){if(e)return typeof e.iconPath=="string"?y.file(e.iconPath):y.isUri(e.iconPath)||Mt.isThemeIcon(e.iconPath)?e.iconPath:void 0}function _n(e){if(e){if(y.isUri(e))return e;if(Mt.isThemeIcon(e))return e;{const t=e;return{light:t.light,dark:t.dark}}}else return}function WN(e){const t=_n(e.authorIcon),r=e.references?.map(i=>({...i,icon:_n(i.icon)}));return{...e,authorIcon:t,references:r}}function A0(e){return e?{...e,icon:_n(e.icon)}:void 0}function T0(e,t){if(!e.iconPath&&!t.iconPath)return 0;if(e.iconPath){if(!t.iconPath)return 1}else return-1;const r=typeof e.iconPath=="string"?e.iconPath:y.isUri(e.iconPath)?e.iconPath.fsPath:e.iconPath.id,i=typeof t.iconPath=="string"?t.iconPath:y.isUri(t.iconPath)?t.iconPath.fsPath:t.iconPath.id;return Ff(r,i)}function VN(e,t){let r=0;if(e.strikeThrough!==t.strikeThrough)return e.strikeThrough?1:-1;if(e.faded!==t.faded)return e.faded?1:-1;if(e.tooltip!==t.tooltip)return(e.tooltip||"").localeCompare(t.tooltip||"");if(r=T0(e,t),r!==0)return r;if(e.light&&t.light)r=T0(e.light,t.light);else{if(e.light)return 1;if(t.light)return-1}if(r!==0)return r;if(e.dark&&t.dark)r=T0(e.dark,t.dark);else{if(e.dark)return 1;if(t.dark)return-1}return r}function qN(e,t){if(e.command!==t.command)return e.command<t.command?-1:1;if(e.title!==t.title)return e.title<t.title?-1:1;if(e.tooltip!==t.tooltip){if(e.tooltip!==void 0&&t.tooltip!==void 0)return e.tooltip<t.tooltip?-1:1;if(e.tooltip!==void 0)return 1;if(t.tooltip!==void 0)return-1}if(e.arguments===t.arguments)return 0;if(e.arguments)if(t.arguments){if(e.arguments.length!==t.arguments.length)return e.arguments.length-t.arguments.length}else return 1;else return-1;for(let r=0;r<e.arguments.length;r++){const i=e.arguments[r],s=t.arguments[r];if(i!==s&&!(ZE(i)&&ZE(s)&&zN(i,s)))return i<s?-1:1}return 0}function KE(e,t){let r=Ff(e.resourceUri.fsPath,t.resourceUri.fsPath,!0);if(r!==0)return r;if(e.command&&t.command)r=qN(e.command,t.command);else{if(e.command)return 1;if(t.command)return-1}if(r!==0)return r;if(e.decorations&&t.decorations)r=VN(e.decorations,t.decorations);else{if(e.decorations)return 1;if(t.decorations)return-1}if(r!==0)return r;if(e.multiFileDiffEditorModifiedUri&&t.multiFileDiffEditorModifiedUri)r=Ff(e.multiFileDiffEditorModifiedUri.fsPath,t.multiFileDiffEditorModifiedUri.fsPath,!0);else{if(e.multiFileDiffEditorModifiedUri)return 1;if(t.multiFileDiffEditorModifiedUri)return-1}if(r!==0)return r;if(e.multiDiffEditorOriginalUri&&t.multiDiffEditorOriginalUri)r=Ff(e.multiDiffEditorOriginalUri.fsPath,t.multiDiffEditorOriginalUri.fsPath,!0);else{if(e.multiDiffEditorOriginalUri)return 1;if(t.multiDiffEditorOriginalUri)return-1}return r}function GN(e,t){for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function QN(e,t){return e.command===t.command&&e.title===t.title&&e.tooltip===t.tooltip&&(e.arguments&&t.arguments?GN(e.arguments,t.arguments):e.arguments===t.arguments)}function JN(e,t){return Ri(e,t,QN)}var XN=class{#e;#t;get value(){return this.d}set value(e){e=e??"",this.#e.$setInputBoxValue(this.m,e),this.o(e)}get onDidChange(){return this.f.event}get placeholder(){return this.g}set placeholder(e){this.#e.$setInputBoxPlaceholder(this.m,e),this.g=e}get validateInput(){return R(this.l,"scmValidation"),this.h}set validateInput(e){if(R(this.l,"scmValidation"),e&&typeof e!="function")throw new Error(`[${this.l.identifier.value}]: Invalid SCM input box validation function`);this.h=e,this.#e.$setValidationProviderIsEnabled(this.m,!!e)}get enabled(){return this.j}set enabled(e){e=!!e,this.j!==e&&(this.j=e,this.#e.$setInputBoxEnablement(this.m,e))}get visible(){return this.k}set visible(e){e=!!e,this.k!==e&&(this.k=e,this.#e.$setInputBoxVisibility(this.m,e))}get document(){return R(this.l,"scmTextDocument"),this.#t.getDocument(this.n)}constructor(e,t,r,i,s){this.l=e,this.m=i,this.n=s,this.d="",this.f=new D,this.g="",this.j=!0,this.k=!0,this.#t=t,this.#e=r}showValidationMessage(e,t){R(this.l,"scmValidation"),this.#e.$showValidationMessage(this.m,e,t)}$onInputBoxValueChange(e){this.o(e)}o(e){this.d=e,this.f.fire(e)}},YN=class $3{static{this.d=0}get disposed(){return this.m}get id(){return this.v}get label(){return this.w}set label(t){this.w=t,this.s.$updateGroupLabel(this.u,this.handle,t)}get hideWhenEmpty(){return this.q}set hideWhenEmpty(t){this.q=t,this.s.$updateGroup(this.u,this.handle,this.features)}get features(){return{hideWhenEmpty:this.hideWhenEmpty}}get resourceStates(){return[...this.g]}set resourceStates(t){this.g=[...t],this.l.fire()}constructor(t,r,i,s,n,o,a){this.s=t,this.t=r,this.u=i,this.v=s,this.w=n,this.multiDiffEditorEnableViewChanges=o,this.x=a,this.f=0,this.g=[],this.h=new Map,this.j=new Map,this.k=new Map,this.l=new D,this.onDidUpdateResourceStates=this.l.event,this.m=!1,this.n=new D,this.onDidDispose=this.n.event,this.o=[],this.p=[],this.q=void 0,this.handle=$3.d++}getResourceState(t){return this.h.get(t)}$executeResourceCommand(t,r){const i=this.j.get(t);return i?Wt(()=>this.t.executeCommand(i.command,...i.arguments||[],r)):Promise.resolve(void 0)}_takeResourceStateSnapshot(){const t=[...this.g].sort(KE),i=hw(this.p,t,KE).map(o=>{const a=o.toInsert.map(c=>{const l=this.f++;this.h.set(l,c);const u=c.resourceUri;let h;if(c.command)if(c.command.command==="vscode.open"||c.command.command==="vscode.diff"||c.command.command==="vscode.changes"){const J=new me;h=this.t.converter.toInternal(c.command,J),this.k.set(l,J)}else this.j.set(l,c.command);const p=ct(this.x,"scmMultiDiffEditor"),f=p?c.multiDiffEditorOriginalUri:void 0,m=p?c.multiFileDiffEditorModifiedUri:void 0,w=P0(c.decorations),E=c.decorations&&P0(c.decorations.light)||w,$=c.decorations&&P0(c.decorations.dark)||w,S=[E,$],P=c.decorations&&c.decorations.tooltip||"",O=c.decorations&&!!c.decorations.strikeThrough,F=c.decorations&&!!c.decorations.faded,W=c.contextValue||"";return{rawResource:[l,u,S,P,O,F,W,h,f,m],handle:l}});return{start:o.start,deleteCount:o.deleteCount,toInsert:a}}),s=i.map(({start:o,deleteCount:a,toInsert:c})=>[o,a,c.map(l=>l.rawResource)]),n=i.reverse();for(const{start:o,deleteCount:a,toInsert:c}of n){const l=c.map(h=>h.handle),u=this.o.splice(o,a,...l);for(const h of u)this.h.delete(h),this.j.delete(h),this.k.get(h)?.dispose(),this.k.delete(h)}return this.p=t,s}dispose(){this.m=!0,this.n.fire()}},R0=class S3{static{this.d=0}#e;get id(){return this.z}get label(){return this.A}get rootUri(){return this.B}get inputBox(){return this.g}get count(){return this.h}set count(t){this.h!==t&&(this.h=t,this.#e.$updateSourceControl(this.w,{count:t}))}get quickDiffProvider(){return this.j}set quickDiffProvider(t){this.j=t;let r;ct(this.x,"quickDiffProvider")&&(r=t?.label),this.#e.$updateSourceControl(this.w,{hasQuickDiffProvider:!!t,quickDiffLabel:r})}get historyProvider(){return R(this.x,"scmHistoryProvider"),this.k}set historyProvider(t){R(this.x,"scmHistoryProvider"),this.k=t,this.l.value=new me,this.#e.$updateSourceControl(this.w,{hasHistoryProvider:!!t}),t&&(this.l.value.add(t.onDidChangeCurrentHistoryItemRefs(()=>{const r=A0(t?.currentHistoryItemRef),i=A0(t?.currentHistoryItemRemoteRef),s=A0(t?.currentHistoryItemBaseRef);this.#e.$onDidChangeHistoryProviderCurrentHistoryItemRefs(this.w,r,i,s)})),this.l.value.add(t.onDidChangeHistoryItemRefs(r=>{if(r.added.length===0&&r.modified.length===0&&r.removed.length===0)return;const i=r.added.map(o=>({...o,icon:_n(o.icon)})),s=r.modified.map(o=>({...o,icon:_n(o.icon)})),n=r.removed.map(o=>({...o,icon:_n(o.icon)}));this.#e.$onDidChangeHistoryProviderHistoryItemRefs(this.w,{added:i,modified:s,removed:n,silent:r.silent})})))}get commitTemplate(){return this.m}set commitTemplate(t){t!==this.m&&(this.m=t,this.#e.$updateSourceControl(this.w,{commitTemplate:t}))}get acceptInputCommand(){return this.o}set acceptInputCommand(t){this.n.value=new me,this.o=t;const r=this.y.converter.toInternal(t,this.n.value);this.#e.$updateSourceControl(this.w,{acceptInputCommand:r})}get actionButton(){return R(this.x,"scmActionButton"),this.q}set actionButton(t){if(R(this.x,"scmActionButton"),Pg(this.q,t))return;this.q=t,this.p.value=new me;const r=t!==void 0?{command:{...this.y.converter.toInternal(t.command,this.p.value),shortTitle:t.command.shortTitle},secondaryCommands:t.secondaryCommands?.map(i=>i.map(s=>this.y.converter.toInternal(s,this.p.value))),enabled:t.enabled}:void 0;this.#e.$updateSourceControl(this.w,{actionButton:r??null})}get statusBarCommands(){return this.t}set statusBarCommands(t){if(this.t&&t&&JN(this.t,t))return;this.s.value=new me,this.t=t;const r=(t||[]).map(i=>this.y.converter.toInternal(i,this.s.value));this.#e.$updateSourceControl(this.w,{statusBarCommands:r})}get selected(){return this.u}constructor(t,r,i,s,n,o,a){this.x=t,this.y=s,this.z=n,this.A=o,this.B=a,this.f=new Map,this.h=void 0,this.j=void 0,this.l=new us,this.m=void 0,this.n=new us,this.o=void 0,this.p=new us,this.s=new us,this.t=void 0,this.u=!1,this.v=new D,this.onDidChangeSelection=this.v.event,this.w=S3.d++,this.C=new Map,this.D=new Set,this.#e=i;const c=y.from({scheme:q.vscodeSourceControl,path:`${n}/scm${this.w}/input`,query:a?`rootUri=${encodeURIComponent(a.toString())}`:void 0});this.g=new XN(t,r,this.#e,this.w,c),this.#e.$registerSourceControl(this.w,n,o,a,c)}createResourceGroup(t,r,i){const s=ct(this.x,"scmMultiDiffEditor")&&i?.multiDiffEditorEnableViewChanges===!0,n=new YN(this.#e,this.y,this.w,t,r,s,this.x),o=ht.once(n.onDidDispose)(()=>this.C.delete(n));return this.C.set(n,o),this.eventuallyAddResourceGroups(),n}eventuallyAddResourceGroups(){const t=[],r=[];for(const[i,s]of this.C){s.dispose();const n=i.onDidUpdateResourceStates(()=>{this.D.add(i),this.eventuallyUpdateResourceStates()});ht.once(i.onDidDispose)(()=>{this.D.delete(i),n.dispose(),this.f.delete(i.handle),this.#e.$unregisterGroup(this.w,i.handle)}),t.push([i.handle,i.id,i.label,i.features,i.multiDiffEditorEnableViewChanges]);const o=i._takeResourceStateSnapshot();o.length>0&&r.push([i.handle,o]),this.f.set(i.handle,i)}this.#e.$registerGroups(this.w,t,r),this.C.clear()}eventuallyUpdateResourceStates(){const t=[];this.D.forEach(r=>{const i=r._takeResourceStateSnapshot();i.length!==0&&t.push([r.handle,i])}),t.length>0&&this.#e.$spliceResourceStates(this.w,t),this.D.clear()}getResourceGroup(t){return this.f.get(t)}setSelectionState(t){this.u=t,this.v.fire(t)}dispose(){this.n.dispose(),this.p.dispose(),this.s.dispose(),this.f.forEach(t=>t.dispose()),this.#e.$unregisterSourceControl(this.w)}};__decorate([i0(100)],R0.prototype,"eventuallyAddResourceGroups",null),__decorate([i0(100)],R0.prototype,"eventuallyUpdateResourceStates",null);var L0=class{static{D0=this}static{this.d=0}get onDidChangeActiveProvider(){return this.k.event}constructor(t,r,i,s){this.m=r,this.n=i,this.o=s,this.h=new Map,this.j=new Oi,this.k=new D,this.f=t.getProxy(z.MainThreadSCM),this.g=t.getProxy(z.MainThreadTelemetry),r.registerArgumentProcessor({processArgument:n=>{if(n&&n.$mid===3){const o=this.h.get(n.sourceControlHandle);if(!o)return n;const a=o.getResourceGroup(n.groupHandle);return a?a.getResourceState(n.handle):n}else if(n&&n.$mid===4){const o=this.h.get(n.sourceControlHandle);return o?o.getResourceGroup(n.groupHandle):n}else if(n&&n.$mid===5){const o=this.h.get(n.handle);return o||n}return n}})}createSourceControl(t,r,i,s){this.o.trace("ExtHostSCM#createSourceControl",t.identifier.value,r,i,s),this.g.$publicLog2("api/scm/createSourceControl",{extensionId:t.identifier.value});const n=D0.d++,o=new R0(t,this.n,this.f,this.m,r,i,s);this.h.set(n,o);const a=this.j.get(t.identifier)||[];return a.push(o),this.j.set(t.identifier,a),o}getLastInputBox(t){this.o.trace("ExtHostSCM#getLastInputBox",t.identifier.value);const r=this.j.get(t.identifier),i=r&&r[r.length-1];return i&&i.inputBox}$provideOriginalResource(t,r,i){const s=y.revive(r);this.o.trace("ExtHostSCM#$provideOriginalResource",t,s.toString());const n=this.h.get(t);return!n||!n.quickDiffProvider||!n.quickDiffProvider.provideOriginalResource?Promise.resolve(null):Wt(()=>n.quickDiffProvider.provideOriginalResource(s,i)).then(o=>o||null)}$onInputBoxValueChange(t,r){this.o.trace("ExtHostSCM#$onInputBoxValueChange",t);const i=this.h.get(t);return i&&i.inputBox.$onInputBoxValueChange(r),Promise.resolve(void 0)}$executeResourceCommand(t,r,i,s){this.o.trace("ExtHostSCM#$executeResourceCommand",t,r,i);const n=this.h.get(t);if(!n)return Promise.resolve(void 0);const o=n.getResourceGroup(r);return o?o.$executeResourceCommand(i,s):Promise.resolve(void 0)}$validateInput(t,r,i){this.o.trace("ExtHostSCM#$validateInput",t);const s=this.h.get(t);return!s||!s.inputBox.validateInput?Promise.resolve(void 0):Wt(()=>s.inputBox.validateInput(r,i)).then(n=>{if(!n)return Promise.resolve(void 0);const o=be.fromStrict(n.message);return o?Promise.resolve([o,n.type]):Promise.resolve(void 0)})}$setSelectedSourceControl(t){return this.o.trace("ExtHostSCM#$setSelectedSourceControl",t),t!==void 0&&this.h.get(t)?.setSelectionState(!0),this.l!==void 0&&this.h.get(this.l)?.setSelectionState(!1),this.l=t,Promise.resolve(void 0)}async $resolveHistoryItemRefsCommonAncestor(t,r,i){try{return await this.h.get(t)?.historyProvider?.resolveHistoryItemRefsCommonAncestor(r,i)??void 0}catch(s){this.o.error("ExtHostSCM#$resolveHistoryItemRefsCommonAncestor",s);return}}async $provideHistoryItemRefs(t,r,i){try{return(await this.h.get(t)?.historyProvider?.provideHistoryItemRefs(r,i))?.map(o=>({...o,icon:_n(o.icon)}))??void 0}catch(s){this.o.error("ExtHostSCM#$provideHistoryItemRefs",s);return}}async $provideHistoryItems(t,r,i){try{return(await this.h.get(t)?.historyProvider?.provideHistoryItems(r,i))?.map(o=>WN(o))??void 0}catch(s){this.o.error("ExtHostSCM#$provideHistoryItems",s);return}}async $provideHistoryItemChanges(t,r,i,s){try{return await this.h.get(t)?.historyProvider?.provideHistoryItemChanges(r,i,s)??void 0}catch(n){this.o.error("ExtHostSCM#$provideHistoryItemChanges",n);return}}};L0=D0=__decorate([__param(3,He)],L0);var ZN=class I3{static{this.a=0}constructor(t,r){this.d=r,this.c=new Map,this.b=t.getProxy(z.MainThreadShare)}async $provideShare(t,r,i){return await this.c.get(t)?.provideShare({selection:M.to(r.selection),resourceUri:y.revive(r.resourceUri)},i)??void 0}registerShareProvider(t,r){const i=I3.a++;return this.c.set(i,r),this.b.$registerShareProvider(i,Qo.from(t,this.d),r.id,r.label,r.priority),{dispose:()=>{this.b.$unregisterShareProvider(i),this.c.delete(i)}}}},KN=class C3{static{this.a=1}constructor(t){this.c=new Map,this.d=new Map,this.f=new Map,this.b=t.getProxy(z.MainThreadSpeech)}async $createSpeechToTextSession(t,r,i){const s=this.c.get(t);if(!s)return;const n=new me,o=new dt;this.d.set(r,o);const a=await s.provideSpeechToTextSession(o.token,i?{language:i}:void 0);a&&(n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitSpeechToTextEvent(r,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $cancelSpeechToTextSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}async $createTextToSpeechSession(t,r,i){const s=this.c.get(t);if(!s)return;const n=new me,o=new dt;this.d.set(r,o);const a=await s.provideTextToSpeechSession(o.token,i?{language:i}:void 0);a&&(this.f.set(r,a),n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitTextToSpeechEvent(r,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $synthesizeSpeech(t,r){this.f.get(t)?.synthesize(r)}async $cancelTextToSpeechSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t),this.f.delete(t)}async $createKeywordRecognitionSession(t,r){const i=this.c.get(t);if(!i)return;const s=new me,n=new dt;this.d.set(r,n);const o=await i.provideKeywordRecognitionSession(n.token);o&&(s.add(o.onDidChange(a=>{n.token.isCancellationRequested||this.b.$emitKeywordRecognitionEvent(r,a)})),s.add(n.token.onCancellationRequested(()=>s.dispose())))}async $cancelKeywordRecognitionSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}registerProvider(t,r,i){const s=C3.a++;return this.c.set(s,i),this.b.$registerProvider(s,r,{extension:t,displayName:t.value}),ce(()=>{this.b.$unregisterProvider(s),this.c.delete(s)})}},eF=class rp{static{this.a=0}static{this.b=new Map([["statusBarItem.errorBackground",new Fc("statusBarItem.errorForeground")],["statusBarItem.warningBackground",new Fc("statusBarItem.warningForeground")]])}#e;#t;constructor(t,r,i,s,n,o=Is.Left,a,c){if(this.v=c,this.i=!1,this.k="",this.r=new me,this.#e=t,this.#t=r,n&&s){this.c=DD(s.identifier,n);const l=i.get(this.c);l&&(o=l.alignLeft?Is.Left:Is.Right,a=l.priority,this.j=!0,this.name=l.name,this.text=l.text,this.tooltip=l.tooltip,this.command=l.command,this.accessibilityInformation=l.accessibilityInformation)}else this.c=String(rp.a++);this.e=s,this.f=n,this.g=o,this.h=this.w(a)}w(t){if(ls(t))return t===Number.POSITIVE_INFINITY?Number.MAX_VALUE:t===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:t}get id(){return this.f??this.e.identifier.value}get entryId(){return this.c}get alignment(){return this.g}get priority(){return this.h}get text(){return this.k}get name(){return this.n}get tooltip(){return this.l}get tooltip2(){return this.e&&R(this.e,"statusBarItemTooltip"),this.m}get color(){return this.o}get backgroundColor(){return this.p}get command(){return this.s?.fromApi}get accessibilityInformation(){return this.u}set text(t){this.k=t,this.x()}set name(t){this.n=t,this.x()}set tooltip(t){this.l=t,this.x()}set tooltip2(t){this.e&&R(this.e,"statusBarItemTooltip"),this.m=t,this.x()}set color(t){this.o=t,this.x()}set backgroundColor(t){t&&!rp.b.has(t.id)&&(t=void 0),this.p=t,this.x()}set command(t){this.s?.fromApi!==t&&(this.q&&this.r.add(this.q),this.q=new me,typeof t=="string"?this.s={fromApi:t,internal:this.#t.toInternal({title:"",command:t},this.q)}:t?this.s={fromApi:t,internal:this.#t.toInternal(t,this.q)}:this.s=void 0,this.x())}set accessibilityInformation(t){this.u=t,this.x()}show(){this.j=!0,this.x()}hide(){clearTimeout(this.t),this.j=!1,this.#e.$disposeEntry(this.c)}x(){this.i||!this.j||(clearTimeout(this.t),this.t=setTimeout(()=>{this.t=void 0;let t;this.e?this.f?t=`${this.e.identifier.value}.${this.f}`:t=this.e.identifier.value:t=this.f;let r;this.n?r=this.n:r=d(2807,null,this.e.displayName||this.e.name);let i=this.o;this.p&&(i=rp.b.get(this.p.id));let s,n;typeof this.m=="function"?(s=be.fromStrict(this.l),n=!0):(s=be.fromStrict(this.m??this.l),n=!1),this.#e.$setEntry(this.c,t,this.e?.identifier.value,r,this.k,s,n,this.s?.internal,i,this.p,this.g===Is.Left,this.h,this.u),this.r.clear()},0))}dispose(){this.hide(),this.v?.(),this.i=!0}},tF=class{constructor(e){this.b=[],this.a=e.createStatusBarEntry(void 0,"status.extensionMessage",Is.Left,Number.MIN_VALUE),this.a.name=d(2808,null)}dispose(){this.b.length=0,this.a.dispose()}setMessage(e){const t={message:e};return this.b.unshift(t),this.c(),new Ie(()=>{const r=this.b.indexOf(t);r>=0&&(this.b.splice(r,1),this.c())})}c(){this.b.length>0?(this.a.text=this.b[0].message,this.a.show()):this.a.hide()}},rF=class{constructor(e,t){this.e=new Map,this.f=new Map,this.a=e.getProxy(z.MainThreadStatusBar),this.b=t,this.c=new tF(this)}$acceptStaticEntries(e){for(const t of e)this.f.set(t.entryId,t)}async $provideTooltip(e,t){const r=this.e.get(e);if(!r)return;const i=typeof r.tooltip2=="function"?await r.tooltip2(t):r.tooltip2;return t.isCancellationRequested?void 0:be.fromStrict(i)}createStatusBarEntry(e,t,r,i){const s=new eF(this.a,this.b,this.f,e,t,r,i,()=>this.e.delete(s.entryId));return this.e.set(s.entryId,s),s}setStatusBarMessage(e,t){const r=this.c.setMessage(e);let i;return typeof t=="number"?i=setTimeout(()=>r.dispose(),t):typeof t<"u"&&t.then(()=>r.dispose(),()=>r.dispose()),new Ie(()=>{r.dispose(),clearTimeout(i)})}},iF=class extends he{constructor(e,t){super(),this.n=t,this.a=new D,this.b=new D,this.c=new D,this.f=new D,this.g=new D,this.h=new D,this.j=new D,this.onDidChangeTextEditorSelection=this.a.event,this.onDidChangeTextEditorOptions=this.b.event,this.onDidChangeTextEditorVisibleRanges=this.c.event,this.onDidChangeTextEditorViewColumn=this.f.event,this.onDidChangeTextEditorDiffInformation=this.g.event,this.onDidChangeActiveTextEditor=this.h.event,this.onDidChangeVisibleTextEditors=this.j.event,this.m=e.getProxy(z.MainThreadTextEditors),this.B(this.n.onDidChangeVisibleTextEditors(r=>this.j.fire(r))),this.B(this.n.onDidChangeActiveTextEditor(r=>this.h.fire(r)))}getActiveTextEditor(){return this.n.activeEditor()}getVisibleTextEditors(e){const t=this.n.allEditors();return e?t:t.map(r=>r.value)}async showTextDocument(e,t,r){let i;typeof t=="number"?i={position:Ct.from(t),preserveFocus:r}:typeof t=="object"?i={position:Ct.from(t.viewColumn),preserveFocus:t.preserveFocus,selection:typeof t.selection=="object"?M.from(t.selection):void 0,pinned:typeof t.preview=="boolean"?!t.preview:void 0}:i={preserveFocus:!1};const s=await this.m.$tryShowTextDocument(e.uri,i),n=s&&this.n.getEditor(s);if(n)return n.value;throw s?new Error(`Could NOT open editor for "${e.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${e.uri.toString()}".`)}createTextEditorDecorationType(e,t){return new zA(this.m,e,t).value}$acceptEditorPropertiesChanged(e,t){const r=this.n.getEditor(e);if(!r)throw new Error("unknown text editor");if(t.options&&r._acceptOptions(t.options),t.selections){const i=t.selections.selections.map(ei.to);r._acceptSelections(i)}if(t.visibleRanges){const i=Rt(t.visibleRanges.map(M.to));r._acceptVisibleRanges(i)}if(t.options&&this.b.fire({textEditor:r.value,options:{...t.options,lineNumbers:Ko.to(t.options.lineNumbers)}}),t.selections){const i=Lo.fromValue(t.selections.source),s=t.selections.selections.map(ei.to);this.a.fire({textEditor:r.value,selections:s,kind:i})}if(t.visibleRanges){const i=Rt(t.visibleRanges.map(M.to));this.c.fire({textEditor:r.value,visibleRanges:i})}}$acceptEditorPositionData(e){for(const t in e){const r=this.n.getEditor(t);if(!r)throw new Error("Unknown text editor");const i=Ct.to(e[t]);r.value.viewColumn!==i&&(r._acceptViewColumn(i),this.f.fire({textEditor:r.value,viewColumn:i}))}}$acceptEditorDiffInformation(e,t){const r=this.n.getEditor(e);if(!r)throw new Error("unknown text editor");if(!t){r._acceptDiffInformation(void 0),this.g.fire({textEditor:r.value,diffInformation:void 0});return}const i=this,s=t.map(n=>{const o=y.revive(n.original),a=y.revive(n.modified),c=n.changes.map(l=>{const[u,h,p,f]=l;let m;return u===h?m=No.Addition:p===f?m=No.Deletion:m=No.Modification,{original:{startLineNumber:u,endLineNumberExclusive:h},modified:{startLineNumber:p,endLineNumberExclusive:f},kind:m}});return Object.freeze({documentVersion:n.documentVersion,original:o,modified:a,changes:c,get isStale(){return i.n.getDocument(a)?.version!==n.documentVersion}})});r._acceptDiffInformation(s),this.g.fire({textEditor:r.value,diffInformation:s})}getDiffInformation(e){return Promise.resolve(this.m.$getDiffInformation(e))}},N0=class{constructor(t){this.a=new Jh(Ps.Dark),this.b=new D}get activeColorTheme(){return this.a}$onColorThemeChange(t){let r;switch(t){case"light":r=Ps.Light;break;case"hcDark":r=Ps.HighContrast;break;case"hcLight":r=Ps.HighContrastLight;break;default:r=Ps.Dark}this.a=new Jh(r),this.b.fire(this.a)}get onDidChangeActiveColorTheme(){return this.b.event}};N0=__decorate([__param(0,Me)],N0);var L_=_("IExtHostTimeline"),sF=class{constructor(e,t){this.b=new Map,this.c=new Map,this.a=e.getProxy(z.MainThreadTimeline),t.registerArgumentProcessor({processArgument:(r,i)=>{if(r&&r.$mid===12)if(this.b.get(r.source)&&i&&ct(i,"timeline")){const s=r.uri===void 0?void 0:y.revive(r.uri);return this.c.get(r.source)?.get(ex(s))?.get(r.handle)}else return;return r}})}async $getTimeline(e,t,r,i){return this.b.get(e)?.provider.provideTimeline(y.revive(t),r,i)}registerTimelineProvider(e,t,r,i){const s=new me,n=this.d(t.id,i,s).bind(this);let o;t.onDidChange&&(o=t.onDidChange(c=>this.a.$emitTimelineChangeEvent({uri:void 0,reset:!0,...c,id:t.id}),this));const a=this.c;return this.f({...t,scheme:e,onDidChange:void 0,async provideTimeline(c,l,u){l?.resetCache&&(s.clear(),a.get(t.id)?.clear());const h=await t.provideTimeline(c,l,u);if(h==null)return;const p=n(c,l);return{...h,source:t.id,items:h.items.map(p)}},dispose(){for(const c of a.values())c.get(t.id)?.clear();o?.dispose(),s.dispose()}},r)}d(e,t,r){return(i,s)=>{let n;if(s?.cacheResults){let o=this.c.get(e);o===void 0&&(o=new Map,this.c.set(e,o));const a=ex(i);n=o.get(a),n===void 0&&(n=new Map,o.set(a,n))}return o=>{const{iconPath:a,...c}=o,l=`${e}|${o.id??o.timestamp}`;n?.set(l,o);let u,h,p;o.iconPath&&(a instanceof Xt?p={id:a.id,color:a.color}:y.isUri(a)?(u=a,h=a):{light:u,dark:h}=a);let f;return xr.isMarkdownString(c.tooltip)?f=be.from(c.tooltip):Ce(c.tooltip)?f=c.tooltip:xr.isMarkdownString(c.detail)?(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),f=be.from(c.detail)):Ce(c.detail)&&(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),f=c.detail),{...c,id:c.id??void 0,handle:l,source:e,command:o.command?t.toInternal(o.command,r):void 0,icon:u,iconDark:h,themeIcon:p,tooltip:f,accessibilityInformation:o.accessibilityInformation}}}}f(e,t){if(this.b.get(e.id))throw new Error(`Timeline Provider ${e.id} already exists.`);return this.a.$registerTimelineProvider({id:e.id,label:e.label,scheme:e.scheme}),this.b.set(e.id,{provider:e,extension:t}),ce(()=>{for(const i of this.c.values())i.get(e.id)?.clear();this.b.delete(e.id),this.a.$unregisterTimelineProvider(e.id),e.dispose()})}};function ex(e){return e?.toString()}var nF={IconContribution:"base.contributions.icons"},tx;(function(e){function t(r,i){let s=r.defaults;for(;Mt.isThemeIcon(s);){const n=ka.getIcon(s.id);if(!n)return;s=n.defaults}return s}e.getDefinition=t})(tx||(tx={}));var rx;(function(e){function t(i){return{weight:i.weight,style:i.style,src:i.src.map(s=>({format:s.format,location:s.location.toString()}))}}e.toJSONObject=t;function r(i){const s=n=>Ce(n)?n:void 0;if(i&&Array.isArray(i.src)&&i.src.every(n=>Ce(n.format)&&Ce(n.location)))return{weight:s(i.weight),style:s(i.style),src:i.src.map(n=>({format:n.format,location:y.parse(n.location)}))}}e.fromJSONObject=r})(rx||(rx={}));var oF=/^([\w_-]+)$/,aF=d(2455,null),cF=class{constructor(){this.a=new D,this.onDidChange=this.a.event,this.d={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:d(2456,null),pattern:oF.source,patternErrorMessage:aF},fontCharacter:{type:"string",description:d(2457,null)}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.e={type:"string",pattern:`^${Mt.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.b={},this.f={}}registerIcon(e,t,r,i){const s=this.b[e];if(s){if(r&&!s.description){s.description=r,this.d.properties[e].markdownDescription=`${r} $(${e})`;const a=this.e.enum.indexOf(e);a!==-1&&(this.e.enumDescriptions[a]=r),this.a.fire()}return s}const n={id:e,description:r,defaults:t,deprecationMessage:i};this.b[e]=n;const o={$ref:"#/definitions/icons"};return i&&(o.deprecationMessage=i),r&&(o.markdownDescription=`${r}: $(${e})`),this.d.properties[e]=o,this.e.enum.push(e),this.e.enumDescriptions.push(r||""),this.a.fire(),{id:e}}deregisterIcon(e){delete this.b[e],delete this.d.properties[e];const t=this.e.enum.indexOf(e);t!==-1&&(this.e.enum.splice(t,1),this.e.enumDescriptions.splice(t,1)),this.a.fire()}getIcons(){return Object.keys(this.b).map(e=>this.b[e])}getIcon(e){return this.b[e]}getIconSchema(){return this.d}getIconReferenceSchema(){return this.e}registerIconFont(e,t){const r=this.f[e];return r||(this.f[e]=t,this.a.fire(),t)}deregisterIconFont(e){delete this.f[e]}getIconFont(e){return this.f[e]}toString(){const e=(s,n)=>s.id.localeCompare(n.id),t=s=>{for(;Mt.isThemeIcon(s.defaults);)s=this.b[s.defaults.id];return`codicon codicon-${s?s.id:""}`},r=[];r.push("| preview     | identifier                        | default codicon ID                | description"),r.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const i=Object.keys(this.b).map(s=>this.b[s]);for(const s of i.filter(n=>!!n.description).sort(e))r.push(`|<i class="${t(s)}"></i>|${s.id}|${Mt.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);r.push("| preview     | identifier                        "),r.push("| ----------- | --------------------------------- |");for(const s of i.filter(n=>!Mt.isThemeIcon(n.defaults)).sort(e))r.push(`|<i class="${t(s)}"></i>|${s.id}|`);return r.join(`
`)}},ka=new cF;Bt.add(nF.IconContribution,ka);function Mf(e,t,r,i){return ka.registerIcon(e,t,r,i)}function lF(){const e=AI();for(const t in e){const r="\\"+e[t].toString(16);ka.registerIcon(t,{fontCharacter:r})}}lF();var ix="vscode://schemas/icons",sx=Bt.as(qu.JSONContribution);sx.registerSchema(ix,ka.getIconSchema());var nx=new ao(()=>sx.notifySchemaChanged(ix),200);ka.onDidChange(()=>{nx.isScheduled()||nx.schedule()});var N_=Mf("widget-close",ie.close,d(2458,null)),F_=Mf("goto-previous-location",ie.arrowUp,d(2459,null)),M_=Mf("goto-next-location",ie.arrowDown,d(2460,null)),O_=Mt.modify(ie.sync,"spin"),U_=Mt.modify(ie.loading,"spin"),H_=d(4344,null),j_=Mf("default-view-icon",ie.window,d(4345,null)),Of;(function(e){e.ViewContainersRegistry="workbench.registry.view.containers",e.ViewsRegistry="workbench.registry.view"})(Of||(Of={}));var ox;(function(e){e[e.Sidebar=0]="Sidebar",e[e.Panel=1]="Panel",e[e.AuxiliaryBar=2]="AuxiliaryBar"})(ox||(ox={}));var uF=class extends he{constructor(){super(...arguments),this.c=this.B(new D),this.onDidRegister=this.c.event,this.f=this.B(new D),this.onDidDeregister=this.f.event,this.g=new Map,this.h=[]}get all(){return[...this.g.values()].flat()}registerViewContainer(e,t,r){const i=this.get(e.id);if(i)return i;const s=e;return s.openCommandActionDescriptor=r?.doNotRegisterOpenCommand?void 0:s.openCommandActionDescriptor??{id:s.id},nk(this.g,t,[]).push(s),r?.isDefault&&this.h.push(s),this.c.fire({viewContainer:s,viewContainerLocation:t}),s}deregisterViewContainer(e){for(const t of this.g.keys()){const r=this.g.get(t),i=r?.indexOf(e);if(i!==-1){r?.splice(i,1),r.length===0&&this.g.delete(t),this.f.fire({viewContainer:e,viewContainerLocation:t});return}}}get(e){return this.all.filter(t=>t.id===e)[0]}getViewContainers(e){return[...this.g.get(e)||[]]}getViewContainerLocation(e){return[...this.g.keys()].filter(t=>this.getViewContainers(t).filter(r=>r?.id===e.id).length>0)[0]}getDefaultViewContainer(e){return this.h.find(t=>this.getViewContainerLocation(t)===e)}};Bt.add(Of.ViewContainersRegistry,new uF);var Uf;(function(e){e.Open="2_open",e.Debug="4_debug",e.SCM="5_scm",e.More="9_more"})(Uf||(Uf={}));function hF(e,t){const r=e.group??Uf.More,i=t.group??Uf.More;return r!==i?r.localeCompare(i):(e.order??5)-(t.order??5)}var dF=class extends he{constructor(){super(...arguments),this.c=this.B(new D),this.onViewsRegistered=this.c.event,this.f=this.B(new D),this.onViewsDeregistered=this.f.event,this.g=this.B(new D),this.onDidChangeContainer=this.g.event,this.h=this.B(new D),this.onDidChangeViewWelcomeContent=this.h.event,this.j=[],this.m=new Map,this.n=new yw}registerViews(e,t){this.registerViews2([{views:e,viewContainer:t}])}registerViews2(e){e.forEach(({views:t,viewContainer:r})=>this.r(t,r)),this.c.fire(e)}deregisterViews(e,t){const r=this.s(e,t);r.length&&this.f.fire({views:r,viewContainer:t})}moveViews(e,t){for(const r of this.m.keys())if(r!==t){const i=this.s(e,r);i.length&&(this.r(i,t),this.g.fire({views:i,from:r,to:t}))}}getViews(e){return this.m.get(e)||[]}getView(e){for(const t of this.j){const r=(this.m.get(t)||[]).filter(i=>i.id===e)[0];if(r)return r}return null}getViewContainer(e){for(const t of this.j)if((this.m.get(t)||[]).filter(i=>i.id===e)[0])return t;return null}registerViewWelcomeContent(e,t){return this.n.add(e,t),this.h.fire(e),ce(()=>{this.n.delete(e,t),this.h.fire(e)})}registerViewWelcomeContent2(e,t){const r=new Map;for(const[i,s]of t)this.n.add(e,s),r.set(i,ce(()=>{this.n.delete(e,s),this.h.fire(e)}));return this.h.fire(e),r}getViewWelcomeContent(e){const t=[];return this.n.forEach(e,r=>t.push(r)),t.sort(hF)}r(e,t){let r=this.m.get(t);r||(r=[],this.m.set(t,r),this.j.push(t));for(const i of e){if(this.getView(i.id)!==null)throw new Error(d(4346,null,i.id));r.push(i)}}s(e,t){const r=this.m.get(t);if(!r)return[];const i=[],s=[];for(const n of r)e.includes(n)?i.push(n):s.push(n);return i.length&&(s.length?this.m.set(t,s):(this.m.delete(t),this.j.splice(this.j.indexOf(t),1))),i}};Bt.add(Of.ViewsRegistry,new dF);var B_=_("viewDescriptorService"),ax;(function(e){e[e.Default=0]="Default",e[e.Expand=1]="Expand"})(ax||(ax={}));var cx;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(cx||(cx={}));var ns=class extends Error{constructor(e){super(d(4347,null,e)),this.name="NoTreeViewError"}static is(e){return!!e&&e.name==="NoTreeViewError"}},fF=class{constructor(){this.a=new Map}removeDragOperationTransfer(e){if(e&&this.a.has(e)){const t=this.a.get(e);return this.a.delete(e),t}}addDragOperationTransfer(e,t){this.a.set(e,t)}};function lx(e,t){if(Ce(e))return{label:e};if(e&&typeof e=="object"&&typeof e.label=="string"){let r;return Array.isArray(e.highlights)&&(r=e.highlights.filter(i=>i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number"),r=r.length?r:void 0),{label:e.label,highlights:r}}}var pF=class extends he{constructor(e,t,r){super(),this.f=e,this.g=t,this.h=r,this.a=new Map,this.b=new fF;function i(s){return s&&s.$treeViewId&&(s.$treeItemHandle||s.$selectedTreeItems||s.$focusedTreeItem)}t.registerArgumentProcessor({processArgument:s=>i(s)?this.r(s):Array.isArray(s)&&s.length>0?s.map(n=>i(n)?this.r(n):n):s})}registerTreeDataProvider(e,t,r){const i=this.createTreeView(e,{treeDataProvider:t},r);return{dispose:()=>i.dispose()}}createTreeView(e,t,r){if(!t||!t.treeDataProvider)throw new Error("Options with treeDataProvider is mandatory");const i=t.dragAndDropController?.dropMimeTypes??[],s=t.dragAndDropController?.dragMimeTypes??[],n=!!t.dragAndDropController?.handleDrag,o=!!t.dragAndDropController?.handleDrop,a=this.m(e,t,r),c={showCollapseAll:!!t.showCollapseAll,canSelectMany:!!t.canSelectMany,dropMimeTypes:i,dragMimeTypes:s,hasHandleDrag:n,hasHandleDrop:o,manuallyManageCheckboxes:!!t.manageCheckboxStateManually},l=this.f.$registerTreeViewDataProvider(e,c),u={get onDidCollapseElement(){return a.onDidCollapseElement},get onDidExpandElement(){return a.onDidExpandElement},get selection(){return a.selectedElements},get onDidChangeSelection(){return a.onDidChangeSelection},get activeItem(){return R(r,"treeViewActiveItem"),a.focusedElement},get onDidChangeActiveItem(){return R(r,"treeViewActiveItem"),a.onDidChangeActiveItem},get visible(){return a.visible},get onDidChangeVisibility(){return a.onDidChangeVisibility},get onDidChangeCheckboxState(){return a.onDidChangeCheckboxState},get message(){return a.message},set message(h){on(h)&&R(r,"treeViewMarkdownMessage"),a.message=h},get title(){return a.title},set title(h){a.title=h},get description(){return a.description},set description(h){a.description=h},get badge(){return a.badge},set badge(h){h!==void 0&&ym.isViewBadge(h)?a.badge={value:Math.floor(Math.abs(h.value)),tooltip:h.tooltip}:h===void 0&&(a.badge=void 0)},reveal:(h,p)=>a.reveal(h,p),dispose:async()=>{await l,this.a.delete(e),a.dispose()}};return this.B(u),u}async $getChildren(e,t){const r=this.a.get(e);if(!r)return Promise.reject(new ns(e));if(!t){const s=await r.getChildren();return s?[[0,...s]]:void 0}const i=[];for(let s=0;s<t.length;s++){const n=t[s],o=await r.getChildren(n);o&&i.push([s,...o])}return i}async $handleDrop(e,t,r,i,s,n,o,a){const c=this.a.get(e);if(!c)return Promise.reject(new ns(e));const l=Fs.toDataTransfer(r,async u=>(await this.f.$resolveDropFileData(e,t,u)).buffer);return o===e&&a&&await this.j(l,c,a,s,n),c.onDrop(l,i,s)}async j(e,t,r,i,s){const n=this.b.removeDragOperationTransfer(s);if(n)(await n)?.forEach((o,a)=>{o&&e.set(a,o)});else if(s&&t.handleDrag){const o=t.handleDrag(r,e,i);this.b.addDragOperationTransfer(s,o),await o}return e}async $handleDrag(e,t,r,i){const s=this.a.get(e);if(!s)return Promise.reject(new ns(e));const n=await this.j(new Nc,s,t,i,r);if(!(!n||i.isCancellationRequested))return Fs.from(n)}async $hasResolve(e){const t=this.a.get(e);if(!t)throw new ns(e);return t.hasResolve}$resolve(e,t,r){const i=this.a.get(e);if(!i)throw new ns(e);return i.resolveTreeItem(t,r)}$setExpanded(e,t,r){const i=this.a.get(e);if(!i)throw new ns(e);i.setExpanded(t,r)}$setSelectionAndFocus(e,t,r){const i=this.a.get(e);if(!i)throw new ns(e);i.setSelectionAndFocus(t,r)}$setVisible(e,t){const r=this.a.get(e);if(!r){if(!t)return;throw new ns(e)}r.setVisible(t)}$changeCheckboxState(e,t){const r=this.a.get(e);if(!r)throw new ns(e);r.setCheckboxState(t)}m(e,t,r){const i=this.B(new gF(e,t,this.f,this.g.converter,this.h,r));return this.a.set(e,i),i}r(e){const t=this.a.get(e.$treeViewId);return t&&"$treeItemHandle"in e?t.getExtensionElement(e.$treeItemHandle):t&&"$focusedTreeItem"in e&&e.$focusedTreeItem?t.focusedElement:null}},gF=class aw extends he{static{this.a="0"}static{this.b="1"}get visible(){return this.r}get selectedElements(){return this.s.map(t=>this.getExtensionElement(t)).filter(t=>!yt(t))}get focusedElement(){return this.t?this.getExtensionElement(this.t):void 0}constructor(t,r,i,s,n,o){if(super(),this.I=t,this.J=i,this.L=s,this.M=n,this.N=o,this.h=void 0,this.j=new Map,this.m=new Map,this.r=!1,this.s=[],this.t=void 0,this.u=this.B(new D),this.onDidExpandElement=this.u.event,this.w=this.B(new D),this.onDidCollapseElement=this.w.event,this.y=this.B(new D),this.onDidChangeSelection=this.y.event,this.z=this.B(new D),this.onDidChangeActiveItem=this.z.event,this.C=this.B(new D),this.onDidChangeVisibility=this.C.event,this.D=this.B(new D),this.onDidChangeCheckboxState=this.D.event,this.F=this.B(new D),this.G=Promise.resolve(),this.H=Promise.resolve(),this.O="",this.P="",this.Z=new dt,o.contributes&&o.contributes.views)for(const u in o.contributes.views)for(const h of o.contributes.views[u])h.id===t&&(this.P=h.name);this.f=r.treeDataProvider,this.g=r.dragAndDropController,this.f.onDidChangeTreeData&&this.B(this.f.onDidChangeTreeData(u=>{Array.isArray(u)&&u.length===0||this.F.fire({message:!1,element:u})}));let a,c;const l=ht.debounce(this.F.event,(u,h)=>(u||(u={message:!1,elements:[]}),h.element!==!1&&(a||(a=new Promise(p=>c=p),this.G=this.G.then(()=>a)),Array.isArray(h.element)?u.elements.push(...h.element):u.elements.push(h.element)),h.message&&(u.message=!0),u),200,!0);this.B(l(({message:u,elements:h})=>{h.length&&(this.H=this.H.then(()=>{const p=c;return a=null,this.$(h).then(()=>p())})),u&&this.J.$setMessage(this.I,be.fromStrict(this.O)??"")}))}async getChildren(t){const r=t?this.getExtensionElement(t):void 0;if(t&&!r)return this.M.error(`No tree item with id '${t}' found.`),Promise.resolve([]);let i=this.X(t);return i||(i=await this.Y(r)),i?i.map(s=>s.item):void 0}getExtensionElement(t){return this.j.get(t)}reveal(t,r){r=r||{select:!0,focus:!1};const i=yt(r.select)?!0:r.select,s=yt(r.focus)?!1:r.focus,n=yt(r.expand)?!1:r.expand;return typeof this.f.getParent!="function"?Promise.reject(new Error("Required registered TreeDataProvider to implement 'getParent' method to access 'reveal' method")):t?this.G.then(()=>this.S(t)).then(o=>this.W(t,o[o.length-1]).then(a=>this.J.$reveal(this.I,{item:a.item,parentChain:o.map(c=>c.item)},{select:i,focus:s,expand:n})),o=>this.M.error(o)):this.J.$reveal(this.I,void 0,{select:i,focus:s,expand:n})}get message(){return this.O}set message(t){this.O=t,this.F.fire({message:!0,element:!1})}get title(){return this.P}set title(t){this.P=t,this.J.$setTitle(this.I,t,this.Q)}get description(){return this.Q}set description(t){this.Q=t,this.J.$setTitle(this.I,this.P,t)}get badge(){return this.R}set badge(t){this.R?.value===t?.value&&this.R?.tooltip===t?.tooltip||(this.R=Nd.from(t),this.J.$setBadge(this.I,t))}setExpanded(t,r){const i=this.getExtensionElement(t);i&&(r?this.u.fire(Object.freeze({element:i})):this.w.fire(Object.freeze({element:i})))}setSelectionAndFocus(t,r){const i=!Ri(this.s,t);this.s=t;const s=this.t!==r;this.t=r,i&&this.y.fire(Object.freeze({selection:this.selectedElements})),s&&this.z.fire(Object.freeze({activeItem:this.focusedElement}))}setVisible(t){t!==this.r&&(this.r=t,this.C.fire(Object.freeze({visible:this.r})))}async setCheckboxState(t){const r=(await Promise.all(t.map(async i=>{const s=this.getExtensionElement(i.treeItemHandle);return s?{extensionItem:s,treeItem:await this.f.getTreeItem(s),newState:i.newState?yi.Checked:yi.Unchecked}:Promise.resolve(void 0)}))).filter(i=>i!==void 0);r.forEach(i=>{i.treeItem.checkboxState=i.newState?yi.Checked:yi.Unchecked}),this.D.fire({items:r.map(i=>[i.extensionItem,i.newState])})}async handleDrag(t,r,i){const s=[];for(const n of t){const o=this.getExtensionElement(n);o&&s.push(o)}if(!(!this.g?.handleDrag||s.length===0))return await this.g.handleDrag(s,r,i),r}get hasHandleDrag(){return!!this.g?.handleDrag}async onDrop(t,r,i){const s=r?this.getExtensionElement(r):void 0;if(!(!s&&r||!this.g?.handleDrop))return Wt(()=>this.g?.handleDrop?this.g.handleDrop(s,t,i):void 0)}get hasResolve(){return!!this.f.resolveTreeItem}async resolveTreeItem(t,r){if(!this.f.resolveTreeItem)return;const i=this.j.get(t);if(i){const s=this.m.get(i);if(s){const n=await this.f.resolveTreeItem(s.extensionItem,i,r)??s.extensionItem;return this.hb(n),s.item.tooltip=this.eb(n.tooltip),s.item.command=this.fb(s.disposableStore,n.command),s.item}}}S(t){return this.U(t).then(r=>r?this.S(r).then(i=>this.W(r,i[i.length-1]).then(s=>(i.push(s),i))):Promise.resolve([]))}U(t){const r=this.m.get(t);return r?Promise.resolve(r.parent?this.j.get(r.parent.item.handle):void 0):Wt(()=>this.f.getParent(t))}W(t,r){const i=this.m.get(t);return i?Promise.resolve(i):Wt(()=>this.f.getTreeItem(t)).then(s=>this.kb(t,s,r,!0)).then(s=>this.getChildren(r?r.item.handle:void 0).then(()=>{const n=this.getExtensionElement(s);if(n){const o=this.m.get(n);if(o)return Promise.resolve(o)}throw new Error(`Cannot resolve tree item for element ${s} from extension ${this.N.identifier.value}`)}))}X(t){if(t){let r;if(typeof t=="string"){const i=this.getExtensionElement(t);r=i?this.m.get(i):void 0}else r=t;return r&&r.children||void 0}return this.h}async Y(t){this.rb(t);const r=new dt(this.Z.token);try{const i=t?this.m.get(t):void 0,s=await this.f.getChildren(t);if(r.token.isCancellationRequested)return;const n=Rt(s||[]),o=await Promise.all(Rt(n).map(c=>this.f.getTreeItem(c)));if(r.token.isCancellationRequested)return;const a=o.map((c,l)=>c?this.db(n[l],c,i):null);return Rt(a)}finally{r.dispose()}}$(t){if(t.some(i=>!i))return this.Z.dispose(!0),this.Z=new dt,this.tb(),this.J.$refresh(this.I);{const i=this.ab(t);if(i.length)return this.bb(i)}return Promise.resolve(void 0)}ab(t){const r=new Set,i=t.map(n=>this.m.get(n));for(const n of i)if(n&&!r.has(n.item.handle)){let o=n;for(;o&&o.parent&&i.findIndex(a=>o&&o.parent&&a&&a.item.handle===o.parent.item.handle)===-1;){const a=this.j.get(o.parent.item.handle);o=a?this.m.get(a):void 0}o&&!o.parent&&r.add(n.item.handle)}const s=[];return r.forEach(n=>{const o=this.j.get(n);if(o){const a=this.m.get(o);a&&(!a.parent||!r.has(a.parent.item.handle))&&s.push(n)}}),s}bb(t){const r={};return Promise.all(t.map(i=>this.cb(i).then(s=>{s&&(r[i]=s.item)}))).then(()=>Object.keys(r).length?this.J.$refresh(this.I,r):void 0)}cb(t){const r=this.getExtensionElement(t);if(r){const i=this.m.get(r);if(i)return this.rb(r),Wt(()=>this.f.getTreeItem(r)).then(s=>{if(s){const n=this.ib(r,s,i.parent);return this.pb(r,n,i,i.parent),i.dispose(),n}return null})}return Promise.resolve(null)}db(t,r,i){const s=this.ib(t,r,i);if(r.id&&this.j.has(s.item.handle))throw new Error(d(2811,null,r.id));return this.ob(t,s),this.qb(s,i),s}eb(t){return xr.isMarkdownString(t)?be.from(t):t}fb(t,r){return r?{...this.L.toInternal(r,t),originalId:r.command}:void 0}gb(t){if(t.checkboxState===void 0)return;let r,i,s;return typeof t.checkboxState=="number"?r=t.checkboxState:(r=t.checkboxState.state,i=t.checkboxState.tooltip,s=t.checkboxState.accessibilityInformation),{isChecked:r===yi.Checked,tooltip:i,accessibilityInformation:s}}hb(t){if(!Oh.isTreeItem(t,this.N))throw new Error(`Extension ${this.N.identifier.value} has provided an invalid tree item.`)}ib(t,r,i){this.hb(r);const s=this.B(new me),n=this.kb(t,r,i),o=this.lb(r);return{item:{handle:n,parentHandle:i?i.item.handle:void 0,label:lx(r.label,this.N),description:r.description,resourceUri:r.resourceUri,tooltip:this.eb(r.tooltip),command:this.fb(s,r.command),contextValue:r.contextValue,icon:o,iconDark:this.mb(r)||o,themeIcon:this.jb(r),collapsibleState:yt(r.collapsibleState)?Sn.None:r.collapsibleState,accessibilityInformation:r.accessibilityInformation,checkbox:this.gb(r)},extensionItem:r,parent:i,children:void 0,disposableStore:s,dispose(){s.dispose()}}}jb(t){return t.iconPath instanceof Xt?t.iconPath:void 0}kb(t,{id:r,label:i,resourceUri:s},n,o){if(r)return`${aw.b}/${r}`;const a=lx(i,this.N),c=n?n.item.handle:aw.a;let l=a?a.label:s?Mi(s):"";l=l.indexOf("/")!==-1?l.replace("/","//"):l;const u=this.m.has(t)?this.m.get(t).item.handle:void 0,h=this.X(n)||[];let p,f=0;do{if(p=`${c}/${f}:${l}`,o||!this.j.has(p)||u===p)break;f++}while(f<=h.length);return p}lb(t){if(t.iconPath&&!(t.iconPath instanceof Xt))return typeof t.iconPath=="string"||y.isUri(t.iconPath)?this.nb(t.iconPath):this.nb(t.iconPath.light)}mb(t){if(t.iconPath&&!(t.iconPath instanceof Xt)&&t.iconPath.dark)return this.nb(t.iconPath.dark)}nb(t){return y.isUri(t)?t:y.file(t)}ob(t,r){this.j.set(r.item.handle,t),this.m.set(t,r)}pb(t,r,i,s){this.j.delete(r.item.handle),this.m.delete(t),r.item.handle!==i.item.handle&&this.j.delete(i.item.handle),this.ob(t,r);const n=this.X(s)||[],o=n.filter(a=>a.item.handle===i.item.handle)[0];o&&n.splice(n.indexOf(o),1,r)}qb(t,r){r?(r.children||(r.children=[]),r.children.push(t)):(this.h||(this.h=[]),this.h.push(t))}rb(t){if(t){const r=this.m.get(t);if(r){if(r.children)for(const i of r.children){const s=this.j.get(i.item.handle);s&&this.sb(s)}r.children=void 0}}else this.tb()}sb(t){const r=this.m.get(t);if(r){if(r.children)for(const i of r.children){const s=this.j.get(i.item.handle);s&&this.sb(s)}this.m.delete(t),this.j.delete(r.item.handle),r.dispose()}}tb(){this.h=void 0,this.j.clear(),this.m.forEach(t=>t.dispose()),this.m.clear()}dispose(){super.dispose(),this.Z.dispose(),this.tb(),this.J.$disposeTree(this.I)}},mF=class D3{static{this.a=new Set([q.http,q.https])}constructor(t){this.c=new Map,this.b=t.getProxy(z.MainThreadUriOpeners)}registerExternalUriOpener(t,r,i,s){if(this.c.has(r))throw new Error(`Opener with id '${r}' already registered`);const n=s.schemes.find(o=>!D3.a.has(o));if(n)throw new Error(`Scheme '${n}' is not supported. Only http and https are currently supported.`);return this.c.set(r,i),this.b.$registerUriOpener(r,s.schemes,t,s.label),ce(()=>{this.c.delete(r),this.b.$unregisterUriOpener(r)})}async $canOpenUri(t,r,i){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener with id: ${t}`);const n=y.revive(r);return s.canOpenExternalUri(n,i)}async $openUri(t,r,i){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener id: '${t}'`);return s.openExternalUri(y.revive(r.resolvedUri),{sourceUri:y.revive(r.sourceUri)},i)}},vF=class P3{static{this.a=0}constructor(t){this.c=new tn,this.d=new Map,this.b=t.getProxy(z.MainThreadUrls)}registerUriHandler(t,r){const i=t.identifier;if(this.c.has(i))throw new Error(`Protocol handler already registered for extension ${i}`);const s=P3.a++;return this.c.add(i),this.d.set(s,r),this.b.$registerUriHandler(s,i,t.displayName||t.name),ce(()=>{this.c.delete(i),this.d.delete(s),this.b.$unregisterUriHandler(s)})}$handleExternalUri(t,r){const i=this.d.get(t);if(!i)return Promise.resolve(void 0);try{i.handleUri(y.revive(r))}catch(s){gr(s)}return Promise.resolve(void 0)}async createAppUri(t){return y.revive(await this.b.$createAppUri(t))}},wF=class extends he{#e;#t;#r;#i;#n;#s;#a;#o;#c;#l;#u;#d;#h;constructor(e,t,r,i){super(),this.#o=void 0,this.#c=!0,this.#u=!1,this.#d=this.B(new D),this.onDidDispose=this.#d.event,this.#h=this.B(new D),this.onDidChangeViewState=this.#h.event,this.#e=e,this.#t=t,this.#i=r,this.#r=i.viewType,this.#n=i.panelOptions,this.#o=i.viewColumn,this.#s=i.title,this.#l=i.active}dispose(){this.#u||(this.#u=!0,this.#d.fire(),this.#t.$disposeWebview(this.#e),this.#i.dispose(),super.dispose())}get webview(){return this.c(),this.#i}get viewType(){return this.c(),this.#r}get title(){return this.c(),this.#s}set title(e){this.c(),this.#s!==e&&(this.#s=e,this.#t.$setTitle(this.#e,e))}get iconPath(){return this.c(),this.#a}set iconPath(e){this.c(),this.#a!==e&&(this.#a=e,this.#t.$setIconPath(this.#e,y.isUri(e)?{light:e,dark:e}:e))}get options(){return this.#n}get viewColumn(){if(this.c(),!(typeof this.#o=="number"&&this.#o<0))return this.#o}get active(){return this.c(),this.#l}get visible(){return this.c(),this.#c}_updateViewState(e){this.#u||(this.active!==e.active||this.visible!==e.visible||this.viewColumn!==e.viewColumn)&&(this.#l=e.active,this.#c=e.visible,this.#o=e.viewColumn,this.#h.fire({webviewPanel:this}))}reveal(e,t){this.c(),this.#t.$reveal(this.#e,{viewColumn:typeof e>"u"?void 0:Ct.from(e),preserveFocus:!!t})}c(){if(this.#u)throw new Error("Webview is disposed")}},bF=class A3 extends he{static c(){return Dr()}constructor(t,r,i){super(),this.j=r,this.m=i,this.g=new Map,this.h=new Map,this.f=t.getProxy(z.MainThreadWebviewPanels)}dispose(){super.dispose(),this.g.forEach(t=>t.dispose()),this.g.clear()}createWebviewPanel(t,r,i,s,n={}){const o=typeof s=="object"?s.viewColumn:s,a={viewColumn:Ct.from(o),preserveFocus:typeof s=="object"&&!!s.preserveFocus},c=ya(t),l=A3.c();this.f.$createWebviewPanel(Ef(t),l,r,{title:i,panelOptions:yF(n),webviewOptions:iE(t,this.m,n),serializeBuffersForPostMessage:c},a);const u=this.j.createNewWebview(l,n,t);return this.createNewWebviewPanel(l,r,i,o,n,u,!0)}$onDidChangeWebviewPanelViewStates(t){const r=Object.keys(t);r.sort((i,s)=>{const n=t[i],o=t[s];return n.active?1:o.active?-1:+n.visible-+o.visible});for(const i of r){const s=this.getWebviewPanel(i);if(!s)continue;const n=t[i];s._updateViewState({active:n.active,visible:n.visible,viewColumn:Ct.to(n.position)})}}async $onDidDisposeWebviewPanel(t){this.getWebviewPanel(t)?.dispose(),this.g.delete(t),this.j.deleteWebview(t)}registerWebviewPanelSerializer(t,r,i){if(this.h.has(r))throw new Error(`Serializer for '${r}' already registered`);return this.h.set(r,{serializer:i,extension:t}),this.f.$registerSerializer(r,{serializeBuffersForPostMessage:ya(t)}),new Ie(()=>{this.h.delete(r),this.f.$unregisterSerializer(r)})}async $deserializeWebviewPanel(t,r,i,s){const n=this.h.get(r);if(!n)throw new Error(`No serializer found for '${r}'`);const{serializer:o,extension:a}=n,c=this.j.createNewWebview(t,i.webviewOptions,a),l=this.createNewWebviewPanel(t,r,i.title,s,i.panelOptions,c,i.active);await o.deserializeWebviewPanel(l,i.state)}createNewWebviewPanel(t,r,i,s,n,o,a){const c=new wF(t,this.f,o,{viewType:r,title:i,viewColumn:s,panelOptions:n,active:a});return this.g.set(t,c),c}getWebviewPanel(t){return this.g.get(t)}};function yF(e){return{enableFindWidget:e.enableFindWidget,retainContextWhenHidden:e.retainContextWhenHidden}}var EF=class extends he{#e;#t;#r;#i;#n;#s;#a;#o;#c;constructor(e,t,r,i,s,n){super(),this.#n=!1,this.#l=this.B(new D),this.onDidChangeVisibility=this.#l.event,this.#u=this.B(new D),this.onDidDispose=this.#u.event,this.#r=r,this.#a=i,this.#e=e,this.#t=t,this.#i=s,this.#s=n}dispose(){this.#n||(this.#n=!0,this.#u.fire(),this.#i.dispose(),super.dispose())}#l;#u;get title(){return this.a(),this.#a}set title(e){this.a(),this.#a!==e&&(this.#a=e,this.#t.$setWebviewViewTitle(this.#e,e))}get description(){return this.a(),this.#o}set description(e){this.a(),this.#o!==e&&(this.#o=e,this.#t.$setWebviewViewDescription(this.#e,e))}get visible(){return this.#s}get webview(){return this.#i}get viewType(){return this.#r}_setVisible(e){e===this.#s||this.#n||(this.#s=e,this.#l.fire())}get badge(){return this.a(),this.#c}set badge(e){this.a(),!(e?.value===this.#c?.value&&e?.tooltip===this.#c?.tooltip)&&(this.#c=Nd.from(e),this.#t.$setWebviewViewBadge(this.#e,e))}show(e){this.a(),this.#t.$show(this.#e,!!e)}a(){if(this.#n)throw new Error("Webview is disposed")}},xF=class{constructor(e,t){this.d=t,this.b=new Map,this.c=new Map,this.a=e.getProxy(z.MainThreadWebviewViews)}registerWebviewViewProvider(e,t,r,i){if(this.b.has(t))throw new Error(`View provider for '${t}' already registered`);return this.b.set(t,{provider:r,extension:e}),this.a.$registerWebviewViewProvider(Ef(e),t,{retainContextWhenHidden:i?.retainContextWhenHidden,serializeBuffersForPostMessage:ya(e)}),new Ie(()=>{this.b.delete(t),this.a.$unregisterWebviewViewProvider(t)})}async $resolveWebviewView(e,t,r,i,s){const n=this.b.get(t);if(!n)throw new Error(`No view provider found for '${t}'`);const{provider:o,extension:a}=n,c=this.d.createNewWebview(e,{},a),l=new EF(e,this.a,t,r,c,!0);this.c.set(e,l),await o.resolveWebviewView(l,{state:i},s)}async $onDidChangeWebviewViewVisibility(e,t){this.e(e)._setVisible(t)}async $disposeWebviewView(e){const t=this.e(e);this.c.delete(e),t.dispose(),this.d.deleteWebview(e)}e(e){const t=this.c.get(e);if(!t)throw new Error("No webview found");return t}},__=new C("debugType",void 0,{type:"string",description:d(6251,null)}),z_=new C("debugConfigurationType",void 0,{type:"string",description:d(6252,null)}),W_=new C("debugState","inactive",{type:"string",description:d(6253,null)}),kF="debugUx",V_=new C(kF,"default",{type:"string",description:d(6254,null)}),q_=new C("hasDebugged",!1,{type:"boolean",description:d(6255,null)}),G_=new C("inDebugMode",!1,{type:"boolean",description:d(6256,null)}),Q_=new C("inDebugRepl",!1,{type:"boolean",description:d(6257,null)}),J_=new C("breakpointWidgetVisible",!1,{type:"boolean",description:d(6258,null)}),X_=new C("inBreakpointWidget",!1,{type:"boolean",description:d(6259,null)}),Y_=new C("breakpointsFocused",!0,{type:"boolean",description:d(6260,null)}),Z_=new C("watchExpressionsFocused",!0,{type:"boolean",description:d(6261,null)}),K_=new C("watchExpressionsExist",!1,{type:"boolean",description:d(6262,null)}),ez=new C("variablesFocused",!0,{type:"boolean",description:d(6263,null)}),tz=new C("expressionSelected",!1,{type:"boolean",description:d(6264,null)}),rz=new C("breakpointInputFocused",!1,{type:"boolean",description:d(6265,null)}),iz=new C("callStackItemType",void 0,{type:"string",description:d(6266,null)}),sz=new C("callStackSessionIsAttach",!1,{type:"boolean",description:d(6267,null)}),nz=new C("callStackItemStopped",!1,{type:"boolean",description:d(6268,null)}),oz=new C("callStackSessionHasOneThread",!1,{type:"boolean",description:d(6269,null)}),az=new C("callStackFocused",!0,{type:"boolean",description:d(6270,null)}),cz=new C("watchItemType",void 0,{type:"string",description:d(6271,null)}),lz=new C("canViewMemory",void 0,{type:"boolean",description:d(6272,null)}),uz=new C("breakpointItemType",void 0,{type:"string",description:d(6273,null)}),hz=new C("breakpointItemBytes",void 0,{type:"boolean",description:d(6274,null)}),dz=new C("breakpointHasModes",!1,{type:"boolean",description:d(6275,null)}),fz=new C("breakpointSupportsCondition",!1,{type:"boolean",description:d(6276,null)}),pz=new C("loadedScriptsSupported",!1,{type:"boolean",description:d(6277,null)}),gz=new C("loadedScriptsItemType",void 0,{type:"string",description:d(6278,null)}),mz=new C("focusedSessionIsAttach",!1,{type:"boolean",description:d(6279,null)}),vz=new C("focusedSessionIsNoDebug",!1,{type:"boolean",description:d(6280,null)}),wz=new C("stepBackSupported",!1,{type:"boolean",description:d(6281,null)}),bz=new C("restartFrameSupported",!1,{type:"boolean",description:d(6282,null)}),yz=new C("stackFrameSupportsRestart",!1,{type:"boolean",description:d(6283,null)}),Ez=new C("jumpToCursorSupported",!1,{type:"boolean",description:d(6284,null)}),xz=new C("stepIntoTargetsSupported",!1,{type:"boolean",description:d(6285,null)}),kz=new C("breakpointsExist",!1,{type:"boolean",description:d(6286,null)}),$z=new C("debuggersAvailable",!1,{type:"boolean",description:d(6287,null)}),Sz=new C("debugExtensionAvailable",!0,{type:"boolean",description:d(6288,null)}),Iz=new C("debugProtocolVariableMenuContext",void 0,{type:"string",description:d(6289,null)}),Cz=new C("debugSetVariableSupported",!1,{type:"boolean",description:d(6290,null)}),Dz=new C("debugSetDataBreakpointAddressSupported",!1,{type:"boolean",description:d(6291,null)}),Pz=new C("debugSetExpressionSupported",!1,{type:"boolean",description:d(6292,null)}),Az=new C("breakWhenValueChangesSupported",!1,{type:"boolean",description:d(6293,null)}),Tz=new C("breakWhenValueIsAccessedSupported",!1,{type:"boolean",description:d(6294,null)}),Rz=new C("breakWhenValueIsReadSupported",!1,{type:"boolean",description:d(6295,null)}),Lz=new C("terminateDebuggeeSupported",!1,{type:"boolean",description:d(6296,null)}),Nz=new C("suspendDebuggeeSupported",!1,{type:"boolean",description:d(6297,null)}),Fz=new C("variableEvaluateNamePresent",!1,{type:"boolean",description:d(6298,null)}),Mz=new C("variableIsReadonly",!1,{type:"boolean",description:d(6299,null)}),Oz=new C("variableValue",!1,{type:"string",description:d(6300,null)}),Uz=new C("variableType",!1,{type:"string",description:d(6301,null)}),Hz=new C("variableInterfaces",!1,{type:"array",description:d(6302,null)}),jz=new C("variableName",!1,{type:"string",description:d(6303,null)}),Bz=new C("variableLanguage",!1,{type:"string",description:d(6304,null)}),_z=new C("variableExtensionId",!1,{type:"string",description:d(6305,null)}),zz=new C("exceptionWidgetVisible",!1,{type:"boolean",description:d(6306,null)}),Wz=new C("multiSessionRepl",!1,{type:"boolean",description:d(6307,null)}),Vz=new C("multiSessionDebug",!1,{type:"boolean",description:d(6308,null)}),qz=new C("disassembleRequestSupported",!1,{type:"boolean",description:d(6309,null)}),Gz=new C("disassemblyViewFocus",!1,{type:"boolean",description:d(6310,null)}),Qz=new C("languageSupportsDisassembleRequest",!1,{type:"boolean",description:d(6311,null)}),Jz=new C("focusedStackFrameHasInstructionReference",!1,{type:"boolean",description:d(6312,null)}),Xz={enum:["neverOpen","openOnSessionStart","openOnFirstSessionStart"],default:"openOnFirstSessionStart",description:d(6314,null)},ux;(function(e){e[e.Inactive=0]="Inactive",e[e.Initializing=1]="Initializing",e[e.Stopped=2]="Stopped",e[e.Running=3]="Running"})(ux||(ux={}));var hx;(function(e){e[e.Valid=0]="Valid",e[e.Unreadable=1]="Unreadable",e[e.Error=2]="Error"})(hx||(hx={}));var dx;(function(e){e[e.Variable=0]="Variable",e[e.Address=1]="Address"})(dx||(dx={}));var Hf;(function(e){e[e.Initial=1]="Initial",e[e.Dynamic=2]="Dynamic"})(Hf||(Hf={}));var fx;(function(e){e.UnverifiedBreakpoints="unverifiedBreakpoints"})(fx||(fx={}));var Yz=_("debugService"),px;(function(e){e[e.CONDITION=0]="CONDITION",e[e.HIT_COUNT=1]="HIT_COUNT",e[e.LOG_MESSAGE=2]="LOG_MESSAGE",e[e.TRIGGER_POINT=3]="TRIGGER_POINT"})(px||(px={}));var gx;(function(e){e[e.Command=0]="Command",e[e.Tree=1]="Tree"})(gx||(gx={}));var mx;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(mx||(mx={}));var vx;(function(e){e.deserialize=t=>t,e.serialize=t=>t})(vx||(vx={}));var wx;(function(e){e.deserialize=t=>({id:t.id,name:t.name,iconPath:t.iconPath&&{light:y.revive(t.iconPath.light),dark:y.revive(t.iconPath.dark)},iconClass:t.iconClass,visualization:t.visualization}),e.serialize=t=>t})(wx||(wx={}));var $F=class T3{static{this.a=0}constructor(t){this.c=new Map,this.b=t.getProxy(z.MainThreadCodeMapper)}async $mapCode(t,r,i){const s=this.c.get(t);if(!s)throw new Error(`Received request to map code for unknown provider handle ${t}`);const n={textEdit:(c,l)=>{l=Array.isArray(l)?l:[l],this.b.$handleProgress(r.requestId,{uri:c,edits:l.map(Dt.from)})}},o={location:r.location,chatRequestId:r.chatRequestId,codeBlocks:r.codeBlocks.map(c=>({code:c.code,resource:y.revive(c.resource),markdownBeforeBlock:c.markdownBeforeBlock}))};return await s.provideMappedEdits(o,n,i)??null}registerMappedEditsProvider(t,r){const i=T3.a++;return this.b.$registerCodeMapperProvider(i,t.displayName??t.name),this.c.set(i,r),{dispose:()=>this.b.$unregisterCodeMapperProvider(i)}}};function SF(e){const t=e.get(jt),r=e.get(fo),i=e.get(rf),s=e.get(Hs),n=e.get(Xi),o=e.get(sf),a=e.get(Yi),c=e.get(Iu),l=e.get(Me),u=e.get(V1),h=e.get(G1),p=e.get(ec),f=e.get(He),m=e.get(Z1),w=e.get(cf),E=e.get(R8),$=e.get(mv),S=e.get(Al),P=e.get(bv),O=e.get(ov),F=e.get(cv);l.set(K.ExtHostFileSystemInfo,r),l.set(K.ExtHostLogLevelServiceShape,p),l.set(K.ExtHostWorkspace,n),l.set(K.ExtHostConfiguration,a),l.set(K.ExtHostExtensionService,s),l.set(K.ExtHostStorage,u),l.set(K.ExtHostTunnelService,m),l.set(K.ExtHostWindow,E),l.set(K.ExtHostSecretState,$),l.set(K.ExtHostTelemetry,o),l.set(K.ExtHostEditorTabs,S),l.set(K.ExtHostManagedSockets,P),l.set(K.ExtHostAuthentication,O),l.set(K.ExtHostChatProvider,F);const W=l.set(K.ExtHostDecorations,e.get(G9)),Z=l.set(K.ExtHostDocumentsAndEditors,e.get(ma)),J=l.set(K.ExtHostCommands,e.get(Un)),X=l.set(K.ExtHostTerminalService,e.get(fa)),Se=l.set(K.ExtHostTerminalShellIntegration,e.get(L8)),de=l.set(K.ExtHostDebugService,e.get(C8)),et=l.set(K.ExtHostSearch,e.get(T8)),rt=l.set(K.ExtHostTask,e.get(v8)),G=l.set(K.ExtHostOutputService,e.get(q9)),j=l.set(K.ExtHostLocalization,e.get(wv)),Q=l.set(K.ExtHostUrls,new vF(l)),B=l.set(K.ExtHostDocuments,new RL(l,Z)),re=l.set(K.ExtHostDocumentContentProviders,new AL(l,Z,f)),pe=l.set(K.ExtHostDocumentSaveParticipant,new TL(f,B,l.getProxy(z.MainThreadBulkEdits))),ne=l.set(K.ExtHostNotebook,new CN(l,J,Z,B,i,et,f)),qe=l.set(K.ExtHostNotebookDocuments,new PN(ne)),Be=l.set(K.ExtHostNotebookEditors,new I0(f,ne)),kt=l.set(K.ExtHostNotebookKernels,new C0(l,t,ne,J,f)),bt=l.set(K.ExtHostNotebookRenderers,new FN(l,ne)),Ot=l.set(K.ExtHostNotebookDocumentSaveParticipant,new DN(f,ne,l.getProxy(z.MainThreadBulkEdits))),Ze=l.set(K.ExtHostEditors,new iF(l,Z)),Vt=l.set(K.ExtHostTreeViews,new pF(l.getProxy(z.MainThreadTreeViews),J,f)),as=l.set(K.ExtHostEditorInsets,new cL(l.getProxy(z.MainThreadEditorInsets),Ze,t.remote)),Di=l.set(K.ExtHostDiagnostics,new s0(l,f,r,Z)),zs=l.set(K.ExtHostLanguages,new sN(l,B,J.converter,c)),ye=l.set(K.ExtHostLanguageFeatures,new JL(l,c,B,J,Di,f,w,o)),Pi=l.set(K.ExtHostCodeMapper,new $F(l)),Oe=l.set(K.ExtHostFileSystem,new jL(l,ye)),ci=l.set(K.ExtHostFileSystemEventService,new WL(l,f,Z)),Fr=l.set(K.ExtHostQuickOpen,jN(l,n,J)),Mr=l.set(K.ExtHostSCM,new L0(l,J,B,f)),qn=l.set(K.ExtHostQuickDiff,new HN(l,c)),Gn=l.set(K.ExtHostShare,new ZN(l,c)),Da=l.set(K.ExtHostComments,uL(l,J,B)),Pa=l.set(K.ExtHostProgress,new ON(l.getProxy(z.MainThreadProgress))),Aa=l.set(K.ExtHostLabelService,new qL(l)),Qn=l.set(K.ExtHostTheming,new N0(l)),Jn=l.set(K.ExtHostTimeline,new sF(l,J)),qt=l.set(K.ExtHostWebviews,new bL(l,t.remote,n,f,w)),Ai=l.set(K.ExtHostWebviewPanels,new bF(l,qt,n)),lt=l.set(K.ExtHostCustomEditors,new SL(l,B,h,qt,Ai)),zt=l.set(K.ExtHostWebviewViews,new xF(l,qt)),cs=l.set(K.ExtHostTesting,e.get(mf)),ip=l.set(K.ExtHostUriOpeners,new mF(l)),Xn=l.set(K.ExtHostProfileContentHandlers,new MN(l));l.set(K.ExtHostInteractive,new VL(l,ne,Z,J,f));const Ti=l.set(K.ExtHostChatAgents2,new eL(l,f,J,B,F)),I=l.set(K.ExtHostChatVariables,new iL(l)),T=l.set(K.ExtHostLanguageModelTools,new iN(l)),N=l.set(K.ExtHostAiRelatedInformation,new VR(l)),se=l.set(K.ExtHostAiEmbeddingVector,new NL(l)),fe=l.set(K.ExtHostStatusBar,new rF(l,J.converter)),At=l.set(K.ExtHostSpeech,new KN(l)),Ae=l.set(K.ExtHostEmbeddings,new LL(l)),Gt=Object.values(K);l.assertRegistered(Gt);const ft=new t0(l,Z),Ut=new nL(l),fr=new p0(l,f),ut=new PL(l);return XR.register(J),function(x,pt,Zt){function H(v){return(b,k,ue)=>{const _e=v($t=>{try{b.call(k,$t)}catch(sp){ap(new ty(x.identifier,sp,"FAILED to handle event"))}});return ue?.push(_e),_e}}const Y=function(){let v=!x.isUnderDevelopment;function b(){v||(f.info(`Extension '${x.identifier.value}' uses a document selector without scheme. Learn more about this: https://go.microsoft.com/fwlink/?linkid=872305`),v=!0)}return function k(ue){if(Array.isArray(ue))ue.forEach(k);else if(typeof ue=="string")b();else{const _e=ue;typeof _e.scheme>"u"&&b(),typeof _e.exclusive=="boolean"&&R(x,"documentFiltersExclusive")}return ue}}(),Ke={getSession(v,b,k){return typeof k?.forceNewSession=="object"&&k.forceNewSession.learnMore&&R(x,"authLearnMore"),O.getSession(x,v,b,k)},getAccounts(v){return O.getAccounts(v)},async hasSession(v,b){return R(x,"authSession"),!!await O.getSession(x,v,b,{silent:!0})},get onDidChangeSessions(){return H(O.getExtensionScopedSessionsEvent(x.identifier.value))},registerAuthenticationProvider(v,b,k,ue){return O.registerAuthenticationProvider(v,b,k,ue)}},ot={registerCommand(v,b,k){return J.registerCommand(!0,v,b,k,void 0,x)},registerTextEditorCommand(v,b,k){return J.registerCommand(!0,v,(...ue)=>{const _e=Ze.getActiveTextEditor();if(!_e){f.warn("Cannot execute "+v+" because there is no active text editor.");return}return _e.edit($t=>{b.apply(k,[_e,$t,...ue])}).then($t=>{$t||f.warn("Edits from command "+v+" were not applied.")},$t=>{f.warn("An error occurred while running command "+v,$t)})},void 0,void 0,x)},registerDiffInformationCommand:(v,b,k)=>(R(x,"diffCommand"),J.registerCommand(!0,v,async(...ue)=>{const _e=Z.activeEditor(!0);if(!_e){f.warn("Cannot execute "+v+" because there is no active text editor.");return}const $t=await Ze.getDiffInformation(_e.id);b.apply(k,[$t,...ue])},void 0,void 0,x)),executeCommand(v,...b){return J.executeCommand(v,...b)},getCommands(v=!1){return J.getCommands(v)}},Tt={get machineId(){return t.telemetryInfo.machineId},get sessionId(){return t.telemetryInfo.sessionId},get language(){return t.environment.appLanguage},get appName(){return t.environment.appName},get appRoot(){return t.environment.appRoot?.fsPath??""},get appHost(){return t.environment.appHost},get uriScheme(){return t.environment.appUriScheme},get clipboard(){return Ut.value},get shell(){return X.getDefaultShell(!1)},get onDidChangeShell(){return H(X.onDidChangeShell)},get isTelemetryEnabled(){return o.getTelemetryConfiguration()},get onDidChangeTelemetryEnabled(){return H(o.onDidChangeTelemetryEnabled)},get telemetryConfiguration(){return R(x,"telemetry"),o.getTelemetryDetails()},get onDidChangeTelemetryConfiguration(){return R(x,"telemetry"),H(o.onDidChangeTelemetryConfiguration)},get isNewAppInstall(){return s9(t.telemetryInfo.firstSessionDate)},createTelemetryLogger(v,b){return i9.validateSender(v),o.instantiateLogger(x,v,b)},openExternal(v,b){return E.openUri(v,{allowTunneling:!!t.remote.authority,allowContributedOpeners:b?.allowContributedOpeners})},async asExternalUri(v){if(v.scheme===t.environment.appUriScheme)return Q.createAppUri(v);try{return await E.asExternalUri(v,{allowTunneling:!!t.remote.authority})}catch(b){if(Up(v,q.http)||Up(v,q.https))return v;throw b}},get remoteName(){return zp(t.remote.authority)},get remoteAuthority(){return R(x,"resolvers"),t.remote.authority},get uiKind(){return t.uiKind},get logLevel(){return f.getLevel()},get onDidChangeLogLevel(){return H(f.onDidChangeLogLevel)},get appQuality(){return R(x,"resolvers"),t.quality},get appCommit(){return R(x,"resolvers"),t.commit}};t.environment.extensionTestsLocationURI||Object.freeze(Tt);const Kl={createTestController(v,b,k){return cs.createTestController(x,v,b,k)},createTestObserver(){return R(x,"testObserver"),cs.createTestObserver()},runTests(v){return R(x,"testObserver"),cs.runTests(v)},registerTestFollowupProvider(v){return R(x,"testObserver"),cs.registerTestFollowupProvider(v)},get onDidChangeTestResults(){return R(x,"testObserver"),H(cs.onResultsChanged)},get testResults(){return R(x,"testObserver"),cs.results}},li=t.remote.isRemote?Dn.Workspace:Dn.UI,Ws={getExtension(v,b){ct(x,"extensionsAny")||(b=!1);const k=pt.mine.getExtensionDescription(v);if(k)return new xl(s,x.identifier,k,li,!1);if(b){const ue=pt.all.getExtensionDescription(v);if(ue)return new xl(s,x.identifier,ue,li,!0)}},get all(){const v=[];for(const b of pt.mine.getAllExtensionDescriptions())v.push(new xl(s,x.identifier,b,li,!1));return v},get allAcrossExtensionHosts(){R(x,"extensionsAny");const v=new tn(pt.mine.getAllExtensionDescriptions().map(k=>k.identifier)),b=[];for(const k of pt.all.getAllExtensionDescriptions()){const ue=!v.has(k.identifier);b.push(new xl(s,x.identifier,k,li,ue))}return b},get onDidChange(){return ct(x,"extensionsAny")?H(ht.any(pt.mine.onDidChange,pt.all.onDidChange)):H(pt.mine.onDidChange)}},R3={createDiagnosticCollection(v){return Di.createDiagnosticCollection(x.identifier,v)},get onDidChangeDiagnostics(){return H(Di.onDidChangeDiagnostics)},getDiagnostics:v=>Di.getDiagnostics(v),getLanguages(){return zs.getLanguages()},setTextDocumentLanguage(v,b){return zs.changeLanguage(v.uri,b)},match(v,b){const k=g1.from(v);let ue;return W8(k)&&(ue=ne.notebookDocuments.find(_e=>_e.apiNotebook.getCells().find($t=>$t.document===b))?.apiNotebook),z8(k,b.uri,b.languageId,!0,ue?.uri,ue?.notebookType)},registerCodeActionsProvider(v,b,k){return ye.registerCodeActionProvider(x,Y(v),b,k)},registerDocumentPasteEditProvider(v,b,k){return ye.registerDocumentPasteEditProvider(x,Y(v),b,k)},registerCodeLensProvider(v,b){return ye.registerCodeLensProvider(x,Y(v),b)},registerDefinitionProvider(v,b){return ye.registerDefinitionProvider(x,Y(v),b)},registerDeclarationProvider(v,b){return ye.registerDeclarationProvider(x,Y(v),b)},registerImplementationProvider(v,b){return ye.registerImplementationProvider(x,Y(v),b)},registerTypeDefinitionProvider(v,b){return ye.registerTypeDefinitionProvider(x,Y(v),b)},registerHoverProvider(v,b){return ye.registerHoverProvider(x,Y(v),b,x.identifier)},registerEvaluatableExpressionProvider(v,b){return ye.registerEvaluatableExpressionProvider(x,Y(v),b,x.identifier)},registerInlineValuesProvider(v,b){return ye.registerInlineValuesProvider(x,Y(v),b,x.identifier)},registerDocumentHighlightProvider(v,b){return ye.registerDocumentHighlightProvider(x,Y(v),b)},registerMultiDocumentHighlightProvider(v,b){return ye.registerMultiDocumentHighlightProvider(x,Y(v),b)},registerLinkedEditingRangeProvider(v,b){return ye.registerLinkedEditingRangeProvider(x,Y(v),b)},registerReferenceProvider(v,b){return ye.registerReferenceProvider(x,Y(v),b)},registerRenameProvider(v,b){return ye.registerRenameProvider(x,Y(v),b)},registerNewSymbolNamesProvider(v,b){return R(x,"newSymbolNamesProvider"),ye.registerNewSymbolNamesProvider(x,Y(v),b)},registerDocumentSymbolProvider(v,b,k){return ye.registerDocumentSymbolProvider(x,Y(v),b,k)},registerWorkspaceSymbolProvider(v){return ye.registerWorkspaceSymbolProvider(x,v)},registerDocumentFormattingEditProvider(v,b){return ye.registerDocumentFormattingEditProvider(x,Y(v),b)},registerDocumentRangeFormattingEditProvider(v,b){return ye.registerDocumentRangeFormattingEditProvider(x,Y(v),b)},registerOnTypeFormattingEditProvider(v,b,k,...ue){return ye.registerOnTypeFormattingEditProvider(x,Y(v),b,[k].concat(ue))},registerDocumentSemanticTokensProvider(v,b,k){return ye.registerDocumentSemanticTokensProvider(x,Y(v),b,k)},registerDocumentRangeSemanticTokensProvider(v,b,k){return ye.registerDocumentRangeSemanticTokensProvider(x,Y(v),b,k)},registerSignatureHelpProvider(v,b,k,...ue){return typeof k=="object"?ye.registerSignatureHelpProvider(x,Y(v),b,k):ye.registerSignatureHelpProvider(x,Y(v),b,typeof k>"u"?[]:[k,...ue])},registerCompletionItemProvider(v,b,...k){return ye.registerCompletionItemProvider(x,Y(v),b,k)},registerInlineCompletionItemProvider(v,b,k){return b.handleDidShowCompletionItem&&R(x,"inlineCompletionsAdditions"),b.handleDidPartiallyAcceptCompletionItem&&R(x,"inlineCompletionsAdditions"),k&&R(x,"inlineCompletionsAdditions"),ye.registerInlineCompletionsProvider(x,Y(v),b,k)},registerInlineEditProvider(v,b){return R(x,"inlineEdit"),ye.registerInlineEditProvider(x,Y(v),b)},registerDocumentLinkProvider(v,b){return ye.registerDocumentLinkProvider(x,Y(v),b)},registerColorProvider(v,b){return ye.registerColorProvider(x,Y(v),b)},registerFoldingRangeProvider(v,b){return ye.registerFoldingRangeProvider(x,Y(v),b)},registerSelectionRangeProvider(v,b){return ye.registerSelectionRangeProvider(x,v,b)},registerCallHierarchyProvider(v,b){return ye.registerCallHierarchyProvider(x,v,b)},registerTypeHierarchyProvider(v,b){return ye.registerTypeHierarchyProvider(x,v,b)},setLanguageConfiguration:(v,b)=>ye.setLanguageConfiguration(x,v,b),getTokenInformationAtPosition(v,b){return R(x,"tokenInformation"),zs.tokenAtPosition(v,b)},registerInlayHintsProvider(v,b){return ye.registerInlayHintsProvider(x,v,b)},createLanguageStatusItem(v,b){return zs.createLanguageStatusItem(x,v,b)},registerDocumentDropEditProvider(v,b,k){return ye.registerDocumentOnDropEditProvider(x,v,b,k)}},L3={get activeTextEditor(){return Ze.getActiveTextEditor()},get visibleTextEditors(){return Ze.getVisibleTextEditors()},get activeTerminal(){return X.activeTerminal},get terminals(){return X.terminals},async showTextDocument(v,b,k){y.isUri(v)&&v.scheme===q.vscodeRemote&&!v.authority&&w.report("workspace.showTextDocument",x,"A URI of 'vscode-remote' scheme requires an authority.");const ue=await(y.isUri(v)?Promise.resolve(cw.openTextDocument(v)):Promise.resolve(v));return Ze.showTextDocument(ue,b,k)},createTextEditorDecorationType(v){return Ze.createTextEditorDecorationType(x,v)},onDidChangeActiveTextEditor(v,b,k){return H(Ze.onDidChangeActiveTextEditor)(v,b,k)},onDidChangeVisibleTextEditors(v,b,k){return H(Ze.onDidChangeVisibleTextEditors)(v,b,k)},onDidChangeTextEditorSelection(v,b,k){return H(Ze.onDidChangeTextEditorSelection)(v,b,k)},onDidChangeTextEditorOptions(v,b,k){return H(Ze.onDidChangeTextEditorOptions)(v,b,k)},onDidChangeTextEditorVisibleRanges(v,b,k){return H(Ze.onDidChangeTextEditorVisibleRanges)(v,b,k)},onDidChangeTextEditorViewColumn(v,b,k){return H(Ze.onDidChangeTextEditorViewColumn)(v,b,k)},onDidChangeTextEditorDiffInformation(v,b,k){return R(x,"textEditorDiffInformation"),H(Ze.onDidChangeTextEditorDiffInformation)(v,b,k)},onDidCloseTerminal(v,b,k){return H(X.onDidCloseTerminal)(v,b,k)},onDidOpenTerminal(v,b,k){return H(X.onDidOpenTerminal)(v,b,k)},onDidChangeActiveTerminal(v,b,k){return H(X.onDidChangeActiveTerminal)(v,b,k)},onDidChangeTerminalDimensions(v,b,k){return R(x,"terminalDimensions"),H(X.onDidChangeTerminalDimensions)(v,b,k)},onDidChangeTerminalState(v,b,k){return H(X.onDidChangeTerminalState)(v,b,k)},onDidWriteTerminalData(v,b,k){return R(x,"terminalDataWriteEvent"),H(X.onDidWriteTerminalData)(v,b,k)},onDidExecuteTerminalCommand(v,b,k){return R(x,"terminalExecuteCommandEvent"),H(X.onDidExecuteTerminalCommand)(v,b,k)},onDidChangeTerminalShellIntegration(v,b,k){return H(Se.onDidChangeTerminalShellIntegration)(v,b,k)},onDidStartTerminalShellExecution(v,b,k){return H(Se.onDidStartTerminalShellExecution)(v,b,k)},onDidEndTerminalShellExecution(v,b,k){return H(Se.onDidEndTerminalShellExecution)(v,b,k)},get state(){return E.getState()},onDidChangeWindowState(v,b,k){return H(E.onDidChangeWindowState)(v,b,k)},showInformationMessage(v,...b){return fr.showMessage(x,wt.Info,v,b[0],b.slice(1))},showWarningMessage(v,...b){return fr.showMessage(x,wt.Warning,v,b[0],b.slice(1))},showErrorMessage(v,...b){return fr.showMessage(x,wt.Error,v,b[0],b.slice(1))},showQuickPick(v,b,k){return Fr.showQuickPick(x,v,b,k)},showWorkspaceFolderPick(v){return Fr.showWorkspaceFolderPick(v)},showInputBox(v,b){return Fr.showInput(v,b)},showOpenDialog(v){return ut.showOpenDialog(v)},showSaveDialog(v){return ut.showSaveDialog(v)},createStatusBarItem(v,b,k){let ue,_e,$t;return typeof v=="string"?(ue=v,_e=b,$t=k):(_e=v,$t=b),fe.createStatusBarEntry(x,ue,_e,$t)},setStatusBarMessage(v,b){return fe.setStatusBarMessage(v,b)},withScmProgress(v){return w.report("window.withScmProgress",x,"Use 'withProgress' instead."),Pa.withProgress(x,{location:$n.SourceControl},(b,k)=>v({report(ue){}}))},withProgress(v,b){return Pa.withProgress(x,v,b)},createOutputChannel(v,b){return G.createOutputChannel(v,b,x)},createWebviewPanel(v,b,k,ue){return Ai.createWebviewPanel(x,v,b,k,ue)},createWebviewTextEditorInset(v,b,k,ue){return R(x,"editorInsets"),as.createWebviewEditorInset(v,b,k,ue,x)},createTerminal(v,b,k){return typeof v=="object"?"pty"in v?X.createExtensionTerminal(v):X.createTerminalFromOptions(v):X.createTerminal(v,b,k)},registerTerminalLinkProvider(v){return X.registerLinkProvider(v)},registerTerminalProfileProvider(v,b){return X.registerProfileProvider(x,v,b)},registerTerminalCompletionProvider(v,...b){return R(x,"terminalCompletionProvider"),X.registerTerminalCompletionProvider(x,v,...b)},registerTerminalQuickFixProvider(v,b){return R(x,"terminalQuickFixProvider"),X.registerTerminalQuickFixProvider(v,x.identifier.value,b)},registerTreeDataProvider(v,b){return Vt.registerTreeDataProvider(v,b,x)},createTreeView(v,b){return Vt.createTreeView(v,b,x)},registerWebviewPanelSerializer:(v,b)=>Ai.registerWebviewPanelSerializer(x,v,b),registerCustomEditorProvider:(v,b,k={})=>lt.registerCustomEditorProvider(x,v,b,k),registerFileDecorationProvider(v){return W.registerFileDecorationProvider(v,x)},registerUriHandler(v){return Q.registerUriHandler(x,v)},createQuickPick(){return Fr.createQuickPick(x)},createInputBox(){return Fr.createInputBox(x)},get activeColorTheme(){return Qn.activeColorTheme},onDidChangeActiveColorTheme(v,b,k){return H(Qn.onDidChangeActiveColorTheme)(v,b,k)},registerWebviewViewProvider(v,b,k){return zt.registerWebviewViewProvider(x,v,b,k?.webviewOptions)},get activeNotebookEditor(){return ne.activeNotebookEditor},onDidChangeActiveNotebookEditor(v,b,k){return H(ne.onDidChangeActiveNotebookEditor)(v,b,k)},get visibleNotebookEditors(){return ne.visibleNotebookEditors},get onDidChangeVisibleNotebookEditors(){return H(ne.onDidChangeVisibleNotebookEditors)},onDidChangeNotebookEditorSelection(v,b,k){return H(Be.onDidChangeNotebookEditorSelection)(v,b,k)},onDidChangeNotebookEditorVisibleRanges(v,b,k){return H(Be.onDidChangeNotebookEditorVisibleRanges)(v,b,k)},showNotebookDocument(v,b){return ne.showNotebookDocument(v,b)},registerExternalUriOpener(v,b,k){return R(x,"externalUriOpener"),ip.registerExternalUriOpener(x.identifier,v,b,k)},registerProfileContentHandler(v,b){return R(x,"profileContentHandlers"),Xn.registerProfileContentHandler(x,v,b)},registerQuickDiffProvider(v,b,k,ue){return R(x,"quickDiffProvider"),qn.registerQuickDiffProvider(Y(v),b,k,ue)},get tabGroups(){return S.tabGroups},registerShareProvider(v,b){return R(x,"shareProvider"),Gn.registerShareProvider(Y(v),b)},get nativeHandle(){return R(x,"nativeWindowHandle"),E.nativeHandle}},cw={get rootPath(){return w.report("workspace.rootPath",x,"Please use 'workspace.workspaceFolders' instead. More details: https://aka.ms/vscode-eliminating-rootpath"),n.getPath()},set rootPath(v){throw new qs("rootPath")},getWorkspaceFolder(v){return n.getWorkspaceFolder(v)},get workspaceFolders(){return n.getWorkspaceFolders()},get name(){return n.name},set name(v){throw new qs("name")},get workspaceFile(){return n.workspaceFile},set workspaceFile(v){throw new qs("workspaceFile")},updateWorkspaceFolders:(v,b,...k)=>n.updateWorkspaceFolders(x,v,b||0,...k),onDidChangeWorkspaceFolders:function(v,b,k){return H(n.onDidChangeWorkspace)(v,b,k)},asRelativePath:(v,b)=>n.getRelativePath(v,b),findFiles:(v,b,k,ue)=>n.findFiles(v,b,k,x.identifier,ue),findFiles2:(v,b,k)=>(R(x,"findFiles2"),n.findFiles2(v,b,x.identifier,k)),findTextInFiles:(v,b,k,ue)=>{R(x,"findTextInFiles");let _e,$t;return typeof b=="object"?(_e=b,$t=k):(_e={},$t=b,ue=k),n.findTextInFiles(v,_e||{},$t,x.identifier,ue)},findTextInFiles2:(v,b,k)=>(R(x,"findTextInFiles2"),R(x,"textSearchProvider2"),n.findTextInFiles2(v,b,x.identifier,k)),save:v=>n.save(v),saveAs:v=>n.saveAs(v),saveAll:v=>n.saveAll(v),applyEdit(v,b){return ft.applyWorkspaceEdit(v,x,b)},createFileSystemWatcher:(v,b,k,ue)=>{let _e;return b&&typeof b!="boolean"?(R(x,"createFileSystemWatcher"),_e={...b,correlate:!0}):_e={ignoreCreateEvents:!!b,ignoreChangeEvents:!!k,ignoreDeleteEvents:!!ue,correlate:!1},ci.createFileSystemWatcher(n,Zt,x,v,_e)},get textDocuments(){return B.getAllDocumentData().map(v=>v.document)},set textDocuments(v){throw new qs("textDocuments")},openTextDocument(v){let b;const k=v;if(typeof v=="string")b=Promise.resolve(y.file(v));else if(y.isUri(v))b=Promise.resolve(v);else if(!k||typeof k=="object")b=B.createDocumentData(k);else throw new Error("illegal argument - uriOrFileNameOrOptions");return b.then(ue=>(f.trace(`openTextDocument from ${x.identifier}`),ue.scheme===q.vscodeRemote&&!ue.authority&&w.report("workspace.openTextDocument",x,"A URI of 'vscode-remote' scheme requires an authority."),B.ensureDocumentData(ue).then(_e=>_e.document)))},onDidOpenTextDocument:(v,b,k)=>H(B.onDidAddDocument)(v,b,k),onDidCloseTextDocument:(v,b,k)=>H(B.onDidRemoveDocument)(v,b,k),onDidChangeTextDocument:(v,b,k)=>H(B.onDidChangeDocument)(v,b,k),onDidSaveTextDocument:(v,b,k)=>H(B.onDidSaveDocument)(v,b,k),onWillSaveTextDocument:(v,b,k)=>H(pe.getOnWillSaveTextDocumentEvent(x))(v,b,k),get notebookDocuments(){return ne.notebookDocuments.map(v=>v.apiNotebook)},async openNotebookDocument(v,b){let k;if(y.isUri(v))k=v,await ne.openNotebookDocument(v);else if(typeof v=="string")k=y.revive(await ne.createNotebookDocument({viewType:v,content:b}));else throw new Error("Invalid arguments");return ne.getNotebookDocument(k).apiNotebook},onDidSaveNotebookDocument(v,b,k){return H(qe.onDidSaveNotebookDocument)(v,b,k)},onDidChangeNotebookDocument(v,b,k){return H(qe.onDidChangeNotebookDocument)(v,b,k)},onWillSaveNotebookDocument(v,b,k){return H(Ot.getOnWillSaveNotebookDocumentEvent(x))(v,b,k)},get onDidOpenNotebookDocument(){return H(ne.onDidOpenNotebookDocument)},get onDidCloseNotebookDocument(){return H(ne.onDidCloseNotebookDocument)},registerNotebookSerializer(v,b,k,ue){return ne.registerNotebookSerializer(x,v,b,k,ct(x,"notebookLiveShare")?ue:void 0)},onDidChangeConfiguration:(v,b,k)=>H(Zt.onDidChangeConfiguration)(v,b,k),getConfiguration(v,b){return b=arguments.length===1?void 0:b,Zt.getConfiguration(v,b,x)},registerTextDocumentContentProvider(v,b){return re.registerTextDocumentContentProvider(v,b)},registerTaskProvider:(v,b)=>(w.report("window.registerTaskProvider",x,"Use the corresponding function on the 'tasks' namespace instead"),rt.registerTaskProvider(x,v,b)),registerFileSystemProvider(v,b,k){return $w(Oe.registerFileSystemProvider(x,v,b,k),i.addFileSystemProvider(v,b,k))},get fs(){return i.value},registerFileSearchProvider:(v,b)=>(R(x,"fileSearchProvider"),et.registerFileSearchProviderOld(v,b)),registerTextSearchProvider:(v,b)=>(R(x,"textSearchProvider"),et.registerTextSearchProviderOld(v,b)),registerAITextSearchProvider:(v,b)=>(R(x,"aiTextSearchProvider"),R(x,"textSearchProvider2"),et.registerAITextSearchProvider(v,b)),registerFileSearchProvider2:(v,b)=>(R(x,"fileSearchProvider2"),et.registerFileSearchProvider(v,b)),registerTextSearchProvider2:(v,b)=>(R(x,"textSearchProvider2"),et.registerTextSearchProvider(v,b)),registerRemoteAuthorityResolver:(v,b)=>(R(x,"resolvers"),s.registerRemoteAuthorityResolver(v,b)),registerResourceLabelFormatter:v=>(R(x,"resolvers"),Aa.$registerResourceLabelFormatter(v)),getRemoteExecServer:v=>(R(x,"resolvers"),s.getRemoteExecServer(v)),onDidCreateFiles:(v,b,k)=>H(ci.onDidCreateFile)(v,b,k),onDidDeleteFiles:(v,b,k)=>H(ci.onDidDeleteFile)(v,b,k),onDidRenameFiles:(v,b,k)=>H(ci.onDidRenameFile)(v,b,k),onWillCreateFiles:(v,b,k)=>H(ci.getOnWillCreateFileEvent(x))(v,b,k),onWillDeleteFiles:(v,b,k)=>H(ci.getOnWillDeleteFileEvent(x))(v,b,k),onWillRenameFiles:(v,b,k)=>H(ci.getOnWillRenameFileEvent(x))(v,b,k),openTunnel:v=>(R(x,"tunnels"),m.openTunnel(x,v).then(b=>{if(!b)throw new Error("cannot open tunnel");return b})),get tunnels(){return R(x,"tunnels"),m.getTunnels()},onDidChangeTunnels:(v,b,k)=>(R(x,"tunnels"),H(m.onDidChangeTunnels)(v,b,k)),registerPortAttributesProvider:(v,b)=>(R(x,"portsAttributes"),m.registerPortsAttributesProvider(v,b)),registerTunnelProvider:(v,b)=>(R(x,"tunnelFactory"),m.registerTunnelProvider(v,b)),registerTimelineProvider:(v,b)=>(R(x,"timeline"),Jn.registerTimelineProvider(v,b,x.identifier,J.converter)),get isTrusted(){return n.trusted},requestWorkspaceTrust:v=>(R(x,"workspaceTrust"),n.requestWorkspaceTrust(v)),onDidGrantWorkspaceTrust:(v,b,k)=>H(n.onDidGrantWorkspaceTrust)(v,b,k),registerEditSessionIdentityProvider:(v,b)=>(R(x,"editSessionIdentityProvider"),n.registerEditSessionIdentityProvider(v,b)),onWillCreateEditSessionIdentity:(v,b,k)=>(R(x,"editSessionIdentityProvider"),H(n.getOnWillCreateEditSessionIdentityEvent(x))(v,b,k)),registerCanonicalUriProvider:(v,b)=>(R(x,"canonicalUriProvider"),n.registerCanonicalUriProvider(v,b)),getCanonicalUri:(v,b,k)=>(R(x,"canonicalUriProvider"),n.provideCanonicalUri(v,b,k))},N3={get inputBox(){return w.report("scm.inputBox",x,"Use 'SourceControl.inputBox' instead"),Mr.getLastInputBox(x)},createSourceControl(v,b,k){return Mr.createSourceControl(x,v,b,k)}},F3={createCommentController(v,b){return Da.createCommentController(x,v,b)}},M3={get activeDebugSession(){return de.activeDebugSession},get activeDebugConsole(){return de.activeDebugConsole},get breakpoints(){return de.breakpoints},get activeStackItem(){return de.activeStackItem},registerDebugVisualizationProvider(v,b){return R(x,"debugVisualization"),de.registerDebugVisualizationProvider(x,v,b)},registerDebugVisualizationTreeProvider(v,b){return R(x,"debugVisualization"),de.registerDebugVisualizationTree(x,v,b)},onDidStartDebugSession(v,b,k){return H(de.onDidStartDebugSession)(v,b,k)},onDidTerminateDebugSession(v,b,k){return H(de.onDidTerminateDebugSession)(v,b,k)},onDidChangeActiveDebugSession(v,b,k){return H(de.onDidChangeActiveDebugSession)(v,b,k)},onDidReceiveDebugSessionCustomEvent(v,b,k){return H(de.onDidReceiveDebugSessionCustomEvent)(v,b,k)},onDidChangeBreakpoints(v,b,k){return H(de.onDidChangeBreakpoints)(v,b,k)},onDidChangeActiveStackItem(v,b,k){return H(de.onDidChangeActiveStackItem)(v,b,k)},registerDebugConfigurationProvider(v,b,k){return de.registerDebugConfigurationProvider(v,b,k||Hf.Initial)},registerDebugAdapterDescriptorFactory(v,b){return de.registerDebugAdapterDescriptorFactory(x,v,b)},registerDebugAdapterTrackerFactory(v,b){return de.registerDebugAdapterTrackerFactory(v,b)},startDebugging(v,b,k){return!k||typeof k=="object"&&"configuration"in k?de.startDebugging(v,b,{parentSession:k}):de.startDebugging(v,b,k||{})},stopDebugging(v){return de.stopDebugging(v)},addBreakpoints(v){return de.addBreakpoints(v)},removeBreakpoints(v){return de.removeBreakpoints(v)},asDebugSourceUri(v,b){return de.asDebugSourceUri(v,b)}},O3={registerTaskProvider:(v,b)=>rt.registerTaskProvider(x,v,b),fetchTasks:v=>rt.fetchTasks(v),executeTask:v=>rt.executeTask(x,v),get taskExecutions(){return rt.taskExecutions},onDidStartTask:(v,b,k)=>H(rt.onDidStartTask)(v,b,k),onDidEndTask:(v,b,k)=>H(rt.onDidEndTask)(v,b,k),onDidStartTaskProcess:(v,b,k)=>H(rt.onDidStartTaskProcess)(v,b,k),onDidEndTaskProcess:(v,b,k)=>H(rt.onDidEndTaskProcess)(v,b,k)},U3={createNotebookController(v,b,k,ue,_e){return kt.createNotebookController(x,v,b,k,ue,ct(x,"notebookMessaging")?_e:void 0)},registerNotebookCellStatusBarItemProvider:(v,b)=>ne.registerNotebookCellStatusBarItemProvider(x,v,b),createRendererMessaging(v){return bt.createRendererMessaging(x,v)},createNotebookControllerDetectionTask(v){return R(x,"notebookKernelSource"),kt.createNotebookControllerDetectionTask(x,v)},registerKernelSourceActionProvider(v,b){return R(x,"notebookKernelSource"),kt.registerKernelSourceActionProvider(x,v,b)},onDidChangeNotebookCellExecutionState(v,b,k){return R(x,"notebookCellExecutionState"),H(kt.onDidChangeNotebookCellExecutionState)(v,b,k)}},H3={t(...v){if(typeof v[0]=="string"){const b=v.shift(),k=!v||typeof v[0]!="object"?v:v[0];return j.getMessage(x.identifier.value,{message:b,args:k})}return j.getMessage(x.identifier.value,v[0])},get bundle(){return j.getBundle(x.identifier.value)},get uri(){return j.getBundleUri(x.identifier.value)}},j3={transferActiveChat(v){return R(x,"interactive"),Ti.transferActiveChat(v)}},B3={getRelatedInformation(v,b){return R(x,"aiRelatedInformation"),N.getRelatedInformation(x,v,b)},registerRelatedInformationProvider(v,b){return R(x,"aiRelatedInformation"),N.registerRelatedInformationProvider(x,v,b)},registerEmbeddingVectorProvider(v,b){return R(x,"aiRelatedInformation"),se.registerEmbeddingVectorProvider(x,v,b)}},_3={registerChatResponseProvider(v,b,k){return R(x,"chatProvider"),F.registerLanguageModel(x,v,b,k)},registerChatVariableResolver(v,b,k,ue,_e,$t,sp,V3){return R(x,"chatVariableResolver"),I.registerVariableResolver(x,v,b,k,ue,_e,$t,sp,V3?.id)},registerMappedEditsProvider(v,b){return R(x,"mappedEditsProvider"),{dispose(){}}},registerMappedEditsProvider2(v){return R(x,"mappedEditsProvider"),Pi.registerMappedEditsProvider(x,v)},createChatParticipant(v,b){return Ti.createChatAgent(x,v,b)},createDynamicChatParticipant(v,b,k){return R(x,"chatParticipantPrivate"),Ti.createDynamicChatAgent(x,v,b,k)},registerChatParticipantDetectionProvider(v){return R(x,"chatParticipantAdditions"),Ti.registerChatParticipantDetectionProvider(x,v)},registerRelatedFilesProvider(v,b){return R(x,"chatEditing"),Ti.registerRelatedFilesProvider(x,v,b)}},z3={selectChatModels:v=>F.selectLanguageModels(x,v??{}),onDidChangeChatModels:(v,b,k)=>F.onDidChangeProviders(v,b,k),registerChatModelProvider:(v,b,k)=>(R(x,"chatProvider"),F.registerLanguageModel(x,v,b,k)),get embeddingModels(){return R(x,"embeddings"),Ae.embeddingsModels},onDidChangeEmbeddingModels:(v,b,k)=>(R(x,"embeddings"),Ae.onDidChange(v,b,k)),registerEmbeddingsProvider(v,b){return R(x,"embeddings"),Ae.registerEmbeddingsProvider(x,v,b)},async computeEmbeddings(v,b,k){return R(x,"embeddings"),Ae.computeEmbeddings(v,b,k)},registerTool(v,b){return T.registerTool(x,v,b)},invokeTool(v,b,k){return T.invokeTool(x,v,b,k)},get tools(){return T.getTools(x)},fileIsIgnored(v,b){return F.fileIsIgnored(x,v,b)},registerIgnoredFileProvider(v){return F.registerIgnoredFileProvider(x,v)}},W3={registerSpeechProvider(v,b){return R(x,"speech"),At.registerProvider(x.identifier,v,b)}};return{version:t.version,ai:B3,authentication:Ke,commands:ot,comments:F3,chat:_3,debug:M3,env:Tt,extensions:Ws,interactive:j3,l10n:H3,languages:R3,lm:z3,notebooks:U3,scm:N3,speech:W3,tasks:O3,tests:Kl,window:L3,workspace:cw,Breakpoint:jo,TerminalOutputAnchor:tm,ChatResultFeedbackKind:Qc,ChatVariableLevel:Wm,ChatCompletionItem:JD,CallHierarchyIncomingCall:F6,CallHierarchyItem:sm,CallHierarchyOutgoingCall:M6,CancellationError:ui,CancellationTokenSource:dt,CandidatePortSource:Tp,CodeAction:Dc,CodeActionKind:nt,CodeActionTriggerKind:Cc,CodeLens:Ch,Color:Mo,ColorInformation:Lh,ColorPresentation:Nh,ColorThemeKind:Ps,CommentMode:Im,CommentState:Cm,CommentThreadCollapsibleState:jc,CommentThreadState:Bc,CommentThreadApplicability:_c,CommentThreadFocus:zc,CompletionItem:Ah,CompletionItemKind:oe,CompletionItemTag:Ac,CompletionList:To,CompletionTriggerKind:Ao,ConfigurationTarget:Uo,CustomExecution:bm,DebugAdapterExecutable:Bh,DebugAdapterInlineImplementation:Oc,DebugAdapterNamedPipeServer:_h,DebugAdapterServer:Mc,DebugConfigurationProviderTriggerKind:Hf,DebugConsoleMode:Qh,DebugVisualization:_D,DecorationRangeBehavior:xn,Diagnostic:xh,DiagnosticRelatedInformation:xc,DiagnosticSeverity:_t,DiagnosticTag:yn,Disposable:Ie,DocumentHighlight:Sh,DocumentHighlightKind:kc,MultiDocumentHighlight:Ih,DocumentLink:Rh,DocumentSymbol:Ic,EndOfLine:Zr,EnvironmentVariableMutatorType:Do,EvaluatableExpression:zh,InlineValueText:Wh,InlineValueVariableLookup:Vh,InlineValueEvaluatableExpression:qh,InlineCompletionTriggerKind:Uc,EventEmitter:D,ExtensionKind:Dn,ExtensionMode:Vo,ExternalUriOpenerPriority:Nm,FileChangeType:Bo,FileDecoration:Am,FileDecoration2:Am,FileSystemError:It,FileType:hn,FilePermission:vo,FoldingRange:Sm,FoldingRangeKind:Wi,FunctionBreakpoint:Cn,InlineCompletionItem:um,InlineCompletionList:hm,Hover:kh,VerboseHover:$h,HoverVerbosityAction:im,IndentAction:Zv,Location:Rr,MarkdownString:xr,OverviewRulerLane:hv,ParameterInformation:nm,PortAutoForwardAction:Mm,Position:xe,ProcessExecution:Oo,ProgressLocation:$n,QuickInputButtonLocation:Pm,QuickInputButtons:Wc,Range:we,RelativePattern:Ho,Selection:zi,SelectionRange:Pc,SemanticTokens:_o,SemanticTokensBuilder:BD,SemanticTokensEdit:_6,SemanticTokensEdits:Gh,SemanticTokensLegend:Dm,ShellExecution:kn,ShellQuoting:wm,SignatureHelp:am,SignatureHelpTriggerKind:cm,SignatureInformation:om,SnippetString:bn,SourceBreakpoint:In,StandardTokenType:As,StatusBarAlignment:Is,SymbolInformation:Sc,SymbolKind:Je,SymbolTag:$c,Task:Mh,TaskGroup:Lc,TaskPanelKind:vm,TaskRevealKind:mm,TaskScope:Cs,TerminalLink:PD,TerminalQuickFixTerminalCommand:TD,TerminalQuickFixOpener:AD,TerminalLocation:pm,TerminalProfile:RD,TerminalExitReason:fm,TerminalShellExecutionCommandLineConfidence:Fh,TerminalCompletionItem:LD,TerminalCompletionItemKind:gm,TerminalCompletionList:ND,TerminalShellType:or,TextDocumentSaveReason:Ro,TextEdit:Ss,SnippetTextEdit:rm,TextEditorCursorStyle:ri,TextEditorChangeKind:No,TextEditorLineNumbersStyle:Kr,TextEditorRevealType:Th,TextEditorSelectionChangeKind:Lo,SyntaxTokenType:Fo,TextDocumentChangeReason:Rc,ThemeColor:Fc,ThemeIcon:Xt,TreeItem:Oh,TreeItemCheckboxState:yi,TreeItemCollapsibleState:Sn,TypeHierarchyItem:Om,UIKind:Oa,Uri:y,ViewColumn:Tc,WorkspaceEdit:wn,DocumentPasteTriggerKind:xm,DocumentDropEdit:Em,DocumentDropOrPasteEditKind:Ds,DocumentPasteEdit:OD,InlayHint:Ph,InlayHintLabelPart:Dh,InlayHintKind:lm,RemoteAuthorityResolverError:Co,ResolvedAuthority:CD,ManagedResolvedAuthority:yh,SourceControlInputBoxValidationType:dm,ExtensionRuntime:td,TimelineItem:Rm,NotebookRange:Vi,NotebookCellKind:Pn,NotebookCellExecutionState:Wo,NotebookCellData:Xh,NotebookData:z6,NotebookRendererScript:V6,NotebookCellStatusBarAlignment:Zh,NotebookEditorRevealType:Kh,NotebookCellOutput:Yh,NotebookCellOutputItem:W6,CellErrorStackFrame:zD,NotebookCellStatusBarItem:WD,NotebookControllerAffinity:Tm,NotebookControllerAffinity2:ed,NotebookEdit:Eh,NotebookKernelSourceAction:VD,NotebookVariablesRequestKind:qc,PortAttributes:GD,LinkedEditingRanges:qD,TestResultState:Lm,TestRunRequest:rd,TestMessage:id,TestMessageStackFrame:QD,TestTag:Gc,TestRunProfileKind:qo,TextSearchCompleteMessageType:Xd,DataTransfer:Nc,DataTransferItem:Uh,TestCoverageCount:sd,FileCoverage:od,StatementCoverage:G6,BranchCoverage:Q6,DeclarationCoverage:J6,WorkspaceTrustState:Fm,LanguageStatusSeverity:Po,QuickPickItemKind:Vc,InputBoxValidationSeverity:zo,TabInputText:Um,TabInputTextDiff:ad,TabInputTextMerge:X6,TabInputCustom:Hm,TabInputNotebook:jm,TabInputNotebookDiff:Bm,TabInputWebview:Y6,TabInputTerminal:Z6,TabInputInteractiveWindow:K6,TabInputChat:e7,TabInputTextMultiDiff:t7,TelemetryTrustedValue:_1,LogLevel:Re,EditSessionIdentityMatch:Kv,InteractiveSessionVoteDirection:_m,ChatCopyKind:zm,ChatEditingSessionActionOutcome:An,InteractiveEditorResponseFeedbackKind:Vm,DebugStackFrame:j6,DebugThread:B6,RelatedInformationType:Xm,SpeechToTextStatus:Ym,TextToSpeechStatus:Zm,PartialAcceptTriggerKind:En,KeywordRecognitionStatus:Km,ChatResponseMarkdownPart:cd,ChatResponseFileTreePart:ud,ChatResponseAnchorPart:Yc,ChatResponseProgressPart:Zc,ChatResponseProgressPart2:hd,ChatResponseReferencePart:qi,ChatResponseReferencePart2:qi,ChatResponseCodeCitationPart:pd,ChatResponseCodeblockUriPart:fd,ChatResponseWarningPart:Kc,ChatResponseTextEditPart:el,ChatResponseMarkdownWithVulnerabilitiesPart:Jc,ChatResponseCommandButtonPart:dd,ChatResponseDetectedParticipantPart:Xc,ChatResponseConfirmationPart:ld,ChatResponseMovePart:gd,ChatResponseReferencePartStatusKind:qm,ChatRequestTurn:r7,ChatResponseTurn:i7,ChatLocation:Lr,ChatRequestEditorData:s7,ChatRequestNotebookData:n7,ChatReferenceBinaryData:o7,LanguageModelChatMessageRole:Hr,LanguageModelChatMessage:a7,LanguageModelToolResultPart:Gm,LanguageModelTextPart:ar,LanguageModelToolCallPart:tl,LanguageModelError:Ei,LanguageModelToolResult:Qm,LanguageModelChatToolMode:Jm,LanguageModelPromptTsxPart:Go,NewSymbolName:HD,NewSymbolNameTag:$m,NewSymbolNameTriggerKind:Hc,InlineEdit:XD,InlineEditTriggerKind:rl,ExcludeSettingOptions:Ji,TextSearchContext2:R1,TextSearchMatch2:Ms,TextSearchCompleteMessageTypeNew:Xd}}}var jf,F0=class{constructor(t,r,i,s,n,o,a){this.c=t,this.d=r,this.e=i,this.f=s,this.g=n,this.h=o,this.i=a,this.a=new Map,this.b=[]}async install(){this.j(),er("code/extHost/willWaitForConfig");const t=await this.f.getConfigProvider();er("code/extHost/didWaitForConfig");const r=await this.g.getExtensionPathIndex();this.register(new IF(this.c,r,this.d,t,this.i)),this.register(this.e.createInstance(M0)),this.h.remote.isRemote&&this.register(this.e.createInstance(O0,r,this.h.environment.appUriScheme))}register(t){if("nodeModuleName"in t)if(Array.isArray(t.nodeModuleName))for(const r of t.nodeModuleName)this.a.set(r,t);else this.a.set(t.nodeModuleName,t);typeof t.alternativeModuleName=="function"&&this.b.push(r=>t.alternativeModuleName(r))}};F0=__decorate([__param(2,$u),__param(3,Yi),__param(4,Hs),__param(5,jt),__param(6,He)],F0);var M0=class{static{jf=this}static{this.a=new Map([["vscode-ripgrep","@vscode/ripgrep"],["vscode-windows-registry","@vscode/windows-registry"]])}constructor(t){if(t.environment.appRoot&&jf.a.size){const r=Ks(this.c(t.environment.appRoot.fsPath)),i="[a-z0-9_.-]",s=`@${i}+\\/${i}+|${i}+`,n="node_modules|node_modules\\.asar(?:\\.unpacked)?";this.b=new RegExp(`^(${r}/${n}\\/)(${s})(.*)$`,"i")}}alternativeModuleName(t){if(!this.b)return;const r=this.b.exec(this.c(t));if(!r)return;const[,i,s,n]=r,o=jf.a.get(s);if(o!==void 0)return console.warn(`${s} as been renamed to ${o}, please update your imports`),i+o+n}c(t){return t.replace(/\\/g,"/")}};M0=jf=__decorate([__param(0,jt)],M0);var IF=class{constructor(e,t,r,i,s){this.c=e,this.d=t,this.e=r,this.f=i,this.g=s,this.nodeModuleName="vscode",this.a=new Oi}load(e,t){const r=this.d.findSubstr(t);if(r){let i=this.a.get(r.identifier);return i||(i=this.c(r,this.e,this.f),this.a.set(r.identifier,i)),i}if(!this.b){let i="";this.d.forEach((s,n)=>i+=`	${n} -> ${s.identifier.value}
`),this.g.warn(`Could not identify extension for 'vscode' require call from ${t}. These are the extension path mappings: 
${i}`),this.b=this.c(TP,this.e,this.f)}return this.b}},O0=class{constructor(t,r,i){this.e=t,this.f=r,this.nodeModuleName=["open","opn"],this.d=i.getProxy(z.MainThreadTelemetry);const s=i.getProxy(z.MainThreadWindow);this.c=(n,o)=>{const a=y.parse(n);return o?this.g(n,o):a.scheme==="http"||a.scheme==="https"?s.$openUri(a,n,{allowTunneling:!0}):a.scheme==="mailto"||a.scheme===this.f?s.$openUri(a,n,{}):this.g(n,o)}}load(t,r,i){const s=this.e.findSubstr(r);return s&&(this.a=s.identifier.value,this.h()),this.b=i(t),this.c}g(t,r){return this.i(),this.b(t,r)}h(){this.a&&this.d.$publicLog2("shimming.open",{extension:this.a})}i(){this.a&&this.d.$publicLog2("shimming.open.call.noForward",{extension:this.a})}};O0=__decorate([__param(2,Me)],O0);var U0=class{constructor(t,r){this.a=t.getProxy(z.MainThreadConsole),this.b=r.consoleForward.includeStack,this.c=r.consoleForward.logNative,this.d("info","log"),this.d("log","log"),this.d("warn","warn"),this.d("debug","debug"),this.d("error","error")}d(t,r){const i=this,s=console[t];Object.defineProperty(console,t,{set:()=>{},get:()=>function(){i.e(t,r,s,arguments)}})}e(t,r,i,s){this.a.$logExtensionHostMessage({type:"__$console",severity:r,arguments:DF(s,this.b)}),this.c&&this.f(t,i,s)}};U0=__decorate([__param(0,Me),__param(1,jt)],U0);var CF=1e5;function DF(e,t){const r=[];if(e.length)for(let i=0;i<e.length;i++){let s=e[i];if(typeof s>"u")s="undefined";else if(s instanceof Error){const n=s;n.stack?s=n.stack:s=n.toString()}r.push(s)}if(t){const i=new Error().stack;i&&r.push({__$stack:i.split(`
`).slice(3).join(`
`)})}try{const i=gI(r);return i.length>CF?"Output omitted for a large object that exceeds the limits":i}catch(i){return`Output omitted for an object that cannot be inspected ('${i.toString()}')`}}var H0=class extends U0{constructor(t,r){super(t,r)}f(t,r,i){r.apply(console,i)}};H0=__decorate([__param(0,Me),__param(1,jt)],H0);var PF=class extends F0{j(){}getModule(e,t){for(const r of this.b){const i=r(e);if(i){e=i;break}}if(this.a.has(e))return this.a.get(e).load(e,t,()=>{throw new Error("CANNOT LOAD MODULE from here.")})}},AF=class extends xv{constructor(){super(...arguments),this.extensionRuntime=td.Webworker}async vb(){this.h.createInstance(H0);const e=this.h.invokeFunction(SF);this.r=this.h.createInstance(PF,e,{mine:this.J,all:this.L}),await this.r.install(),performance.mark("code/extHost/didInitAPI"),await this.Bb()}wb(e){return e.browser}async xb(e,t,r){t=t.with({path:TF(t.path,".js")});const i=e?.identifier.value;i&&performance.mark(`code/extHost/willFetchExtensionCode/${i}`);const s=y.revive(await this.C.$asBrowserUri(t)),n=await fetch(s.toString(!0));if(i&&performance.mark(`code/extHost/didFetchExtensionCode/${i}`),n.status!==200)throw new Error(n.statusText);const o=await n.text(),a=`${t.toString(!0)}#vscode-extension`,c=`${o}
//# sourceURL=${a}`;let l;try{l=new Function("module","exports","require",c)}catch(f){throw console.error(i?`Loading code for extension ${i} failed: ${f.message}`:`Loading code failed: ${f.message}`),console.error(`${t.toString(!0)}${typeof f.line=="number"?` line ${f.line}`:""}${typeof f.column=="number"?` column ${f.column}`:""}`),console.error(f),f}e&&await this.w.initializeLocalizedMessages(e);const u={},h={exports:u},p=f=>{const m=this.r.getModule(f,t);if(m===void 0)throw new Error(`Cannot load module '${f}'`);return m};try{return r.codeLoadingStart(),i&&performance.mark(`code/extHost/willLoadExtensionCode/${i}`),l(h,u,p),h.exports!==u?h.exports:u}finally{i&&performance.mark(`code/extHost/didLoadExtensionCode/${i}`),r.codeLoadingStop()}}async $setRemoteEnvironment(e){}async Bb(e=5e3){if(!this.f.environment.isExtensionDevelopmentDebug)return;const t=Date.now()+e;for(;Date.now()<t&&!("__jsDebugIsReady"in globalThis);)await gi(10)}};function TF(e,t){return e.endsWith(t)?e:e+t}Ge(He,new Hi(Yv,[!0],!0)),Ge(Hs,AF,0),Ge(G1,Q1,0);var bx=self.close.bind(self);self.close=()=>console.trace("'close' has been blocked");var yx=postMessage.bind(self);self.postMessage=()=>console.trace("'postMessage' has been blocked");function Ex(e){return/^(file|vscode-remote):/i.test(e)}var xx=fetch.bind(self);function RF(e){self.fetch=async function(t,r){return t instanceof Request||Ex(String(t))&&(t=(await e(y.parse(String(t)))).toString(!0)),xx(t,r)},self.XMLHttpRequest=class extends XMLHttpRequest{open(t,r,i,s,n){(async()=>(Ex(r.toString())&&(r=(await e(y.parse(r.toString()))).toString(!0)),super.open(t,r,i??!0,s,n)))()}}}if(self.importScripts=()=>{throw new Error("'importScripts' has been blocked")},self.addEventListener=()=>console.trace("'addEventListener' has been blocked"),self.AMDLoader=void 0,self.NLSLoaderPlugin=void 0,self.define=void 0,self.require=void 0,self.webkitRequestFileSystem=void 0,self.webkitRequestFileSystemSync=void 0,self.webkitResolveLocalFileSystemSyncURL=void 0,self.webkitResolveLocalFileSystemURL=void 0,self.Worker){const e=self.Worker;Worker=function(t,r){if(/^file:/i.test(t.toString()))t=aS.uriToBrowserUri(y.parse(t.toString())).toString(!0);else if(/^vscode-remote:/i.test(t.toString()))throw new Error("Creating workers from remote extensions is currently not supported.");const s=`(${function(c){function l(p){return typeof p=="string"||p instanceof URL?String(p).replace(/^file:\/\//i,"vscode-file://vscode-app"):p}const u=fetch.bind(self);self.fetch=function(p,f){return p instanceof Request?u(p,f):u(l(p),f)},self.XMLHttpRequest=class extends XMLHttpRequest{open(p,f,m,w,E){return super.open(p,l(f),m??!0,w,E)}};const h=importScripts.bind(self);self.importScripts=(...p)=>{h(...p.map(l))},h(c)}.toString()}('${t}'))`;r=r||{},r.name=`${name} -> ${r.name||br(t.toString())}`;const n=new Blob([s],{type:"application/javascript"}),o=URL.createObjectURL(n);return new e(o,r)}}else self.Worker=class extends DA{constructor(e,t){super(yx,e,{name:br(e.toString()),...t})}};var LF=new class{constructor(){this.pid=void 0}exit(e){bx()}},NF=class{constructor(){const e=new MessageChannel,t=new D;let r=!1;yx(e.port2,[e.port2]),e.port1.onmessage=i=>{const{data:s}=i;if(!(s instanceof ArrayBuffer)){console.warn("UNKNOWN data received",s);return}const n=ke.wrap(new Uint8Array(s,0,s.byteLength));if(Vk(n,2)){r=!0,kx("received terminate message from renderer");return}t.fire(n)},this.protocol={onMessage:t.event,send:i=>{if(!r){const s=i.buffer.buffer.slice(i.buffer.byteOffset,i.buffer.byteOffset+i.buffer.byteLength);e.port1.postMessage(s,[s])}}}}};function FF(e){return new Promise(t=>{const r=e.onMessage(i=>{r.dispose();const s=JSON.parse(i.toString());e.send(Aw(0)),t({protocol:e,initData:s})});e.send(Aw(1))})}var kx=e=>bx();function MF(e){return!!e&&typeof e=="object"&&e.type==="vscode.init"&&e.data instanceof Map}function OF(){er("code/extHost/willConnectToRenderer");const e=new NF;return{onmessage(t){MF(t)&&FF(e.protocol).then(r=>{er("code/extHost/didWaitForInitData");const i=new IA(r.protocol,r.initData,LF,null,t.data);RF(s=>i.asBrowserUri(s)),kx=s=>i.terminate(s)})}}}var UF=OF();self.onmessage=e=>UF.onmessage(e.data);

//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/e54c774e0add60467559eb0d1e229c6452cf8447/core/vs/workbench/api/worker/extensionHostWorkerMain.js.map
